try{let a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},b=(new a.Error).stack;b&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[b]="adb71cb1-153c-4033-82bb-b9a55b8b99e5",a._sentryDebugIdIdentifier="sentry-dbid-adb71cb1-153c-4033-82bb-b9a55b8b99e5")}catch(a){}"use strict";exports.id=3084,exports.ids=[3084],exports.modules={5998:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E7:()=>m,Kq:()=>p,R4:()=>n,checkAnthropicAuthStatus:()=>o});var e=c(944);c(7004);var f=c(74688),g=c(13234),h=c(55511),i=c.n(h),j=c(36676),k=a([g]);g=(k.then?(await k)():k)[0];let q=null;async function l(){return q||(q=(await (0,f.S)()).anthropic),q}async function m(){try{let a=await l(),b=function(){let a=i().randomBytes(32).toString("base64url"),b=i().createHash("sha256").update(a).digest("base64url");return{verifier:a,challenge:b}}(),c=i().randomBytes(32).toString("base64url"),d=new URL(a.authorizeUrl);d.searchParams.set("code","true"),d.searchParams.set("client_id",a.clientId),d.searchParams.set("response_type","code"),d.searchParams.set("redirect_uri",a.redirectUri),d.searchParams.set("scope",a.scopes.join(" ")),d.searchParams.set("state",c),d.searchParams.set("code_challenge",b.challenge),d.searchParams.set("code_challenge_method","S256");let e={verifier:b.verifier,state:c,timestamp:Date.now()};return g.Hv.upsert({key:"anthropic-oauth-data",value:JSON.stringify(e)}),{success:!0,authUrl:d.toString(),verifier:b.verifier,state:c}}catch(a){return console.error("Error starting OAuth flow:",a),{success:!1,error:"Failed to start OAuth flow"}}}async function n(a){if(!a)return{success:!1,error:"Missing authorization code"};try{let b,c=await l(),[d,e]=a.includes("#")?a.split("#"):[a,null],f=g.Hv.get("anthropic-oauth-data");if(!f)return{success:!1,error:"OAuth session not found. Please start the authentication process again."};try{b=JSON.parse(f)}catch(a){return{success:!1,error:"Invalid OAuth session data"}}if(Date.now()-b.timestamp>6e5)return g.Hv.delete("anthropic-oauth-data"),{success:!1,error:"OAuth session expired. Please try again."};let h={grant_type:"authorization_code",code:d,redirect_uri:c.redirectUri,client_id:c.clientId,code_verifier:b.verifier,state:e||b.state},i=await fetch(c.tokenUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!i.ok){let a=await i.text();throw Error(`Token exchange failed: ${a}`)}let j=await i.json(),k=await fetch(c.apiKeyUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j.access_token}`},body:JSON.stringify({})});if(!k.ok){let a=await k.text();throw Error(`API key creation failed: ${a}`)}let m=await k.json();return g.FI.upsert({provider:"Anthropic",apikey:m.raw_key,google_Oauth:JSON.stringify({type:"oauth_generated",key_id:m.id,key_name:m.name,created_at:m.created_at,partial_key_hint:m.partial_key_hint})}),g.Hv.delete("anthropic-oauth-data"),{success:!0,apiKey:m.raw_key,keyName:m.name}}catch(a){return console.error("Error in OAuth callback:",a),g.Hv.delete("anthropic-oauth-data"),{success:!1,error:a.message||"Failed to complete OAuth flow"}}}async function o(){try{let a=g.FI.getByProvider("Anthropic");if(!a?.apikey)return{authenticated:!1};let b=null;if(a.google_Oauth)try{b=JSON.parse(a.google_Oauth)}catch{}return{authenticated:!0,isOAuthGenerated:b?.type==="oauth_generated",keyName:b?.key_name,keyHint:b?.partial_key_hint}}catch(a){return console.error("Error checking auth status:",a),{authenticated:!1}}}async function p(){try{let a=g.FI.getByProvider("Anthropic");if(a?.google_Oauth)try{let b=JSON.parse(a.google_Oauth);"oauth_generated"===b.type&&g.FI.upsert({provider:"Anthropic",apikey:"",google_Oauth:""})}catch{}return{success:!0}}catch(a){return console.error("Error during logout:",a),{success:!1,error:"Failed to logout"}}}(0,j.D)([m,n,o,p]),(0,e.A)(m,"00948724e8a95dfc24e8d7117dd457eaa9651d723f",null),(0,e.A)(n,"40b8e6286f6cc14a5cdc8780d964d6c3e099b1fefd",null),(0,e.A)(o,"0034589f1d2c92edff2f19ec9e5169b8c3565c0b42",null),(0,e.A)(p,"005b2ec189c601d30b3df1adc4360f25a60dd8dbd1",null),d()}catch(a){d(a)}})},6088:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>h});var e=c(43084),f=c(3999),g=a([e]);e=(g.then?(await g)():g)[0];let h={context:{secrets:{delete:async a=>await f.A.delete(`${await (0,e.bm)()}/secret/${a}`),store:async(a,b)=>await f.A.post(`${await (0,e.bm)()}/secrets`,{key:a,value:b})},globalState:{update:async(a,b)=>await f.A.post(`${await (0,e.bm)()}/globalState`,{key:a,value:b})}},window:{showErrorMessage:async a=>await f.A.post(`${await (0,e.bm)()}/showErrorMessage`,{message:a}),showWarningMessage:async a=>await f.A.post(`${await (0,e.bm)()}/showWarningMessage`,{message:a}),showInformationMessage:async a=>await f.A.post(`${await (0,e.bm)()}/showInformationMessage`,{message:a})},commands:{executeCommand:async a=>await f.A.post(`${await (0,e.bm)()}/executeCommand`,{command:a})},workspace:{getConfiguration:()=>({update:async(a,b)=>await f.A.post(`${await (0,e.bm)()}/config`,{key:a,value:b})})},newFileWithCode:async a=>await f.A.post(`${await (0,e.bm)()}/newFileWithCode`,{code:a}),insertCode:async a=>await f.A.post(`${await (0,e.bm)()}/insertCode`,{code:a}),getSelectedText:async()=>(await f.A.get(`${await (0,e.bm)()}/getSelectedText`)).data,getLanguage:async()=>{let a=await f.A.get(`${await (0,e.bm)()}/language`);return a.data.includes("react")?"jsx":a.data},getFileName:async()=>(await f.A.get(`${await (0,e.bm)()}/filename`)).data,getIdeLanguage:async()=>(await f.A.get(`${await (0,e.bm)()}/ideLanguage`)).data,getVersion:async()=>(await f.A.get(`${await (0,e.bm)()}/version`)).data};d()}catch(a){d(a)}})},33295:(a,b,c)=>{c.d(b,{G:()=>q});var d=c(55511),e=c.n(d),f=c(29021),g=c(5230),h=c(81630),i=c(91645),j=c(21820),k=c(33873),l=c.n(k),m=c(79551),n=c(74688);let o=null,p="https://developers.google.com/gemini-code-assist/auth_failure_gemini";class q{constructor(){this.clientInitialized=!1,this.client=new g.OAuth2Client}async ensureOAuthConfig(){o||(o=(await (0,n.S)()).gemini),this.clientInitialized||(this.client=new g.OAuth2Client(o.clientId,o.clientSecret,"http://localhost"),this.client.on("tokens",async a=>{await this.cacheCredentials(a)}),this.clientInitialized=!0)}getCodeGPTCredentialPath(){return l().join(j.homedir(),".codegpt","gemini-oauth.json")}async cacheCredentials(a){let b=this.getCodeGPTCredentialPath();await f.promises.mkdir(l().dirname(b),{recursive:!0});let c=JSON.stringify(a,null,2);await f.promises.writeFile(b,c)}async loadCachedCredentials(){await this.ensureOAuthConfig();try{let a=this.getCodeGPTCredentialPath(),b=await f.promises.readFile(a,"utf-8");this.client.setCredentials(JSON.parse(b));let{token:c}=await this.client.getAccessToken();if(!c)return!1;return await this.client.getTokenInfo(c),!0}catch{return!1}}async clearCachedCredentials(){try{await f.promises.rm(this.getCodeGPTCredentialPath(),{force:!0})}catch{}}getAvailablePort(){return new Promise((a,b)=>{let c=0;try{let d=i.createServer();d.listen(0,()=>{c=d.address().port}),d.on("listening",()=>{d.close(),d.unref()}),d.on("error",a=>b(a)),d.on("close",()=>a(c))}catch(a){b(a)}})}async fetchUserInfo(){try{let{token:a}=await this.client.getAccessToken();if(!a)return{};let b=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${a}`}});if(!b.ok)return console.error("Failed to fetch user info:",b.status,b.statusText),{};return await b.json()}catch(a){return console.error("Error retrieving user info:",a),{}}}async authWithWeb(){await this.ensureOAuthConfig();let a=await this.getAvailablePort(),b=`http://localhost:${a}/oauth2callback`,c=e().randomBytes(32).toString("hex");return{authUrl:this.client.generateAuthUrl({client_id:o.clientId,redirect_uri:b,access_type:"offline",scope:o.scopes,state:c}),loginCompletePromise:new Promise((d,e)=>{let f=h.createServer(async(g,h)=>{try{g.url.includes("/oauth2callback")||(h.writeHead(301,{Location:p}),h.end(),e(Error("Unexpected request: "+g.url)));let f=new m.URL(g.url,`http://localhost:${a}`).searchParams;if(f.get("error"))h.writeHead(301,{Location:p}),h.end(),e(Error(`Error during authentication: ${f.get("error")}`));else if(f.get("state")!==c)h.end("State mismatch. Possible CSRF attack"),e(Error("State mismatch. Possible CSRF attack"));else if(f.get("code")){let{tokens:a}=await this.client.getToken({code:f.get("code"),redirect_uri:b});this.client.setCredentials(a),await this.cacheCredentials(a),this.fetchUserInfo().catch(()=>{}),h.writeHead(301,{Location:"https://developers.google.com/gemini-code-assist/auth_success_gemini"}),h.end(),d()}else e(Error("No code found in request"))}catch(a){e(a)}finally{f.close()}});f.listen(a)})}}async getAuthenticatedClient(){return await this.loadCachedCredentials()?this.client:null}async isAuthenticated(){return await this.loadCachedCredentials()}}},43084:(a,b,c)=>{c.a(a,async(a,d)=>{try{let o;c.d(b,{AX:()=>y,BN:()=>Z,Bj:()=>D,CA:()=>ai,CG:()=>av,CZ:()=>r,Ct:()=>G,DH:()=>an,Dk:()=>p,Hu:()=>v,I3:()=>al,IO:()=>ao,JP:()=>U,Jw:()=>t,MP:()=>C,RK:()=>am,S_:()=>aa,So:()=>ac,TG:()=>B,Tq:()=>X,UU:()=>_,Vn:()=>aw,WP:()=>O,Ww:()=>W,XQ:()=>ak,Yp:()=>ax,Z_:()=>at,_P:()=>R,_R:()=>ar,_S:()=>I,_X:()=>aq,_f:()=>u,aM:()=>K,bm:()=>ag,fm:()=>ae,gn:()=>M,gv:()=>$,hq:()=>E,iJ:()=>L,iR:()=>aj,ju:()=>ah,lG:()=>Y,le:()=>A,li:()=>au,m_:()=>F,o0:()=>af,pc:()=>Q,pe:()=>N,ph:()=>ad,s_:()=>w,t2:()=>ab,vE:()=>T,vK:()=>q,vR:()=>J,vV:()=>V,vk:()=>z,wt:()=>x,x6:()=>s,yH:()=>H,zU:()=>P});var e=c(944);c(7004);var f=c(13234),g=c(39040),h=c(6088),i=c(3999),j=c(54777),k=c(31921),l=c(31421),m=c(36676),n=a([f,h]);[f,h]=n.then?(await n)():n;let p=async a=>{i.A.post(`${await ag()}/copy`,{code:a})},q=async()=>{try{let a=await fetch(`${await ag()}/paste`);return await a.text()}catch(a){return console.error("Error pasting text:",a),""}},r=async a=>{i.A.post(`${await ag()}/openUrl`,{url:a})},s=async a=>i.A.post(`${await ag()}/openWebviewUrl`,{url:a}).then(a=>a.data),t=async a=>i.A.post(`${await ag()}/insertCode`,{code:a}).then(a=>a.data),u=async a=>i.A.post(`${await ag()}/insertCodeInTerminal`,{code:a}).then(a=>a.data),v=async(a,b)=>i.A.post(`${await ag()}/config`,{key:a,value:b}).then(a=>a.data),w=async(a,b)=>{f.FI.upsert({provider:b,organization_id:a})},x=async(a,b)=>{let c=f.FI.getByProvider(b),d=!c||!c.apikey;return f.FI.upsert({provider:b,apikey:a}),{isFirstConnection:d}},y=async(a,b)=>{let c=f.FI.getByProvider(b),d=!c||!c.custom_link;return f.FI.upsert({provider:b,custom_link:a}),{isFirstConnection:d}},z=async a=>{let b=f.FI.getByProvider("Google AI Studio"),c=!b||!b.google_Oauth;return f.FI.upsert({provider:"Google AI Studio",google_Oauth:a}),{ok:!0,error:"",isFirstConnection:c}},A=async(a,b)=>{f.$W.upsert({provider:b,max_tokens:Number(a)})},B=async(a,b)=>{f.$W.upsert({provider:b,temperature:Number(a)})},C=async(a,b)=>{f.$W.upsert({provider:b,memory:Number(a)})},D=async(a,b)=>{f.FI.upsert({provider:b,region:a})},E=async(a,b)=>{f.FI.upsert({provider:b,access_key_id:a})},F=async(a,b)=>{f.FI.upsert({provider:b,secret_access_key:a})},G=async(a,b)=>{f.FI.upsert({provider:b,session_token:a})},H=async a=>i.A.post(`${await ag()}/changeIframeUrl`,{url:a}).then(a=>a.data),I=async a=>(f.DV.upsert({enabled:+!!a}),i.A.post(`${await ag()}/autocompleteEnabled`,{value:+!!a}).then(a=>a.data)),J=async a=>{f.DV.upsert({max_tokens:Number(a)})},K=async a=>{let[b,c]=a.split(" - ");f.DV.upsert({model:c,provider:b})},L=async a=>{f.DV.upsert({delay:Number(a)})},M=async()=>i.A.get(`${await ag()}/cleanCache`).then(a=>a.data),N=async()=>({selectedCode:await i.A.get(`${await ag()}/getSelectedText/full`).then(a=>a.data)}),O=async()=>await h.A.getFileName(),P=async()=>{let a=await new Promise(a=>{(0,l.exec)("ollama ls",b=>{a(!b)})});if(a)return!0;try{let b=await fetch("http://localhost:54112/1/api/ollama/tags");a=200===b.status}catch(b){console.error("Error checking Ollama status:",b),a=!1}return a},Q=async()=>await i.A.get(`${await ag()}/getProjectStructure`).then(a=>a.data),R=async(a,b,c)=>{let d=new URLSearchParams({...a?{filePath:a}:{},...b?{from:b.toString()}:{},...c?{to:c.toString()}:{}});return await i.A.get(`${await ag()}/getFileContent?${d.toString()}`).then(a=>a.data)},S=new Map,T=async()=>{let a=await ag();if(S.has(a))return i.A.get(`${a}/getAllPathsFromProject`).then(b=>{S.set(a,b.data)}).catch(()=>{S.set(a,[])}),S.get(a);let b=await i.A.get(`${a}/getAllPathsFromProject`).then(a=>a.data).catch(()=>[]);return S.set(a,b),b},U=async({filePath:a,content:b})=>await i.A.post(`${await ag()}/writeFileContent`,{filePath:a,content:b}).then(a=>a.data),V=async({folderPath:a})=>await i.A.post(`${await ag()}/createFolder`,{folderPath:a}).then(a=>a.data),W=async({filePath:a})=>{console.log("[deleteFile] Attempting to delete file:",a);try{return(await i.A.post(`${await ag()}/deleteFile`,{filePath:a})).data}catch(b){return b.response?.data?.error||`Failed to delete file: ${a}`}},X=async({filePath:a,absolutePath:b=!1,startLine:c,endLine:d})=>await i.A.post(`${await ag()}/openFile`,{filePath:a,startLine:c,endLine:d,absolutePath:b}).then(a=>a.data),Y=async a=>{let b=await T()||[];return b.length?new j.A(b).search(a,{limit:6}):[]},Z=async()=>{let a=await T()||[];if(!a.length)return[];let b=new Set;for(let c of a){let a=c?.split("/"),d=a?.length>1?a?.pop():c,e=d?.split(".")??[],f=e?.length>1&&e?.pop();f&&b.add(f)}return Array.from(b)},$=async()=>await i.A.get(`${await ag()}/extensionVersion`).then(a=>!1===a.data.ok?(console.error("Error in getExtensionVersion:",a.data.error),null):a.data),_=async({model:a,fromMarketplace:b,graph:c,provider:d})=>{console.log({model:a,fromMarketplace:b,provider:d,graph:c}),await i.A.post(`${await ag()}/model`,{model:a,fromMarketplace:b,provider:d,graph:c})},aa=async a=>(f.mf.upsert({enabled:+!!a}),await i.A.post(`${await ag()}/autoSelect`,{enabled:a}).then(a=>a.data)),ab=async()=>await i.A.get(`${await ag()}/autoSelect`).then(a=>a.data),ac=async a=>{let b=f.$W.getByProvider(a);return b?.memory??10},ad=async(a,b)=>{f.Hv.upsert({key:a,value:b})},ae=async a=>f.Hv.get(a),af=async()=>f.jM.get(),ag=async()=>{let a=await ah();return a.includes("?")&&(a=a.split("?")[0]),console.log({extensionUrl:`http://localhost:${a}`}),`http://localhost:${a}`},ah=async()=>{let a=(await (0,k.b3)()).get("referer");return a&&a.split("/")[3]||"54113"},ai=async()=>{try{let a=await fetch(`${await ag()}/workspaceFolder`);return await a.text()}catch(a){return console.error("Error getting workspace folder:",a),""}},aj=async()=>{try{let a=await ai(),{ok:b}=JSON.parse(a);return!1!==b}catch{return!0}},ak=async({type:a,currentKey:b})=>{let c=f.Hv.getAll().filter(c=>c.key.startsWith(`${a}-`)&&!c.key.startsWith(`${a}-${b}`));c?.forEach(a=>f.Hv.delete(a.key))},al=async()=>{["mention-prompts-all","recommended-codegpt-models-all","agent-default-all","extension-version-all","funnel-all","marketplace-agents-all","marketplace-groups-all","providers-all"].forEach(a=>f.Hv.delete(a))},am=async()=>{if(o)return o;let a=await (0,g.zf)();return o=a.json,a.json},an=async()=>{try{let a=await ah().catch(()=>"54113"),b=await fetch(`http://localhost:${a}/api/codegptplusbeta/me`);if(!b.ok)throw Error(`HTTP error! status: ${b.status}`);let c=await b.json();if(c?.planId==="prod_S3MhTzkaqqx3CG"){let a=await aq();if(a&&a.length>0)return{id:a[0].id,label:a[0].name,image:"",fromMarketplace:!0,description:a[0].name};return null}}catch(a){console.error("Error checking for byok plan:",a)}return await am()},ao=async()=>(await (0,g.GT)()).json,ap="favoritesModels",aq=async()=>await ae(ap)||[],ar=async a=>await ad(ap,a),as="cachedCredits",at=async()=>await ae(as)||null,au=async a=>{await ad(as,{balanceUsd:a,updatedAt:Date.now()})},av=async a=>{let b=f.FI.getByProvider(a);return b?.apikey},aw=async a=>{fetch(`${await ag()}/chatLog`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a})}).catch(a=>{console.log({e:a})})},ax=async()=>{let{checkGeminiAuthStatus:a}=await Promise.resolve().then(c.bind(c,49091)),{checkClaudeCodeAuthStatus:b}=await Promise.resolve().then(c.bind(c,80346)),{checkAnthropicAuthStatus:d}=await Promise.resolve().then(c.bind(c,5998)),e=f.FI.getAll(),g=[];for(let a of e)(a.apikey||a.google_Oauth||a.access_key_id||a.secret_access_key)&&g.push(a.provider);try{let[c,e,f]=await Promise.all([a(),b(),d()]);c.authenticated&&!g.includes("gemini-cli")&&g.push("gemini-cli"),e.authenticated&&!g.includes("claudecode")&&g.push("claudecode"),f.authenticated&&f.isOAuthGenerated&&!g.includes("anthropic")&&g.push("anthropic")}catch(a){console.error("Error checking OAuth status:",a)}return{hasCredentials:g.length>0,providers:g}};(0,m.D)([p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,H,I,J,K,L,N,O,P,Q,R,Y,T,U,Z,$,G,_,M,X,aa,ab,ac,ad,ae,ag,ah,al,ai,aj,ak,am,an,ao,af,aw,aq,ar,at,au,av,ax,V,W]),(0,e.A)(p,"7fe50372c385183e089528e562d6ec79e73736e83e",null),(0,e.A)(q,"7f665d13a7f45a5199ea0dcf2a0c07217efd365952",null),(0,e.A)(r,"7f0eb7e08567040e123981941b7622a945afd301ac",null),(0,e.A)(s,"7f64a6808436e0b8b611f7604f7857310b3dff1a33",null),(0,e.A)(t,"7f8afbcb9e392ff446d9e771201365597bd6b26c52",null),(0,e.A)(u,"7fa8140a6a5d3f1bfa7042c8941eed7af8439c446d",null),(0,e.A)(v,"7f43aba9d483155e0ad20ccb5531c132a673fab62b",null),(0,e.A)(w,"7f76a6fb9f4915a42e617a80a89cccffd73d2136aa",null),(0,e.A)(x,"7fa21df10624c07ab46ce6579fa6f605408dd0f41f",null),(0,e.A)(y,"7ffe586dbf65b4c299749ddb04b194455dfecfd32f",null),(0,e.A)(z,"7fa3acb68a81943614e9efd0a8dee9335a66e22435",null),(0,e.A)(A,"7f183d9a264ec72d09779d1c2e99b8c9954c39ea41",null),(0,e.A)(B,"7f2bfb2871bed06d56b9a2d972855b04a04459ced7",null),(0,e.A)(C,"7f0e3a0a48f840160081fefde0484e7f6887aae71a",null),(0,e.A)(D,"7fa90cc5cafe987e8c9e133c7d3615c20f66668f71",null),(0,e.A)(E,"7f82add85ad1a3df7deca5ae0d22d19232508a0aee",null),(0,e.A)(F,"7f8ca92a751b6acd41b01fd044f1a0d186401dd02d",null),(0,e.A)(H,"7f5274364d6eca0a522a48ab057dc7b9d39ed39077",null),(0,e.A)(I,"7f084835d49997b5c29e9620f5eb958bf34cf02ab4",null),(0,e.A)(J,"7fa4fd00e813f942be5d4cd3d1fd5b0d8c99212f81",null),(0,e.A)(K,"7f666dd24828624a04d116dc5559019910fcf97a9e",null),(0,e.A)(L,"7f947bf7fef3b8622e480a4f223045c744e717852f",null),(0,e.A)(N,"7f1b7fa859bdf8fe8591cdc332b1a6b396e1db1e08",null),(0,e.A)(O,"7ff699ad3539da41142dddf0f6779ac3bd0def8e27",null),(0,e.A)(P,"7fd84ab43ae4b320ce07cae5e52688d5b5a4ba858a",null),(0,e.A)(Q,"7f56427a42c6766af558ac7e624b6fa31e7841ed68",null),(0,e.A)(R,"7fdb7bed8327c62516773058587d3be630d23dd16a",null),(0,e.A)(Y,"7f8560df730cc063d52ab34cfc44e26d0427b602c7",null),(0,e.A)(T,"7fbdbc80d788a3aa429f9c13092a6a3853dba047b3",null),(0,e.A)(U,"7f748974eef238b257c55b3a3137fe0da02063f031",null),(0,e.A)(Z,"7fe04a25a2dc831d5df7f9cd662ced378e4e27e325",null),(0,e.A)($,"7fd47c9526e2c6d9c25a7f88337a7cee0bce67c93e",null),(0,e.A)(G,"7fa5487b09e390c75b4354fa3b0ce2b645be131f8c",null),(0,e.A)(_,"7f546cc46b250a21751276880f91ba8b25e9aa4e91",null),(0,e.A)(M,"7fe6155be1d7ae6670b51506541b20023f2da8e574",null),(0,e.A)(X,"7fc6ccd797d64d30e31ccbc2cd7d26b2517a046823",null),(0,e.A)(aa,"7f807c3efdddf54362e84f291c97738bae25bbc50f",null),(0,e.A)(ab,"7f6c3ca904f1c1393de880ffbaed77570437e701c6",null),(0,e.A)(ac,"7f09648041ecb0430c42cbc749346475a525fd2fde",null),(0,e.A)(ad,"7f1358c89bedecaa95b8e955f23bb7414c892259b1",null),(0,e.A)(ae,"7f2de477e72e2c61a1b7733099fecf341dea3d8ef4",null),(0,e.A)(ag,"7f5364fe516a28d543f2b1a09ef09d9c8465d2ef67",null),(0,e.A)(ah,"7f727ec0d8e902e37153ca2489bf13fd1036cd40ba",null),(0,e.A)(al,"7f36548ece268a277b9fb34fd0fd2cf01a258fe534",null),(0,e.A)(ai,"7f619cd429c1e210dfb653227d83d7577a07a22e1b",null),(0,e.A)(aj,"7f48fd159bf40975d7bc0f59b3c9f843edd6d1dc98",null),(0,e.A)(ak,"7f7227fe9402c3f6b7d905fe5745a596b759177585",null),(0,e.A)(am,"7fc4f503e419a4955a2a1069d1f27e6289f7f9459f",null),(0,e.A)(an,"7fbb6ebaac77356de461c52de30eb3c5c5d1c6ad83",null),(0,e.A)(ao,"7ff13fad020713272943059defb2575db5c94aef36",null),(0,e.A)(af,"7f869be42d9020112eb9b393461ebd2601548b461c",null),(0,e.A)(aw,"7f26daf24a35073cb7569ebe2f0cbb793a892c55e5",null),(0,e.A)(aq,"7f5523e34494e6e86309d06ad8627b74d50e2ff977",null),(0,e.A)(ar,"7f4b6239be3aa7c965898ec4f1457281c10c919365",null),(0,e.A)(at,"7f23585f8cec888040d6fba2a9b0cae6eedcad69cf",null),(0,e.A)(au,"7f0d41fbcdf7518e09631144b14bb8b301e7fecbf7",null),(0,e.A)(av,"7f181e7886a63e44af39593a7dbc5008b17da87d46",null),(0,e.A)(ax,"7f47427d7bb594561234d530735236a1c839dd6f85",null),(0,e.A)(V,"7f27c7bb1631d31d5c47725618444728aa80f4e7ff",null),(0,e.A)(W,"7fa192ec39e8f6c86d971cd50352054adebf9839fb",null),d()}catch(a){d(a)}})},49091:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{Y:()=>l,checkGeminiAuthStatus:()=>j,w:()=>k});var e=c(944);c(7004);var f=c(33295),g=c(13234),h=c(36676),i=a([g]);g=(i.then?(await i)():i)[0];let m=new Map;async function j(){try{let a=new f.G;return{authenticated:await a.isAuthenticated()}}catch(a){return{authenticated:!1}}}async function k(){try{let a=new f.G;if(await a.isAuthenticated())return{success:!0,message:"Already authenticated"};let{authUrl:b,loginCompletePromise:c}=await a.authWithWeb();return m.set(b,c),setTimeout(()=>{m.delete(b)},3e5),{success:!0,authUrl:b,message:"Open the URL in your browser to authenticate"}}catch(a){return{success:!1,error:a.message}}}async function l(){try{let a=new f.G;return await a.clearCachedCredentials(),g.FI.delete("Gemini CLI"),{success:!0,message:"Credentials cleared successfully"}}catch(a){return{success:!1,error:a.message}}}(0,h.D)([j,k,l]),(0,e.A)(j,"0039a1e3ec94903f5077a271cdc32b6c2192503e65",null),(0,e.A)(k,"00cf4af6b7e1f535bfe7ecd2c6a6aa78f002b326e6",null),(0,e.A)(l,"000dfd53c4721cf168a183b555463cdab51ffc4ed1",null),d()}catch(a){d(a)}})},74688:(a,b,c)=>{c.d(b,{S:()=>f});let d=null,e=null;async function f(){if(d)return d;if(e)return e;e=g();try{return d=await e}finally{e=null}}async function g(){try{let a=await fetch("https://storage.codegpt.co/vscode/keys.json",{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(1e4)});if(!a.ok)throw Error(`Failed to fetch OAuth config: ${a.status} ${a.statusText}`);let b=await a.json();return function(a){if(!a.gemini?.clientId||!a.gemini?.clientSecret)throw Error("Invalid OAuth config: missing Gemini credentials");if(!a.anthropic?.clientId)throw Error("Invalid OAuth config: missing Anthropic credentials");if(!a.claude?.clientId)throw Error("Invalid OAuth config: missing Claude credentials")}(b),b}catch(a){throw console.error("Failed to load OAuth configuration:",a),Error("Failed to load OAuth configuration from remote source")}}},80346:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{CW:()=>o,Py:()=>n,QX:()=>r,checkClaudeCodeAuthStatus:()=>p,eI:()=>q,rQ:()=>s});var e=c(944);c(7004);var f=c(43084),g=c(74688),h=c(13234),i=c(55511),j=c.n(i),k=c(36676),l=a([f,h]);[f,h]=l.then?(await l)():l;let t=null;async function m(){return t||(t=(await (0,g.S)()).claude),t}async function n(){try{let a=await m(),b=function(){let a=j().randomBytes(32).toString("base64url"),b=j().createHash("sha256").update(a).digest("base64url");return{verifier:a,challenge:b}}(),c=new URL(a.authorizeUrl);return c.searchParams.set("code","true"),c.searchParams.set("client_id",a.clientId),c.searchParams.set("response_type","code"),c.searchParams.set("redirect_uri",a.redirectUri),c.searchParams.set("scope","org:create_api_key user:profile user:inference"),c.searchParams.set("code_challenge",b.challenge),c.searchParams.set("code_challenge_method","S256"),c.searchParams.set("state",b.verifier),{success:!0,authUrl:c.toString(),verifier:b.verifier}}catch(a){return console.error("Error starting OAuth flow:",a),{success:!1,error:"Failed to start OAuth flow"}}}async function o(a,b){if(!a||!b)return{success:!1,error:"Missing code or verifier"};try{let c=await m(),d=a.split("#"),e=await fetch(c.tokenUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:d[0],state:d[1]||b,grant_type:"authorization_code",client_id:c.clientId,redirect_uri:c.redirectUri,code_verifier:b})});if(!e.ok){let a=await e.text();throw Error(`Failed to exchange code: ${a}`)}let f=await e.json(),g={type:"oauth",refresh:f.refresh_token,access:f.access_token,expires:Date.now()+1e3*f.expires_in};return h.FI.upsert({provider:"ClaudeCode",apikey:"",google_Oauth:JSON.stringify(g)}),{success:!0}}catch(a){return console.error("Error in OAuth callback:",a),{success:!1,error:a.message||"Failed to complete OAuth flow"}}}async function p(){try{let a=h.FI.getByProvider("ClaudeCode");if(!a?.google_Oauth)return{authenticated:!1};try{let b=JSON.parse(a.google_Oauth),c=b.expires&&b.expires>Date.now();return{authenticated:!0,tokenValid:c,expiresAt:b.expires}}catch(a){return console.error("Error parsing OAuth data:",a),{authenticated:!1}}}catch(a){return console.error("Error checking OAuth status:",a),{authenticated:!1}}}async function q(){try{return h.FI.delete("ClaudeCode"),{success:!0}}catch(a){return console.error("Error during logout:",a),{success:!1,error:"Failed to logout"}}}async function r(a){try{let b=await m(),c=await fetch(b.tokenUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"refresh_token",refresh_token:a.refresh,client_id:b.clientId})});if(!c.ok){let a=await c.text();throw(0,f.Vn)(JSON.stringify({refreshClaudeCodeTokenError:a},null,2)),Error(`Failed to refresh token: ${a}`)}let d=await c.json(),e={type:"oauth",refresh:d.refresh_token,access:d.access_token,expires:Date.now()+1e3*d.expires_in};return h.FI.upsert({provider:"ClaudeCode",apikey:"",google_Oauth:JSON.stringify(e)}),e}catch(a){return console.error("Error refreshing token:",a),null}}async function s(){let a=h.FI.getByProvider("ClaudeCode");if(!a?.google_Oauth)return null;try{let b=JSON.parse(a.google_Oauth);if(b.expires&&b.expires>Date.now())return b.access;if(b.refresh){let a=await r(b);if(a)return a.access}}catch(a){console.error("Error parsing OAuth data:",a)}return null}(0,k.D)([n,o,p,q,r,s]),(0,e.A)(n,"0003d7f45df6b0b2c347e50905a79d29b926511e1e",null),(0,e.A)(o,"608b321802ac55e003d268dc05a63910422c87ef53",null),(0,e.A)(p,"00f231cf88b395ee3f4c50240213ddbdcc5723fc65",null),(0,e.A)(q,"00a7100f947beb90bd3082dbd5c930d5716643ac07",null),(0,e.A)(r,"40b005237a307bf39bfc65d86e1ff31ae9b009bdf9",null),(0,e.A)(s,"0095dfe489c3eaad7529f40a37395096a069b66e3b",null),d()}catch(a){d(a)}})}};
//# sourceMappingURL=3084.js.map