"use strict";var Mi=Object.defineProperty;var im=Object.getOwnPropertyDescriptor;var am=Object.getOwnPropertyNames;var sm=Object.prototype.hasOwnProperty;var o=(t,e)=>Mi(t,"name",{value:e,configurable:!0});var Oi=(t,e)=>()=>(t&&(e=t(t=0)),e);var T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),wi=(t,e)=>{for(var n in e)Mi(t,n,{get:e[n],enumerable:!0})},om=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of am(e))!sm.call(t,i)&&i!==n&&Mi(t,i,{get:()=>e[i],enumerable:!(r=im(e,i))||r.enumerable});return t};var z=t=>om(Mi({},"__esModule",{value:!0}),t);var Li={};wi(Li,{TextDocument:()=>fo});function ho(t,e){if(t.length<=1)return t;let n=t.length/2|0,r=t.slice(0,n),i=t.slice(n);ho(r,e),ho(i,e);let a=0,s=0,c=0;for(;a<r.length&&s<i.length;)e(r[a],i[s])<=0?t[c++]=r[a++]:t[c++]=i[s++];for(;a<r.length;)t[c++]=r[a++];for(;s<i.length;)t[c++]=i[s++];return t}function rd(t,e,n=0){let r=e?[n]:[];for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);id(a)&&(a===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function id(t){return t===13||t===10}function ad(t){let e=t.start,n=t.end;return e.line>n.line||e.line===n.line&&e.character>n.character?{start:n,end:e}:t}function cm(t){let e=ad(t.range);return e!==t.range?{newText:t.newText,range:e}:t}var xi,fo,Fi=Oi(()=>{"use strict";xi=class t{static{o(this,"FullTextDocument")}constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){for(let r of e)if(t.isIncremental(r)){let i=ad(r.range),a=this.offsetAt(i.start),s=this.offsetAt(i.end);this._content=this._content.substring(0,a)+r.text+this._content.substring(s,this._content.length);let c=Math.max(i.start.line,0),u=Math.max(i.end.line,0),l=this._lineOffsets,f=rd(r.text,!1,a);if(u-c===f.length)for(let m=0,d=f.length;m<d;m++)l[m+c+1]=f[m];else f.length<1e4?l.splice(c+1,u-c,...f):this._lineOffsets=l=l.slice(0,c+1).concat(f,l.slice(u+1));let g=r.text.length-(s-a);if(g!==0)for(let m=c+1+f.length,d=l.length;m<d;m++)l[m]=l[m]+g}else if(t.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=rd(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){let s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}let a=r-1;return e=this.ensureBeforeEOL(e,n[a]),{line:a,character:e-n[a]}}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let r=n[e.line];if(e.character<=0)return r;let i=e.line+1<n.length?n[e.line+1]:this._content.length,a=Math.min(r+e.character,i);return this.ensureBeforeEOL(a,r)}ensureBeforeEOL(e,n){for(;e>n&&id(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}};(function(t){function e(i,a,s,c){return new xi(i,a,s,c)}o(e,"create"),t.create=e;function n(i,a,s){if(i instanceof xi)return i.update(a,s),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}o(n,"update"),t.update=n;function r(i,a){let s=i.getText(),c=ho(a.map(cm),(f,g)=>{let m=f.range.start.line-g.range.start.line;return m===0?f.range.start.character-g.range.start.character:m}),u=0,l=[];for(let f of c){let g=i.offsetAt(f.range.start);if(g<u)throw new Error("Overlapping edit");g>u&&l.push(s.substring(u,g)),f.newText.length&&l.push(f.newText),u=i.offsetAt(f.range.end)}return l.push(s.substr(u)),l.join("")}o(r,"applyEdits"),t.applyEdits=r})(fo||(fo={}));o(ho,"mergeSort");o(rd,"computeLineOffsets");o(id,"isEOL");o(ad,"getWellformedRange");o(cm,"getWellformedEdit")});var qi=T(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.thenable=Oe.typedArray=Oe.stringArray=Oe.array=Oe.func=Oe.error=Oe.number=Oe.string=Oe.boolean=void 0;function um(t){return t===!0||t===!1}o(um,"boolean");Oe.boolean=um;function sd(t){return typeof t=="string"||t instanceof String}o(sd,"string");Oe.string=sd;function lm(t){return typeof t=="number"||t instanceof Number}o(lm,"number");Oe.number=lm;function gm(t){return t instanceof Error}o(gm,"error");Oe.error=gm;function od(t){return typeof t=="function"}o(od,"func");Oe.func=od;function cd(t){return Array.isArray(t)}o(cd,"array");Oe.array=cd;function dm(t){return cd(t)&&t.every(e=>sd(e))}o(dm,"stringArray");Oe.stringArray=dm;function fm(t,e){return Array.isArray(t)&&t.every(e)}o(fm,"typedArray");Oe.typedArray=fm;function hm(t){return t&&od(t.then)}o(hm,"thenable");Oe.thenable=hm});var zt=T(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});var mo;function po(){if(mo===void 0)throw new Error("No runtime abstraction layer installed");return mo}o(po,"RAL");(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");mo=n}o(e,"install"),t.install=e})(po||(po={}));vo.default=po});var Ro=T(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.Disposable=void 0;var mm;(function(t){function e(n){return{dispose:n}}o(e,"create"),t.create=e})(mm=Mr.Disposable||(Mr.Disposable={}))});var ud=T(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.AbstractMessageBuffer=void 0;var pm=13,vm=10,Rm=`\r
`,_o=class{static{o(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];for(r=0;r<u.length;){switch(u[r]){case pm:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case vm:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}i+=u.byteLength,n++}if(e!==4)return;let a=this._read(i+r),s=new Map,c=this.toString(a,"ascii").split(Rm);if(c.length<2)return s;for(let u=0;u<c.length-2;u++){let l=c[u],f=l.indexOf(":");if(f===-1)throw new Error("Message header must separate key and value using :");let g=l.substr(0,f),m=l.substr(f+1).trim();s.set(g,m)}return s}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let a=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(a)}if(this._chunks[0].byteLength>e){let a=this._chunks[0],s=this.asNative(a,e);return this._chunks[0]=a.slice(e),this._totalLength-=e,s}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let a=this._chunks[i];if(a.byteLength>e){let s=a.slice(0,e);n.set(s,r),r+=e,this._chunks[i]=a.slice(e),this._totalLength-=e,e-=e}else n.set(a,r),r+=a.byteLength,this._chunks.shift(),this._totalLength-=a.byteLength,e-=a.byteLength}return n}};Hi.AbstractMessageBuffer=_o});var dd=T(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});var _m=zt(),ld=require("util"),Tn=Ro(),bm=ud(),Ui=class t extends bm.AbstractMessageBuffer{static{o(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new ld.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};Ui.emptyBuffer=Buffer.allocUnsafe(0);var bo=class{static{o(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Tn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Tn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Tn.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Tn.Disposable.create(()=>this.stream.off("data",e))}},yo=class{static{o(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Tn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Tn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Tn.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let a=o(s=>{s==null?r():i(s)},"callback");typeof e=="string"?this.stream.write(e,n,a):this.stream.write(e,a)})}end(){this.stream.end()}},gd=Object.freeze({messageBuffer:Object.freeze({create:o(t=>new Ui(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:o((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:o((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new ld.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}},"decode")})}),stream:Object.freeze({asReadableStream:o(t=>new bo(t),"asReadableStream"),asWritableStream:o(t=>new yo(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:o(()=>clearTimeout(r),"dispose")}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:o(()=>clearImmediate(n),"dispose")}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:o(()=>clearInterval(r),"dispose")}}})});function Do(){return gd}o(Do,"RIL");(function(t){function e(){_m.default.install(gd)}o(e,"install"),t.install=e})(Do||(Do={}));ko.default=Do});var Zn=T(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.stringArray=Je.array=Je.func=Je.error=Je.number=Je.string=Je.boolean=void 0;function ym(t){return t===!0||t===!1}o(ym,"boolean");Je.boolean=ym;function fd(t){return typeof t=="string"||t instanceof String}o(fd,"string");Je.string=fd;function Dm(t){return typeof t=="number"||t instanceof Number}o(Dm,"number");Je.number=Dm;function km(t){return t instanceof Error}o(km,"error");Je.error=km;function Sm(t){return typeof t=="function"}o(Sm,"func");Je.func=Sm;function hd(t){return Array.isArray(t)}o(hd,"array");Je.array=hd;function Am(t){return hd(t)&&t.every(e=>fd(e))}o(Am,"stringArray");Je.stringArray=Am});var $o=T(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.Message=H.NotificationType9=H.NotificationType8=H.NotificationType7=H.NotificationType6=H.NotificationType5=H.NotificationType4=H.NotificationType3=H.NotificationType2=H.NotificationType1=H.NotificationType0=H.NotificationType=H.RequestType9=H.RequestType8=H.RequestType7=H.RequestType6=H.RequestType5=H.RequestType4=H.RequestType3=H.RequestType2=H.RequestType1=H.RequestType=H.RequestType0=H.AbstractMessageSignature=H.ParameterStructures=H.ResponseError=H.ErrorCodes=void 0;var En=Zn(),md;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(md=H.ErrorCodes||(H.ErrorCodes={}));var So=class t extends Error{static{o(this,"ResponseError")}constructor(e,n,r){super(n),this.code=En.number(e)?e:md.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};H.ResponseError=So;var ot=class t{static{o(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};H.ParameterStructures=ot;ot.auto=new ot("auto");ot.byPosition=new ot("byPosition");ot.byName=new ot("byName");var _e=class{static{o(this,"AbstractMessageSignature")}constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return ot.auto}};H.AbstractMessageSignature=_e;var Ao=class extends _e{static{o(this,"RequestType0")}constructor(e){super(e,0)}};H.RequestType0=Ao;var To=class extends _e{static{o(this,"RequestType")}constructor(e,n=ot.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};H.RequestType=To;var Eo=class extends _e{static{o(this,"RequestType1")}constructor(e,n=ot.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};H.RequestType1=Eo;var Co=class extends _e{static{o(this,"RequestType2")}constructor(e){super(e,2)}};H.RequestType2=Co;var Po=class extends _e{static{o(this,"RequestType3")}constructor(e){super(e,3)}};H.RequestType3=Po;var Io=class extends _e{static{o(this,"RequestType4")}constructor(e){super(e,4)}};H.RequestType4=Io;var No=class extends _e{static{o(this,"RequestType5")}constructor(e){super(e,5)}};H.RequestType5=No;var Mo=class extends _e{static{o(this,"RequestType6")}constructor(e){super(e,6)}};H.RequestType6=Mo;var Oo=class extends _e{static{o(this,"RequestType7")}constructor(e){super(e,7)}};H.RequestType7=Oo;var wo=class extends _e{static{o(this,"RequestType8")}constructor(e){super(e,8)}};H.RequestType8=wo;var xo=class extends _e{static{o(this,"RequestType9")}constructor(e){super(e,9)}};H.RequestType9=xo;var Lo=class extends _e{static{o(this,"NotificationType")}constructor(e,n=ot.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};H.NotificationType=Lo;var Fo=class extends _e{static{o(this,"NotificationType0")}constructor(e){super(e,0)}};H.NotificationType0=Fo;var qo=class extends _e{static{o(this,"NotificationType1")}constructor(e,n=ot.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};H.NotificationType1=qo;var Ho=class extends _e{static{o(this,"NotificationType2")}constructor(e){super(e,2)}};H.NotificationType2=Ho;var Uo=class extends _e{static{o(this,"NotificationType3")}constructor(e){super(e,3)}};H.NotificationType3=Uo;var jo=class extends _e{static{o(this,"NotificationType4")}constructor(e){super(e,4)}};H.NotificationType4=jo;var Vo=class extends _e{static{o(this,"NotificationType5")}constructor(e){super(e,5)}};H.NotificationType5=Vo;var Wo=class extends _e{static{o(this,"NotificationType6")}constructor(e){super(e,6)}};H.NotificationType6=Wo;var Go=class extends _e{static{o(this,"NotificationType7")}constructor(e){super(e,7)}};H.NotificationType7=Go;var Bo=class extends _e{static{o(this,"NotificationType8")}constructor(e){super(e,8)}};H.NotificationType8=Bo;var Ko=class extends _e{static{o(this,"NotificationType9")}constructor(e){super(e,9)}};H.NotificationType9=Ko;var Tm;(function(t){function e(i){let a=i;return a&&En.string(a.method)&&(En.string(a.id)||En.number(a.id))}o(e,"isRequest"),t.isRequest=e;function n(i){let a=i;return a&&En.string(a.method)&&i.id===void 0}o(n,"isNotification"),t.isNotification=n;function r(i){let a=i;return a&&(a.result!==void 0||!!a.error)&&(En.string(a.id)||En.number(a.id)||a.id===null)}o(r,"isResponse"),t.isResponse=r})(Tm=H.Message||(H.Message={}))});var zo=T(Jt=>{"use strict";var pd;Object.defineProperty(Jt,"__esModule",{value:!0});Jt.LRUCache=Jt.LinkedMap=Jt.Touch=void 0;var Ze;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Ze=Jt.Touch||(Jt.Touch={}));var ji=class{static{o(this,"LinkedMap")}constructor(){this[pd]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=Ze.None){let r=this._map.get(e);if(r)return n!==Ze.None&&this.touch(r,n),r.value}set(e,n,r=Ze.None){let i=this._map.get(e);if(i)i.value=n,r!==Ze.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Ze.None:this.addItemLast(i);break;case Ze.First:this.addItemFirst(i);break;case Ze.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:o(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:o(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:o(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}[(pd=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Ze.First&&n!==Ze.Last)){if(n===Ze.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Ze.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};Jt.LinkedMap=ji;var Yo=class extends ji{static{o(this,"LRUCache")}constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Ze.AsNew){return super.get(e,n)}peek(e){return super.get(e,Ze.None)}set(e,n){return super.set(e,n,Ze.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Jt.LRUCache=Yo});var er=T(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.Emitter=Cn.Event=void 0;var Em=zt(),Cm;(function(t){let e={dispose(){}};t.None=function(){return e}})(Cm=Cn.Event||(Cn.Event={}));var Jo=class{static{o(this,"CallbackList")}add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:o(()=>this.remove(e,n),"dispose")})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,a=this._callbacks.length;i<a;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let a=0,s=r.length;a<s;a++)try{n.push(r[a].apply(i[a],e))}catch(c){(0,Em.default)().console.error(c)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Vi=class t{static{o(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new Jo),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:o(()=>{this._callbacks&&(this._callbacks.remove(e,n),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Cn.Emitter=Vi;Vi._noop=function(){}});var ec=T(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.CancellationTokenSource=Pn.CancellationToken=void 0;var Pm=zt(),Im=Zn(),Qo=er(),Xo;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Qo.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Qo.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||Im.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}o(e,"is"),t.is=e})(Xo=Pn.CancellationToken||(Pn.CancellationToken={}));var Nm=Object.freeze(function(t,e){let n=(0,Pm.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),Wi=class{static{o(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Nm:(this._emitter||(this._emitter=new Qo.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Zo=class{static{o(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new Wi),this._token}cancel(){this._token?this._token.cancel():this._token=Xo.Cancelled}dispose(){this._token?this._token instanceof Wi&&this._token.dispose():this._token=Xo.None}};Pn.CancellationTokenSource=Zo});var vd=T(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.ReadableStreamMessageReader=Qt.AbstractMessageReader=Qt.MessageReader=void 0;var nc=zt(),tr=Zn(),tc=er(),Mm;(function(t){function e(n){let r=n;return r&&tr.func(r.listen)&&tr.func(r.dispose)&&tr.func(r.onError)&&tr.func(r.onClose)&&tr.func(r.onPartialMessage)}o(e,"is"),t.is=e})(Mm=Qt.MessageReader||(Qt.MessageReader={}));var Gi=class{static{o(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new tc.Emitter,this.closeEmitter=new tc.Emitter,this.partialMessageEmitter=new tc.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${tr.string(e.message)?e.message:"unknown"}`)}};Qt.AbstractMessageReader=Gi;var rc;(function(t){function e(n){let r,i,a,s=new Map,c,u=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(a=n.contentDecoder,s.set(a.name,a)),n.contentDecoders!==void 0)for(let l of n.contentDecoders)s.set(l.name,l);if(n.contentTypeDecoder!==void 0&&(c=n.contentTypeDecoder,u.set(c.name,c)),n.contentTypeDecoders!==void 0)for(let l of n.contentTypeDecoders)u.set(l.name,l)}return c===void 0&&(c=(0,nc.default)().applicationJson.decoder,u.set(c.name,c)),{charset:r,contentDecoder:a,contentDecoders:s,contentTypeDecoder:c,contentTypeDecoders:u}}o(e,"fromOptions"),t.fromOptions=e})(rc||(rc={}));var ic=class extends Gi{static{o(this,"ReadableStreamMessageReader")}constructor(e,n){super(),this.readable=e,this.options=rc.fromOptions(n),this.buffer=(0,nc.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let a=i.get("Content-Length");if(!a)throw new Error("Header must provide a Content-Length property.");let s=parseInt(a);if(isNaN(s))throw new Error("Content-Length value must be a number.");this.nextMessageLength=s}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(n):r=Promise.resolve(n),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(a=>{this.callback(a)},a=>{this.fireError(a)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,nc.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Qt.ReadableStreamMessageReader=ic});var Rd=T(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.Semaphore=void 0;var Om=zt(),ac=class{static{o(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Om.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};Bi.Semaphore=ac});var Dd=T(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.WriteableStreamMessageWriter=Xt.AbstractMessageWriter=Xt.MessageWriter=void 0;var _d=zt(),Or=Zn(),wm=Rd(),bd=er(),xm="Content-Length: ",yd=`\r
`,Lm;(function(t){function e(n){let r=n;return r&&Or.func(r.dispose)&&Or.func(r.onClose)&&Or.func(r.onError)&&Or.func(r.write)}o(e,"is"),t.is=e})(Lm=Xt.MessageWriter||(Xt.MessageWriter={}));var Ki=class{static{o(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new bd.Emitter,this.closeEmitter=new bd.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Or.string(e.message)?e.message:"unknown"}`)}};Xt.AbstractMessageWriter=Ki;var sc;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,_d.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,_d.default)().applicationJson.encoder}}o(e,"fromOptions"),t.fromOptions=e})(sc||(sc={}));var oc=class extends Ki{static{o(this,"WriteableStreamMessageWriter")}constructor(e,n){super(),this.writable=e,this.options=sc.fromOptions(n),this.errorCount=0,this.writeSemaphore=new wm.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(xm,r.byteLength.toString(),yd),i.push(yd),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};Xt.WriteableStreamMessageWriter=oc});var Cd=T(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.createMessageConnection=W.ConnectionOptions=W.CancellationStrategy=W.CancellationSenderStrategy=W.CancellationReceiverStrategy=W.ConnectionStrategy=W.ConnectionError=W.ConnectionErrors=W.LogTraceNotification=W.SetTraceNotification=W.TraceFormat=W.TraceValues=W.Trace=W.NullLogger=W.ProgressType=W.ProgressToken=void 0;var kd=zt(),Le=Zn(),G=$o(),Sd=zo(),wr=er(),cc=ec(),Lr;(function(t){t.type=new G.NotificationType("$/cancelRequest")})(Lr||(Lr={}));var Ad;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}o(e,"is"),t.is=e})(Ad=W.ProgressToken||(W.ProgressToken={}));var xr;(function(t){t.type=new G.NotificationType("$/progress")})(xr||(xr={}));var uc=class{static{o(this,"ProgressType")}constructor(){}};W.ProgressType=uc;var lc;(function(t){function e(n){return Le.func(n)}o(e,"is"),t.is=e})(lc||(lc={}));W.NullLogger=Object.freeze({error:o(()=>{},"error"),warn:o(()=>{},"warn"),info:o(()=>{},"info"),log:o(()=>{},"log")});var ue;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(ue=W.Trace||(W.Trace={}));var Fm;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Fm=W.TraceValues||(W.TraceValues={}));(function(t){function e(r){if(!Le.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}o(e,"fromString"),t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}o(n,"toString"),t.toString=n})(ue=W.Trace||(W.Trace={}));var At;(function(t){t.Text="text",t.JSON="json"})(At=W.TraceFormat||(W.TraceFormat={}));(function(t){function e(n){return Le.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}o(e,"fromString"),t.fromString=e})(At=W.TraceFormat||(W.TraceFormat={}));var Td;(function(t){t.type=new G.NotificationType("$/setTrace")})(Td=W.SetTraceNotification||(W.SetTraceNotification={}));var gc;(function(t){t.type=new G.NotificationType("$/logTrace")})(gc=W.LogTraceNotification||(W.LogTraceNotification={}));var $i;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})($i=W.ConnectionErrors||(W.ConnectionErrors={}));var nr=class t extends Error{static{o(this,"ConnectionError")}constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,t.prototype)}};W.ConnectionError=nr;var Ed;(function(t){function e(n){let r=n;return r&&Le.func(r.cancelUndispatched)}o(e,"is"),t.is=e})(Ed=W.ConnectionStrategy||(W.ConnectionStrategy={}));var dc;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new cc.CancellationTokenSource}});function e(n){let r=n;return r&&Le.func(r.createCancellationTokenSource)}o(e,"is"),t.is=e})(dc=W.CancellationReceiverStrategy||(W.CancellationReceiverStrategy={}));var fc;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Lr.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&Le.func(r.sendCancellation)&&Le.func(r.cleanup)}o(e,"is"),t.is=e})(fc=W.CancellationSenderStrategy||(W.CancellationSenderStrategy={}));var hc;(function(t){t.Message=Object.freeze({receiver:dc.Message,sender:fc.Message});function e(n){let r=n;return r&&dc.is(r.receiver)&&fc.is(r.sender)}o(e,"is"),t.is=e})(hc=W.CancellationStrategy||(W.CancellationStrategy={}));var qm;(function(t){function e(n){let r=n;return r&&(hc.is(r.cancellationStrategy)||Ed.is(r.connectionStrategy))}o(e,"is"),t.is=e})(qm=W.ConnectionOptions||(W.ConnectionOptions={}));var Tt;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Tt||(Tt={}));function Hm(t,e,n,r){let i=n!==void 0?n:W.NullLogger,a=0,s=0,c=0,u="2.0",l,f=new Map,g,m=new Map,d=new Map,p,v=new Sd.LinkedMap,S=new Map,k=new Set,b=new Map,_=ue.Off,A=At.Text,w,V=Tt.New,B=new wr.Emitter,te=new wr.Emitter,X=new wr.Emitter,ae=new wr.Emitter,ne=new wr.Emitter,de=r&&r.cancellationStrategy?r.cancellationStrategy:hc.Message;function ke(R){if(R===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+R.toString()}o(ke,"createRequestQueueKey");function se(R){return R===null?"res-unknown-"+(++c).toString():"res-"+R.toString()}o(se,"createResponseQueueKey");function L(){return"not-"+(++s).toString()}o(L,"createNotificationQueueKey");function x(R,C){G.Message.isRequest(C)?R.set(ke(C.id),C):G.Message.isResponse(C)?R.set(se(C.id),C):R.set(L(),C)}o(x,"addMessageToQueue");function M(R){}o(M,"cancelUndispatched");function j(){return V===Tt.Listening}o(j,"isListening");function Y(){return V===Tt.Closed}o(Y,"isClosed");function Se(){return V===Tt.Disposed}o(Se,"isDisposed");function oe(){(V===Tt.New||V===Tt.Listening)&&(V=Tt.Closed,te.fire(void 0))}o(oe,"closeHandler");function fe(R){B.fire([R,void 0,void 0])}o(fe,"readErrorHandler");function ze(R){B.fire(R)}o(ze,"writeErrorHandler"),t.onClose(oe),t.onError(fe),e.onClose(oe),e.onError(ze);function it(){p||v.size===0||(p=(0,kd.default)().timer.setImmediate(()=>{p=void 0,at()}))}o(it,"triggerMessageQueue");function at(){if(v.size===0)return;let R=v.shift();try{G.Message.isRequest(R)?lt(R):G.Message.isNotification(R)?Me(R):G.Message.isResponse(R)?xt(R):st(R)}finally{it()}}o(at,"processMessageQueue");let St=o(R=>{try{if(G.Message.isNotification(R)&&R.method===Lr.type.method){let C=R.params.id,N=ke(C),q=v.get(N);if(G.Message.isRequest(q)){let ce=r?.connectionStrategy,Re=ce&&ce.cancelUndispatched?ce.cancelUndispatched(q,M):void 0;if(Re&&(Re.error!==void 0||Re.result!==void 0)){v.delete(N),b.delete(C),Re.id=q.id,Lt(Re,R.method,Date.now()),e.write(Re).catch(()=>i.error("Sending response for canceled message failed."));return}}let le=b.get(C);if(le!==void 0){le.cancel(),Kt(R);return}else k.add(C)}x(v,R)}finally{it()}},"callback");function lt(R){if(Se())return;function C(J,he,ee){let Ae={jsonrpc:u,id:R.id};J instanceof G.ResponseError?Ae.error=J.toJson():Ae.result=J===void 0?null:J,Lt(Ae,he,ee),e.write(Ae).catch(()=>i.error("Sending response failed."))}o(C,"reply");function N(J,he,ee){let Ae={jsonrpc:u,id:R.id,error:J.toJson()};Lt(Ae,he,ee),e.write(Ae).catch(()=>i.error("Sending response failed."))}o(N,"replyError");function q(J,he,ee){J===void 0&&(J=null);let Ae={jsonrpc:u,id:R.id,result:J};Lt(Ae,he,ee),e.write(Ae).catch(()=>i.error("Sending response failed."))}o(q,"replySuccess"),zn(R);let le=f.get(R.method),ce,Re;le&&(ce=le.type,Re=le.handler);let Ce=Date.now();if(Re||l){let J=R.id??String(Date.now()),he=de.receiver.createCancellationTokenSource(J);R.id!==null&&k.has(R.id)&&he.cancel(),R.id!==null&&b.set(J,he);try{let ee;if(Re)if(R.params===void 0){if(ce!==void 0&&ce.numberOfParams!==0){N(new G.ResponseError(G.ErrorCodes.InvalidParams,`Request ${R.method} defines ${ce.numberOfParams} params but received none.`),R.method,Ce);return}ee=Re(he.token)}else if(Array.isArray(R.params)){if(ce!==void 0&&ce.parameterStructures===G.ParameterStructures.byName){N(new G.ResponseError(G.ErrorCodes.InvalidParams,`Request ${R.method} defines parameters by name but received parameters by position`),R.method,Ce);return}ee=Re(...R.params,he.token)}else{if(ce!==void 0&&ce.parameterStructures===G.ParameterStructures.byPosition){N(new G.ResponseError(G.ErrorCodes.InvalidParams,`Request ${R.method} defines parameters by position but received parameters by name`),R.method,Ce);return}ee=Re(R.params,he.token)}else l&&(ee=l(R.method,R.params,he.token));let Ae=ee;ee?Ae.then?Ae.then(Ve=>{b.delete(J),C(Ve,R.method,Ce)},Ve=>{b.delete(J),Ve instanceof G.ResponseError?N(Ve,R.method,Ce):Ve&&Le.string(Ve.message)?N(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${R.method} failed with message: ${Ve.message}`),R.method,Ce):N(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${R.method} failed unexpectedly without providing any details.`),R.method,Ce)}):(b.delete(J),C(ee,R.method,Ce)):(b.delete(J),q(ee,R.method,Ce))}catch(ee){b.delete(J),ee instanceof G.ResponseError?C(ee,R.method,Ce):ee&&Le.string(ee.message)?N(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${R.method} failed with message: ${ee.message}`),R.method,Ce):N(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${R.method} failed unexpectedly without providing any details.`),R.method,Ce)}}else N(new G.ResponseError(G.ErrorCodes.MethodNotFound,`Unhandled method ${R.method}`),R.method,Ce)}o(lt,"handleRequest");function xt(R){if(!Se())if(R.id===null)R.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(R.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let C=R.id,N=S.get(C);if(Jn(R,N),N!==void 0){S.delete(C);try{if(R.error){let q=R.error;N.reject(new G.ResponseError(q.code,q.message,q.data))}else if(R.result!==void 0)N.resolve(R.result);else throw new Error("Should never happen.")}catch(q){q.message?i.error(`Response handler '${N.method}' failed with message: ${q.message}`):i.error(`Response handler '${N.method}' failed unexpectedly.`)}}}}o(xt,"handleResponse");function Me(R){if(Se())return;let C,N;if(R.method===Lr.type.method){let q=R.params.id;k.delete(q),Kt(R);return}else{let q=m.get(R.method);q&&(N=q.handler,C=q.type)}if(N||g)try{if(Kt(R),N)if(R.params===void 0)C!==void 0&&C.numberOfParams!==0&&C.parameterStructures!==G.ParameterStructures.byName&&i.error(`Notification ${R.method} defines ${C.numberOfParams} params but received none.`),N();else if(Array.isArray(R.params)){let q=R.params;R.method===xr.type.method&&q.length===2&&Ad.is(q[0])?N({token:q[0],value:q[1]}):(C!==void 0&&(C.parameterStructures===G.ParameterStructures.byName&&i.error(`Notification ${R.method} defines parameters by name but received parameters by position`),C.numberOfParams!==R.params.length&&i.error(`Notification ${R.method} defines ${C.numberOfParams} params but received ${q.length} arguments`)),N(...q))}else C!==void 0&&C.parameterStructures===G.ParameterStructures.byPosition&&i.error(`Notification ${R.method} defines parameters by position but received parameters by name`),N(R.params);else g&&g(R.method,R.params)}catch(q){q.message?i.error(`Notification handler '${R.method}' failed with message: ${q.message}`):i.error(`Notification handler '${R.method}' failed unexpectedly.`)}else X.fire(R)}o(Me,"handleNotification");function st(R){if(!R){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(R,null,4)}`);let C=R;if(Le.string(C.id)||Le.number(C.id)){let N=C.id,q=S.get(N);q&&q.reject(new Error("The received response has neither a result nor an error property."))}}o(st,"handleInvalidMessage");function je(R){if(R!=null)switch(_){case ue.Verbose:return JSON.stringify(R,null,4);case ue.Compact:return JSON.stringify(R);default:return}}o(je,"stringifyTrace");function Bt(R){if(!(_===ue.Off||!w))if(A===At.Text){let C;(_===ue.Verbose||_===ue.Compact)&&R.params&&(C=`Params: ${je(R.params)}

`),w.log(`Sending request '${R.method} - (${R.id})'.`,C)}else Ft("send-request",R)}o(Bt,"traceSendingRequest");function gt(R){if(!(_===ue.Off||!w))if(A===At.Text){let C;(_===ue.Verbose||_===ue.Compact)&&(R.params?C=`Params: ${je(R.params)}

`:C=`No parameters provided.

`),w.log(`Sending notification '${R.method}'.`,C)}else Ft("send-notification",R)}o(gt,"traceSendingNotification");function Lt(R,C,N){if(!(_===ue.Off||!w))if(A===At.Text){let q;(_===ue.Verbose||_===ue.Compact)&&(R.error&&R.error.data?q=`Error data: ${je(R.error.data)}

`:R.result?q=`Result: ${je(R.result)}

`:R.error===void 0&&(q=`No result returned.

`)),w.log(`Sending response '${C} - (${R.id})'. Processing request took ${Date.now()-N}ms`,q)}else Ft("send-response",R)}o(Lt,"traceSendingResponse");function zn(R){if(!(_===ue.Off||!w))if(A===At.Text){let C;(_===ue.Verbose||_===ue.Compact)&&R.params&&(C=`Params: ${je(R.params)}

`),w.log(`Received request '${R.method} - (${R.id})'.`,C)}else Ft("receive-request",R)}o(zn,"traceReceivedRequest");function Kt(R){if(!(_===ue.Off||!w||R.method===gc.type.method))if(A===At.Text){let C;(_===ue.Verbose||_===ue.Compact)&&(R.params?C=`Params: ${je(R.params)}

`:C=`No parameters provided.

`),w.log(`Received notification '${R.method}'.`,C)}else Ft("receive-notification",R)}o(Kt,"traceReceivedNotification");function Jn(R,C){if(!(_===ue.Off||!w))if(A===At.Text){let N;if((_===ue.Verbose||_===ue.Compact)&&(R.error&&R.error.data?N=`Error data: ${je(R.error.data)}

`:R.result?N=`Result: ${je(R.result)}

`:R.error===void 0&&(N=`No result returned.

`)),C){let q=R.error?` Request failed: ${R.error.message} (${R.error.code}).`:"";w.log(`Received response '${C.method} - (${R.id})' in ${Date.now()-C.timerStart}ms.${q}`,N)}else w.log(`Received response ${R.id} without active response promise.`,N)}else Ft("receive-response",R)}o(Jn,"traceReceivedResponse");function Ft(R,C){if(!w||_===ue.Off)return;let N={isLSPMessage:!0,type:R,message:C,timestamp:Date.now()};w.log(N)}o(Ft,"logLSPMessage");function un(){if(Y())throw new nr($i.Closed,"Connection is closed.");if(Se())throw new nr($i.Disposed,"Connection is disposed.")}o(un,"throwIfClosedOrDisposed");function Ir(){if(j())throw new nr($i.AlreadyListening,"Connection is already listening")}o(Ir,"throwIfListening");function Ni(){if(!j())throw new Error("Call listen() first.")}o(Ni,"throwIfNotListening");function $t(R){return R===void 0?null:R}o($t,"undefinedToNull");function Nr(R){if(R!==null)return R}o(Nr,"nullToUndefined");function Qn(R){return R!=null&&!Array.isArray(R)&&typeof R=="object"}o(Qn,"isNamedParam");function dt(R,C){switch(R){case G.ParameterStructures.auto:return Qn(C)?Nr(C):[$t(C)];case G.ParameterStructures.byName:if(!Qn(C))throw new Error("Received parameters by name but param is not an object literal.");return Nr(C);case G.ParameterStructures.byPosition:return[$t(C)];default:throw new Error(`Unknown parameter structure ${R.toString()}`)}}o(dt,"computeSingleParam");function Xn(R,C){let N,q=R.numberOfParams;switch(q){case 0:N=void 0;break;case 1:N=dt(R.parameterStructures,C[0]);break;default:N=[];for(let le=0;le<C.length&&le<q;le++)N.push($t(C[le]));if(C.length<q)for(let le=C.length;le<q;le++)N.push(null);break}return N}o(Xn,"computeMessageParams");let Yt={sendNotification:o((R,...C)=>{un();let N,q;if(Le.string(R)){N=R;let ce=C[0],Re=0,Ce=G.ParameterStructures.auto;G.ParameterStructures.is(ce)&&(Re=1,Ce=ce);let J=C.length,he=J-Re;switch(he){case 0:q=void 0;break;case 1:q=dt(Ce,C[Re]);break;default:if(Ce===G.ParameterStructures.byName)throw new Error(`Received ${he} parameters for 'by Name' notification parameter structure.`);q=C.slice(Re,J).map(ee=>$t(ee));break}}else{let ce=C;N=R.method,q=Xn(R,ce)}let le={jsonrpc:u,method:N,params:q};return gt(le),e.write(le).catch(()=>i.error("Sending notification failed."))},"sendNotification"),onNotification:o((R,C)=>{un();let N;return Le.func(R)?g=R:C&&(Le.string(R)?(N=R,m.set(R,{type:void 0,handler:C})):(N=R.method,m.set(R.method,{type:R,handler:C}))),{dispose:o(()=>{N!==void 0?m.delete(N):g=void 0},"dispose")}},"onNotification"),onProgress:o((R,C,N)=>{if(d.has(C))throw new Error(`Progress handler for token ${C} already registered`);return d.set(C,N),{dispose:o(()=>{d.delete(C)},"dispose")}},"onProgress"),sendProgress:o((R,C,N)=>Yt.sendNotification(xr.type,{token:C,value:N}),"sendProgress"),onUnhandledProgress:ae.event,sendRequest:o((R,...C)=>{un(),Ni();let N,q,le;if(Le.string(R)){N=R;let J=C[0],he=C[C.length-1],ee=0,Ae=G.ParameterStructures.auto;G.ParameterStructures.is(J)&&(ee=1,Ae=J);let Ve=C.length;cc.CancellationToken.is(he)&&(Ve=Ve-1,le=he);let An=Ve-ee;switch(An){case 0:q=void 0;break;case 1:q=dt(Ae,C[ee]);break;default:if(Ae===G.ParameterStructures.byName)throw new Error(`Received ${An} parameters for 'by Name' request parameter structure.`);q=C.slice(ee,Ve).map(ln=>$t(ln));break}}else{let J=C;N=R.method,q=Xn(R,J);let he=R.numberOfParams;le=cc.CancellationToken.is(J[he])?J[he]:void 0}let ce=a++,Re;return le&&(Re=le.onCancellationRequested(()=>{let J=de.sender.sendCancellation(Yt,ce);return J===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${ce}`),Promise.resolve()):J.catch(()=>{i.log(`Sending cancellation messages for id ${ce} failed`)})})),new Promise((J,he)=>{let ee={jsonrpc:u,id:ce,method:N,params:q},Ae=o(ln=>{J(ln),de.sender.cleanup(ce),Re?.dispose()},"resolveWithCleanup"),Ve=o(ln=>{he(ln),de.sender.cleanup(ce),Re?.dispose()},"rejectWithCleanup"),An={method:N,timerStart:Date.now(),resolve:Ae,reject:Ve};Bt(ee);try{e.write(ee).catch(()=>i.error("Sending request failed."))}catch(ln){An.reject(new G.ResponseError(G.ErrorCodes.MessageWriteError,ln.message?ln.message:"Unknown reason")),An=null}An&&S.set(ce,An)})},"sendRequest"),onRequest:o((R,C)=>{un();let N=null;return lc.is(R)?(N=void 0,l=R):Le.string(R)?(N=null,C!==void 0&&(N=R,f.set(R,{handler:C,type:void 0}))):C!==void 0&&(N=R.method,f.set(R.method,{type:R,handler:C})),{dispose:o(()=>{N!==null&&(N!==void 0?f.delete(N):l=void 0)},"dispose")}},"onRequest"),hasPendingResponse:o(()=>S.size>0,"hasPendingResponse"),trace:o(async(R,C,N)=>{let q=!1,le=At.Text;N!==void 0&&(Le.boolean(N)?q=N:(q=N.sendNotification||!1,le=N.traceFormat||At.Text)),_=R,A=le,_===ue.Off?w=void 0:w=C,q&&!Y()&&!Se()&&await Yt.sendNotification(Td.type,{value:ue.toString(R)})},"trace"),onError:B.event,onClose:te.event,onUnhandledNotification:X.event,onDispose:ne.event,end:o(()=>{e.end()},"end"),dispose:o(()=>{if(Se())return;V=Tt.Disposed,ne.fire(void 0);let R=new G.ResponseError(G.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let C of S.values())C.reject(R);S=new Map,b=new Map,k=new Set,v=new Sd.LinkedMap,Le.func(e.dispose)&&e.dispose(),Le.func(t.dispose)&&t.dispose()},"dispose"),listen:o(()=>{un(),Ir(),V=Tt.Listening,t.listen(St)},"listen"),inspect:o(()=>{(0,kd.default)().console.log("inspect")},"inspect")};return Yt.onNotification(gc.type,R=>{if(_===ue.Off||!w)return;let C=_===ue.Verbose||_===ue.Compact;w.log(R.message,C?R.verbose:void 0)}),Yt.onNotification(xr.type,R=>{let C=d.get(R.token);C?C(R.value):ae.fire(R)}),Yt}o(Hm,"createMessageConnection");W.createMessageConnection=Hm});var Rc=T(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.TraceFormat=E.TraceValues=E.Trace=E.ProgressType=E.ProgressToken=E.createMessageConnection=E.NullLogger=E.ConnectionOptions=E.ConnectionStrategy=E.WriteableStreamMessageWriter=E.AbstractMessageWriter=E.MessageWriter=E.ReadableStreamMessageReader=E.AbstractMessageReader=E.MessageReader=E.CancellationToken=E.CancellationTokenSource=E.Emitter=E.Event=E.Disposable=E.LRUCache=E.Touch=E.LinkedMap=E.ParameterStructures=E.NotificationType9=E.NotificationType8=E.NotificationType7=E.NotificationType6=E.NotificationType5=E.NotificationType4=E.NotificationType3=E.NotificationType2=E.NotificationType1=E.NotificationType0=E.NotificationType=E.ErrorCodes=E.ResponseError=E.RequestType9=E.RequestType8=E.RequestType7=E.RequestType6=E.RequestType5=E.RequestType4=E.RequestType3=E.RequestType2=E.RequestType1=E.RequestType0=E.RequestType=E.Message=E.RAL=void 0;E.CancellationStrategy=E.CancellationSenderStrategy=E.CancellationReceiverStrategy=E.ConnectionError=E.ConnectionErrors=E.LogTraceNotification=E.SetTraceNotification=void 0;var me=$o();Object.defineProperty(E,"Message",{enumerable:!0,get:o(function(){return me.Message},"get")});Object.defineProperty(E,"RequestType",{enumerable:!0,get:o(function(){return me.RequestType},"get")});Object.defineProperty(E,"RequestType0",{enumerable:!0,get:o(function(){return me.RequestType0},"get")});Object.defineProperty(E,"RequestType1",{enumerable:!0,get:o(function(){return me.RequestType1},"get")});Object.defineProperty(E,"RequestType2",{enumerable:!0,get:o(function(){return me.RequestType2},"get")});Object.defineProperty(E,"RequestType3",{enumerable:!0,get:o(function(){return me.RequestType3},"get")});Object.defineProperty(E,"RequestType4",{enumerable:!0,get:o(function(){return me.RequestType4},"get")});Object.defineProperty(E,"RequestType5",{enumerable:!0,get:o(function(){return me.RequestType5},"get")});Object.defineProperty(E,"RequestType6",{enumerable:!0,get:o(function(){return me.RequestType6},"get")});Object.defineProperty(E,"RequestType7",{enumerable:!0,get:o(function(){return me.RequestType7},"get")});Object.defineProperty(E,"RequestType8",{enumerable:!0,get:o(function(){return me.RequestType8},"get")});Object.defineProperty(E,"RequestType9",{enumerable:!0,get:o(function(){return me.RequestType9},"get")});Object.defineProperty(E,"ResponseError",{enumerable:!0,get:o(function(){return me.ResponseError},"get")});Object.defineProperty(E,"ErrorCodes",{enumerable:!0,get:o(function(){return me.ErrorCodes},"get")});Object.defineProperty(E,"NotificationType",{enumerable:!0,get:o(function(){return me.NotificationType},"get")});Object.defineProperty(E,"NotificationType0",{enumerable:!0,get:o(function(){return me.NotificationType0},"get")});Object.defineProperty(E,"NotificationType1",{enumerable:!0,get:o(function(){return me.NotificationType1},"get")});Object.defineProperty(E,"NotificationType2",{enumerable:!0,get:o(function(){return me.NotificationType2},"get")});Object.defineProperty(E,"NotificationType3",{enumerable:!0,get:o(function(){return me.NotificationType3},"get")});Object.defineProperty(E,"NotificationType4",{enumerable:!0,get:o(function(){return me.NotificationType4},"get")});Object.defineProperty(E,"NotificationType5",{enumerable:!0,get:o(function(){return me.NotificationType5},"get")});Object.defineProperty(E,"NotificationType6",{enumerable:!0,get:o(function(){return me.NotificationType6},"get")});Object.defineProperty(E,"NotificationType7",{enumerable:!0,get:o(function(){return me.NotificationType7},"get")});Object.defineProperty(E,"NotificationType8",{enumerable:!0,get:o(function(){return me.NotificationType8},"get")});Object.defineProperty(E,"NotificationType9",{enumerable:!0,get:o(function(){return me.NotificationType9},"get")});Object.defineProperty(E,"ParameterStructures",{enumerable:!0,get:o(function(){return me.ParameterStructures},"get")});var mc=zo();Object.defineProperty(E,"LinkedMap",{enumerable:!0,get:o(function(){return mc.LinkedMap},"get")});Object.defineProperty(E,"LRUCache",{enumerable:!0,get:o(function(){return mc.LRUCache},"get")});Object.defineProperty(E,"Touch",{enumerable:!0,get:o(function(){return mc.Touch},"get")});var Um=Ro();Object.defineProperty(E,"Disposable",{enumerable:!0,get:o(function(){return Um.Disposable},"get")});var Pd=er();Object.defineProperty(E,"Event",{enumerable:!0,get:o(function(){return Pd.Event},"get")});Object.defineProperty(E,"Emitter",{enumerable:!0,get:o(function(){return Pd.Emitter},"get")});var Id=ec();Object.defineProperty(E,"CancellationTokenSource",{enumerable:!0,get:o(function(){return Id.CancellationTokenSource},"get")});Object.defineProperty(E,"CancellationToken",{enumerable:!0,get:o(function(){return Id.CancellationToken},"get")});var pc=vd();Object.defineProperty(E,"MessageReader",{enumerable:!0,get:o(function(){return pc.MessageReader},"get")});Object.defineProperty(E,"AbstractMessageReader",{enumerable:!0,get:o(function(){return pc.AbstractMessageReader},"get")});Object.defineProperty(E,"ReadableStreamMessageReader",{enumerable:!0,get:o(function(){return pc.ReadableStreamMessageReader},"get")});var vc=Dd();Object.defineProperty(E,"MessageWriter",{enumerable:!0,get:o(function(){return vc.MessageWriter},"get")});Object.defineProperty(E,"AbstractMessageWriter",{enumerable:!0,get:o(function(){return vc.AbstractMessageWriter},"get")});Object.defineProperty(E,"WriteableStreamMessageWriter",{enumerable:!0,get:o(function(){return vc.WriteableStreamMessageWriter},"get")});var Qe=Cd();Object.defineProperty(E,"ConnectionStrategy",{enumerable:!0,get:o(function(){return Qe.ConnectionStrategy},"get")});Object.defineProperty(E,"ConnectionOptions",{enumerable:!0,get:o(function(){return Qe.ConnectionOptions},"get")});Object.defineProperty(E,"NullLogger",{enumerable:!0,get:o(function(){return Qe.NullLogger},"get")});Object.defineProperty(E,"createMessageConnection",{enumerable:!0,get:o(function(){return Qe.createMessageConnection},"get")});Object.defineProperty(E,"ProgressToken",{enumerable:!0,get:o(function(){return Qe.ProgressToken},"get")});Object.defineProperty(E,"ProgressType",{enumerable:!0,get:o(function(){return Qe.ProgressType},"get")});Object.defineProperty(E,"Trace",{enumerable:!0,get:o(function(){return Qe.Trace},"get")});Object.defineProperty(E,"TraceValues",{enumerable:!0,get:o(function(){return Qe.TraceValues},"get")});Object.defineProperty(E,"TraceFormat",{enumerable:!0,get:o(function(){return Qe.TraceFormat},"get")});Object.defineProperty(E,"SetTraceNotification",{enumerable:!0,get:o(function(){return Qe.SetTraceNotification},"get")});Object.defineProperty(E,"LogTraceNotification",{enumerable:!0,get:o(function(){return Qe.LogTraceNotification},"get")});Object.defineProperty(E,"ConnectionErrors",{enumerable:!0,get:o(function(){return Qe.ConnectionErrors},"get")});Object.defineProperty(E,"ConnectionError",{enumerable:!0,get:o(function(){return Qe.ConnectionError},"get")});Object.defineProperty(E,"CancellationReceiverStrategy",{enumerable:!0,get:o(function(){return Qe.CancellationReceiverStrategy},"get")});Object.defineProperty(E,"CancellationSenderStrategy",{enumerable:!0,get:o(function(){return Qe.CancellationSenderStrategy},"get")});Object.defineProperty(E,"CancellationStrategy",{enumerable:!0,get:o(function(){return Qe.CancellationStrategy},"get")});var jm=zt();E.RAL=jm.default});var Mn=T(ie=>{"use strict";var Vm=ie&&ie.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),Wm=ie&&ie.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Vm(e,t,n)};Object.defineProperty(ie,"__esModule",{value:!0});ie.createMessageConnection=ie.createServerSocketTransport=ie.createClientSocketTransport=ie.createServerPipeTransport=ie.createClientPipeTransport=ie.generateRandomPipeName=ie.StreamMessageWriter=ie.StreamMessageReader=ie.SocketMessageWriter=ie.SocketMessageReader=ie.IPCMessageWriter=ie.IPCMessageReader=void 0;var rr=dd();rr.default.install();var qt=Rc(),Nd=require("path"),Gm=require("os"),Bm=require("crypto"),Ji=require("net");Wm(Rc(),ie);var _c=class extends qt.AbstractMessageReader{static{o(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),qt.Disposable.create(()=>this.process.off("message",e))}};ie.IPCMessageReader=_c;var bc=class extends qt.AbstractMessageWriter{static{o(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ie.IPCMessageWriter=bc;var In=class extends qt.ReadableStreamMessageReader{static{o(this,"SocketMessageReader")}constructor(e,n="utf-8"){super((0,rr.default)().stream.asReadableStream(e),n)}};ie.SocketMessageReader=In;var Nn=class extends qt.WriteableStreamMessageWriter{static{o(this,"SocketMessageWriter")}constructor(e,n){super((0,rr.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ie.SocketMessageWriter=Nn;var Yi=class extends qt.ReadableStreamMessageReader{static{o(this,"StreamMessageReader")}constructor(e,n){super((0,rr.default)().stream.asReadableStream(e),n)}};ie.StreamMessageReader=Yi;var zi=class extends qt.WriteableStreamMessageWriter{static{o(this,"StreamMessageWriter")}constructor(e,n){super((0,rr.default)().stream.asWritableStream(e),n)}};ie.StreamMessageWriter=zi;var Md=process.env.XDG_RUNTIME_DIR,Km=new Map([["linux",107],["darwin",103]]);function $m(){let t=(0,Bm.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;Md?e=Nd.join(Md,`vscode-ipc-${t}.sock`):e=Nd.join(Gm.tmpdir(),`vscode-${t}.sock`);let n=Km.get(process.platform);return n!==void 0&&e.length>=n&&(0,rr.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}o($m,"generateRandomPipeName");ie.generateRandomPipeName=$m;function Ym(t,e="utf-8"){let n,r=new Promise((i,a)=>{n=i});return new Promise((i,a)=>{let s=(0,Ji.createServer)(c=>{s.close(),n([new In(c,e),new Nn(c,e)])});s.on("error",a),s.listen(t,()=>{s.removeListener("error",a),i({onConnected:o(()=>r,"onConnected")})})})}o(Ym,"createClientPipeTransport");ie.createClientPipeTransport=Ym;function zm(t,e="utf-8"){let n=(0,Ji.createConnection)(t);return[new In(n,e),new Nn(n,e)]}o(zm,"createServerPipeTransport");ie.createServerPipeTransport=zm;function Jm(t,e="utf-8"){let n,r=new Promise((i,a)=>{n=i});return new Promise((i,a)=>{let s=(0,Ji.createServer)(c=>{s.close(),n([new In(c,e),new Nn(c,e)])});s.on("error",a),s.listen(t,"127.0.0.1",()=>{s.removeListener("error",a),i({onConnected:o(()=>r,"onConnected")})})})}o(Jm,"createClientSocketTransport");ie.createClientSocketTransport=Jm;function Qm(t,e="utf-8"){let n=(0,Ji.createConnection)(t,"127.0.0.1");return[new In(n,e),new Nn(n,e)]}o(Qm,"createServerSocketTransport");ie.createServerSocketTransport=Qm;function Xm(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}o(Xm,"isReadableStream");function Zm(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}o(Zm,"isWritableStream");function ep(t,e,n,r){n||(n=qt.NullLogger);let i=Xm(t)?new Yi(t):t,a=Zm(e)?new zi(e):e;return qt.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,qt.createMessageConnection)(i,a,n,r)}o(ep,"createMessageConnection");ie.createMessageConnection=ep});var yc=T((bk,Od)=>{"use strict";Od.exports=Mn()});var aa={};wi(aa,{AnnotatedTextEdit:()=>Zt,ChangeAnnotation:()=>On,ChangeAnnotationIdentifier:()=>We,CodeAction:()=>tu,CodeActionContext:()=>eu,CodeActionKind:()=>Zc,CodeActionTriggerKind:()=>Wr,CodeDescription:()=>Nc,CodeLens:()=>nu,Color:()=>Zi,ColorInformation:()=>Ac,ColorPresentation:()=>Tc,Command:()=>wn,CompletionItem:()=>jc,CompletionItemKind:()=>xc,CompletionItemLabelDetails:()=>Uc,CompletionItemTag:()=>Fc,CompletionList:()=>Vc,CreateFile:()=>ir,DeleteFile:()=>sr,Diagnostic:()=>Hr,DiagnosticRelatedInformation:()=>ea,DiagnosticSeverity:()=>Pc,DiagnosticTag:()=>Ic,DocumentHighlight:()=>$c,DocumentHighlightKind:()=>Kc,DocumentLink:()=>iu,DocumentSymbol:()=>Xc,DocumentUri:()=>Dc,EOL:()=>np,FoldingRange:()=>Cc,FoldingRangeKind:()=>Ec,FormattingOptions:()=>ru,Hover:()=>Wc,InlayHint:()=>fu,InlayHintKind:()=>ra,InlayHintLabelPart:()=>ia,InlineValueContext:()=>du,InlineValueEvaluatableExpression:()=>gu,InlineValueText:()=>uu,InlineValueVariableLookup:()=>lu,InsertReplaceEdit:()=>qc,InsertTextFormat:()=>Lc,InsertTextMode:()=>Hc,Location:()=>qr,LocationLink:()=>Sc,MarkedString:()=>Vr,MarkupContent:()=>or,MarkupKind:()=>na,OptionalVersionedTextDocumentIdentifier:()=>jr,ParameterInformation:()=>Gc,Position:()=>pt,Range:()=>Pe,RenameFile:()=>ar,SelectionRange:()=>au,SemanticTokenModifiers:()=>ou,SemanticTokenTypes:()=>su,SemanticTokens:()=>cu,SignatureInformation:()=>Bc,SymbolInformation:()=>Jc,SymbolKind:()=>Yc,SymbolTag:()=>zc,TextDocument:()=>mu,TextDocumentEdit:()=>Ur,TextDocumentIdentifier:()=>Mc,TextDocumentItem:()=>wc,TextEdit:()=>Ht,URI:()=>Xi,VersionedTextDocumentIdentifier:()=>Oc,WorkspaceChange:()=>tp,WorkspaceEdit:()=>ta,WorkspaceFolder:()=>hu,WorkspaceSymbol:()=>Qc,integer:()=>kc,uinteger:()=>Fr});var Dc,Xi,kc,Fr,pt,Pe,qr,Sc,Zi,Ac,Tc,Ec,Cc,ea,Pc,Ic,Nc,Hr,wn,Ht,On,We,Zt,Ur,ir,ar,sr,ta,Qi,wd,tp,Mc,Oc,jr,wc,na,or,xc,Lc,Fc,qc,Hc,Uc,jc,Vc,Vr,Wc,Gc,Bc,Kc,$c,Yc,zc,Jc,Qc,Xc,Zc,Wr,eu,tu,nu,ru,iu,au,su,ou,cu,uu,lu,gu,du,ra,ia,fu,hu,np,mu,rp,y,sa=Oi(()=>{"use strict";(function(t){function e(n){return typeof n=="string"}o(e,"is"),t.is=e})(Dc||(Dc={}));(function(t){function e(n){return typeof n=="string"}o(e,"is"),t.is=e})(Xi||(Xi={}));(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}o(e,"is"),t.is=e})(kc||(kc={}));(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}o(e,"is"),t.is=e})(Fr||(Fr={}));(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=Fr.MAX_VALUE),i===Number.MAX_VALUE&&(i=Fr.MAX_VALUE),{line:r,character:i}}o(e,"create"),t.create=e;function n(r){var i=r;return y.objectLiteral(i)&&y.uinteger(i.line)&&y.uinteger(i.character)}o(n,"is"),t.is=n})(pt||(pt={}));(function(t){function e(r,i,a,s){if(y.uinteger(r)&&y.uinteger(i)&&y.uinteger(a)&&y.uinteger(s))return{start:pt.create(r,i),end:pt.create(a,s)};if(pt.is(r)&&pt.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments[".concat(r,", ").concat(i,", ").concat(a,", ").concat(s,"]"))}o(e,"create"),t.create=e;function n(r){var i=r;return y.objectLiteral(i)&&pt.is(i.start)&&pt.is(i.end)}o(n,"is"),t.is=n})(Pe||(Pe={}));(function(t){function e(r,i){return{uri:r,range:i}}o(e,"create"),t.create=e;function n(r){var i=r;return y.objectLiteral(i)&&Pe.is(i.range)&&(y.string(i.uri)||y.undefined(i.uri))}o(n,"is"),t.is=n})(qr||(qr={}));(function(t){function e(r,i,a,s){return{targetUri:r,targetRange:i,targetSelectionRange:a,originSelectionRange:s}}o(e,"create"),t.create=e;function n(r){var i=r;return y.objectLiteral(i)&&Pe.is(i.targetRange)&&y.string(i.targetUri)&&Pe.is(i.targetSelectionRange)&&(Pe.is(i.originSelectionRange)||y.undefined(i.originSelectionRange))}o(n,"is"),t.is=n})(Sc||(Sc={}));(function(t){function e(r,i,a,s){return{red:r,green:i,blue:a,alpha:s}}o(e,"create"),t.create=e;function n(r){var i=r;return y.objectLiteral(i)&&y.numberRange(i.red,0,1)&&y.numberRange(i.green,0,1)&&y.numberRange(i.blue,0,1)&&y.numberRange(i.alpha,0,1)}o(n,"is"),t.is=n})(Zi||(Zi={}));(function(t){function e(r,i){return{range:r,color:i}}o(e,"create"),t.create=e;function n(r){var i=r;return y.objectLiteral(i)&&Pe.is(i.range)&&Zi.is(i.color)}o(n,"is"),t.is=n})(Ac||(Ac={}));(function(t){function e(r,i,a){return{label:r,textEdit:i,additionalTextEdits:a}}o(e,"create"),t.create=e;function n(r){var i=r;return y.objectLiteral(i)&&y.string(i.label)&&(y.undefined(i.textEdit)||Ht.is(i))&&(y.undefined(i.additionalTextEdits)||y.typedArray(i.additionalTextEdits,Ht.is))}o(n,"is"),t.is=n})(Tc||(Tc={}));(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Ec||(Ec={}));(function(t){function e(r,i,a,s,c,u){var l={startLine:r,endLine:i};return y.defined(a)&&(l.startCharacter=a),y.defined(s)&&(l.endCharacter=s),y.defined(c)&&(l.kind=c),y.defined(u)&&(l.collapsedText=u),l}o(e,"create"),t.create=e;function n(r){var i=r;return y.objectLiteral(i)&&y.uinteger(i.startLine)&&y.uinteger(i.startLine)&&(y.undefined(i.startCharacter)||y.uinteger(i.startCharacter))&&(y.undefined(i.endCharacter)||y.uinteger(i.endCharacter))&&(y.undefined(i.kind)||y.string(i.kind))}o(n,"is"),t.is=n})(Cc||(Cc={}));(function(t){function e(r,i){return{location:r,message:i}}o(e,"create"),t.create=e;function n(r){var i=r;return y.defined(i)&&qr.is(i.location)&&y.string(i.message)}o(n,"is"),t.is=n})(ea||(ea={}));(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(Pc||(Pc={}));(function(t){t.Unnecessary=1,t.Deprecated=2})(Ic||(Ic={}));(function(t){function e(n){var r=n;return y.objectLiteral(r)&&y.string(r.href)}o(e,"is"),t.is=e})(Nc||(Nc={}));(function(t){function e(r,i,a,s,c,u){var l={range:r,message:i};return y.defined(a)&&(l.severity=a),y.defined(s)&&(l.code=s),y.defined(c)&&(l.source=c),y.defined(u)&&(l.relatedInformation=u),l}o(e,"create"),t.create=e;function n(r){var i,a=r;return y.defined(a)&&Pe.is(a.range)&&y.string(a.message)&&(y.number(a.severity)||y.undefined(a.severity))&&(y.integer(a.code)||y.string(a.code)||y.undefined(a.code))&&(y.undefined(a.codeDescription)||y.string((i=a.codeDescription)===null||i===void 0?void 0:i.href))&&(y.string(a.source)||y.undefined(a.source))&&(y.undefined(a.relatedInformation)||y.typedArray(a.relatedInformation,ea.is))}o(n,"is"),t.is=n})(Hr||(Hr={}));(function(t){function e(r,i){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var c={title:r,command:i};return y.defined(a)&&a.length>0&&(c.arguments=a),c}o(e,"create"),t.create=e;function n(r){var i=r;return y.defined(i)&&y.string(i.title)&&y.string(i.command)}o(n,"is"),t.is=n})(wn||(wn={}));(function(t){function e(a,s){return{range:a,newText:s}}o(e,"replace"),t.replace=e;function n(a,s){return{range:{start:a,end:a},newText:s}}o(n,"insert"),t.insert=n;function r(a){return{range:a,newText:""}}o(r,"del"),t.del=r;function i(a){var s=a;return y.objectLiteral(s)&&y.string(s.newText)&&Pe.is(s.range)}o(i,"is"),t.is=i})(Ht||(Ht={}));(function(t){function e(r,i,a){var s={label:r};return i!==void 0&&(s.needsConfirmation=i),a!==void 0&&(s.description=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return y.objectLiteral(i)&&y.string(i.label)&&(y.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(y.string(i.description)||i.description===void 0)}o(n,"is"),t.is=n})(On||(On={}));(function(t){function e(n){var r=n;return y.string(r)}o(e,"is"),t.is=e})(We||(We={}));(function(t){function e(a,s,c){return{range:a,newText:s,annotationId:c}}o(e,"replace"),t.replace=e;function n(a,s,c){return{range:{start:a,end:a},newText:s,annotationId:c}}o(n,"insert"),t.insert=n;function r(a,s){return{range:a,newText:"",annotationId:s}}o(r,"del"),t.del=r;function i(a){var s=a;return Ht.is(s)&&(On.is(s.annotationId)||We.is(s.annotationId))}o(i,"is"),t.is=i})(Zt||(Zt={}));(function(t){function e(r,i){return{textDocument:r,edits:i}}o(e,"create"),t.create=e;function n(r){var i=r;return y.defined(i)&&jr.is(i.textDocument)&&Array.isArray(i.edits)}o(n,"is"),t.is=n})(Ur||(Ur={}));(function(t){function e(r,i,a){var s={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&y.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||y.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||y.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||We.is(i.annotationId))}o(n,"is"),t.is=n})(ir||(ir={}));(function(t){function e(r,i,a,s){var c={kind:"rename",oldUri:r,newUri:i};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(c.options=a),s!==void 0&&(c.annotationId=s),c}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&y.string(i.oldUri)&&y.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||y.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||y.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||We.is(i.annotationId))}o(n,"is"),t.is=n})(ar||(ar={}));(function(t){function e(r,i,a){var s={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&y.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||y.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||y.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||We.is(i.annotationId))}o(n,"is"),t.is=n})(sr||(sr={}));(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return y.string(i.kind)?ir.is(i)||ar.is(i)||sr.is(i):Ur.is(i)}))}o(e,"is"),t.is=e})(ta||(ta={}));Qi=(function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return o(t,"TextEditChangeImpl"),t.prototype.insert=function(e,n,r){var i,a;if(r===void 0?i=Ht.insert(e,n):We.is(r)?(a=r,i=Zt.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=Zt.insert(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.replace=function(e,n,r){var i,a;if(r===void 0?i=Ht.replace(e,n):We.is(r)?(a=r,i=Zt.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=Zt.replace(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=Ht.del(e):We.is(n)?(i=n,r=Zt.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=Zt.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t})(),wd=(function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return o(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:o(function(){return this._size},"get"),enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(We.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id ".concat(r," is already in use."));if(n===void 0)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t})(),tp=(function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new wd(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(Ur.is(r)){var i=new Qi(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new Qi(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return o(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:o(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(jr.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],a={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(a),r=new Qi(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new Qi(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new wd,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;On.is(n)||We.is(n)?i=n:r=n;var a,s;if(i===void 0?a=ir.create(e,r):(s=We.is(i)?i:this._changeAnnotations.manage(i),a=ir.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;On.is(r)||We.is(r)?a=r:i=r;var s,c;if(a===void 0?s=ar.create(e,n,i):(c=We.is(a)?a:this._changeAnnotations.manage(a),s=ar.create(e,n,i,c)),this._workspaceEdit.documentChanges.push(s),c!==void 0)return c},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;On.is(n)||We.is(n)?i=n:r=n;var a,s;if(i===void 0?a=sr.create(e,r):(s=We.is(i)?i:this._changeAnnotations.manage(i),a=sr.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t})();(function(t){function e(r){return{uri:r}}o(e,"create"),t.create=e;function n(r){var i=r;return y.defined(i)&&y.string(i.uri)}o(n,"is"),t.is=n})(Mc||(Mc={}));(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return y.defined(i)&&y.string(i.uri)&&y.integer(i.version)}o(n,"is"),t.is=n})(Oc||(Oc={}));(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return y.defined(i)&&y.string(i.uri)&&(i.version===null||y.integer(i.version))}o(n,"is"),t.is=n})(jr||(jr={}));(function(t){function e(r,i,a,s){return{uri:r,languageId:i,version:a,text:s}}o(e,"create"),t.create=e;function n(r){var i=r;return y.defined(i)&&y.string(i.uri)&&y.string(i.languageId)&&y.integer(i.version)&&y.string(i.text)}o(n,"is"),t.is=n})(wc||(wc={}));(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(n){var r=n;return r===t.PlainText||r===t.Markdown}o(e,"is"),t.is=e})(na||(na={}));(function(t){function e(n){var r=n;return y.objectLiteral(n)&&na.is(r.kind)&&y.string(r.value)}o(e,"is"),t.is=e})(or||(or={}));(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(xc||(xc={}));(function(t){t.PlainText=1,t.Snippet=2})(Lc||(Lc={}));(function(t){t.Deprecated=1})(Fc||(Fc={}));(function(t){function e(r,i,a){return{newText:r,insert:i,replace:a}}o(e,"create"),t.create=e;function n(r){var i=r;return i&&y.string(i.newText)&&Pe.is(i.insert)&&Pe.is(i.replace)}o(n,"is"),t.is=n})(qc||(qc={}));(function(t){t.asIs=1,t.adjustIndentation=2})(Hc||(Hc={}));(function(t){function e(n){var r=n;return r&&(y.string(r.detail)||r.detail===void 0)&&(y.string(r.description)||r.description===void 0)}o(e,"is"),t.is=e})(Uc||(Uc={}));(function(t){function e(n){return{label:n}}o(e,"create"),t.create=e})(jc||(jc={}));(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}o(e,"create"),t.create=e})(Vc||(Vc={}));(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}o(e,"fromPlainText"),t.fromPlainText=e;function n(r){var i=r;return y.string(i)||y.objectLiteral(i)&&y.string(i.language)&&y.string(i.value)}o(n,"is"),t.is=n})(Vr||(Vr={}));(function(t){function e(n){var r=n;return!!r&&y.objectLiteral(r)&&(or.is(r.contents)||Vr.is(r.contents)||y.typedArray(r.contents,Vr.is))&&(n.range===void 0||Pe.is(n.range))}o(e,"is"),t.is=e})(Wc||(Wc={}));(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}o(e,"create"),t.create=e})(Gc||(Gc={}));(function(t){function e(n,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s={label:n};return y.defined(r)&&(s.documentation=r),y.defined(i)?s.parameters=i:s.parameters=[],s}o(e,"create"),t.create=e})(Bc||(Bc={}));(function(t){t.Text=1,t.Read=2,t.Write=3})(Kc||(Kc={}));(function(t){function e(n,r){var i={range:n};return y.number(r)&&(i.kind=r),i}o(e,"create"),t.create=e})($c||($c={}));(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Yc||(Yc={}));(function(t){t.Deprecated=1})(zc||(zc={}));(function(t){function e(n,r,i,a,s){var c={name:n,kind:r,location:{uri:a,range:i}};return s&&(c.containerName=s),c}o(e,"create"),t.create=e})(Jc||(Jc={}));(function(t){function e(n,r,i,a){return a!==void 0?{name:n,kind:r,location:{uri:i,range:a}}:{name:n,kind:r,location:{uri:i}}}o(e,"create"),t.create=e})(Qc||(Qc={}));(function(t){function e(r,i,a,s,c,u){var l={name:r,detail:i,kind:a,range:s,selectionRange:c};return u!==void 0&&(l.children=u),l}o(e,"create"),t.create=e;function n(r){var i=r;return i&&y.string(i.name)&&y.number(i.kind)&&Pe.is(i.range)&&Pe.is(i.selectionRange)&&(i.detail===void 0||y.string(i.detail))&&(i.deprecated===void 0||y.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}o(n,"is"),t.is=n})(Xc||(Xc={}));(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Zc||(Zc={}));(function(t){t.Invoked=1,t.Automatic=2})(Wr||(Wr={}));(function(t){function e(r,i,a){var s={diagnostics:r};return i!=null&&(s.only=i),a!=null&&(s.triggerKind=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return y.defined(i)&&y.typedArray(i.diagnostics,Hr.is)&&(i.only===void 0||y.typedArray(i.only,y.string))&&(i.triggerKind===void 0||i.triggerKind===Wr.Invoked||i.triggerKind===Wr.Automatic)}o(n,"is"),t.is=n})(eu||(eu={}));(function(t){function e(r,i,a){var s={title:r},c=!0;return typeof i=="string"?(c=!1,s.kind=i):wn.is(i)?s.command=i:s.edit=i,c&&a!==void 0&&(s.kind=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&y.string(i.title)&&(i.diagnostics===void 0||y.typedArray(i.diagnostics,Hr.is))&&(i.kind===void 0||y.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||wn.is(i.command))&&(i.isPreferred===void 0||y.boolean(i.isPreferred))&&(i.edit===void 0||ta.is(i.edit))}o(n,"is"),t.is=n})(tu||(tu={}));(function(t){function e(r,i){var a={range:r};return y.defined(i)&&(a.data=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return y.defined(i)&&Pe.is(i.range)&&(y.undefined(i.command)||wn.is(i.command))}o(n,"is"),t.is=n})(nu||(nu={}));(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}o(e,"create"),t.create=e;function n(r){var i=r;return y.defined(i)&&y.uinteger(i.tabSize)&&y.boolean(i.insertSpaces)}o(n,"is"),t.is=n})(ru||(ru={}));(function(t){function e(r,i,a){return{range:r,target:i,data:a}}o(e,"create"),t.create=e;function n(r){var i=r;return y.defined(i)&&Pe.is(i.range)&&(y.undefined(i.target)||y.string(i.target))}o(n,"is"),t.is=n})(iu||(iu={}));(function(t){function e(r,i){return{range:r,parent:i}}o(e,"create"),t.create=e;function n(r){var i=r;return y.objectLiteral(i)&&Pe.is(i.range)&&(i.parent===void 0||t.is(i.parent))}o(n,"is"),t.is=n})(au||(au={}));(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(su||(su={}));(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(ou||(ou={}));(function(t){function e(n){var r=n;return y.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}o(e,"is"),t.is=e})(cu||(cu={}));(function(t){function e(r,i){return{range:r,text:i}}o(e,"create"),t.create=e;function n(r){var i=r;return i!=null&&Pe.is(i.range)&&y.string(i.text)}o(n,"is"),t.is=n})(uu||(uu={}));(function(t){function e(r,i,a){return{range:r,variableName:i,caseSensitiveLookup:a}}o(e,"create"),t.create=e;function n(r){var i=r;return i!=null&&Pe.is(i.range)&&y.boolean(i.caseSensitiveLookup)&&(y.string(i.variableName)||i.variableName===void 0)}o(n,"is"),t.is=n})(lu||(lu={}));(function(t){function e(r,i){return{range:r,expression:i}}o(e,"create"),t.create=e;function n(r){var i=r;return i!=null&&Pe.is(i.range)&&(y.string(i.expression)||i.expression===void 0)}o(n,"is"),t.is=n})(gu||(gu={}));(function(t){function e(r,i){return{frameId:r,stoppedLocation:i}}o(e,"create"),t.create=e;function n(r){var i=r;return y.defined(i)&&Pe.is(r.stoppedLocation)}o(n,"is"),t.is=n})(du||(du={}));(function(t){t.Type=1,t.Parameter=2;function e(n){return n===1||n===2}o(e,"is"),t.is=e})(ra||(ra={}));(function(t){function e(r){return{value:r}}o(e,"create"),t.create=e;function n(r){var i=r;return y.objectLiteral(i)&&(i.tooltip===void 0||y.string(i.tooltip)||or.is(i.tooltip))&&(i.location===void 0||qr.is(i.location))&&(i.command===void 0||wn.is(i.command))}o(n,"is"),t.is=n})(ia||(ia={}));(function(t){function e(r,i,a){var s={position:r,label:i};return a!==void 0&&(s.kind=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return y.objectLiteral(i)&&pt.is(i.position)&&(y.string(i.label)||y.typedArray(i.label,ia.is))&&(i.kind===void 0||ra.is(i.kind))&&i.textEdits===void 0||y.typedArray(i.textEdits,Ht.is)&&(i.tooltip===void 0||y.string(i.tooltip)||or.is(i.tooltip))&&(i.paddingLeft===void 0||y.boolean(i.paddingLeft))&&(i.paddingRight===void 0||y.boolean(i.paddingRight))}o(n,"is"),t.is=n})(fu||(fu={}));(function(t){function e(n){var r=n;return y.objectLiteral(r)&&Xi.is(r.uri)&&y.string(r.name)}o(e,"is"),t.is=e})(hu||(hu={}));np=[`
`,`\r
`,"\r"];(function(t){function e(a,s,c,u){return new rp(a,s,c,u)}o(e,"create"),t.create=e;function n(a){var s=a;return!!(y.defined(s)&&y.string(s.uri)&&(y.undefined(s.languageId)||y.string(s.languageId))&&y.uinteger(s.lineCount)&&y.func(s.getText)&&y.func(s.positionAt)&&y.func(s.offsetAt))}o(n,"is"),t.is=n;function r(a,s){for(var c=a.getText(),u=i(s,function(p,v){var S=p.range.start.line-v.range.start.line;return S===0?p.range.start.character-v.range.start.character:S}),l=c.length,f=u.length-1;f>=0;f--){var g=u[f],m=a.offsetAt(g.range.start),d=a.offsetAt(g.range.end);if(d<=l)c=c.substring(0,m)+g.newText+c.substring(d,c.length);else throw new Error("Overlapping edit");l=m}return c}o(r,"applyEdits"),t.applyEdits=r;function i(a,s){if(a.length<=1)return a;var c=a.length/2|0,u=a.slice(0,c),l=a.slice(c);i(u,s),i(l,s);for(var f=0,g=0,m=0;f<u.length&&g<l.length;){var d=s(u[f],l[g]);d<=0?a[m++]=u[f++]:a[m++]=l[g++]}for(;f<u.length;)a[m++]=u[f++];for(;g<l.length;)a[m++]=l[g++];return a}o(i,"mergeSort")})(mu||(mu={}));rp=(function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return o(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:o(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:o(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:o(function(){return this._version},"get"),enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var a=n.charAt(i);r=a==="\r"||a===`
`,a==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return pt.create(0,e);for(;r<i;){var a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}var s=r-1;return pt.create(s,e-n[s])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:o(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),t})();(function(t){var e=Object.prototype.toString;function n(d){return typeof d<"u"}o(n,"defined"),t.defined=n;function r(d){return typeof d>"u"}o(r,"undefined"),t.undefined=r;function i(d){return d===!0||d===!1}o(i,"boolean"),t.boolean=i;function a(d){return e.call(d)==="[object String]"}o(a,"string"),t.string=a;function s(d){return e.call(d)==="[object Number]"}o(s,"number"),t.number=s;function c(d,p,v){return e.call(d)==="[object Number]"&&p<=d&&d<=v}o(c,"numberRange"),t.numberRange=c;function u(d){return e.call(d)==="[object Number]"&&-2147483648<=d&&d<=2147483647}o(u,"integer"),t.integer=u;function l(d){return e.call(d)==="[object Number]"&&0<=d&&d<=2147483647}o(l,"uinteger"),t.uinteger=l;function f(d){return e.call(d)==="[object Function]"}o(f,"func"),t.func=f;function g(d){return d!==null&&typeof d=="object"}o(g,"objectLiteral"),t.objectLiteral=g;function m(d,p){return Array.isArray(d)&&d.every(p)}o(m,"typedArray"),t.typedArray=m})(y||(y={}))});var Te=T(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.ProtocolNotificationType=et.ProtocolNotificationType0=et.ProtocolRequestType=et.ProtocolRequestType0=et.RegistrationType=et.MessageDirection=void 0;var cr=Mn(),ip;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(ip=et.MessageDirection||(et.MessageDirection={}));var pu=class{static{o(this,"RegistrationType")}constructor(e){this.method=e}};et.RegistrationType=pu;var vu=class extends cr.RequestType0{static{o(this,"ProtocolRequestType0")}constructor(e){super(e)}};et.ProtocolRequestType0=vu;var Ru=class extends cr.RequestType{static{o(this,"ProtocolRequestType")}constructor(e){super(e,cr.ParameterStructures.byName)}};et.ProtocolRequestType=Ru;var _u=class extends cr.NotificationType0{static{o(this,"ProtocolNotificationType0")}constructor(e){super(e)}};et.ProtocolNotificationType0=_u;var bu=class extends cr.NotificationType{static{o(this,"ProtocolNotificationType")}constructor(e){super(e,cr.ParameterStructures.byName)}};et.ProtocolNotificationType=bu});var oa=T(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.objectLiteral=we.typedArray=we.stringArray=we.array=we.func=we.error=we.number=we.string=we.boolean=void 0;function ap(t){return t===!0||t===!1}o(ap,"boolean");we.boolean=ap;function xd(t){return typeof t=="string"||t instanceof String}o(xd,"string");we.string=xd;function sp(t){return typeof t=="number"||t instanceof Number}o(sp,"number");we.number=sp;function op(t){return t instanceof Error}o(op,"error");we.error=op;function cp(t){return typeof t=="function"}o(cp,"func");we.func=cp;function Ld(t){return Array.isArray(t)}o(Ld,"array");we.array=Ld;function up(t){return Ld(t)&&t.every(e=>xd(e))}o(up,"stringArray");we.stringArray=up;function lp(t,e){return Array.isArray(t)&&t.every(e)}o(lp,"typedArray");we.typedArray=lp;function gp(t){return t!==null&&typeof t=="object"}o(gp,"objectLiteral");we.objectLiteral=gp});var qd=T(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.ImplementationRequest=void 0;var Fd=Te(),dp;(function(t){t.method="textDocument/implementation",t.messageDirection=Fd.MessageDirection.clientToServer,t.type=new Fd.ProtocolRequestType(t.method)})(dp=Gr.ImplementationRequest||(Gr.ImplementationRequest={}))});var Ud=T(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.TypeDefinitionRequest=void 0;var Hd=Te(),fp;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=Hd.MessageDirection.clientToServer,t.type=new Hd.ProtocolRequestType(t.method)})(fp=Br.TypeDefinitionRequest||(Br.TypeDefinitionRequest={}))});var jd=T(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.DidChangeWorkspaceFoldersNotification=gn.WorkspaceFoldersRequest=void 0;var ca=Te(),hp;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=ca.MessageDirection.serverToClient,t.type=new ca.ProtocolRequestType0(t.method)})(hp=gn.WorkspaceFoldersRequest||(gn.WorkspaceFoldersRequest={}));var mp;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=ca.MessageDirection.clientToServer,t.type=new ca.ProtocolNotificationType(t.method)})(mp=gn.DidChangeWorkspaceFoldersNotification||(gn.DidChangeWorkspaceFoldersNotification={}))});var Wd=T(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.ConfigurationRequest=void 0;var Vd=Te(),pp;(function(t){t.method="workspace/configuration",t.messageDirection=Vd.MessageDirection.serverToClient,t.type=new Vd.ProtocolRequestType(t.method)})(pp=Kr.ConfigurationRequest||(Kr.ConfigurationRequest={}))});var Gd=T(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.ColorPresentationRequest=dn.DocumentColorRequest=void 0;var ua=Te(),vp;(function(t){t.method="textDocument/documentColor",t.messageDirection=ua.MessageDirection.clientToServer,t.type=new ua.ProtocolRequestType(t.method)})(vp=dn.DocumentColorRequest||(dn.DocumentColorRequest={}));var Rp;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=ua.MessageDirection.clientToServer,t.type=new ua.ProtocolRequestType(t.method)})(Rp=dn.ColorPresentationRequest||(dn.ColorPresentationRequest={}))});var Kd=T($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.FoldingRangeRequest=void 0;var Bd=Te(),_p;(function(t){t.method="textDocument/foldingRange",t.messageDirection=Bd.MessageDirection.clientToServer,t.type=new Bd.ProtocolRequestType(t.method)})(_p=$r.FoldingRangeRequest||($r.FoldingRangeRequest={}))});var Yd=T(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.DeclarationRequest=void 0;var $d=Te(),bp;(function(t){t.method="textDocument/declaration",t.messageDirection=$d.MessageDirection.clientToServer,t.type=new $d.ProtocolRequestType(t.method)})(bp=Yr.DeclarationRequest||(Yr.DeclarationRequest={}))});var Jd=T(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.SelectionRangeRequest=void 0;var zd=Te(),yp;(function(t){t.method="textDocument/selectionRange",t.messageDirection=zd.MessageDirection.clientToServer,t.type=new zd.ProtocolRequestType(t.method)})(yp=zr.SelectionRangeRequest||(zr.SelectionRangeRequest={}))});var Qd=T(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.WorkDoneProgressCancelNotification=Et.WorkDoneProgressCreateRequest=Et.WorkDoneProgress=void 0;var Dp=Mn(),la=Te(),kp;(function(t){t.type=new Dp.ProgressType;function e(n){return n===t.type}o(e,"is"),t.is=e})(kp=Et.WorkDoneProgress||(Et.WorkDoneProgress={}));var Sp;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=la.MessageDirection.serverToClient,t.type=new la.ProtocolRequestType(t.method)})(Sp=Et.WorkDoneProgressCreateRequest||(Et.WorkDoneProgressCreateRequest={}));var Ap;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=la.MessageDirection.clientToServer,t.type=new la.ProtocolNotificationType(t.method)})(Ap=Et.WorkDoneProgressCancelNotification||(Et.WorkDoneProgressCancelNotification={}))});var Xd=T(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.CallHierarchyOutgoingCallsRequest=Ct.CallHierarchyIncomingCallsRequest=Ct.CallHierarchyPrepareRequest=void 0;var ur=Te(),Tp;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=ur.MessageDirection.clientToServer,t.type=new ur.ProtocolRequestType(t.method)})(Tp=Ct.CallHierarchyPrepareRequest||(Ct.CallHierarchyPrepareRequest={}));var Ep;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=ur.MessageDirection.clientToServer,t.type=new ur.ProtocolRequestType(t.method)})(Ep=Ct.CallHierarchyIncomingCallsRequest||(Ct.CallHierarchyIncomingCallsRequest={}));var Cp;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=ur.MessageDirection.clientToServer,t.type=new ur.ProtocolRequestType(t.method)})(Cp=Ct.CallHierarchyOutgoingCallsRequest||(Ct.CallHierarchyOutgoingCallsRequest={}))});var Zd=T(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.SemanticTokensRefreshRequest=xe.SemanticTokensRangeRequest=xe.SemanticTokensDeltaRequest=xe.SemanticTokensRequest=xe.SemanticTokensRegistrationType=xe.TokenFormat=void 0;var en=Te(),Pp;(function(t){t.Relative="relative"})(Pp=xe.TokenFormat||(xe.TokenFormat={}));var ga;(function(t){t.method="textDocument/semanticTokens",t.type=new en.RegistrationType(t.method)})(ga=xe.SemanticTokensRegistrationType||(xe.SemanticTokensRegistrationType={}));var Ip;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=en.MessageDirection.clientToServer,t.type=new en.ProtocolRequestType(t.method),t.registrationMethod=ga.method})(Ip=xe.SemanticTokensRequest||(xe.SemanticTokensRequest={}));var Np;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=en.MessageDirection.clientToServer,t.type=new en.ProtocolRequestType(t.method),t.registrationMethod=ga.method})(Np=xe.SemanticTokensDeltaRequest||(xe.SemanticTokensDeltaRequest={}));var Mp;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=en.MessageDirection.clientToServer,t.type=new en.ProtocolRequestType(t.method),t.registrationMethod=ga.method})(Mp=xe.SemanticTokensRangeRequest||(xe.SemanticTokensRangeRequest={}));var Op;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=en.MessageDirection.clientToServer,t.type=new en.ProtocolRequestType0(t.method)})(Op=xe.SemanticTokensRefreshRequest||(xe.SemanticTokensRefreshRequest={}))});var tf=T(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.ShowDocumentRequest=void 0;var ef=Te(),wp;(function(t){t.method="window/showDocument",t.messageDirection=ef.MessageDirection.serverToClient,t.type=new ef.ProtocolRequestType(t.method)})(wp=Jr.ShowDocumentRequest||(Jr.ShowDocumentRequest={}))});var rf=T(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.LinkedEditingRangeRequest=void 0;var nf=Te(),xp;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=nf.MessageDirection.clientToServer,t.type=new nf.ProtocolRequestType(t.method)})(xp=Qr.LinkedEditingRangeRequest||(Qr.LinkedEditingRangeRequest={}))});var af=T(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.WillDeleteFilesRequest=Ee.DidDeleteFilesNotification=Ee.DidRenameFilesNotification=Ee.WillRenameFilesRequest=Ee.DidCreateFilesNotification=Ee.WillCreateFilesRequest=Ee.FileOperationPatternKind=void 0;var vt=Te(),Lp;(function(t){t.file="file",t.folder="folder"})(Lp=Ee.FileOperationPatternKind||(Ee.FileOperationPatternKind={}));var Fp;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolRequestType(t.method)})(Fp=Ee.WillCreateFilesRequest||(Ee.WillCreateFilesRequest={}));var qp;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolNotificationType(t.method)})(qp=Ee.DidCreateFilesNotification||(Ee.DidCreateFilesNotification={}));var Hp;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolRequestType(t.method)})(Hp=Ee.WillRenameFilesRequest||(Ee.WillRenameFilesRequest={}));var Up;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolNotificationType(t.method)})(Up=Ee.DidRenameFilesNotification||(Ee.DidRenameFilesNotification={}));var jp;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolNotificationType(t.method)})(jp=Ee.DidDeleteFilesNotification||(Ee.DidDeleteFilesNotification={}));var Vp;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolRequestType(t.method)})(Vp=Ee.WillDeleteFilesRequest||(Ee.WillDeleteFilesRequest={}))});var of=T(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.MonikerRequest=Pt.MonikerKind=Pt.UniquenessLevel=void 0;var sf=Te(),Wp;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Wp=Pt.UniquenessLevel||(Pt.UniquenessLevel={}));var Gp;(function(t){t.$import="import",t.$export="export",t.local="local"})(Gp=Pt.MonikerKind||(Pt.MonikerKind={}));var Bp;(function(t){t.method="textDocument/moniker",t.messageDirection=sf.MessageDirection.clientToServer,t.type=new sf.ProtocolRequestType(t.method)})(Bp=Pt.MonikerRequest||(Pt.MonikerRequest={}))});var cf=T(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.TypeHierarchySubtypesRequest=It.TypeHierarchySupertypesRequest=It.TypeHierarchyPrepareRequest=void 0;var lr=Te(),Kp;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=lr.MessageDirection.clientToServer,t.type=new lr.ProtocolRequestType(t.method)})(Kp=It.TypeHierarchyPrepareRequest||(It.TypeHierarchyPrepareRequest={}));var $p;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=lr.MessageDirection.clientToServer,t.type=new lr.ProtocolRequestType(t.method)})($p=It.TypeHierarchySupertypesRequest||(It.TypeHierarchySupertypesRequest={}));var Yp;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=lr.MessageDirection.clientToServer,t.type=new lr.ProtocolRequestType(t.method)})(Yp=It.TypeHierarchySubtypesRequest||(It.TypeHierarchySubtypesRequest={}))});var uf=T(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.InlineValueRefreshRequest=fn.InlineValueRequest=void 0;var da=Te(),zp;(function(t){t.method="textDocument/inlineValue",t.messageDirection=da.MessageDirection.clientToServer,t.type=new da.ProtocolRequestType(t.method)})(zp=fn.InlineValueRequest||(fn.InlineValueRequest={}));var Jp;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=da.MessageDirection.clientToServer,t.type=new da.ProtocolRequestType0(t.method)})(Jp=fn.InlineValueRefreshRequest||(fn.InlineValueRefreshRequest={}))});var lf=T(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.InlayHintRefreshRequest=Nt.InlayHintResolveRequest=Nt.InlayHintRequest=void 0;var gr=Te(),Qp;(function(t){t.method="textDocument/inlayHint",t.messageDirection=gr.MessageDirection.clientToServer,t.type=new gr.ProtocolRequestType(t.method)})(Qp=Nt.InlayHintRequest||(Nt.InlayHintRequest={}));var Xp;(function(t){t.method="inlayHint/resolve",t.messageDirection=gr.MessageDirection.clientToServer,t.type=new gr.ProtocolRequestType(t.method)})(Xp=Nt.InlayHintResolveRequest||(Nt.InlayHintResolveRequest={}));var Zp;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=gr.MessageDirection.clientToServer,t.type=new gr.ProtocolRequestType0(t.method)})(Zp=Nt.InlayHintRefreshRequest||(Nt.InlayHintRefreshRequest={}))});var df=T(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.DiagnosticRefreshRequest=Ge.WorkspaceDiagnosticRequest=Ge.DocumentDiagnosticRequest=Ge.DocumentDiagnosticReportKind=Ge.DiagnosticServerCancellationData=void 0;var gf=Mn(),ev=oa(),dr=Te(),tv;(function(t){function e(n){let r=n;return r&&ev.boolean(r.retriggerRequest)}o(e,"is"),t.is=e})(tv=Ge.DiagnosticServerCancellationData||(Ge.DiagnosticServerCancellationData={}));var nv;(function(t){t.Full="full",t.Unchanged="unchanged"})(nv=Ge.DocumentDiagnosticReportKind||(Ge.DocumentDiagnosticReportKind={}));var rv;(function(t){t.method="textDocument/diagnostic",t.messageDirection=dr.MessageDirection.clientToServer,t.type=new dr.ProtocolRequestType(t.method),t.partialResult=new gf.ProgressType})(rv=Ge.DocumentDiagnosticRequest||(Ge.DocumentDiagnosticRequest={}));var iv;(function(t){t.method="workspace/diagnostic",t.messageDirection=dr.MessageDirection.clientToServer,t.type=new dr.ProtocolRequestType(t.method),t.partialResult=new gf.ProgressType})(iv=Ge.WorkspaceDiagnosticRequest||(Ge.WorkspaceDiagnosticRequest={}));var av;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=dr.MessageDirection.clientToServer,t.type=new dr.ProtocolRequestType0(t.method)})(av=Ge.DiagnosticRefreshRequest||(Ge.DiagnosticRefreshRequest={}))});var mf=T(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.DidCloseNotebookDocumentNotification=re.DidSaveNotebookDocumentNotification=re.DidChangeNotebookDocumentNotification=re.NotebookCellArrayChange=re.DidOpenNotebookDocumentNotification=re.NotebookDocumentSyncRegistrationType=re.NotebookDocument=re.NotebookCell=re.ExecutionSummary=re.NotebookCellKind=void 0;var Xr=(sa(),z(aa)),Mt=oa(),Ut=Te(),ff;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}o(e,"is"),t.is=e})(ff=re.NotebookCellKind||(re.NotebookCellKind={}));var hf;(function(t){function e(i,a){let s={executionOrder:i};return(a===!0||a===!1)&&(s.success=a),s}o(e,"create"),t.create=e;function n(i){let a=i;return Mt.objectLiteral(a)&&Xr.uinteger.is(a.executionOrder)&&(a.success===void 0||Mt.boolean(a.success))}o(n,"is"),t.is=n;function r(i,a){return i===a?!0:i==null||a===null||a===void 0?!1:i.executionOrder===a.executionOrder&&i.success===a.success}o(r,"equals"),t.equals=r})(hf=re.ExecutionSummary||(re.ExecutionSummary={}));var yu;(function(t){function e(a,s){return{kind:a,document:s}}o(e,"create"),t.create=e;function n(a){let s=a;return Mt.objectLiteral(s)&&ff.is(s.kind)&&Xr.DocumentUri.is(s.document)&&(s.metadata===void 0||Mt.objectLiteral(s.metadata))}o(n,"is"),t.is=n;function r(a,s){let c=new Set;return a.document!==s.document&&c.add("document"),a.kind!==s.kind&&c.add("kind"),a.executionSummary!==s.executionSummary&&c.add("executionSummary"),(a.metadata!==void 0||s.metadata!==void 0)&&!i(a.metadata,s.metadata)&&c.add("metadata"),(a.executionSummary!==void 0||s.executionSummary!==void 0)&&!hf.equals(a.executionSummary,s.executionSummary)&&c.add("executionSummary"),c}o(r,"diff"),t.diff=r;function i(a,s){if(a===s)return!0;if(a==null||s===null||s===void 0||typeof a!=typeof s||typeof a!="object")return!1;let c=Array.isArray(a),u=Array.isArray(s);if(c!==u)return!1;if(c&&u){if(a.length!==s.length)return!1;for(let l=0;l<a.length;l++)if(!i(a[l],s[l]))return!1}if(Mt.objectLiteral(a)&&Mt.objectLiteral(s)){let l=Object.keys(a),f=Object.keys(s);if(l.length!==f.length||(l.sort(),f.sort(),!i(l,f)))return!1;for(let g=0;g<l.length;g++){let m=l[g];if(!i(a[m],s[m]))return!1}}return!0}o(i,"equalsMetadata")})(yu=re.NotebookCell||(re.NotebookCell={}));var sv;(function(t){function e(r,i,a,s){return{uri:r,notebookType:i,version:a,cells:s}}o(e,"create"),t.create=e;function n(r){let i=r;return Mt.objectLiteral(i)&&Mt.string(i.uri)&&Xr.integer.is(i.version)&&Mt.typedArray(i.cells,yu.is)}o(n,"is"),t.is=n})(sv=re.NotebookDocument||(re.NotebookDocument={}));var Zr;(function(t){t.method="notebookDocument/sync",t.messageDirection=Ut.MessageDirection.clientToServer,t.type=new Ut.RegistrationType(t.method)})(Zr=re.NotebookDocumentSyncRegistrationType||(re.NotebookDocumentSyncRegistrationType={}));var ov;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=Ut.MessageDirection.clientToServer,t.type=new Ut.ProtocolNotificationType(t.method),t.registrationMethod=Zr.method})(ov=re.DidOpenNotebookDocumentNotification||(re.DidOpenNotebookDocumentNotification={}));var cv;(function(t){function e(r){let i=r;return Mt.objectLiteral(i)&&Xr.uinteger.is(i.start)&&Xr.uinteger.is(i.deleteCount)&&(i.cells===void 0||Mt.typedArray(i.cells,yu.is))}o(e,"is"),t.is=e;function n(r,i,a){let s={start:r,deleteCount:i};return a!==void 0&&(s.cells=a),s}o(n,"create"),t.create=n})(cv=re.NotebookCellArrayChange||(re.NotebookCellArrayChange={}));var uv;(function(t){t.method="notebookDocument/didChange",t.messageDirection=Ut.MessageDirection.clientToServer,t.type=new Ut.ProtocolNotificationType(t.method),t.registrationMethod=Zr.method})(uv=re.DidChangeNotebookDocumentNotification||(re.DidChangeNotebookDocumentNotification={}));var lv;(function(t){t.method="notebookDocument/didSave",t.messageDirection=Ut.MessageDirection.clientToServer,t.type=new Ut.ProtocolNotificationType(t.method),t.registrationMethod=Zr.method})(lv=re.DidSaveNotebookDocumentNotification||(re.DidSaveNotebookDocumentNotification={}));var gv;(function(t){t.method="notebookDocument/didClose",t.messageDirection=Ut.MessageDirection.clientToServer,t.type=new Ut.ProtocolNotificationType(t.method),t.registrationMethod=Zr.method})(gv=re.DidCloseNotebookDocumentNotification||(re.DidCloseNotebookDocumentNotification={}))});var Sf=T(h=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});h.WorkspaceSymbolRequest=h.CodeActionResolveRequest=h.CodeActionRequest=h.DocumentSymbolRequest=h.DocumentHighlightRequest=h.ReferencesRequest=h.DefinitionRequest=h.SignatureHelpRequest=h.SignatureHelpTriggerKind=h.HoverRequest=h.CompletionResolveRequest=h.CompletionRequest=h.CompletionTriggerKind=h.PublishDiagnosticsNotification=h.WatchKind=h.RelativePattern=h.FileChangeType=h.DidChangeWatchedFilesNotification=h.WillSaveTextDocumentWaitUntilRequest=h.WillSaveTextDocumentNotification=h.TextDocumentSaveReason=h.DidSaveTextDocumentNotification=h.DidCloseTextDocumentNotification=h.DidChangeTextDocumentNotification=h.TextDocumentContentChangeEvent=h.DidOpenTextDocumentNotification=h.TextDocumentSyncKind=h.TelemetryEventNotification=h.LogMessageNotification=h.ShowMessageRequest=h.ShowMessageNotification=h.MessageType=h.DidChangeConfigurationNotification=h.ExitNotification=h.ShutdownRequest=h.InitializedNotification=h.InitializeErrorCodes=h.InitializeRequest=h.WorkDoneProgressOptions=h.TextDocumentRegistrationOptions=h.StaticRegistrationOptions=h.PositionEncodingKind=h.FailureHandlingKind=h.ResourceOperationKind=h.UnregistrationRequest=h.RegistrationRequest=h.DocumentSelector=h.NotebookCellTextDocumentFilter=h.NotebookDocumentFilter=h.TextDocumentFilter=void 0;h.TypeHierarchySubtypesRequest=h.TypeHierarchyPrepareRequest=h.MonikerRequest=h.MonikerKind=h.UniquenessLevel=h.WillDeleteFilesRequest=h.DidDeleteFilesNotification=h.WillRenameFilesRequest=h.DidRenameFilesNotification=h.WillCreateFilesRequest=h.DidCreateFilesNotification=h.FileOperationPatternKind=h.LinkedEditingRangeRequest=h.ShowDocumentRequest=h.SemanticTokensRegistrationType=h.SemanticTokensRefreshRequest=h.SemanticTokensRangeRequest=h.SemanticTokensDeltaRequest=h.SemanticTokensRequest=h.TokenFormat=h.CallHierarchyPrepareRequest=h.CallHierarchyOutgoingCallsRequest=h.CallHierarchyIncomingCallsRequest=h.WorkDoneProgressCancelNotification=h.WorkDoneProgressCreateRequest=h.WorkDoneProgress=h.SelectionRangeRequest=h.DeclarationRequest=h.FoldingRangeRequest=h.ColorPresentationRequest=h.DocumentColorRequest=h.ConfigurationRequest=h.DidChangeWorkspaceFoldersNotification=h.WorkspaceFoldersRequest=h.TypeDefinitionRequest=h.ImplementationRequest=h.ApplyWorkspaceEditRequest=h.ExecuteCommandRequest=h.PrepareRenameRequest=h.RenameRequest=h.PrepareSupportDefaultBehavior=h.DocumentOnTypeFormattingRequest=h.DocumentRangeFormattingRequest=h.DocumentFormattingRequest=h.DocumentLinkResolveRequest=h.DocumentLinkRequest=h.CodeLensRefreshRequest=h.CodeLensResolveRequest=h.CodeLensRequest=h.WorkspaceSymbolResolveRequest=void 0;h.DidCloseNotebookDocumentNotification=h.DidSaveNotebookDocumentNotification=h.DidChangeNotebookDocumentNotification=h.NotebookCellArrayChange=h.DidOpenNotebookDocumentNotification=h.NotebookDocumentSyncRegistrationType=h.NotebookDocument=h.NotebookCell=h.ExecutionSummary=h.NotebookCellKind=h.DiagnosticRefreshRequest=h.WorkspaceDiagnosticRequest=h.DocumentDiagnosticRequest=h.DocumentDiagnosticReportKind=h.DiagnosticServerCancellationData=h.InlayHintRefreshRequest=h.InlayHintResolveRequest=h.InlayHintRequest=h.InlineValueRefreshRequest=h.InlineValueRequest=h.TypeHierarchySupertypesRequest=void 0;var P=Te(),pf=(sa(),z(aa)),Be=oa(),dv=qd();Object.defineProperty(h,"ImplementationRequest",{enumerable:!0,get:o(function(){return dv.ImplementationRequest},"get")});var fv=Ud();Object.defineProperty(h,"TypeDefinitionRequest",{enumerable:!0,get:o(function(){return fv.TypeDefinitionRequest},"get")});var vf=jd();Object.defineProperty(h,"WorkspaceFoldersRequest",{enumerable:!0,get:o(function(){return vf.WorkspaceFoldersRequest},"get")});Object.defineProperty(h,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:o(function(){return vf.DidChangeWorkspaceFoldersNotification},"get")});var hv=Wd();Object.defineProperty(h,"ConfigurationRequest",{enumerable:!0,get:o(function(){return hv.ConfigurationRequest},"get")});var Rf=Gd();Object.defineProperty(h,"DocumentColorRequest",{enumerable:!0,get:o(function(){return Rf.DocumentColorRequest},"get")});Object.defineProperty(h,"ColorPresentationRequest",{enumerable:!0,get:o(function(){return Rf.ColorPresentationRequest},"get")});var mv=Kd();Object.defineProperty(h,"FoldingRangeRequest",{enumerable:!0,get:o(function(){return mv.FoldingRangeRequest},"get")});var pv=Yd();Object.defineProperty(h,"DeclarationRequest",{enumerable:!0,get:o(function(){return pv.DeclarationRequest},"get")});var vv=Jd();Object.defineProperty(h,"SelectionRangeRequest",{enumerable:!0,get:o(function(){return vv.SelectionRangeRequest},"get")});var Du=Qd();Object.defineProperty(h,"WorkDoneProgress",{enumerable:!0,get:o(function(){return Du.WorkDoneProgress},"get")});Object.defineProperty(h,"WorkDoneProgressCreateRequest",{enumerable:!0,get:o(function(){return Du.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(h,"WorkDoneProgressCancelNotification",{enumerable:!0,get:o(function(){return Du.WorkDoneProgressCancelNotification},"get")});var ku=Xd();Object.defineProperty(h,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:o(function(){return ku.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(h,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:o(function(){return ku.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(h,"CallHierarchyPrepareRequest",{enumerable:!0,get:o(function(){return ku.CallHierarchyPrepareRequest},"get")});var fr=Zd();Object.defineProperty(h,"TokenFormat",{enumerable:!0,get:o(function(){return fr.TokenFormat},"get")});Object.defineProperty(h,"SemanticTokensRequest",{enumerable:!0,get:o(function(){return fr.SemanticTokensRequest},"get")});Object.defineProperty(h,"SemanticTokensDeltaRequest",{enumerable:!0,get:o(function(){return fr.SemanticTokensDeltaRequest},"get")});Object.defineProperty(h,"SemanticTokensRangeRequest",{enumerable:!0,get:o(function(){return fr.SemanticTokensRangeRequest},"get")});Object.defineProperty(h,"SemanticTokensRefreshRequest",{enumerable:!0,get:o(function(){return fr.SemanticTokensRefreshRequest},"get")});Object.defineProperty(h,"SemanticTokensRegistrationType",{enumerable:!0,get:o(function(){return fr.SemanticTokensRegistrationType},"get")});var Rv=tf();Object.defineProperty(h,"ShowDocumentRequest",{enumerable:!0,get:o(function(){return Rv.ShowDocumentRequest},"get")});var _v=rf();Object.defineProperty(h,"LinkedEditingRangeRequest",{enumerable:!0,get:o(function(){return _v.LinkedEditingRangeRequest},"get")});var xn=af();Object.defineProperty(h,"FileOperationPatternKind",{enumerable:!0,get:o(function(){return xn.FileOperationPatternKind},"get")});Object.defineProperty(h,"DidCreateFilesNotification",{enumerable:!0,get:o(function(){return xn.DidCreateFilesNotification},"get")});Object.defineProperty(h,"WillCreateFilesRequest",{enumerable:!0,get:o(function(){return xn.WillCreateFilesRequest},"get")});Object.defineProperty(h,"DidRenameFilesNotification",{enumerable:!0,get:o(function(){return xn.DidRenameFilesNotification},"get")});Object.defineProperty(h,"WillRenameFilesRequest",{enumerable:!0,get:o(function(){return xn.WillRenameFilesRequest},"get")});Object.defineProperty(h,"DidDeleteFilesNotification",{enumerable:!0,get:o(function(){return xn.DidDeleteFilesNotification},"get")});Object.defineProperty(h,"WillDeleteFilesRequest",{enumerable:!0,get:o(function(){return xn.WillDeleteFilesRequest},"get")});var Su=of();Object.defineProperty(h,"UniquenessLevel",{enumerable:!0,get:o(function(){return Su.UniquenessLevel},"get")});Object.defineProperty(h,"MonikerKind",{enumerable:!0,get:o(function(){return Su.MonikerKind},"get")});Object.defineProperty(h,"MonikerRequest",{enumerable:!0,get:o(function(){return Su.MonikerRequest},"get")});var Au=cf();Object.defineProperty(h,"TypeHierarchyPrepareRequest",{enumerable:!0,get:o(function(){return Au.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(h,"TypeHierarchySubtypesRequest",{enumerable:!0,get:o(function(){return Au.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(h,"TypeHierarchySupertypesRequest",{enumerable:!0,get:o(function(){return Au.TypeHierarchySupertypesRequest},"get")});var _f=uf();Object.defineProperty(h,"InlineValueRequest",{enumerable:!0,get:o(function(){return _f.InlineValueRequest},"get")});Object.defineProperty(h,"InlineValueRefreshRequest",{enumerable:!0,get:o(function(){return _f.InlineValueRefreshRequest},"get")});var Tu=lf();Object.defineProperty(h,"InlayHintRequest",{enumerable:!0,get:o(function(){return Tu.InlayHintRequest},"get")});Object.defineProperty(h,"InlayHintResolveRequest",{enumerable:!0,get:o(function(){return Tu.InlayHintResolveRequest},"get")});Object.defineProperty(h,"InlayHintRefreshRequest",{enumerable:!0,get:o(function(){return Tu.InlayHintRefreshRequest},"get")});var ei=df();Object.defineProperty(h,"DiagnosticServerCancellationData",{enumerable:!0,get:o(function(){return ei.DiagnosticServerCancellationData},"get")});Object.defineProperty(h,"DocumentDiagnosticReportKind",{enumerable:!0,get:o(function(){return ei.DocumentDiagnosticReportKind},"get")});Object.defineProperty(h,"DocumentDiagnosticRequest",{enumerable:!0,get:o(function(){return ei.DocumentDiagnosticRequest},"get")});Object.defineProperty(h,"WorkspaceDiagnosticRequest",{enumerable:!0,get:o(function(){return ei.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(h,"DiagnosticRefreshRequest",{enumerable:!0,get:o(function(){return ei.DiagnosticRefreshRequest},"get")});var jt=mf();Object.defineProperty(h,"NotebookCellKind",{enumerable:!0,get:o(function(){return jt.NotebookCellKind},"get")});Object.defineProperty(h,"ExecutionSummary",{enumerable:!0,get:o(function(){return jt.ExecutionSummary},"get")});Object.defineProperty(h,"NotebookCell",{enumerable:!0,get:o(function(){return jt.NotebookCell},"get")});Object.defineProperty(h,"NotebookDocument",{enumerable:!0,get:o(function(){return jt.NotebookDocument},"get")});Object.defineProperty(h,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:o(function(){return jt.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(h,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:o(function(){return jt.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(h,"NotebookCellArrayChange",{enumerable:!0,get:o(function(){return jt.NotebookCellArrayChange},"get")});Object.defineProperty(h,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:o(function(){return jt.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(h,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:o(function(){return jt.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(h,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:o(function(){return jt.DidCloseNotebookDocumentNotification},"get")});var bf;(function(t){function e(n){let r=n;return Be.string(r.language)||Be.string(r.scheme)||Be.string(r.pattern)}o(e,"is"),t.is=e})(bf=h.TextDocumentFilter||(h.TextDocumentFilter={}));var yf;(function(t){function e(n){let r=n;return Be.objectLiteral(r)&&(Be.string(r.notebookType)||Be.string(r.scheme)||Be.string(r.pattern))}o(e,"is"),t.is=e})(yf=h.NotebookDocumentFilter||(h.NotebookDocumentFilter={}));var Df;(function(t){function e(n){let r=n;return Be.objectLiteral(r)&&(Be.string(r.notebook)||yf.is(r.notebook))&&(r.language===void 0||Be.string(r.language))}o(e,"is"),t.is=e})(Df=h.NotebookCellTextDocumentFilter||(h.NotebookCellTextDocumentFilter={}));var kf;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Be.string(r)&&!bf.is(r)&&!Df.is(r))return!1;return!0}o(e,"is"),t.is=e})(kf=h.DocumentSelector||(h.DocumentSelector={}));var bv;(function(t){t.method="client/registerCapability",t.messageDirection=P.MessageDirection.serverToClient,t.type=new P.ProtocolRequestType(t.method)})(bv=h.RegistrationRequest||(h.RegistrationRequest={}));var yv;(function(t){t.method="client/unregisterCapability",t.messageDirection=P.MessageDirection.serverToClient,t.type=new P.ProtocolRequestType(t.method)})(yv=h.UnregistrationRequest||(h.UnregistrationRequest={}));var Dv;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Dv=h.ResourceOperationKind||(h.ResourceOperationKind={}));var kv;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(kv=h.FailureHandlingKind||(h.FailureHandlingKind={}));var Sv;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Sv=h.PositionEncodingKind||(h.PositionEncodingKind={}));var Av;(function(t){function e(n){let r=n;return r&&Be.string(r.id)&&r.id.length>0}o(e,"hasId"),t.hasId=e})(Av=h.StaticRegistrationOptions||(h.StaticRegistrationOptions={}));var Tv;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||kf.is(r.documentSelector))}o(e,"is"),t.is=e})(Tv=h.TextDocumentRegistrationOptions||(h.TextDocumentRegistrationOptions={}));var Ev;(function(t){function e(r){let i=r;return Be.objectLiteral(i)&&(i.workDoneProgress===void 0||Be.boolean(i.workDoneProgress))}o(e,"is"),t.is=e;function n(r){let i=r;return i&&Be.boolean(i.workDoneProgress)}o(n,"hasWorkDoneProgress"),t.hasWorkDoneProgress=n})(Ev=h.WorkDoneProgressOptions||(h.WorkDoneProgressOptions={}));var Cv;(function(t){t.method="initialize",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(Cv=h.InitializeRequest||(h.InitializeRequest={}));var Pv;(function(t){t.unknownProtocolVersion=1})(Pv=h.InitializeErrorCodes||(h.InitializeErrorCodes={}));var Iv;(function(t){t.method="initialized",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolNotificationType(t.method)})(Iv=h.InitializedNotification||(h.InitializedNotification={}));var Nv;(function(t){t.method="shutdown",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType0(t.method)})(Nv=h.ShutdownRequest||(h.ShutdownRequest={}));var Mv;(function(t){t.method="exit",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolNotificationType0(t.method)})(Mv=h.ExitNotification||(h.ExitNotification={}));var Ov;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolNotificationType(t.method)})(Ov=h.DidChangeConfigurationNotification||(h.DidChangeConfigurationNotification={}));var wv;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(wv=h.MessageType||(h.MessageType={}));var xv;(function(t){t.method="window/showMessage",t.messageDirection=P.MessageDirection.serverToClient,t.type=new P.ProtocolNotificationType(t.method)})(xv=h.ShowMessageNotification||(h.ShowMessageNotification={}));var Lv;(function(t){t.method="window/showMessageRequest",t.messageDirection=P.MessageDirection.serverToClient,t.type=new P.ProtocolRequestType(t.method)})(Lv=h.ShowMessageRequest||(h.ShowMessageRequest={}));var Fv;(function(t){t.method="window/logMessage",t.messageDirection=P.MessageDirection.serverToClient,t.type=new P.ProtocolNotificationType(t.method)})(Fv=h.LogMessageNotification||(h.LogMessageNotification={}));var qv;(function(t){t.method="telemetry/event",t.messageDirection=P.MessageDirection.serverToClient,t.type=new P.ProtocolNotificationType(t.method)})(qv=h.TelemetryEventNotification||(h.TelemetryEventNotification={}));var Hv;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Hv=h.TextDocumentSyncKind||(h.TextDocumentSyncKind={}));var Uv;(function(t){t.method="textDocument/didOpen",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolNotificationType(t.method)})(Uv=h.DidOpenTextDocumentNotification||(h.DidOpenTextDocumentNotification={}));var jv;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}o(e,"isIncremental"),t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}o(n,"isFull"),t.isFull=n})(jv=h.TextDocumentContentChangeEvent||(h.TextDocumentContentChangeEvent={}));var Vv;(function(t){t.method="textDocument/didChange",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolNotificationType(t.method)})(Vv=h.DidChangeTextDocumentNotification||(h.DidChangeTextDocumentNotification={}));var Wv;(function(t){t.method="textDocument/didClose",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolNotificationType(t.method)})(Wv=h.DidCloseTextDocumentNotification||(h.DidCloseTextDocumentNotification={}));var Gv;(function(t){t.method="textDocument/didSave",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolNotificationType(t.method)})(Gv=h.DidSaveTextDocumentNotification||(h.DidSaveTextDocumentNotification={}));var Bv;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(Bv=h.TextDocumentSaveReason||(h.TextDocumentSaveReason={}));var Kv;(function(t){t.method="textDocument/willSave",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolNotificationType(t.method)})(Kv=h.WillSaveTextDocumentNotification||(h.WillSaveTextDocumentNotification={}));var $v;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})($v=h.WillSaveTextDocumentWaitUntilRequest||(h.WillSaveTextDocumentWaitUntilRequest={}));var Yv;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolNotificationType(t.method)})(Yv=h.DidChangeWatchedFilesNotification||(h.DidChangeWatchedFilesNotification={}));var zv;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(zv=h.FileChangeType||(h.FileChangeType={}));var Jv;(function(t){function e(n){let r=n;return Be.objectLiteral(r)&&(pf.URI.is(r.baseUri)||pf.WorkspaceFolder.is(r.baseUri))&&Be.string(r.pattern)}o(e,"is"),t.is=e})(Jv=h.RelativePattern||(h.RelativePattern={}));var Qv;(function(t){t.Create=1,t.Change=2,t.Delete=4})(Qv=h.WatchKind||(h.WatchKind={}));var Xv;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=P.MessageDirection.serverToClient,t.type=new P.ProtocolNotificationType(t.method)})(Xv=h.PublishDiagnosticsNotification||(h.PublishDiagnosticsNotification={}));var Zv;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(Zv=h.CompletionTriggerKind||(h.CompletionTriggerKind={}));var eR;(function(t){t.method="textDocument/completion",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(eR=h.CompletionRequest||(h.CompletionRequest={}));var tR;(function(t){t.method="completionItem/resolve",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(tR=h.CompletionResolveRequest||(h.CompletionResolveRequest={}));var nR;(function(t){t.method="textDocument/hover",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(nR=h.HoverRequest||(h.HoverRequest={}));var rR;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(rR=h.SignatureHelpTriggerKind||(h.SignatureHelpTriggerKind={}));var iR;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(iR=h.SignatureHelpRequest||(h.SignatureHelpRequest={}));var aR;(function(t){t.method="textDocument/definition",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(aR=h.DefinitionRequest||(h.DefinitionRequest={}));var sR;(function(t){t.method="textDocument/references",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(sR=h.ReferencesRequest||(h.ReferencesRequest={}));var oR;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(oR=h.DocumentHighlightRequest||(h.DocumentHighlightRequest={}));var cR;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(cR=h.DocumentSymbolRequest||(h.DocumentSymbolRequest={}));var uR;(function(t){t.method="textDocument/codeAction",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(uR=h.CodeActionRequest||(h.CodeActionRequest={}));var lR;(function(t){t.method="codeAction/resolve",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(lR=h.CodeActionResolveRequest||(h.CodeActionResolveRequest={}));var gR;(function(t){t.method="workspace/symbol",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(gR=h.WorkspaceSymbolRequest||(h.WorkspaceSymbolRequest={}));var dR;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(dR=h.WorkspaceSymbolResolveRequest||(h.WorkspaceSymbolResolveRequest={}));var fR;(function(t){t.method="textDocument/codeLens",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(fR=h.CodeLensRequest||(h.CodeLensRequest={}));var hR;(function(t){t.method="codeLens/resolve",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(hR=h.CodeLensResolveRequest||(h.CodeLensResolveRequest={}));var mR;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=P.MessageDirection.serverToClient,t.type=new P.ProtocolRequestType0(t.method)})(mR=h.CodeLensRefreshRequest||(h.CodeLensRefreshRequest={}));var pR;(function(t){t.method="textDocument/documentLink",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(pR=h.DocumentLinkRequest||(h.DocumentLinkRequest={}));var vR;(function(t){t.method="documentLink/resolve",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(vR=h.DocumentLinkResolveRequest||(h.DocumentLinkResolveRequest={}));var RR;(function(t){t.method="textDocument/formatting",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(RR=h.DocumentFormattingRequest||(h.DocumentFormattingRequest={}));var _R;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(_R=h.DocumentRangeFormattingRequest||(h.DocumentRangeFormattingRequest={}));var bR;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(bR=h.DocumentOnTypeFormattingRequest||(h.DocumentOnTypeFormattingRequest={}));var yR;(function(t){t.Identifier=1})(yR=h.PrepareSupportDefaultBehavior||(h.PrepareSupportDefaultBehavior={}));var DR;(function(t){t.method="textDocument/rename",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(DR=h.RenameRequest||(h.RenameRequest={}));var kR;(function(t){t.method="textDocument/prepareRename",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(kR=h.PrepareRenameRequest||(h.PrepareRenameRequest={}));var SR;(function(t){t.method="workspace/executeCommand",t.messageDirection=P.MessageDirection.clientToServer,t.type=new P.ProtocolRequestType(t.method)})(SR=h.ExecuteCommandRequest||(h.ExecuteCommandRequest={}));var AR;(function(t){t.method="workspace/applyEdit",t.messageDirection=P.MessageDirection.serverToClient,t.type=new P.ProtocolRequestType("workspace/applyEdit")})(AR=h.ApplyWorkspaceEditRequest||(h.ApplyWorkspaceEditRequest={}))});var Tf=T(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.createProtocolConnection=void 0;var Af=Mn();function TR(t,e,n,r){return Af.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Af.createMessageConnection)(t,e,n,r)}o(TR,"createProtocolConnection");fa.createProtocolConnection=TR});var Ef=T(tt=>{"use strict";var ER=tt&&tt.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),ha=tt&&tt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&ER(e,t,n)};Object.defineProperty(tt,"__esModule",{value:!0});tt.LSPErrorCodes=tt.createProtocolConnection=void 0;ha(Mn(),tt);ha((sa(),z(aa)),tt);ha(Te(),tt);ha(Sf(),tt);var CR=Tf();Object.defineProperty(tt,"createProtocolConnection",{enumerable:!0,get:o(function(){return CR.createProtocolConnection},"get")});var PR;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(PR=tt.LSPErrorCodes||(tt.LSPErrorCodes={}))});var Fe=T(Vt=>{"use strict";var IR=Vt&&Vt.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),Cf=Vt&&Vt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&IR(e,t,n)};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.createProtocolConnection=void 0;var NR=yc();Cf(yc(),Vt);Cf(Ef(),Vt);function MR(t,e,n,r){return(0,NR.createMessageConnection)(t,e,n,r)}o(MR,"createProtocolConnection");Vt.createProtocolConnection=MR});var Eu=T(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.generateUuid=Rt.parse=Rt.isUUID=Rt.v4=Rt.empty=void 0;var ti=class{static{o(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},ni=class t extends ti{static{o(this,"V4UUID")}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}};ni._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];ni._timeHighBits=["8","9","a","b"];Rt.empty=new ti("00000000-0000-0000-0000-000000000000");function Pf(){return new ni}o(Pf,"v4");Rt.v4=Pf;var OR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function If(t){return OR.test(t)}o(If,"isUUID");Rt.isUUID=If;function wR(t){if(!If(t))throw new Error("invalid uuid");return new ti(t)}o(wR,"parse");Rt.parse=wR;function xR(){return Pf().asHex()}o(xR,"generateUuid");Rt.generateUuid=xR});var Nf=T(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.attachPartialResult=mn.ProgressFeature=mn.attachWorkDone=void 0;var hn=Fe(),LR=Eu(),Ln=class t{static{o(this,"WorkDoneProgressReporterImpl")}constructor(e,n){this._connection=e,this._token=n,t.Instances.set(this._token,this)}begin(e,n,r,i){let a={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(hn.WorkDoneProgress.type,this._token,a)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(hn.WorkDoneProgress.type,this._token,r)}done(){t.Instances.delete(this._token),this._connection.sendProgress(hn.WorkDoneProgress.type,this._token,{kind:"end"})}};Ln.Instances=new Map;var ma=class extends Ln{static{o(this,"WorkDoneProgressServerReporterImpl")}constructor(e,n){super(e,n),this._source=new hn.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},ri=class{static{o(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},pa=class extends ri{static{o(this,"NullProgressServerReporter")}constructor(){super(),this._source=new hn.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function FR(t,e){if(e===void 0||e.workDoneToken===void 0)return new ri;let n=e.workDoneToken;return delete e.workDoneToken,new Ln(t,n)}o(FR,"attachWorkDone");mn.attachWorkDone=FR;var qR=o(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(hn.WorkDoneProgressCancelNotification.type,n=>{let r=Ln.Instances.get(n.token);(r instanceof ma||r instanceof pa)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new ri:new Ln(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,LR.generateUuid)();return this.connection.sendRequest(hn.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new ma(this.connection,e))}else return Promise.resolve(new pa)}},"ProgressFeature");mn.ProgressFeature=qR;var Cu;(function(t){t.type=new hn.ProgressType})(Cu||(Cu={}));var Pu=class{static{o(this,"ResultProgressReporterImpl")}constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(Cu.type,this._token,e)}};function HR(t,e){if(e===void 0||e.partialResultToken===void 0)return;let n=e.partialResultToken;return delete e.partialResultToken,new Pu(t,n)}o(HR,"attachPartialResult");mn.attachPartialResult=HR});var Mf=T(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.ConfigurationFeature=void 0;var UR=Fe(),jR=qi(),VR=o(t=>class extends t{getConfiguration(e){return e?jR.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(UR.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");va.ConfigurationFeature=VR});var Of=T(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.WorkspaceFoldersFeature=void 0;var Ra=Fe(),WR=o(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Ra.Emitter,this.connection.onNotification(Ra.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let n=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Ra.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Ra.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");_a.WorkspaceFoldersFeature=WR});var wf=T(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.CallHierarchyFeature=void 0;var Iu=Fe(),GR=o(t=>class extends t{get callHierarchy(){return{onPrepare:o(e=>this.connection.onRequest(Iu.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),"onPrepare"),onIncomingCalls:o(e=>{let n=Iu.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onIncomingCalls"),onOutgoingCalls:o(e=>{let n=Iu.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onOutgoingCalls")}}},"CallHierarchyFeature");ba.CallHierarchyFeature=GR});var Mu=T(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.SemanticTokensBuilder=pn.SemanticTokensDiff=pn.SemanticTokensFeature=void 0;var ya=Fe(),BR=o(t=>class extends t{get semanticTokens(){return{refresh:o(()=>this.connection.sendRequest(ya.SemanticTokensRefreshRequest.type),"refresh"),on:o(e=>{let n=ya.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"on"),onDelta:o(e=>{let n=ya.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onDelta"),onRange:o(e=>{let n=ya.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onRange")}}},"SemanticTokensFeature");pn.SemanticTokensFeature=BR;var Da=class{static{o(this,"SemanticTokensDiff")}constructor(e,n){this.originalSequence=e,this.modifiedSequence=n}computeDiff(){let e=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<e){let i=e-1,a=n-1;for(;i>=r&&a>=r&&this.originalSequence[i]===this.modifiedSequence[a];)i--,a--;(i<r||a<r)&&(i++,a++);let s=i-r+1,c=this.modifiedSequence.slice(r,a+1);return c.length===1&&c[0]===this.originalSequence[i]?[{start:r,deleteCount:s-1}]:[{start:r,deleteCount:s,data:c}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};pn.SemanticTokensDiff=Da;var Nu=class{static{o(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,a){let s=e,c=n;this._dataLen>0&&(s-=this._prevLine,s===0&&(c-=this._prevChar)),this._data[this._dataLen++]=s,this._data[this._dataLen++]=c,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=a,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Da(this._prevData,this._data).computeDiff()}:this.build()}};pn.SemanticTokensBuilder=Nu});var xf=T(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.ShowDocumentFeature=void 0;var KR=Fe(),$R=o(t=>class extends t{showDocument(e){return this.connection.sendRequest(KR.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");ka.ShowDocumentFeature=$R});var Lf=T(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.FileOperationsFeature=void 0;var hr=Fe(),YR=o(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(hr.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){return this.connection.onNotification(hr.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){return this.connection.onNotification(hr.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(hr.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(hr.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(hr.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}},"FileOperationsFeature");Sa.FileOperationsFeature=YR});var Ff=T(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.LinkedEditingRangeFeature=void 0;var zR=Fe(),JR=o(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(zR.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}},"LinkedEditingRangeFeature");Aa.LinkedEditingRangeFeature=JR});var qf=T(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.TypeHierarchyFeature=void 0;var Ou=Fe(),QR=o(t=>class extends t{get typeHierarchy(){return{onPrepare:o(e=>this.connection.onRequest(Ou.TypeHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),"onPrepare"),onSupertypes:o(e=>{let n=Ou.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onSupertypes"),onSubtypes:o(e=>{let n=Ou.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onSubtypes")}}},"TypeHierarchyFeature");Ta.TypeHierarchyFeature=QR});var Uf=T(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.InlineValueFeature=void 0;var Hf=Fe(),XR=o(t=>class extends t{get inlineValue(){return{refresh:o(()=>this.connection.sendRequest(Hf.InlineValueRefreshRequest.type),"refresh"),on:o(e=>this.connection.onRequest(Hf.InlineValueRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),"on")}}},"InlineValueFeature");Ea.InlineValueFeature=XR});var jf=T(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.InlayHintFeature=void 0;var wu=Fe(),ZR=o(t=>class extends t{get inlayHint(){return{refresh:o(()=>this.connection.sendRequest(wu.InlayHintRefreshRequest.type),"refresh"),on:o(e=>this.connection.onRequest(wu.InlayHintRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),"on"),resolve:o(e=>this.connection.onRequest(wu.InlayHintResolveRequest.type,(n,r)=>e(n,r)),"resolve")}}},"InlayHintFeature");Ca.InlayHintFeature=ZR});var Vf=T(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.DiagnosticFeature=void 0;var ii=Fe(),e_=o(t=>class extends t{get diagnostics(){return{refresh:o(()=>this.connection.sendRequest(ii.DiagnosticRefreshRequest.type),"refresh"),on:o(e=>this.connection.onRequest(ii.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(ii.DocumentDiagnosticRequest.partialResult,n))),"on"),onWorkspace:o(e=>this.connection.onRequest(ii.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(ii.WorkspaceDiagnosticRequest.partialResult,n))),"onWorkspace")}}},"DiagnosticFeature");Pa.DiagnosticFeature=e_});var Lu=T(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.TextDocuments=void 0;var Fn=Fe(),xu=class{static{o(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new Fn.Emitter,this._onDidOpen=new Fn.Emitter,this._onDidClose=new Fn.Emitter,this._onDidSave=new Fn.Emitter,this._onWillSave=new Fn.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=Fn.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,a=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,a);let s=Object.freeze({document:a});this._onDidOpen.fire(s),this._onDidChangeContent.fire(s)})),n.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,a=r.contentChanges;if(a.length===0)return;let{version:s}=i;if(s==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=this._syncedDocuments.get(i.uri);c!==void 0&&(c=this._configuration.update(c,a,s),this._syncedDocuments.set(i.uri,c),this._onDidChangeContent.fire(Object.freeze({document:c})))})),n.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let a=this._syncedDocuments.get(r.textDocument.uri);return a!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:a,reason:r.reason}),i):[]})),n.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),Fn.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};Ia.TextDocuments=xu});var qu=T(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.NotebookDocuments=mr.NotebookSyncFeature=void 0;var _t=Fe(),Wf=Lu(),t_=o(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:o(e=>this.connection.onNotification(_t.DidOpenNotebookDocumentNotification.type,n=>{e(n)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:o(e=>this.connection.onNotification(_t.DidChangeNotebookDocumentNotification.type,n=>{e(n)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:o(e=>this.connection.onNotification(_t.DidSaveNotebookDocumentNotification.type,n=>{e(n)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:o(e=>this.connection.onNotification(_t.DidCloseNotebookDocumentNotification.type,n=>{e(n)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");mr.NotebookSyncFeature=t_;var Na=class t{static{o(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,_t.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,_t.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,_t.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};Na.NULL_DISPOSE=Object.freeze({dispose:o(()=>{},"dispose")});var Fu=class{static{o(this,"NotebookDocuments")}constructor(e){e instanceof Wf.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new Wf.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new _t.Emitter,this._onDidChange=new _t.Emitter,this._onDidSave=new _t.Emitter,this._onDidClose=new _t.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let n=this.notebookCellMap.get(e);return n&&n[0]}findNotebookDocumentForCell(e){let n=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new Na,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let a of i.cellTextDocuments)n.openTextDocument({textDocument:a});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let a=this.notebookDocuments.get(i.notebookDocument.uri);if(a===void 0)return;a.version=i.notebookDocument.version;let s=a.metadata,c=!1,u=i.change;u.metadata!==void 0&&(c=!0,a.metadata=u.metadata);let l=[],f=[],g=[],m=[];if(u.cells!==void 0){let k=u.cells;if(k.structure!==void 0){let b=k.structure.array;if(a.cells.splice(b.start,b.deleteCount,...b.cells!==void 0?b.cells:[]),k.structure.didOpen!==void 0)for(let _ of k.structure.didOpen)n.openTextDocument({textDocument:_}),l.push(_.uri);if(k.structure.didClose)for(let _ of k.structure.didClose)n.closeTextDocument({textDocument:_}),f.push(_.uri)}if(k.data!==void 0){let b=new Map(k.data.map(_=>[_.document,_]));for(let _=0;_<=a.cells.length;_++){let A=b.get(a.cells[_].document);if(A!==void 0){let w=a.cells.splice(_,1,A);if(g.push({old:w[0],new:A}),b.delete(A.document),b.size===0)break}}}if(k.textContent!==void 0)for(let b of k.textContent)n.changeTextDocument({textDocument:b.document,contentChanges:b.changes}),m.push(b.document.uri)}this.updateCellMap(a);let d={notebookDocument:a};c&&(d.metadata={old:s,new:a.metadata});let p=[];for(let k of l)p.push(this.getNotebookCell(k));let v=[];for(let k of f)v.push(this.getNotebookCell(k));let S=[];for(let k of m)S.push(this.getNotebookCell(k));(p.length>0||v.length>0||g.length>0||S.length>0)&&(d.cells={added:p,removed:v,changed:{data:g,textContent:S}}),(d.metadata!==void 0||d.cells!==void 0)&&this._onDidChange.fire(d)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let a=this.notebookDocuments.get(i.notebookDocument.uri);a!==void 0&&this._onDidSave.fire(a)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let a=this.notebookDocuments.get(i.notebookDocument.uri);if(a!==void 0){this._onDidClose.fire(a);for(let s of i.cellTextDocuments)n.closeTextDocument({textDocument:s});this.notebookDocuments.delete(i.notebookDocument.uri);for(let s of a.cells)this.notebookCellMap.delete(s.document)}})),_t.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let n of e.cells)this.notebookCellMap.set(n.document,[n,e])}};mr.NotebookDocuments=Fu});var Gf=T(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});Ma.MonikerFeature=void 0;var n_=Fe(),r_=o(t=>class extends t{get moniker(){return{on:o(e=>{let n=n_.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"on")}}},"MonikerFeature");Ma.MonikerFeature=r_});var Gu=T(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.createConnection=Z.combineFeatures=Z.combineNotebooksFeatures=Z.combineLanguagesFeatures=Z.combineWorkspaceFeatures=Z.combineWindowFeatures=Z.combineClientFeatures=Z.combineTracerFeatures=Z.combineTelemetryFeatures=Z.combineConsoleFeatures=Z._NotebooksImpl=Z._LanguagesImpl=Z.BulkUnregistration=Z.BulkRegistration=Z.ErrorMessageTracker=void 0;var O=Fe(),bt=qi(),Uu=Eu(),K=Nf(),i_=Mf(),a_=Of(),s_=wf(),o_=Mu(),c_=xf(),u_=Lf(),l_=Ff(),g_=qf(),d_=Uf(),f_=jf(),h_=Vf(),m_=qu(),p_=Gf();function Hu(t){if(t!==null)return t}o(Hu,"null2Undefined");var ju=class{static{o(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};Z.ErrorMessageTracker=ju;var Oa=class{static{o(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(O.MessageType.Error,e)}warn(e){this.send(O.MessageType.Warning,e)}info(e){this.send(O.MessageType.Info,e)}log(e){this.send(O.MessageType.Log,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(O.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,O.RAL)().console.error("Sending log message failed")})}},Vu=class{static{o(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:O.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(O.ShowMessageRequest.type,r).then(Hu)}showWarningMessage(e,...n){let r={type:O.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(O.ShowMessageRequest.type,r).then(Hu)}showInformationMessage(e,...n){let r={type:O.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(O.ShowMessageRequest.type,r).then(Hu)}},Bf=(0,c_.ShowDocumentFeature)((0,K.ProgressFeature)(Vu)),v_;(function(t){function e(){return new wa}o(e,"create"),t.create=e})(v_=Z.BulkRegistration||(Z.BulkRegistration={}));var wa=class{static{o(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=bt.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=Uu.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},R_;(function(t){function e(){return new ai(void 0,[])}o(e,"create"),t.create=e})(R_=Z.BulkUnregistration||(Z.BulkUnregistration={}));var ai=class{static{o(this,"BulkUnregistrationImpl")}constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest(O.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=bt.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(O.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},a=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},xa=class{static{o(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof wa?this.registerMany(e):e instanceof ai?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=bt.string(n)?n:n.method,a=Uu.generateUuid(),s={registrations:[{id:a,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(O.RegistrationRequest.type,s).then(c=>(e.add({id:a,method:i}),e),c=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(c)))}registerSingle2(e,n){let r=bt.string(e)?e:e.method,i=Uu.generateUuid(),a={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(O.RegistrationRequest.type,a).then(s=>O.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),s=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(s)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(O.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(O.RegistrationRequest.type,n).then(()=>new ai(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},Wu=class{static{o(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}o(n,"isApplyWorkspaceEditParams");let r=n(e)?e:{edit:e};return this.connection.sendRequest(O.ApplyWorkspaceEditRequest.type,r)}},Kf=(0,u_.FileOperationsFeature)((0,a_.WorkspaceFoldersFeature)((0,i_.ConfigurationFeature)(Wu))),La=class{static{o(this,"TracerImpl")}constructor(){this._trace=O.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==O.Trace.Off&&this.connection.sendNotification(O.LogTraceNotification.type,{message:e,verbose:this._trace===O.Trace.Verbose?n:void 0}).catch(()=>{})}},Fa=class{static{o(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(O.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},qa=class{static{o(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,K.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,K.attachPartialResult)(this.connection,n)}};Z._LanguagesImpl=qa;var $f=(0,p_.MonikerFeature)((0,h_.DiagnosticFeature)((0,f_.InlayHintFeature)((0,d_.InlineValueFeature)((0,g_.TypeHierarchyFeature)((0,l_.LinkedEditingRangeFeature)((0,o_.SemanticTokensFeature)((0,s_.CallHierarchyFeature)(qa)))))))),Ha=class{static{o(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,K.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,K.attachPartialResult)(this.connection,n)}};Z._NotebooksImpl=Ha;var Yf=(0,m_.NotebookSyncFeature)(Ha);function zf(t,e){return function(n){return e(t(n))}}o(zf,"combineConsoleFeatures");Z.combineConsoleFeatures=zf;function Jf(t,e){return function(n){return e(t(n))}}o(Jf,"combineTelemetryFeatures");Z.combineTelemetryFeatures=Jf;function Qf(t,e){return function(n){return e(t(n))}}o(Qf,"combineTracerFeatures");Z.combineTracerFeatures=Qf;function Xf(t,e){return function(n){return e(t(n))}}o(Xf,"combineClientFeatures");Z.combineClientFeatures=Xf;function Zf(t,e){return function(n){return e(t(n))}}o(Zf,"combineWindowFeatures");Z.combineWindowFeatures=Zf;function eh(t,e){return function(n){return e(t(n))}}o(eh,"combineWorkspaceFeatures");Z.combineWorkspaceFeatures=eh;function th(t,e){return function(n){return e(t(n))}}o(th,"combineLanguagesFeatures");Z.combineLanguagesFeatures=th;function nh(t,e){return function(n){return e(t(n))}}o(nh,"combineNotebooksFeatures");Z.combineNotebooksFeatures=nh;function __(t,e){function n(i,a,s){return i&&a?s(i,a):i||a}return o(n,"combine"),{__brand:"features",console:n(t.console,e.console,zf),tracer:n(t.tracer,e.tracer,Qf),telemetry:n(t.telemetry,e.telemetry,Jf),client:n(t.client,e.client,Xf),window:n(t.window,e.window,Zf),workspace:n(t.workspace,e.workspace,eh),languages:n(t.languages,e.languages,th),notebooks:n(t.notebooks,e.notebooks,nh)}}o(__,"combineFeatures");Z.combineFeatures=__;function b_(t,e,n){let r=n&&n.console?new(n.console(Oa)):new Oa,i=t(r);r.rawAttach(i);let a=n&&n.tracer?new(n.tracer(La)):new La,s=n&&n.telemetry?new(n.telemetry(Fa)):new Fa,c=n&&n.client?new(n.client(xa)):new xa,u=n&&n.window?new(n.window(Bf)):new Bf,l=n&&n.workspace?new(n.workspace(Kf)):new Kf,f=n&&n.languages?new(n.languages($f)):new $f,g=n&&n.notebooks?new(n.notebooks(Yf)):new Yf,m=[r,a,s,c,u,l,f,g];function d(b){return b instanceof Promise?b:bt.thenable(b)?new Promise((_,A)=>{b.then(w=>_(w),w=>A(w))}):Promise.resolve(b)}o(d,"asPromise");let p,v,S,k={listen:o(()=>i.listen(),"listen"),sendRequest:o((b,..._)=>i.sendRequest(bt.string(b)?b:b.method,..._),"sendRequest"),onRequest:o((b,_)=>i.onRequest(b,_),"onRequest"),sendNotification:o((b,_)=>{let A=bt.string(b)?b:b.method;return arguments.length===1?i.sendNotification(A):i.sendNotification(A,_)},"sendNotification"),onNotification:o((b,_)=>i.onNotification(b,_),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:o(b=>(v=b,{dispose:o(()=>{v=void 0},"dispose")}),"onInitialize"),onInitialized:o(b=>i.onNotification(O.InitializedNotification.type,b),"onInitialized"),onShutdown:o(b=>(p=b,{dispose:o(()=>{p=void 0},"dispose")}),"onShutdown"),onExit:o(b=>(S=b,{dispose:o(()=>{S=void 0},"dispose")}),"onExit"),get console(){return r},get telemetry(){return s},get tracer(){return a},get client(){return c},get window(){return u},get workspace(){return l},get languages(){return f},get notebooks(){return g},onDidChangeConfiguration:o(b=>i.onNotification(O.DidChangeConfigurationNotification.type,b),"onDidChangeConfiguration"),onDidChangeWatchedFiles:o(b=>i.onNotification(O.DidChangeWatchedFilesNotification.type,b),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:o(b=>i.onNotification(O.DidOpenTextDocumentNotification.type,b),"onDidOpenTextDocument"),onDidChangeTextDocument:o(b=>i.onNotification(O.DidChangeTextDocumentNotification.type,b),"onDidChangeTextDocument"),onDidCloseTextDocument:o(b=>i.onNotification(O.DidCloseTextDocumentNotification.type,b),"onDidCloseTextDocument"),onWillSaveTextDocument:o(b=>i.onNotification(O.WillSaveTextDocumentNotification.type,b),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:o(b=>i.onRequest(O.WillSaveTextDocumentWaitUntilRequest.type,b),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:o(b=>i.onNotification(O.DidSaveTextDocumentNotification.type,b),"onDidSaveTextDocument"),sendDiagnostics:o(b=>i.sendNotification(O.PublishDiagnosticsNotification.type,b),"sendDiagnostics"),onHover:o(b=>i.onRequest(O.HoverRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),void 0)),"onHover"),onCompletion:o(b=>i.onRequest(O.CompletionRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onCompletion"),onCompletionResolve:o(b=>i.onRequest(O.CompletionResolveRequest.type,b),"onCompletionResolve"),onSignatureHelp:o(b=>i.onRequest(O.SignatureHelpRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),void 0)),"onSignatureHelp"),onDeclaration:o(b=>i.onRequest(O.DeclarationRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onDeclaration"),onDefinition:o(b=>i.onRequest(O.DefinitionRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onDefinition"),onTypeDefinition:o(b=>i.onRequest(O.TypeDefinitionRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onTypeDefinition"),onImplementation:o(b=>i.onRequest(O.ImplementationRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onImplementation"),onReferences:o(b=>i.onRequest(O.ReferencesRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onReferences"),onDocumentHighlight:o(b=>i.onRequest(O.DocumentHighlightRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onDocumentHighlight"),onDocumentSymbol:o(b=>i.onRequest(O.DocumentSymbolRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onDocumentSymbol"),onWorkspaceSymbol:o(b=>i.onRequest(O.WorkspaceSymbolRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:o(b=>i.onRequest(O.WorkspaceSymbolResolveRequest.type,b),"onWorkspaceSymbolResolve"),onCodeAction:o(b=>i.onRequest(O.CodeActionRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onCodeAction"),onCodeActionResolve:o(b=>i.onRequest(O.CodeActionResolveRequest.type,(_,A)=>b(_,A)),"onCodeActionResolve"),onCodeLens:o(b=>i.onRequest(O.CodeLensRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onCodeLens"),onCodeLensResolve:o(b=>i.onRequest(O.CodeLensResolveRequest.type,(_,A)=>b(_,A)),"onCodeLensResolve"),onDocumentFormatting:o(b=>i.onRequest(O.DocumentFormattingRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:o(b=>i.onRequest(O.DocumentRangeFormattingRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:o(b=>i.onRequest(O.DocumentOnTypeFormattingRequest.type,(_,A)=>b(_,A)),"onDocumentOnTypeFormatting"),onRenameRequest:o(b=>i.onRequest(O.RenameRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),void 0)),"onRenameRequest"),onPrepareRename:o(b=>i.onRequest(O.PrepareRenameRequest.type,(_,A)=>b(_,A)),"onPrepareRename"),onDocumentLinks:o(b=>i.onRequest(O.DocumentLinkRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onDocumentLinks"),onDocumentLinkResolve:o(b=>i.onRequest(O.DocumentLinkResolveRequest.type,(_,A)=>b(_,A)),"onDocumentLinkResolve"),onDocumentColor:o(b=>i.onRequest(O.DocumentColorRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onDocumentColor"),onColorPresentation:o(b=>i.onRequest(O.ColorPresentationRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onColorPresentation"),onFoldingRanges:o(b=>i.onRequest(O.FoldingRangeRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onFoldingRanges"),onSelectionRanges:o(b=>i.onRequest(O.SelectionRangeRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),(0,K.attachPartialResult)(i,_))),"onSelectionRanges"),onExecuteCommand:o(b=>i.onRequest(O.ExecuteCommandRequest.type,(_,A)=>b(_,A,(0,K.attachWorkDone)(i,_),void 0)),"onExecuteCommand"),dispose:o(()=>i.dispose(),"dispose")};for(let b of m)b.attach(k);return i.onRequest(O.InitializeRequest.type,b=>{e.initialize(b),bt.string(b.trace)&&(a.trace=O.Trace.fromString(b.trace));for(let _ of m)_.initialize(b.capabilities);if(v){let _=v(b,new O.CancellationTokenSource().token,(0,K.attachWorkDone)(i,b),void 0);return d(_).then(A=>{if(A instanceof O.ResponseError)return A;let w=A;w||(w={capabilities:{}});let V=w.capabilities;V||(V={},w.capabilities=V),V.textDocumentSync===void 0||V.textDocumentSync===null?V.textDocumentSync=bt.number(k.__textDocumentSync)?k.__textDocumentSync:O.TextDocumentSyncKind.None:!bt.number(V.textDocumentSync)&&!bt.number(V.textDocumentSync.change)&&(V.textDocumentSync.change=bt.number(k.__textDocumentSync)?k.__textDocumentSync:O.TextDocumentSyncKind.None);for(let B of m)B.fillServerCapabilities(V);return w})}else{let _={capabilities:{textDocumentSync:O.TextDocumentSyncKind.None}};for(let A of m)A.fillServerCapabilities(_.capabilities);return _}}),i.onRequest(O.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,p)return p(new O.CancellationTokenSource().token)}),i.onNotification(O.ExitNotification.type,()=>{try{S&&S()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(O.SetTraceNotification.type,b=>{a.trace=O.Trace.fromString(b.value)}),k}o(b_,"createConnection");Z.createConnection=b_});var zu=T(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.resolveModulePath=nt.FileSystem=nt.resolveGlobalYarnPath=nt.resolveGlobalNodePath=nt.resolve=nt.uriToFilePath=void 0;var y_=require("url"),Ot=require("path"),Bu=require("fs"),Yu=require("child_process");function D_(t){let e=y_.parse(t);if(e.protocol!=="file:"||!e.path)return;let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let a=n[0],s=n[1];a.length===0&&s.length>1&&s[1]===":"&&n.shift()}return Ot.normalize(n.join("/"))}o(D_,"uriToFilePath");nt.uriToFilePath=D_;function Ku(){return process.platform==="win32"}o(Ku,"isWindows");function Ua(t,e,n,r){let i="NODE_PATH",a=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((s,c)=>{let u=process.env,l=Object.create(null);Object.keys(u).forEach(f=>l[f]=u[f]),e&&Bu.existsSync(e)&&(l[i]?l[i]=e+Ot.delimiter+l[i]:l[i]=e,r&&r(`NODE_PATH value is: ${l[i]}`)),l.ELECTRON_RUN_AS_NODE="1";try{let f=(0,Yu.fork)("",[],{cwd:n,env:l,execArgv:["-e",a]});if(f.pid===void 0){c(new Error(`Starting process to resolve node module  ${t} failed`));return}f.on("error",m=>{c(m)}),f.on("message",m=>{m.c==="r"&&(f.send({c:"e"}),m.s?s(m.r):c(new Error(`Failed to resolve module: ${t}`)))});let g={c:"rs",a:t};f.send(g)}catch(f){c(f)}})}o(Ua,"resolve");nt.resolve=Ua;function $u(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(a=>n[a]=process.env[a]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};Ku()&&(e="npm.cmd",r.shell=!0);let i=o(()=>{},"handler");try{process.on("SIGPIPE",i);let a=(0,Yu.spawnSync)(e,["config","get","prefix"],r).stdout;if(!a){t&&t("'npm config get prefix' didn't return a value.");return}let s=a.trim();return t&&t(`'npm config get prefix' value is: ${s}`),s.length>0?Ku()?Ot.join(s,"node_modules"):Ot.join(s,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}o($u,"resolveGlobalNodePath");nt.resolveGlobalNodePath=$u;function k_(t){let e="yarn",n={encoding:"utf8"};Ku()&&(e="yarn.cmd",n.shell=!0);let r=o(()=>{},"handler");try{process.on("SIGPIPE",r);let i=(0,Yu.spawnSync)(e,["global","dir","--json"],n),a=i.stdout;if(!a){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let s=a.trim().split(/\r?\n/);for(let c of s)try{let u=JSON.parse(c);if(u.type==="log")return Ot.join(u.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}o(k_,"resolveGlobalYarnPath");nt.resolveGlobalYarnPath=k_;var rh;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!Bu.existsSync(__filename.toUpperCase())||!Bu.existsSync(__filename.toLowerCase())),e}o(n,"isCaseSensitive"),t.isCaseSensitive=n;function r(i,a){return n()?Ot.normalize(a).indexOf(Ot.normalize(i))===0:Ot.normalize(a).toLowerCase().indexOf(Ot.normalize(i).toLowerCase())===0}o(r,"isParent"),t.isParent=r})(rh=nt.FileSystem||(nt.FileSystem={}));function S_(t,e,n,r){return n?(Ot.isAbsolute(n)||(n=Ot.join(t,n)),Ua(e,n,n,r).then(i=>rh.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>Ua(e,$u(r),t,r))):Ua(e,$u(r),t,r)}o(S_,"resolveModulePath");nt.resolveModulePath=S_});var Ju=T((ZS,ih)=>{"use strict";ih.exports=Fe()});var sh=T(Ke=>{"use strict";var A_=Ke&&Ke.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),ah=Ke&&Ke.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&A_(e,t,n)};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.ProposedFeatures=Ke.NotebookDocuments=Ke.TextDocuments=Ke.SemanticTokensBuilder=void 0;var T_=Mu();Object.defineProperty(Ke,"SemanticTokensBuilder",{enumerable:!0,get:o(function(){return T_.SemanticTokensBuilder},"get")});ah(Fe(),Ke);var E_=Lu();Object.defineProperty(Ke,"TextDocuments",{enumerable:!0,get:o(function(){return E_.TextDocuments},"get")});var C_=qu();Object.defineProperty(Ke,"NotebookDocuments",{enumerable:!0,get:o(function(){return C_.NotebookDocuments},"get")});ah(Gu(),Ke);var P_;(function(t){t.all={__brand:"features"}})(P_=Ke.ProposedFeatures||(Ke.ProposedFeatures={}))});var lh=T(ft=>{"use strict";var I_=ft&&ft.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),ch=ft&&ft.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&I_(e,t,n)};Object.defineProperty(ft,"__esModule",{value:!0});ft.createConnection=ft.Files=void 0;var Qu=qi(),N_=Gu(),si=zu(),qn=Ju();ch(Ju(),ft);ch(sh(),ft);var M_;(function(t){t.uriToFilePath=si.uriToFilePath,t.resolveGlobalNodePath=si.resolveGlobalNodePath,t.resolveGlobalYarnPath=si.resolveGlobalYarnPath,t.resolve=si.resolve,t.resolveModulePath=si.resolveModulePath})(M_=ft.Files||(ft.Files={}));var oh;function ja(){if(oh!==void 0)try{oh.end()}catch{}}o(ja,"endProtocolConnection");var pr=!1,uh;function O_(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(uh=setInterval(()=>{try{process.kill(r,0)}catch{ja(),process.exit(pr?0:1)}},3e3))}catch{}}o(e,"runTimer");for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}o(O_,"setupExitTimer");O_();var w_={initialize:o(t=>{let e=t.processId;Qu.number(e)&&uh===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(pr?0:1)}},3e3)},"initialize"),get shutdownReceived(){return pr},set shutdownReceived(t){pr=t},exit:o(t=>{ja(),process.exit(t)},"exit")};function x_(t,e,n,r){let i,a,s,c;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),qn.ConnectionStrategy.is(t)||qn.ConnectionOptions.is(t)?c=t:(a=t,s=e,c=n),L_(a,s,c,i)}o(x_,"createConnection");ft.createConnection=x_;function L_(t,e,n,r){if(!t&&!e&&process.argv.length>2){let c,u,l=process.argv.slice(2);for(let f=0;f<l.length;f++){let g=l[f];if(g==="--node-ipc"){t=new qn.IPCMessageReader(process),e=new qn.IPCMessageWriter(process);break}else if(g==="--stdio"){t=process.stdin,e=process.stdout;break}else if(g==="--socket"){c=parseInt(l[f+1]);break}else if(g==="--pipe"){u=l[f+1];break}else{var i=g.split("=");if(i[0]==="--socket"){c=parseInt(i[1]);break}else if(i[0]==="--pipe"){u=i[1];break}}}if(c){let f=(0,qn.createServerSocketTransport)(c);t=f[0],e=f[1]}else if(u){let f=(0,qn.createServerPipeTransport)(u);t=f[0],e=f[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(Qu.func(t.read)&&Qu.func(t.on)){let c=t;c.on("end",()=>{ja(),process.exit(pr?0:1)}),c.on("close",()=>{ja(),process.exit(pr?0:1)})}let s=o(c=>(0,qn.createProtocolConnection)(t,e,c,n),"connectionFactory");return(0,N_.createConnection)(s,w_,r)}o(L_,"_createConnection")});var dh=T((iA,gh)=>{"use strict";gh.exports=lh()});var pe={};wi(pe,{AnnotatedTextEdit:()=>tn,ChangeAnnotation:()=>Hn,ChangeAnnotationIdentifier:()=>$e,CodeAction:()=>Nl,CodeActionContext:()=>Il,CodeActionKind:()=>Pl,CodeActionTriggerKind:()=>fi,CodeDescription:()=>ol,CodeLens:()=>Ml,Color:()=>Ga,ColorInformation:()=>tl,ColorPresentation:()=>nl,Command:()=>Un,CompletionItem:()=>vl,CompletionItemKind:()=>gl,CompletionItemLabelDetails:()=>pl,CompletionItemTag:()=>fl,CompletionList:()=>Rl,CreateFile:()=>vr,DeleteFile:()=>_r,Diagnostic:()=>ui,DiagnosticRelatedInformation:()=>Ba,DiagnosticSeverity:()=>al,DiagnosticTag:()=>sl,DocumentHighlight:()=>kl,DocumentHighlightKind:()=>Dl,DocumentLink:()=>wl,DocumentSymbol:()=>Cl,DocumentUri:()=>Xu,EOL:()=>q_,FoldingRange:()=>il,FoldingRangeKind:()=>rl,FormattingOptions:()=>Ol,Hover:()=>_l,InlayHint:()=>Wl,InlayHintKind:()=>Ya,InlayHintLabelPart:()=>za,InlineValueContext:()=>Vl,InlineValueEvaluatableExpression:()=>jl,InlineValueText:()=>Hl,InlineValueVariableLookup:()=>Ul,InsertReplaceEdit:()=>hl,InsertTextFormat:()=>dl,InsertTextMode:()=>ml,Location:()=>ci,LocationLink:()=>el,MarkedString:()=>di,MarkupContent:()=>br,MarkupKind:()=>$a,OptionalVersionedTextDocumentIdentifier:()=>gi,ParameterInformation:()=>bl,Position:()=>yt,Range:()=>Ie,RenameFile:()=>Rr,SelectionRange:()=>xl,SemanticTokenModifiers:()=>Fl,SemanticTokenTypes:()=>Ll,SemanticTokens:()=>ql,SignatureInformation:()=>yl,SymbolInformation:()=>Tl,SymbolKind:()=>Sl,SymbolTag:()=>Al,TextDocument:()=>Bl,TextDocumentEdit:()=>li,TextDocumentIdentifier:()=>cl,TextDocumentItem:()=>ll,TextEdit:()=>Wt,URI:()=>Wa,VersionedTextDocumentIdentifier:()=>ul,WorkspaceChange:()=>F_,WorkspaceEdit:()=>Ka,WorkspaceFolder:()=>Gl,WorkspaceSymbol:()=>El,integer:()=>Zu,uinteger:()=>oi});var Xu,Wa,Zu,oi,yt,Ie,ci,el,Ga,tl,nl,rl,il,Ba,al,sl,ol,ui,Un,Wt,Hn,$e,tn,li,vr,Rr,_r,Ka,Va,fh,F_,cl,ul,gi,ll,$a,br,gl,dl,fl,hl,ml,pl,vl,Rl,di,_l,bl,yl,Dl,kl,Sl,Al,Tl,El,Cl,Pl,fi,Il,Nl,Ml,Ol,wl,xl,Ll,Fl,ql,Hl,Ul,jl,Vl,Ya,za,Wl,Gl,q_,Bl,H_,D,ve=Oi(()=>{"use strict";(function(t){function e(n){return typeof n=="string"}o(e,"is"),t.is=e})(Xu||(Xu={}));(function(t){function e(n){return typeof n=="string"}o(e,"is"),t.is=e})(Wa||(Wa={}));(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}o(e,"is"),t.is=e})(Zu||(Zu={}));(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}o(e,"is"),t.is=e})(oi||(oi={}));(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=oi.MAX_VALUE),i===Number.MAX_VALUE&&(i=oi.MAX_VALUE),{line:r,character:i}}o(e,"create"),t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&D.uinteger(i.line)&&D.uinteger(i.character)}o(n,"is"),t.is=n})(yt||(yt={}));(function(t){function e(r,i,a,s){if(D.uinteger(r)&&D.uinteger(i)&&D.uinteger(a)&&D.uinteger(s))return{start:yt.create(r,i),end:yt.create(a,s)};if(yt.is(r)&&yt.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments[".concat(r,", ").concat(i,", ").concat(a,", ").concat(s,"]"))}o(e,"create"),t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&yt.is(i.start)&&yt.is(i.end)}o(n,"is"),t.is=n})(Ie||(Ie={}));(function(t){function e(r,i){return{uri:r,range:i}}o(e,"create"),t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&Ie.is(i.range)&&(D.string(i.uri)||D.undefined(i.uri))}o(n,"is"),t.is=n})(ci||(ci={}));(function(t){function e(r,i,a,s){return{targetUri:r,targetRange:i,targetSelectionRange:a,originSelectionRange:s}}o(e,"create"),t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&Ie.is(i.targetRange)&&D.string(i.targetUri)&&Ie.is(i.targetSelectionRange)&&(Ie.is(i.originSelectionRange)||D.undefined(i.originSelectionRange))}o(n,"is"),t.is=n})(el||(el={}));(function(t){function e(r,i,a,s){return{red:r,green:i,blue:a,alpha:s}}o(e,"create"),t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&D.numberRange(i.red,0,1)&&D.numberRange(i.green,0,1)&&D.numberRange(i.blue,0,1)&&D.numberRange(i.alpha,0,1)}o(n,"is"),t.is=n})(Ga||(Ga={}));(function(t){function e(r,i){return{range:r,color:i}}o(e,"create"),t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&Ie.is(i.range)&&Ga.is(i.color)}o(n,"is"),t.is=n})(tl||(tl={}));(function(t){function e(r,i,a){return{label:r,textEdit:i,additionalTextEdits:a}}o(e,"create"),t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&D.string(i.label)&&(D.undefined(i.textEdit)||Wt.is(i))&&(D.undefined(i.additionalTextEdits)||D.typedArray(i.additionalTextEdits,Wt.is))}o(n,"is"),t.is=n})(nl||(nl={}));(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(rl||(rl={}));(function(t){function e(r,i,a,s,c,u){var l={startLine:r,endLine:i};return D.defined(a)&&(l.startCharacter=a),D.defined(s)&&(l.endCharacter=s),D.defined(c)&&(l.kind=c),D.defined(u)&&(l.collapsedText=u),l}o(e,"create"),t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&D.uinteger(i.startLine)&&D.uinteger(i.startLine)&&(D.undefined(i.startCharacter)||D.uinteger(i.startCharacter))&&(D.undefined(i.endCharacter)||D.uinteger(i.endCharacter))&&(D.undefined(i.kind)||D.string(i.kind))}o(n,"is"),t.is=n})(il||(il={}));(function(t){function e(r,i){return{location:r,message:i}}o(e,"create"),t.create=e;function n(r){var i=r;return D.defined(i)&&ci.is(i.location)&&D.string(i.message)}o(n,"is"),t.is=n})(Ba||(Ba={}));(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(al||(al={}));(function(t){t.Unnecessary=1,t.Deprecated=2})(sl||(sl={}));(function(t){function e(n){var r=n;return D.objectLiteral(r)&&D.string(r.href)}o(e,"is"),t.is=e})(ol||(ol={}));(function(t){function e(r,i,a,s,c,u){var l={range:r,message:i};return D.defined(a)&&(l.severity=a),D.defined(s)&&(l.code=s),D.defined(c)&&(l.source=c),D.defined(u)&&(l.relatedInformation=u),l}o(e,"create"),t.create=e;function n(r){var i,a=r;return D.defined(a)&&Ie.is(a.range)&&D.string(a.message)&&(D.number(a.severity)||D.undefined(a.severity))&&(D.integer(a.code)||D.string(a.code)||D.undefined(a.code))&&(D.undefined(a.codeDescription)||D.string((i=a.codeDescription)===null||i===void 0?void 0:i.href))&&(D.string(a.source)||D.undefined(a.source))&&(D.undefined(a.relatedInformation)||D.typedArray(a.relatedInformation,Ba.is))}o(n,"is"),t.is=n})(ui||(ui={}));(function(t){function e(r,i){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var c={title:r,command:i};return D.defined(a)&&a.length>0&&(c.arguments=a),c}o(e,"create"),t.create=e;function n(r){var i=r;return D.defined(i)&&D.string(i.title)&&D.string(i.command)}o(n,"is"),t.is=n})(Un||(Un={}));(function(t){function e(a,s){return{range:a,newText:s}}o(e,"replace"),t.replace=e;function n(a,s){return{range:{start:a,end:a},newText:s}}o(n,"insert"),t.insert=n;function r(a){return{range:a,newText:""}}o(r,"del"),t.del=r;function i(a){var s=a;return D.objectLiteral(s)&&D.string(s.newText)&&Ie.is(s.range)}o(i,"is"),t.is=i})(Wt||(Wt={}));(function(t){function e(r,i,a){var s={label:r};return i!==void 0&&(s.needsConfirmation=i),a!==void 0&&(s.description=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&D.string(i.label)&&(D.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(D.string(i.description)||i.description===void 0)}o(n,"is"),t.is=n})(Hn||(Hn={}));(function(t){function e(n){var r=n;return D.string(r)}o(e,"is"),t.is=e})($e||($e={}));(function(t){function e(a,s,c){return{range:a,newText:s,annotationId:c}}o(e,"replace"),t.replace=e;function n(a,s,c){return{range:{start:a,end:a},newText:s,annotationId:c}}o(n,"insert"),t.insert=n;function r(a,s){return{range:a,newText:"",annotationId:s}}o(r,"del"),t.del=r;function i(a){var s=a;return Wt.is(s)&&(Hn.is(s.annotationId)||$e.is(s.annotationId))}o(i,"is"),t.is=i})(tn||(tn={}));(function(t){function e(r,i){return{textDocument:r,edits:i}}o(e,"create"),t.create=e;function n(r){var i=r;return D.defined(i)&&gi.is(i.textDocument)&&Array.isArray(i.edits)}o(n,"is"),t.is=n})(li||(li={}));(function(t){function e(r,i,a){var s={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&D.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||D.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||D.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||$e.is(i.annotationId))}o(n,"is"),t.is=n})(vr||(vr={}));(function(t){function e(r,i,a,s){var c={kind:"rename",oldUri:r,newUri:i};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(c.options=a),s!==void 0&&(c.annotationId=s),c}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&D.string(i.oldUri)&&D.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||D.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||D.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||$e.is(i.annotationId))}o(n,"is"),t.is=n})(Rr||(Rr={}));(function(t){function e(r,i,a){var s={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&D.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||D.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||D.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||$e.is(i.annotationId))}o(n,"is"),t.is=n})(_r||(_r={}));(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return D.string(i.kind)?vr.is(i)||Rr.is(i)||_r.is(i):li.is(i)}))}o(e,"is"),t.is=e})(Ka||(Ka={}));Va=(function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return o(t,"TextEditChangeImpl"),t.prototype.insert=function(e,n,r){var i,a;if(r===void 0?i=Wt.insert(e,n):$e.is(r)?(a=r,i=tn.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=tn.insert(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.replace=function(e,n,r){var i,a;if(r===void 0?i=Wt.replace(e,n):$e.is(r)?(a=r,i=tn.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=tn.replace(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=Wt.del(e):$e.is(n)?(i=n,r=tn.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=tn.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t})(),fh=(function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return o(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:o(function(){return this._size},"get"),enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if($e.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id ".concat(r," is already in use."));if(n===void 0)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t})(),F_=(function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new fh(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(li.is(r)){var i=new Va(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new Va(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return o(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:o(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(gi.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],a={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(a),r=new Va(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new Va(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new fh,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;Hn.is(n)||$e.is(n)?i=n:r=n;var a,s;if(i===void 0?a=vr.create(e,r):(s=$e.is(i)?i:this._changeAnnotations.manage(i),a=vr.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;Hn.is(r)||$e.is(r)?a=r:i=r;var s,c;if(a===void 0?s=Rr.create(e,n,i):(c=$e.is(a)?a:this._changeAnnotations.manage(a),s=Rr.create(e,n,i,c)),this._workspaceEdit.documentChanges.push(s),c!==void 0)return c},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;Hn.is(n)||$e.is(n)?i=n:r=n;var a,s;if(i===void 0?a=_r.create(e,r):(s=$e.is(i)?i:this._changeAnnotations.manage(i),a=_r.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t})();(function(t){function e(r){return{uri:r}}o(e,"create"),t.create=e;function n(r){var i=r;return D.defined(i)&&D.string(i.uri)}o(n,"is"),t.is=n})(cl||(cl={}));(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return D.defined(i)&&D.string(i.uri)&&D.integer(i.version)}o(n,"is"),t.is=n})(ul||(ul={}));(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return D.defined(i)&&D.string(i.uri)&&(i.version===null||D.integer(i.version))}o(n,"is"),t.is=n})(gi||(gi={}));(function(t){function e(r,i,a,s){return{uri:r,languageId:i,version:a,text:s}}o(e,"create"),t.create=e;function n(r){var i=r;return D.defined(i)&&D.string(i.uri)&&D.string(i.languageId)&&D.integer(i.version)&&D.string(i.text)}o(n,"is"),t.is=n})(ll||(ll={}));(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(n){var r=n;return r===t.PlainText||r===t.Markdown}o(e,"is"),t.is=e})($a||($a={}));(function(t){function e(n){var r=n;return D.objectLiteral(n)&&$a.is(r.kind)&&D.string(r.value)}o(e,"is"),t.is=e})(br||(br={}));(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(gl||(gl={}));(function(t){t.PlainText=1,t.Snippet=2})(dl||(dl={}));(function(t){t.Deprecated=1})(fl||(fl={}));(function(t){function e(r,i,a){return{newText:r,insert:i,replace:a}}o(e,"create"),t.create=e;function n(r){var i=r;return i&&D.string(i.newText)&&Ie.is(i.insert)&&Ie.is(i.replace)}o(n,"is"),t.is=n})(hl||(hl={}));(function(t){t.asIs=1,t.adjustIndentation=2})(ml||(ml={}));(function(t){function e(n){var r=n;return r&&(D.string(r.detail)||r.detail===void 0)&&(D.string(r.description)||r.description===void 0)}o(e,"is"),t.is=e})(pl||(pl={}));(function(t){function e(n){return{label:n}}o(e,"create"),t.create=e})(vl||(vl={}));(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}o(e,"create"),t.create=e})(Rl||(Rl={}));(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}o(e,"fromPlainText"),t.fromPlainText=e;function n(r){var i=r;return D.string(i)||D.objectLiteral(i)&&D.string(i.language)&&D.string(i.value)}o(n,"is"),t.is=n})(di||(di={}));(function(t){function e(n){var r=n;return!!r&&D.objectLiteral(r)&&(br.is(r.contents)||di.is(r.contents)||D.typedArray(r.contents,di.is))&&(n.range===void 0||Ie.is(n.range))}o(e,"is"),t.is=e})(_l||(_l={}));(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}o(e,"create"),t.create=e})(bl||(bl={}));(function(t){function e(n,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s={label:n};return D.defined(r)&&(s.documentation=r),D.defined(i)?s.parameters=i:s.parameters=[],s}o(e,"create"),t.create=e})(yl||(yl={}));(function(t){t.Text=1,t.Read=2,t.Write=3})(Dl||(Dl={}));(function(t){function e(n,r){var i={range:n};return D.number(r)&&(i.kind=r),i}o(e,"create"),t.create=e})(kl||(kl={}));(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Sl||(Sl={}));(function(t){t.Deprecated=1})(Al||(Al={}));(function(t){function e(n,r,i,a,s){var c={name:n,kind:r,location:{uri:a,range:i}};return s&&(c.containerName=s),c}o(e,"create"),t.create=e})(Tl||(Tl={}));(function(t){function e(n,r,i,a){return a!==void 0?{name:n,kind:r,location:{uri:i,range:a}}:{name:n,kind:r,location:{uri:i}}}o(e,"create"),t.create=e})(El||(El={}));(function(t){function e(r,i,a,s,c,u){var l={name:r,detail:i,kind:a,range:s,selectionRange:c};return u!==void 0&&(l.children=u),l}o(e,"create"),t.create=e;function n(r){var i=r;return i&&D.string(i.name)&&D.number(i.kind)&&Ie.is(i.range)&&Ie.is(i.selectionRange)&&(i.detail===void 0||D.string(i.detail))&&(i.deprecated===void 0||D.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}o(n,"is"),t.is=n})(Cl||(Cl={}));(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Pl||(Pl={}));(function(t){t.Invoked=1,t.Automatic=2})(fi||(fi={}));(function(t){function e(r,i,a){var s={diagnostics:r};return i!=null&&(s.only=i),a!=null&&(s.triggerKind=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return D.defined(i)&&D.typedArray(i.diagnostics,ui.is)&&(i.only===void 0||D.typedArray(i.only,D.string))&&(i.triggerKind===void 0||i.triggerKind===fi.Invoked||i.triggerKind===fi.Automatic)}o(n,"is"),t.is=n})(Il||(Il={}));(function(t){function e(r,i,a){var s={title:r},c=!0;return typeof i=="string"?(c=!1,s.kind=i):Un.is(i)?s.command=i:s.edit=i,c&&a!==void 0&&(s.kind=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&D.string(i.title)&&(i.diagnostics===void 0||D.typedArray(i.diagnostics,ui.is))&&(i.kind===void 0||D.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||Un.is(i.command))&&(i.isPreferred===void 0||D.boolean(i.isPreferred))&&(i.edit===void 0||Ka.is(i.edit))}o(n,"is"),t.is=n})(Nl||(Nl={}));(function(t){function e(r,i){var a={range:r};return D.defined(i)&&(a.data=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return D.defined(i)&&Ie.is(i.range)&&(D.undefined(i.command)||Un.is(i.command))}o(n,"is"),t.is=n})(Ml||(Ml={}));(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}o(e,"create"),t.create=e;function n(r){var i=r;return D.defined(i)&&D.uinteger(i.tabSize)&&D.boolean(i.insertSpaces)}o(n,"is"),t.is=n})(Ol||(Ol={}));(function(t){function e(r,i,a){return{range:r,target:i,data:a}}o(e,"create"),t.create=e;function n(r){var i=r;return D.defined(i)&&Ie.is(i.range)&&(D.undefined(i.target)||D.string(i.target))}o(n,"is"),t.is=n})(wl||(wl={}));(function(t){function e(r,i){return{range:r,parent:i}}o(e,"create"),t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&Ie.is(i.range)&&(i.parent===void 0||t.is(i.parent))}o(n,"is"),t.is=n})(xl||(xl={}));(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(Ll||(Ll={}));(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Fl||(Fl={}));(function(t){function e(n){var r=n;return D.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}o(e,"is"),t.is=e})(ql||(ql={}));(function(t){function e(r,i){return{range:r,text:i}}o(e,"create"),t.create=e;function n(r){var i=r;return i!=null&&Ie.is(i.range)&&D.string(i.text)}o(n,"is"),t.is=n})(Hl||(Hl={}));(function(t){function e(r,i,a){return{range:r,variableName:i,caseSensitiveLookup:a}}o(e,"create"),t.create=e;function n(r){var i=r;return i!=null&&Ie.is(i.range)&&D.boolean(i.caseSensitiveLookup)&&(D.string(i.variableName)||i.variableName===void 0)}o(n,"is"),t.is=n})(Ul||(Ul={}));(function(t){function e(r,i){return{range:r,expression:i}}o(e,"create"),t.create=e;function n(r){var i=r;return i!=null&&Ie.is(i.range)&&(D.string(i.expression)||i.expression===void 0)}o(n,"is"),t.is=n})(jl||(jl={}));(function(t){function e(r,i){return{frameId:r,stoppedLocation:i}}o(e,"create"),t.create=e;function n(r){var i=r;return D.defined(i)&&Ie.is(r.stoppedLocation)}o(n,"is"),t.is=n})(Vl||(Vl={}));(function(t){t.Type=1,t.Parameter=2;function e(n){return n===1||n===2}o(e,"is"),t.is=e})(Ya||(Ya={}));(function(t){function e(r){return{value:r}}o(e,"create"),t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&(i.tooltip===void 0||D.string(i.tooltip)||br.is(i.tooltip))&&(i.location===void 0||ci.is(i.location))&&(i.command===void 0||Un.is(i.command))}o(n,"is"),t.is=n})(za||(za={}));(function(t){function e(r,i,a){var s={position:r,label:i};return a!==void 0&&(s.kind=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&yt.is(i.position)&&(D.string(i.label)||D.typedArray(i.label,za.is))&&(i.kind===void 0||Ya.is(i.kind))&&i.textEdits===void 0||D.typedArray(i.textEdits,Wt.is)&&(i.tooltip===void 0||D.string(i.tooltip)||br.is(i.tooltip))&&(i.paddingLeft===void 0||D.boolean(i.paddingLeft))&&(i.paddingRight===void 0||D.boolean(i.paddingRight))}o(n,"is"),t.is=n})(Wl||(Wl={}));(function(t){function e(n){var r=n;return D.objectLiteral(r)&&Wa.is(r.uri)&&D.string(r.name)}o(e,"is"),t.is=e})(Gl||(Gl={}));q_=[`
`,`\r
`,"\r"];(function(t){function e(a,s,c,u){return new H_(a,s,c,u)}o(e,"create"),t.create=e;function n(a){var s=a;return!!(D.defined(s)&&D.string(s.uri)&&(D.undefined(s.languageId)||D.string(s.languageId))&&D.uinteger(s.lineCount)&&D.func(s.getText)&&D.func(s.positionAt)&&D.func(s.offsetAt))}o(n,"is"),t.is=n;function r(a,s){for(var c=a.getText(),u=i(s,function(p,v){var S=p.range.start.line-v.range.start.line;return S===0?p.range.start.character-v.range.start.character:S}),l=c.length,f=u.length-1;f>=0;f--){var g=u[f],m=a.offsetAt(g.range.start),d=a.offsetAt(g.range.end);if(d<=l)c=c.substring(0,m)+g.newText+c.substring(d,c.length);else throw new Error("Overlapping edit");l=m}return c}o(r,"applyEdits"),t.applyEdits=r;function i(a,s){if(a.length<=1)return a;var c=a.length/2|0,u=a.slice(0,c),l=a.slice(c);i(u,s),i(l,s);for(var f=0,g=0,m=0;f<u.length&&g<l.length;){var d=s(u[f],l[g]);d<=0?a[m++]=u[f++]:a[m++]=l[g++]}for(;f<u.length;)a[m++]=u[f++];for(;g<l.length;)a[m++]=l[g++];return a}o(i,"mergeSort")})(Bl||(Bl={}));H_=(function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return o(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:o(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:o(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:o(function(){return this._version},"get"),enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var a=n.charAt(i);r=a==="\r"||a===`
`,a==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return yt.create(0,e);for(;r<i;){var a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}var s=r-1;return yt.create(s,e-n[s])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:o(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),t})();(function(t){var e=Object.prototype.toString;function n(d){return typeof d<"u"}o(n,"defined"),t.defined=n;function r(d){return typeof d>"u"}o(r,"undefined"),t.undefined=r;function i(d){return d===!0||d===!1}o(i,"boolean"),t.boolean=i;function a(d){return e.call(d)==="[object String]"}o(a,"string"),t.string=a;function s(d){return e.call(d)==="[object Number]"}o(s,"number"),t.number=s;function c(d,p,v){return e.call(d)==="[object Number]"&&p<=d&&d<=v}o(c,"numberRange"),t.numberRange=c;function u(d){return e.call(d)==="[object Number]"&&-2147483648<=d&&d<=2147483647}o(u,"integer"),t.integer=u;function l(d){return e.call(d)==="[object Number]"&&0<=d&&d<=2147483647}o(l,"uinteger"),t.uinteger=l;function f(d){return e.call(d)==="[object Function]"}o(f,"func"),t.func=f;function g(d){return d!==null&&typeof d=="object"}o(g,"objectLiteral"),t.objectLiteral=g;function m(d,p){return Array.isArray(d)&&d.every(p)}o(m,"typedArray"),t.typedArray=m})(D||(D={}))});var yr=T(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.Argument=void 0;var Kl=class{static{o(this,"Argument")}constructor(e,n){this.value=e,this.range=n}toString(){return this.value}getRange(){return this.range}getValue(){return this.value}isAfter(e){return this.range.end.line<e.line?!1:this.range.start.line>e.line?!0:this.range.start.character>e.character}isBefore(e){return this.range.start.line<e.line?!0:this.range.end.line>e.line?!1:this.range.end.character<e.character}};Ja.Argument=Kl});var Yl=T(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.JSONArgument=void 0;var U_=yr(),$l=class extends U_.Argument{static{o(this,"JSONArgument")}constructor(e,n,r){super(e,n),this.jsonRange=r}getJSONRange(){return this.jsonRange}getJSONValue(){let e=super.getValue();return e=e.substring(1,e.length-1),e}};Qa.JSONArgument=$l});var hi=T(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.Line=void 0;var zl=class{static{o(this,"Line")}constructor(e,n){this.document=e,this.range=n}getRange(){return this.range}getTextContent(){return this.document.getText().substring(this.document.offsetAt(this.range.start),this.document.offsetAt(this.range.end))}isAfter(e){return this.range.start.line>e.range.start.line}isBefore(e){return this.range.start.line<e}};Xa.Line=zl});var nn=T(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.Util=void 0;var Jl=class t{static{o(this,"Util")}static isUTF8BOM(e){let n=Uint8Array.from(Buffer.from(e,"UTF-8"));return n[0]===239&&n[1]==187&&n[2]==191}static isWhitespace(e){return e===" "||e==="	"||t.isNewline(e)}static isNewline(e){return e==="\r"||e===`
`}static findLeadingNonWhitespace(e,n){e:for(let r=0;r<e.length;r++)switch(e.charAt(r)){case" ":case"	":continue;case n:t:for(let i=r+1;i<e.length;i++)switch(e.charAt(i)){case" ":case"	":continue;case"\r":r=i+1;continue e;case`
`:r=i;continue e;default:break t}return-1;default:return r}return-1}static isInsideRange(e,n){return n.start.line===n.end.line?n.start.line===e.line&&n.start.character<=e.character&&e.character<=n.end.character:n.start.line===e.line?n.start.character<=e.character:n.end.line===e.line?e.character<=n.end.character:n.start.line<e.line&&e.line<n.end.line}static parseHeredocName(e){if(e=e.substring(2),e.charAt(0)==="-"&&(e=e.substring(1)),e.charAt(0)==='"'){if(e.charAt(e.length-1)!=='"')return null;e=e.substring(1,e.length-1)}if(e.charAt(0)==="'"){if(e.charAt(e.length-1)!=="'")return null;e=e.substring(1,e.length-1)}return e.charAt(0)==="<"?null:e}};Za.Util=Jl});var Xl=T(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.Comment=void 0;var j_=(ve(),z(pe)),V_=hi(),hh=nn(),Ql=class extends V_.Line{static{o(this,"Comment")}constructor(e,n){super(e,n)}toString(){let e=this.getContent();return e?"# "+e:"#"}getContent(){let e=this.getContentRange();return e===null?"":this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end))}getContentRange(){let e=this.getRange(),n=this.document.offsetAt(e.start),r=this.document.getText().substring(n,this.document.offsetAt(e.end)),i=-1,a=-1;for(let s=1;s<r.length;s++)if(!hh.Util.isWhitespace(r.charAt(s))){i=s;break}if(i===-1)return null;for(let s=r.length-1;s>=1;s--)if(!hh.Util.isWhitespace(r.charAt(s))){a=s+1;break}return j_.Range.create(this.document.positionAt(n+i),this.document.positionAt(n+a))}};es.Comment=Ql});var eg=T(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.ParserDirective=void 0;var W_=qe(),G_=hi(),Zl=class extends G_.Line{static{o(this,"ParserDirective")}constructor(e,n,r,i){super(e,n),this.nameRange=r,this.valueRange=i}toString(){return"# "+this.getName()+"="+this.getValue()}getNameRange(){return this.nameRange}getValueRange(){return this.valueRange}getName(){return this.document.getText().substring(this.document.offsetAt(this.nameRange.start),this.document.offsetAt(this.nameRange.end))}getValue(){return this.document.getText().substring(this.document.offsetAt(this.valueRange.start),this.document.offsetAt(this.valueRange.end))}getDirective(){let e=W_.Directive[this.getName().toLowerCase()];return e===void 0?null:e}};ts.ParserDirective=Zl});var ng=T(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.Heredoc=void 0;var tg=class{static{o(this,"Heredoc")}constructor(e,n,r,i,a){this.startRange=e,this.name=n,this.nameRange=r,this.contentRange=i,this.endRange=a}getName(){return this.name}getStartRange(){return this.startRange}getNameRange(){return this.nameRange}getContentRange(){return this.contentRange}getDelimiterRange(){return this.endRange}};ns.Heredoc=tg});var ig=T(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.Variable=void 0;var rg=class{static{o(this,"Variable")}constructor(e,n,r,i,a,s,c,u,l,f){this.name=e,this.nameRange=n,this.range=r,this.modifier=i,this.modifierRange=a,this.substitutionParameter=s,this.substitutionRange=c,this.defined=u,this.buildVariable=l,this.stringValue=f}toString(){return this.stringValue}getName(){return this.name}getNameRange(){return this.nameRange}getRange(){return this.range}getModifier(){return this.modifier}getModifierRange(){return this.modifierRange}getSubstitutionParameter(){return this.substitutionParameter}getSubstitutionRange(){return this.substitutionRange}isDefined(){return this.defined}isBuildVariable(){return this.buildVariable===!0}isEnvironmentVariable(){return this.buildVariable===!1}};rs.Variable=rg});var rn=T(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.Instruction=void 0;var $=(ve(),z(pe)),mi=nn(),B_=hi(),jn=yr(),is=ng(),pi=ig(),K_=qe(),ag=class extends B_.Line{static{o(this,"Instruction")}constructor(e,n,r,i,a,s){super(e,n),this.dockerfile=r,this.escapeChar=i,this.instruction=a,this.instructionRange=s}toString(){let e=this.getKeyword();for(let n of this.getRawArguments())e+=" ",e+=n.getValue();return e}getRangeContent(e){return e===null?null:this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end))}getInstructionRange(){return this.instructionRange}getInstruction(){return this.instruction}getKeyword(){return this.getInstruction().toUpperCase()}getArgumentsRange(){let e=this.getArguments();return e.length===0?null:$.Range.create(e[0].getRange().start,e[e.length-1].getRange().end)}getArgumentsRanges(){let e=this.getArguments();if(e.length===0)return[];if(e[0].getRange().start.line===e[e.length-1].getRange().end.line)return[$.Range.create(e[0].getRange().start,e[e.length-1].getRange().end)];let n=[],r=-1,i=e[0].getRange().start,a=this.getInstructionRange(),s=this.document.offsetAt(i)-this.document.offsetAt(a.start),u=this.getTextContent().substring(s,this.document.offsetAt(e[e.length-1].getRange().end)-this.document.offsetAt(a.start)),l=this.document.offsetAt(a.start)+s,f=!1,g=!1;for(let m=0;m<u.length;m++){let d=u.charAt(m);if(d===this.escapeChar){let p=u.charAt(m+1);if(p===" "||p==="	")e:for(let v=m+2;v<u.length;v++)switch(u.charAt(v)){case" ":case"	":continue;case"\r":v++;case`
`:i!==null&&n.push($.Range.create(i,this.document.positionAt(l+r+1))),i=null,f=!0,g=!1,m=v;break e;default:break e}else p==="\r"?(i!==null&&(n.push($.Range.create(i,this.document.positionAt(l+r+1))),i=null),f=!0,g=!1,m+=2):(p===`
`&&(i!==null&&n.push($.Range.create(i,this.document.positionAt(l+r+1))),i=null,f=!0,g=!1),m++)}else if(mi.Util.isNewline(d))g&&(i=null,f=!0,g=!1);else if(!g){if(i===null){if(d==="#"){g=!0;continue}let p=this.document.positionAt(l+m);p.character!==0&&(i=$.Position.create(p.line,0))}r=m}}return i===null?n.push($.Range.create(this.document.positionAt(l+r),this.document.positionAt(l+r+1))):n.push($.Range.create(i,this.document.positionAt(l+r+1))),n}getRawArgumentsContent(){let e=this.getArguments();return e.length===0?null:this.getRangeContent($.Range.create(e[0].getRange().start,e[e.length-1].getRange().end))}getArgumentsContent(){if(this.getArguments().length===0)return null;let n="",r=this.getArgumentsRanges(),i=this.document.getText();for(let a of r)n+=i.substring(this.document.offsetAt(a.start),this.document.offsetAt(a.end));return n}getArguments(){return this.getRawArguments()}getRawArguments(){let e=[],n=this.getInstructionRange(),r=this.document.offsetAt(n.end)-this.document.offsetAt(n.start),a=this.getTextContent().substring(r),s=this.document.offsetAt(n.start)+r,c=!1,u=!1,l=-1,f=!1,g=!1,m=-1,d="";for(let p=0;p<a.length;p++){let v=a.charAt(p);if(mi.Util.isWhitespace(v))if(g){f=!0,mi.Util.isNewline(v)&&(f=!1,u&&(u=!1,c=!0));continue}else l!==-1&&(m===-1?e.push(new jn.Argument(d,$.Range.create(this.document.positionAt(s+l),this.document.positionAt(s+p)))):e.push(new jn.Argument(d,$.Range.create(this.document.positionAt(s+l),this.document.positionAt(s+m)))),m=-1,d="",l=-1);else if(v===this.escapeChar){let S=a.charAt(p+1);if(S===" "||S==="	")e:for(let k=p+2;k<a.length;k++)switch(a.charAt(k)){case" ":case"	":continue;case"\r":k++;case`
`:u=!1,g=!0,c=!0,l!==-1&&(m=p),p=k;break e;default:m=p,l===-1&&(p=k-1);break e}else if(S==="\r")u=!1,g=!0,c=!0,l!==-1&&m===-1&&(m=p),p+=2;else if(S===`
`)u=!1,g=!0,c=!0,l!==-1&&m===-1&&(m=p),p++;else{if(f&&m!==-1&&(e.push(new jn.Argument(d,$.Range.create(this.document.positionAt(s+l),this.document.positionAt(s+m)))),d="",l=-1),m=-1,f=!1,g=!1,S==="$")d=d+v+S;else{if(S==="")break;d=d+S}l===-1&&(l=p),p++}}else u||(c&&v==="#"?u=!0:(f&&m!==-1&&(e.push(new jn.Argument(d,$.Range.create(this.document.positionAt(s+l),this.document.positionAt(s+m)))),d="",l=-1),f=!1,g=!1,m=-1,d=d+v,l===-1&&(l=p)),c=!1)}return l!==-1&&(m===-1?e.push(new jn.Argument(d,$.Range.create(this.document.positionAt(s+l),this.document.positionAt(s+a.length)))):e.push(new jn.Argument(d,$.Range.create(this.document.positionAt(s+l),this.document.positionAt(s+m))))),e}getExpandedArguments(){let e=this.getArguments();for(let n=0;n<e.length;n++){let r=e[n].getRange(),i=this.document.offsetAt(r.start),a=this.parseVariables(i,e[n].getValue()),s=[],c=!1;for(let u of a){let l=this.dockerfile.resolveVariable(u.getName(),u.getNameRange().start.line);s.push(l),c=c||l!==void 0}if(c){let u="";for(let f=0;f<s.length;f++){let g=a[f].getRange(),m=this.document.offsetAt(g.start),d=this.document.offsetAt(g.end);s[f]?(u+=this.document.getText().substring(i,m),u+=s[f],i=d):(u+=this.document.getText().substring(i,d),i=d)}let l=this.document.offsetAt(r.end);l!==i&&(u+=this.document.getText().substring(i,l)),e[n]=new jn.Argument(u,r)}}return e}getVariables(){let e=[],n=this.getRawArguments();for(let r of n){let i=r.getRange(),a=this.document.getText().substring(this.document.offsetAt(i.start),this.document.offsetAt(i.end)),s=this.parseVariables(this.document.offsetAt(r.getRange().start),a);for(let c of s)e.push(c)}return e}parseVariables(e,n){let r=[];e:for(let i=0;i<n.length;i++)switch(n.charAt(i)){case this.escapeChar:n.charAt(i+1)==="$"&&i++;break;case"$":if(n.charAt(i+1)==="{"){let a="${",s="",c=-1,u="",l=-1,f=-1,g=-1;t:for(let m=i+2;m<n.length;m++){let d=n.charAt(m);switch(d){case this.escapeChar:for(let _=m+1;_<n.length;_++)switch(n.charAt(_)){case" ":case"	":case"\r":continue;case`
`:m=_;continue t}break;case"}":a+="}";let p=null,v=null,S=g!==-1?u:null,k=null;c===-1?c=m:c+1===m?(p="",v=$.Range.create(this.document.positionAt(e+c+1),this.document.positionAt(e+c+1))):(l===-1?(l=g+1,f=g+1):f=f+1,p=n.substring(g,g+1),v=$.Range.create(this.document.positionAt(e+g),this.document.positionAt(e+g+1)),k=$.Range.create(this.document.positionAt(e+l),this.document.positionAt(e+f)));let b=this.document.positionAt(e+i);r.push(new pi.Variable(s,$.Range.create(this.document.positionAt(e+i+2),this.document.positionAt(e+c)),$.Range.create(b,this.document.positionAt(e+m+1)),p,v,S,k,this.dockerfile.resolveVariable(s,b.line)!==void 0,this.isBuildVariable(s,b.line),a)),i=m;continue e;case":":c===-1?c=m:g!==-1?(l===-1&&(l=m),f=m,u+=":"):g=m,a+=":";break;case`
`:case"\r":case" ":case"	":break;default:c===-1?s+=d:g!==-1?(l===-1&&(l=m),f=m,u+=d):g=m,a+=d;break}}break e}else{if(mi.Util.isWhitespace(n.charAt(i+1))||i===n.length-1)continue;{let a="";t:for(let c=i+1;c<n.length;c++){let u=n.charAt(c);switch(u){case"\r":case`
`:case" ":case"	":continue;case"$":case"'":case'"':let l=this.document.positionAt(e+i);r.push(new pi.Variable(a,$.Range.create(this.document.positionAt(e+i+1),this.document.positionAt(e+c)),$.Range.create(l,this.document.positionAt(e+c)),null,null,null,null,this.dockerfile.resolveVariable(a,l.line)!==void 0,this.isBuildVariable(a,l.line),"$"+a)),i=c-1;continue e;case this.escapeChar:for(let g=c+1;g<n.length;g++)switch(n.charAt(g)){case" ":case"	":case"\r":continue;case`
`:c=g;continue t}let f=this.document.positionAt(e+i);r.push(new pi.Variable(a,$.Range.create(this.document.positionAt(e+i+1),this.document.positionAt(e+c)),$.Range.create(f,this.document.positionAt(e+c)),null,null,null,null,this.dockerfile.resolveVariable(a,f.line)!==void 0,this.isBuildVariable(a,f.line),"$"+a));break e}if(u.match(/^[a-z0-9_]+$/i)===null){let l=this.document.positionAt(e+i);r.push(new pi.Variable(a,$.Range.create(this.document.positionAt(e+i+1),this.document.positionAt(e+c)),$.Range.create(l,this.document.positionAt(e+c)),null,null,null,null,this.dockerfile.resolveVariable(a,l.line)!==void 0,this.isBuildVariable(a,l.line),"$"+a)),i=c-1;continue e}a+=u}let s=this.document.positionAt(e+i);r.push(new pi.Variable(a,$.Range.create(this.document.positionAt(e+i+1),this.document.positionAt(e+n.length)),$.Range.create(s,this.document.positionAt(e+n.length)),null,null,null,null,this.dockerfile.resolveVariable(a,s.line)!==void 0,this.isBuildVariable(a,s.line),"$"+a))}}break e}return r}isBuildVariable(e,n){if(this.getKeyword()===K_.Keyword.FROM){for(let s of this.dockerfile.getInitialARGs()){let u=s.getProperty();if(u&&e===u.getName())return!0}return}let r=this.dockerfile.getContainingImage($.Position.create(n,0)),i=r.getENVs();for(let s=i.length-1;s>=0;s--)if(i[s].isBefore(n)){for(let c of i[s].getProperties())if(c.getName()===e)return!1}let a=r.getARGs();for(let s=a.length-1;s>=0;s--)if(a[s].isBefore(n)){let c=a[s].getProperty();if(c&&c.getName()===e)return!0}}createSingleLineHeredocs(e){let n=[];for(let r of e){let i=r.getValue();if(i.startsWith("<<")&&mi.Util.parseHeredocName(i)!==null){let a=r.getRange(),s=this.getNameRange(a),c=this.getName(s);n.push(new is.Heredoc(a,c,s,null,null))}}return n}getName(e){let n=this.document.getText(e),r=!1,i="";e:for(let a=0;a<n.length;a++){let s=n.charAt(a);switch(s){case this.escapeChar:r=!0;for(let c=a+1;c<n.length;c++)switch(n.charAt(c)){case" ":case"	":break;case"\r":a=c+1;continue e;case`
`:a=c;continue e;default:i+=n.charAt(c),a=c;continue e}break;case"#":if(r)for(let c=a+1;c<n.length;c++)switch(n.charAt(c)){case`
`:a=c;continue e}case" ":case"	":case"\r":case`
`:if(r)break;default:i+=s;break}}return i}getNameRange(e){let n=this.document.getText(e),r=!1,i=!1,a=-1,s=-1,c=!1,u=null;e:for(let g=0;g<n.length;g++){let m=n.charAt(g);switch(m){case'"':case"'":if(u===m)break e;u=m;continue;case this.escapeChar:for(let d=g+1;d<n.length;d++)switch(n.charAt(d)){case`
`:c=!0,d=g;continue e}break;case" ":case"	":case"\r":case`
`:break;case"<":r?i=!0:r=!0;break;case"-":if(i){i=!1;break}case"#":if(c)for(let d=g+1;d<n.length;d++)switch(n.charAt(d)){case`
`:g=d;continue e}default:if(a===-1&&(a=g),u!==null){s=g+1;break}break e}}if(a===-1)return $.Range.create(e.end,e.end);let l=this.document.positionAt(this.document.offsetAt(e.start)+a),f=u!==null?this.document.positionAt(this.document.offsetAt(e.start)+s):e.end;return $.Range.create(l,f)}getHeredocs(){let e=this.getArguments();if(e.length===0)return[];let n=[],r=this.getRange();if(r.start.line===r.end.line)return this.createSingleLineHeredocs(e);let i=[],a=!1,s=!1,c=-1,u=-1,l=-1,f=0,g=this.document.offsetAt(e[0].getRange().start),m=this.getRangeContent($.Range.create(e[0].getRange().start,this.getRange().end));e:for(let d=0;d<m.length;d++)switch(m.charAt(d)){case this.escapeChar:s=!0;for(let p=d+1;p<m.length;p++)switch(m.charAt(p)){case" ":case"	":break;case"\r":p++;case`
`:d=p;continue e;default:d=p;continue e}break;case"\r":break;case`
`:if(s)break;if(a){c===-1&&(c=d),u=d;let p=i[f],v=p.getRange(),S=this.getNameRange(v),k=this.getName(S),b=this.getDelimiterRange(p,k,$.Range.create(this.document.positionAt(g+l),this.document.positionAt(g+d)));if(b!==null){let _=$.Range.create(this.document.positionAt(g+c),this.document.positionAt(g+l-1));n.push(new is.Heredoc(v,k,S,_,b)),c=-1,f++}l=-1}else{let p=g+d;for(let v of e)if(this.document.offsetAt(v.getRange().start)<p)v.getValue().startsWith("<<")&&i.push(v);else break;a=!0,l=-1;continue e}break;case" ":case"	":if(s)break;case"#":if(s)for(let p=d+1;p<m.length;p++)switch(m.charAt(p)){case`
`:d=p;continue e}default:s&&(s=!1),a&&(c===-1&&(c=d),l===-1&&(l=d));break}if(a){let d=i[f],p=d.getRange(),v=this.getNameRange(p),S=this.getName(v),k=null,b=this.getDelimiterRange(d,S,$.Range.create(this.document.positionAt(g+l),r.end));b===null?k=$.Range.create(this.document.positionAt(g+c),r.end):u!==-1&&(k=$.Range.create(this.document.positionAt(g+c),this.document.positionAt(g+u))),n.push(new is.Heredoc(p,S,v,k,b)),f++;for(let _=f;_<i.length;_++){let w=i[f].getRange(),V=this.getNameRange(w),B=this.getName(V);n.push(new is.Heredoc(w,B,V,null,null)),f++}}else return this.createSingleLineHeredocs(e);return n}getDelimiterRange(e,n,r){let i=this.document.getText(r);if(e.getValue().startsWith("<<-")){let a=0;for(;i.charAt(a)==="	";)a++;return i.substring(a)===n?$.Range.create($.Position.create(r.start.line,a),r.end):null}return i===n?r:null}};as.Instruction=ag});var mh=T(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.FlagOption=void 0;var sg=class{static{o(this,"FlagOption")}constructor(e,n,r,i,a){this.range=e,this.name=n,this.nameRange=r,this.value=i,this.valueRange=a}toString(){return this.valueRange!==null?this.name+"="+this.value:this.name}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}};ss.FlagOption=sg});var ug=T(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.Flag=void 0;var og=(ve(),z(pe)),ph=mh(),cg=class{static{o(this,"Flag")}constructor(e,n,r,i,a,s){if(this.options=[],this.range=n,this.name=r,this.nameRange=i,this.value=a,this.valueRange=s,this.value!==null){let c=e.offsetAt(s.start),u=-1,l=-1,f=!1;for(let g=0;g<a.length;g++)switch(a.charAt(g)){case"=":if(f=!0,l===-1){l=g+1;break}break;case",":this.options.push(this.createFlagOption(e,a,c,u,l,g)),u=-1,l=-1;break;default:u===-1&&(u=g);break}f&&u!==-1&&this.options.push(this.createFlagOption(e,a,c,u,l,a.length))}}createFlagOption(e,n,r,i,a,s){let c=og.Range.create(e.positionAt(r+i),e.positionAt(r+s));return a===-1?new ph.FlagOption(c,n.substring(i,s),c,null,null):new ph.FlagOption(c,n.substring(i,a-1),og.Range.create(e.positionAt(r+i),e.positionAt(r+a-1)),n.substring(a,s),og.Range.create(e.positionAt(r+a),e.positionAt(r+s)))}toString(){return this.valueRange?"--"+this.name+"="+this.value:"--"+this.name}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}getOption(e){for(let n of this.options)if(n.getName()===e)return n;return null}getOptions(){return this.options}hasOptions(){return this.options.length>0}};os.Flag=cg});var Ri=T(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.ModifiableInstruction=void 0;var vi=(ve(),z(pe)),lg=ug(),$_=rn(),gg=class extends $_.Instruction{static{o(this,"ModifiableInstruction")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}getFlags(){if(!this.flags){this.flags=[];for(let e of this.getArguments()){let n=e.getValue();if(this.stopSearchingForFlags(n))return this.flags;if(n.indexOf("--")===0){let r=e.getRange(),i=this.document.getText().substring(this.document.offsetAt(r.start),this.document.offsetAt(r.end)),a=n.indexOf("="),s=i.indexOf("="),c=!1,u=!1,l=-1;e:for(let g=0;g<i.length;g++)switch(i.charAt(g)){case"\\":case" ":case"	":case"\r":case`
`:break;case"-":if(u){l=g;break e}else c?u=!0:c=!0;break;default:l=g;break e}let f=this.document.positionAt(this.document.offsetAt(r.start)+l);if(s===-1)this.flags.push(new lg.Flag(this.document,r,n.substring(2),vi.Range.create(f,r.end),null,null));else if(s===n.length-1){let g=this.document.positionAt(this.document.offsetAt(r.start)+s);this.flags.push(new lg.Flag(this.document,r,n.substring(2,s),vi.Range.create(f,g),"",vi.Range.create(r.end,r.end)))}else{let g=this.document.positionAt(this.document.offsetAt(r.start)+s);this.flags.push(new lg.Flag(this.document,r,n.substring(2,a),vi.Range.create(f,g),n.substring(a+1),vi.Range.create(this.document.positionAt(this.document.offsetAt(r.start)+s+1),r.end)))}}}}return this.flags}getArguments(){let e=super.getArguments(),n=this.getFlags();if(n.length===0)return e;for(let r=0;r<n.length;r++)e.shift();return e}};cs.ModifiableInstruction=gg});var an=T(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.JSONInstruction=void 0;var Dr=(ve(),z(pe)),us=yr(),Y_=Yl(),z_=Ri(),dg=class extends z_.ModifiableInstruction{static{o(this,"JSONInstruction")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s),this.openingBracket=null,this.closingBracket=null,this.jsonStrings=[];let c=this.getRawArgumentsContent();if(c===null)return;let u=this.getArguments();if(u.length===1&&u[0].getValue()==="[]"){let p=u[0].getRange();this.openingBracket=new us.Argument("[",Dr.Range.create(p.start.line,p.start.character,p.start.line,p.start.character+1)),this.closingBracket=new us.Argument("]",Dr.Range.create(p.start.line,p.start.character+1,p.end.line,p.end.character));return}else if(u.length===2&&u[0].getValue()==="["&&u[1].getValue()==="]"){this.openingBracket=u[0],this.closingBracket=u[1];return}let l=e.offsetAt(this.getArgumentsRange().start),f=-1,g="",m=!1,d="";e:for(let p=0;p<c.length;p++){let v=c.charAt(p);switch(v){case"[":if(g==="")this.openingBracket=new us.Argument("[",Dr.Range.create(e.positionAt(l+p),e.positionAt(l+p+1))),g="[";else if(m)d=d+v;else break e;break;case'"':if(g==="["||g===","){f=p,m=!0,g='"',d=d+v;continue}else if(g==='"')if(m)d=d+v,m=!1,this.jsonStrings.push(new Y_.JSONArgument(d,Dr.Range.create(e.positionAt(l+f),e.positionAt(l+p+1)),Dr.Range.create(e.positionAt(l+f+1),e.positionAt(l+p)))),d="";else break e;else break e;break;case",":if(m)d=d+v;else if(g==='"')g=",";else break e;break;case"]":if(m)d=d+v;else if(g!==""){this.closingBracket=new us.Argument("]",Dr.Range.create(e.positionAt(l+p),e.positionAt(l+p+1)));break e}break;case" ":case"	":break;case"\\":if(m)switch(c.charAt(p+1)){case'"':case"\\":d=d+c.charAt(p+1),p++;continue;case" ":case"	":t:for(let S=p+2;S<c.length;S++)switch(c.charAt(S)){case"\r":S++;case`
`:p=S;continue e;case" ":case"	":break;default:break t}break;case"\r":p++;default:p++;continue}else t:for(let S=p+1;S<c.length;S++)switch(c.charAt(S)){case"\r":S++;case`
`:p=S;continue e;case" ":case"	":break;default:break t}break e;default:if(!m)break e;d=d+v;break}}}stopSearchingForFlags(e){return!0}getOpeningBracket(){return this.openingBracket}getJSONStrings(){return this.jsonStrings}getClosingBracket(){return this.closingBracket}};ls.JSONInstruction=dg});var hg=T(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.Add=void 0;var J_=an(),fg=class extends J_.JSONInstruction{static{o(this,"Add")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}stopSearchingForFlags(e){return e.indexOf("--")===-1}};gs.Add=fg});var hs=T(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.Property=void 0;var ds=(ve(),z(pe)),Q_=nn(),mg=class t{static{o(this,"Property")}constructor(e,n,r,i){this.assignmentOperatorRange=null,this.assignmentOperator=null,this.valueRange=null,this.value=null,this.document=e,this.escapeChar=n,this.nameRange=t.getNameRange(e,r);let a=e.getText().substring(e.offsetAt(this.nameRange.start),e.offsetAt(this.nameRange.end));if(this.name=t.getValue(a,n),i)this.valueRange=i.getRange(),a=e.getText().substring(e.offsetAt(this.valueRange.start),e.offsetAt(this.valueRange.end)),this.value=t.getValue(a,n),this.range=ds.Range.create(this.nameRange.start,this.valueRange.end);else{let s=r.getRange();this.nameRange.start.line===s.start.line&&this.nameRange.start.character===s.start.character&&this.nameRange.end.line===s.end.line&&this.nameRange.end.character===s.end.character||(this.valueRange=t.getValueRange(e,r),a=e.getText().substring(e.offsetAt(this.valueRange.start),e.offsetAt(this.valueRange.end)),this.value=t.getValue(a,n),this.assignmentOperatorRange=ds.Range.create(this.nameRange.end,this.valueRange.start),this.assignmentOperator="="),this.range=s}}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}getAssignmentOperator(){return this.assignmentOperator}getAssignmentOperatorRange(){return this.assignmentOperatorRange}getUnescapedValue(){if(this.valueRange===null)return null;let e=!1,n="",r=this.document.getText().substring(this.document.offsetAt(this.valueRange.start),this.document.offsetAt(this.valueRange.end));e:for(let i=0;i<r.length;i++){let a=r.charAt(i);switch(a){case this.escapeChar:for(let s=i+1;s<r.length;s++)switch(r.charAt(s)){case"\r":s++;case`
`:e=!0,i=s;continue e;case" ":case"	":break;default:n=n+a;continue e}n=n+a;break;case"\r":case`
`:break;case" ":case"	":e||(n=n+a);break;case"#":if(e)for(let s=i+1;s<r.length;s++)switch(r.charAt(s)){case"\r":s++;case`
`:i=s;continue e}else n=n+a;break;default:n=n+a,e=!1;break}}return n}static getNameRange(e,n){let r=n.getValue(),i=r.indexOf("=");if(i!==-1){let a=r.charAt(0),s=r.charAt(i-1);if(a==='"'&&s==='"'||a==="'"&&s==="'"||a!=='"'&&a!=="'")return ds.Range.create(n.getRange().start,e.positionAt(e.offsetAt(n.getRange().start)+i))}return n.getRange()}static getValueRange(e,n){return ds.Range.create(e.positionAt(e.offsetAt(n.getRange().start)+n.getValue().indexOf("=")+1),e.positionAt(e.offsetAt(n.getRange().end)))}static getValue(e,n){let r=!1,i=Q_.Util.findLeadingNonWhitespace(e,n);i!==0&&e.charAt(i)==="#"&&(r=!0),e=e.substring(i);let a=e.charAt(0),s=e.charAt(e.length-1),c=a==="'"||a==='"',u=a==="'"&&s==="'",l=!1;if(a==='"')for(let d=1;d<e.length;d++)e.charAt(d)===n?d++:e.charAt(d)==='"'&&d===e.length-1&&(l=!0);(u||l)&&(e=e.substring(1,e.length-1));let f=-1,g="",m=0;e:for(let d=0;d<e.length;d++){let p=e.charAt(d);switch(p){case n:if(d+1===e.length){g=g+n;break e}if(p=e.charAt(d+1),p===" "||p==="	")t:for(let v=d+2;v<e.length;v++){let S=e.charAt(v);switch(S){case" ":case"	":break;case"\r":v++;case`
`:r=!0,d=v;continue e;default:if(!l&&!u&&!c){S===n?(g=g+p,d=d+1):(g=g+p+S,d=v);continue e}break t}}if(l){p==="\r"?(r=!0,d=d+2):p===`
`?(r=!0,d++):p!=='"'&&(p===n&&d++,g=g+n);continue e}else if(u||c){p==="\r"?(r=!0,d=d+2):p===`
`?(r=!0,d++):g=g+n;continue e}else p===n?(g=g+n,d++):p==="\r"?(r=!0,d=d+2):p===`
`?(r=!0,d++,m=d):(g=g+p,d++);break;case" ":case"	":r&&f===-1&&(f=d),g=g+p;break;case"\r":d++;case`
`:r&&f!==-1&&(g=g.substring(0,g.length-(d-f-1)),f=-1);break;case"#":if(r){f!==-1&&(g=g.substring(0,g.length-(d-f)),f=-1);t:for(let v=d+1;v<e.length;v++)switch(e.charAt(v)){case"\r":v++;case`
`:d=v;break t}continue e}default:r&&(r=!1,f=-1),g=g+p;break}}return g}};fs.Property=mg});var _i=T(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.PropertyInstruction=void 0;var Vn=(ve(),z(pe)),X_=rn(),kr=hs(),Wn=yr(),vh=nn(),pg=class extends X_.Instruction{static{o(this,"PropertyInstruction")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s),this.properties=void 0}getProperties(){if(this.properties===void 0){let e=this.getPropertyArguments();if(e.length===0)this.properties=[];else if(e.length===1)this.properties=[new kr.Property(this.document,this.escapeChar,e[0])];else if(e.length===2)e[0].getValue().indexOf("=")===-1?this.properties=[new kr.Property(this.document,this.escapeChar,e[0],e[1])]:this.properties=[new kr.Property(this.document,this.escapeChar,e[0]),new kr.Property(this.document,this.escapeChar,e[1])];else if(e[0].getValue().indexOf("=")===-1){let n=this.document.getText(),r=e[1].getRange().start,i=e[e.length-1].getRange().end;n=n.substring(this.document.offsetAt(r),this.document.offsetAt(i)),this.properties=[new kr.Property(this.document,this.escapeChar,e[0],new Wn.Argument(n,Vn.Range.create(e[1].getRange().start,e[e.length-1].getRange().end)))]}else{this.properties=[];for(let n=0;n<e.length;n++)this.properties.push(new kr.Property(this.document,this.escapeChar,e[n]))}}return this.properties}findTrailingNonWhitespace(e){let n=e.length;e:for(let r=e.length-1;r>=0;r--)switch(e.charAt(r)){case" ":case"	":continue;case`
`:e.charAt(r-1)==="\r"&&(r=r-1);case"\r":t:for(let i=r-1;i>=0;i--)switch(e.charAt(i)){case" ":case"	":case"\r":case`
`:case this.escapeChar:continue;default:n=i;break t}break e;default:n=r;break e}return n}getPropertyArguments(){let e=[],n=this.getInstructionRange(),r=this.document.offsetAt(n.end),i=r-this.document.offsetAt(n.start),a=this.getTextContent(),s=a.substring(i),c=vh.Util.findLeadingNonWhitespace(s,this.escapeChar);if(c===-1)return[];let u=this.document.positionAt(r+c),l=n.start.line!==u.line,f=!1,g=-1,m=this.findTrailingNonWhitespace(s);a=s.substring(c,m+1);let d=l?-1:0,p=!1;e:for(let v=0;v<a.length;v++){let S=a.charAt(v);switch(S){case this.escapeChar:if(v+1===a.length){f=!0;break e}switch(l||(g=v),a.charAt(v+1)){case" ":case"	":if(!vh.Util.isWhitespace(a.charAt(v+2))){v=v+1;continue e}t:for(let k=v+2;k<a.length;k++)switch(a.charAt(k)){case"\r":k++;case`
`:l=!0,v=k;continue e;case" ":case"	":break;default:e.push(new Wn.Argument(a.substring(d,v),Vn.Range.create(this.document.positionAt(r+c+d),this.document.positionAt(r+c+v+2)))),d=k;break t}v=d-1;continue e;case"\r":v++;case`
`:l=!0,v=v+1;continue e;case this.escapeChar:d===-1&&(d=v),v=v+1;continue e;default:d===-1&&(d=v);continue e}case"'":case'"':p&&(this.createSpacedArgument(d,e,a,g,r,c),d=v,p=!1),d===-1&&(d=v);for(let k=v+1;k<a.length;k++)switch(a.charAt(k)){case S:if(a.charAt(k+1)!==" "&&a.charAt(k+1)!==""){v=k;continue e}e.push(new Wn.Argument(a.substring(d,k+1),Vn.Range.create(this.document.positionAt(r+c+d),this.document.positionAt(r+c+k+1)))),v=k,d=-1;continue e;case this.escapeChar:k++;break}break e;case" ":case"	":l?d!==-1&&(p=!0):d!==-1&&(e.push(new Wn.Argument(a.substring(d,v),Vn.Range.create(this.document.positionAt(r+c+d),this.document.positionAt(r+c+v)))),d=-1);break;case"\r":v++;case`
`:p=!1;break;case"#":if(l){for(let k=v+1;k<a.length;k++)switch(a.charAt(k)){case"\r":k++;case`
`:v=k,p=!1;continue e}if(d!==-1){let k=a.substring(d,g);e.push(new Wn.Argument(k,Vn.Range.create(this.document.positionAt(r+c+d),this.document.positionAt(r+c+g)))),d=-1}break e}else d===-1&&(d=v);break;default:if(p&&(this.createSpacedArgument(d,e,a,g,r,c),d=v,p=!1),l=!1,d===-1&&(d=v),S==="$"&&a.charAt(v+1)==="{"){let k=!1,b=!1,_=!1;for(let A=v+1;A<a.length;A++)switch(a.charAt(A)){case this.escapeChar:_=!0;break;case"\r":case`
`:break;case"'":k=!k,_=!1;break;case'"':b=!b,_=!1;break;case" ":case"	":if(_||k||b)break;v=A-1;continue e;case"}":v=A;continue e;default:_=!1;break}break e}break}}if(d!==-1&&d!==a.length){let v=f?a.length-1:a.length,S=a.substring(d,v);e.push(new Wn.Argument(S,Vn.Range.create(this.document.positionAt(r+c+d),this.document.positionAt(r+c+v))))}return e}createSpacedArgument(e,n,r,i,a,s){e!==-1&&n.push(new Wn.Argument(r.substring(e,i),Vn.Range.create(this.document.positionAt(a+s+e),this.document.positionAt(a+s+i))))}};ms.PropertyInstruction=pg});var vs=T(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.Arg=void 0;var Z_=hs(),eb=_i(),vg=class extends eb.PropertyInstruction{static{o(this,"Arg")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s),this.property=null;let c=this.getPropertyArguments();c.length===1?this.property=new Z_.Property(this.document,this.escapeChar,c[0]):this.property=null}getProperty(){return this.property}};ps.Arg=vg});var _s=T(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.Cmd=void 0;var tb=an(),Rg=class extends tb.JSONInstruction{static{o(this,"Cmd")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}};Rs.Cmd=Rg});var ys=T(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.Copy=void 0;var nb=an(),_g=class extends nb.JSONInstruction{static{o(this,"Copy")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}stopSearchingForFlags(e){return e.indexOf("--")===-1}getFromFlag(){let e=super.getFlags();return e.length===1&&e[0].getName()==="from"?e[0]:null}getHeredocs(){return super.getHeredocs()}};bs.Copy=_g});var ks=T(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.Env=void 0;var rb=_i(),bg=class extends rb.PropertyInstruction{static{o(this,"Env")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}getProperties(){return super.getProperties()}};Ds.Env=bg});var As=T(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.Entrypoint=void 0;var ib=an(),yg=class extends ib.JSONInstruction{static{o(this,"Entrypoint")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}};Ss.Entrypoint=yg});var bi=T(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.From=void 0;var Sr=(ve(),z(pe)),ab=Ri(),Dg=class extends ab.ModifiableInstruction{static{o(this,"From")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}stopSearchingForFlags(e){return e.indexOf("--")===-1}getImage(){let e=this.getArguments();return e.length>0?e[0].getValue():null}getImageName(){let e=this.getRangeContent(this.getImageNameRange());if(e===null)return null;let n=!1,r=!1,i="";for(let a=0;a<e.length;a++){let s=e.charAt(a);switch(s){case this.escapeChar:r=!0;break;case"\r":continue;case`
`:n=!1;break;case" ":case"	":break;case"#":r?n=!0:(i=i+s,r=!1);break;default:n||(i=i+s,r=!1);break}}return i}getImageNameRange(){let e=this.getImageRange();if(e){let n=this.getRegistryRange();n&&(e.start=this.document.positionAt(this.document.offsetAt(n.end)+1));let r=this.getImageTagRange(),i=this.getImageDigestRange();return r===null?i!==null&&(e.end=this.document.positionAt(this.document.offsetAt(i.start)-1)):e.end=this.document.positionAt(this.document.offsetAt(r.start)-1),e}return null}getImageRange(){let e=this.getArguments();return e.length!==0?e[0].getRange():null}getImageTag(){return this.getRangeContent(this.getImageTagRange())}getImageTagRange(){let e=this.getImageRange();if(e){let n=this.document.offsetAt(e.start),r=this.getRangeContent(e),i=this.indexOf(n,r,"@"),a=r.indexOf("/");if(i===-1){let u=this.lastIndexOf(n,r,":");if(u>a)return Sr.Range.create(this.document.positionAt(n+u+1),e.end)}let s=r.substring(0,i),c=s.indexOf(":");return c===-1?null:a===-1?Sr.Range.create(this.document.positionAt(n+c+1),this.document.positionAt(n+i)):c<a?null:Sr.Range.create(this.document.positionAt(n+c+1),this.document.positionAt(n+s.length))}return null}getImageDigest(){return this.getRangeContent(this.getImageDigestRange())}getImageDigestRange(){let e=this.getImageRange();if(e){let n=this.getRangeContent(e),r=this.lastIndexOf(this.document.offsetAt(e.start),n,"@");if(r!==-1)return Sr.Range.create(e.start.line,e.start.character+r+1,e.end.line,e.end.character)}return null}indexOf(e,n,r){let i=n.indexOf(r),a=this.getVariables();for(let s=0;s<a.length;s++){let c=e+i,u=a[s].getRange();if(this.document.offsetAt(u.start)<c&&c<this.document.offsetAt(u.end)){let l=this.document.offsetAt(u.end)-e,g=n.substring(l).indexOf(r);if(g===-1)return-1;i=g+l,s=-1;continue}}return i}lastIndexOf(e,n,r){let i=n.lastIndexOf(r),a=this.getVariables();for(let s=0;s<a.length;s++){let c=e+i,u=a[s].getRange();if(this.document.offsetAt(u.start)<c&&c<this.document.offsetAt(u.end)){if(i=n.substring(0,i).lastIndexOf(r),i===-1)return-1;s=-1;continue}}return i}getRegistry(){return this.getRangeContent(this.getRegistryRange())}getRegistryRange(){let e=this.getImageRange();if(e){let n=this.getImageTagRange(),r=this.getImageDigestRange();n===null?r!==null&&(e.end=this.document.positionAt(this.document.offsetAt(r.start)-1)):e.end=this.document.positionAt(this.document.offsetAt(n.start)-1);let i=this.getRangeContent(e),a=this.document.offsetAt(e.start),s=this.indexOf(a,i,"/");if(s===-1)return null;let c=this.indexOf(a,i,":"),u=this.indexOf(a,i,".");if(c!==-1||u!==-1)return Sr.Range.create(e.start,this.document.positionAt(a+s));if(i.substring(0,s)==="localhost")return Sr.Range.create(e.start,this.document.positionAt(a+s))}return null}getBuildStage(){let e=this.getBuildStageRange();return e===null?null:this.getRangeContent(e)}getBuildStageRange(){let e=this.getArguments();return e.length>2&&e[1].getValue().toUpperCase()==="AS"?e[2].getRange():null}getPlatformFlag(){let e=super.getFlags();return e.length===1&&e[0].getName()==="platform"?e[0]:null}};Ts.From=Dg});var Cs=T(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.Healthcheck=void 0;var sb=Ri(),kg=class extends sb.ModifiableInstruction{static{o(this,"Healthcheck")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}stopSearchingForFlags(e){return e=e.toUpperCase(),e==="CMD"||e==="NONE"}getSubcommand(){let e=this.getArguments();return e.length!==0?e[0]:null}};Es.Healthcheck=kg});var Ag=T(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.Label=void 0;var ob=_i(),cb=nn(),Sg=class extends ob.PropertyInstruction{static{o(this,"Label")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}getVariables(){let e=super.getVariables(),n=this.getProperties();for(let r of n){let i=r.getUnescapedValue();if(i!==null&&i.length>2&&i.charAt(0)==="'"&&i.charAt(i.length-1)==="'"){let a=r.getValueRange();for(let s=0;s<e.length;s++)cb.Util.isInsideRange(e[s].getRange().start,a)&&(e.splice(s,1),s--)}}return e}getProperties(){return super.getProperties()}};Ps.Label=Sg});var Ns=T(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.Onbuild=void 0;var ub=(ve(),z(pe)),lb=Eg(),gb=rn(),Tg=class extends gb.Instruction{static{o(this,"Onbuild")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}getTrigger(){let e=this.getTriggerWord();return e===null?null:e.toUpperCase()}getTriggerWord(){return this.getRangeContent(this.getTriggerRange())}getTriggerRange(){let e=this.getArguments();return e.length>0?e[0].getRange():null}getTriggerInstruction(){let e=this.getTriggerRange();if(e===null)return null;let n=this.getArguments();return lb.Parser.createInstruction(this.document,this.dockerfile,this.escapeChar,ub.Range.create(n[0].getRange().start,this.getRange().end),this.getTriggerWord(),e)}};Is.Onbuild=Tg});var Pg=T(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.Run=void 0;var db=an(),Cg=class extends db.JSONInstruction{static{o(this,"Run")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}stopSearchingForFlags(e){return e.indexOf("--")===-1}getHeredocs(){return super.getHeredocs()}};Ms.Run=Cg});var Ng=T(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.Shell=void 0;var fb=an(),Ig=class extends fb.JSONInstruction{static{o(this,"Shell")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}};Os.Shell=Ig});var Og=T(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.Stopsignal=void 0;var hb=rn(),Mg=class extends hb.Instruction{static{o(this,"Stopsignal")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}};ws.Stopsignal=Mg});var Ls=T(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.Workdir=void 0;var mb=rn(),wg=class extends mb.Instruction{static{o(this,"Workdir")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}getPath(){return this.getArgumentsContent()}getAbsolutePath(){let e=this.getPath();if(e===null||e.startsWith("/"))return e;let n=this.getRange().start.line,r=this.dockerfile.getStageHierarchy(n);for(let i=r.length-1;i>=0;i--){let a=r[i].getWORKDIRs();for(let s=a.length-1;s>=0;s--)if(a[s].getRange().start.line<n){let c=a[s].getAbsolutePath();return c==null?void 0:c.endsWith("/")?c+e:c+"/"+e}}}};xs.Workdir=wg});var Lg=T(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.User=void 0;var pb=rn(),xg=class extends pb.Instruction{static{o(this,"User")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}};Fs.User=xg});var qg=T(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.Volume=void 0;var vb=an(),Fg=class extends vb.JSONInstruction{static{o(this,"Volume")}constructor(e,n,r,i,a,s){super(e,n,r,i,a,s)}};qs.Volume=Fg});var bh=T(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.ImageTemplate=void 0;var Hg=(ve(),z(pe)),Rb=vs(),_b=_s(),bb=ys(),yb=ks(),Db=As(),Rh=bi(),kb=Cs(),Sb=Ns(),_h=nn(),Ab=Ls(),Ug=class{static{o(this,"ImageTemplate")}constructor(){this.comments=[],this.instructions=[]}addComment(e){this.comments.push(e)}getComments(){return this.comments}addInstruction(e){this.instructions.push(e)}getInstructions(){return this.instructions}getInstructionAt(e){for(let n of this.instructions)if(_h.Util.isInsideRange(Hg.Position.create(e,0),n.getRange()))return n;return null}getARGs(){let e=[];for(let n of this.instructions)n instanceof Rb.Arg&&e.push(n);return e}getCMDs(){let e=[];for(let n of this.instructions)n instanceof _b.Cmd&&e.push(n);return e}getCOPYs(){let e=[];for(let n of this.instructions)n instanceof bb.Copy&&e.push(n);return e}getENTRYPOINTs(){let e=[];for(let n of this.instructions)n instanceof Db.Entrypoint&&e.push(n);return e}getENVs(){let e=[];for(let n of this.instructions)n instanceof yb.Env&&e.push(n);return e}getFROM(){for(let e of this.instructions)if(e instanceof Rh.From)return e;return null}getFROMs(){let e=[];for(let n of this.instructions)n instanceof Rh.From&&e.push(n);return e}getHEALTHCHECKs(){let e=[];for(let n of this.instructions)n instanceof kb.Healthcheck&&e.push(n);return e}getWORKDIRs(){let e=[];for(let n of this.instructions)n instanceof Ab.Workdir&&e.push(n);return e}getOnbuildTriggers(){let e=[];for(let n of this.instructions)if(n instanceof Sb.Onbuild){let r=n.getTriggerInstruction();r&&e.push(r)}return e}getAvailableVariables(e){let n=[];for(let r of this.getARGs())if(r.isBefore(e)){let i=r.getProperty();if(i){let a=i.getName();n.indexOf(a)===-1&&n.push(a)}}for(let r of this.getENVs())if(r.isBefore(e))for(let i of r.getProperties()){let a=i.getName();n.indexOf(a)===-1&&n.push(a)}return n}resolveVariable(e,n){let r=this.getENVs();for(let a=r.length-1;a>=0;a--)if(r[a].isBefore(n)){for(let s of r[a].getProperties())if(s.getName()===e)return s.getValue()}let i=this.getARGs();for(let a=i.length-1;a>=0;a--)if(i[a].isBefore(n)){let s=i[a].getProperty();if(s&&s.getName()===e)return s.getValue()}}getRange(){let e=this.getInstructions();if(e.length===0)return Hg.Range.create(0,0,0,0);let n=e[0].getRange().start,r=e[e.length-1].getRange().end;return Hg.Range.create(n,r)}contains(e){let n=this.getRange();return n===null?!1:_h.Util.isInsideRange(e,n)}};Hs.ImageTemplate=Ug});var yh=T(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.Dockerfile=void 0;var Dt=(ve(),z(pe)),Tb=qe(),yi=bh(),Eb=bi(),Di=nn(),Cb=qe(),jg=class extends yi.ImageTemplate{static{o(this,"Dockerfile")}constructor(e){super(),this.initialInstructions=new yi.ImageTemplate,this.buildStages=[],this.directives=[],this.foundFrom=!1,this.document=e}getEscapeCharacter(){for(let e of this.directives)if(e.getDirective()===Tb.Directive.escape){let n=e.getValue();if(n==="\\"||n==="`")return n}return"\\"}getInitialARGs(){return this.initialInstructions.getARGs()}getContainingImage(e){let n=Dt.Range.create(Dt.Position.create(0,0),this.document.positionAt(this.document.getText().length));if(!Di.Util.isInsideRange(e,n))return null;if((this.initialInstructions.getComments().length>0||this.initialInstructions.getInstructions().length>0)&&Di.Util.isInsideRange(e,this.initialInstructions.getRange()))return this.initialInstructions;for(let r of this.buildStages)if(Di.Util.isInsideRange(e,r.getRange()))return r;return this}addInstruction(e){e.getKeyword()===Cb.Keyword.FROM?(this.currentBuildStage=new yi.ImageTemplate,this.buildStages.push(this.currentBuildStage),this.foundFrom=!0):this.foundFrom||this.initialInstructions.addInstruction(e),this.foundFrom&&this.currentBuildStage.addInstruction(e),super.addInstruction(e)}setDirectives(e){this.directives=e}getDirective(){return this.directives.length===0?null:this.directives[0]}getDirectives(){return this.directives}resolveVariable(e,n){for(let a of this.getFROMs()){let s=a.getRange();if(s.start.line<=n&&n<=s.end.line){let c=new yi.ImageTemplate;for(let u of this.initialInstructions.getARGs())c.addInstruction(u);return c.resolveVariable(e,n)}}let r=this.getContainingImage(Dt.Position.create(n,0));if(r===null)return;let i=r.resolveVariable(e,n);if(i===null){let a=new yi.ImageTemplate;for(let s of this.initialInstructions.getARGs())a.addInstruction(s);return a.resolveVariable(e,n)}return i}getAvailableVariables(e){if(this.getInstructionAt(e)instanceof Eb.From){let r=[];for(let i of this.getInitialARGs()){let a=i.getProperty();a&&r.push(a.getName())}return r}let n=this.getContainingImage(Dt.Position.create(e,0));return n?n.getAvailableVariables(e):[]}getParentStage(e){let n=e.getFROM(),r=n===null?null:n.getImageName();if(r===null)return null;for(let i of this.getFROMs())if(i.getBuildStage()===r){let a=i.getRange();return a.start.line===n.getRange().start.line?null:this.getContainingImage(a.start)}return null}getStageHierarchy(e){let n=this.getContainingImage(Dt.Position.create(e,0));if(n===null)return[];let r=[n],i=this.getParentStage(n);for(;i!==null;)r.splice(0,0,i),i=this.getParentStage(i);return r}getAvailableWorkingDirectories(e){let n=new Set;for(let r of this.getStageHierarchy(e))for(let i of r.getWORKDIRs())if(i.getRange().end.line<e){let a=i.getAbsolutePath();a!=null&&(a.endsWith("/")||(a+="/"),n.add(a))}return Array.from(n)}organizeComments(){let e=this.getComments();for(let n=0;n<e.length;n++)if(Di.Util.isInsideRange(e[n].getRange().end,this.initialInstructions.getRange()))this.initialInstructions.addComment(e[n]);else for(let r of this.buildStages)Di.Util.isInsideRange(e[n].getRange().start,r.getRange())&&r.addComment(e[n])}getRange(){let e=this.getComments(),n=this.getInstructions(),r=null;if(e.length===0)n.length>0&&(r=Dt.Range.create(n[0].getRange().start,n[n.length-1].getRange().end));else if(n.length===0)r=Dt.Range.create(e[0].getRange().start,e[e.length-1].getRange().end);else{let i=e[0].getRange().start,a=e[e.length-1].getRange().end,s=n[0].getRange().start,c=n[n.length-1].getRange().end;i.line<s.line?(a.line<c.line&&(r=Dt.Range.create(i,c)),r=Dt.Range.create(i,a)):a.line<c.line?r=Dt.Range.create(s,c):r=Dt.Range.create(s,a)}return r===null?this.directives.length===0?null:this.directives[0].getRange():this.directives.length===0?r:Dt.Range.create(this.directives[0].getRange().start,r.end)}};Us.Dockerfile=jg});var Eg=T(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.Parser=void 0;var Pb=(Fi(),z(Li)),Gn=(ve(),z(pe)),Ib=Xl(),Nb=eg(),Mb=rn(),Ob=hg(),wb=vs(),xb=_s(),Lb=ys(),Fb=ks(),qb=As(),Hb=bi(),Ub=Cs(),jb=Ag(),Vb=Ns(),Wb=Pg(),Gb=Ng(),Bb=Og(),Kb=Ls(),$b=Lg(),Yb=qg(),zb=yh(),Vg=nn(),js=qe(),Wg=class t{static{o(this,"Parser")}constructor(){this.escapeChar=null}static createInstruction(e,n,r,i,a,s){switch(a.toUpperCase()){case"ADD":return new Ob.Add(e,i,n,r,a,s);case"ARG":return new wb.Arg(e,i,n,r,a,s);case"CMD":return new xb.Cmd(e,i,n,r,a,s);case"COPY":return new Lb.Copy(e,i,n,r,a,s);case"ENTRYPOINT":return new qb.Entrypoint(e,i,n,r,a,s);case"ENV":return new Fb.Env(e,i,n,r,a,s);case"FROM":return new Hb.From(e,i,n,r,a,s);case"HEALTHCHECK":return new Ub.Healthcheck(e,i,n,r,a,s);case"LABEL":return new jb.Label(e,i,n,r,a,s);case"ONBUILD":return new Vb.Onbuild(e,i,n,r,a,s);case"RUN":return new Wb.Run(e,i,n,r,a,s);case"SHELL":return new Gb.Shell(e,i,n,r,a,s);case"STOPSIGNAL":return new Bb.Stopsignal(e,i,n,r,a,s);case"WORKDIR":return new Kb.Workdir(e,i,n,r,a,s);case"USER":return new $b.User(e,i,n,r,a,s);case"VOLUME":return new Yb.Volume(e,i,n,r,a,s)}return new Mb.Instruction(e,i,n,r,a,s)}getParserDirectives(e,n){let r=[];this.escapeChar="";let i=Vg.Util.isUTF8BOM(n.substring(0,1))?1:0;e:for(let a=i;a<n.length;a++)switch(n.charAt(a)){case" ":case"	":break;case"\r":case`
`:break e;case"#":let s=-1,c=-1;for(let u=a+1;u<n.length;u++){let l=n.charAt(u);switch(l){case" ":case"	":s!==-1&&c===-1&&(c=u);break;case"\r":case`
`:break e;case"=":let f=-1,g=-1;c===-1&&(c=u);let m=n.length;t:for(let S=u+1;S<n.length;S++)switch(l=n.charAt(S),l){case"\r":case`
`:f!==-1&&g===-1&&(g=S),m=S;break t;case"	":case" ":f!==-1&&g===-1&&(g=S);continue;default:f===-1&&(f=S);break}if(s===-1)break e;f===-1?(f=u+1,g=m):g===-1&&(g=n.length);let d=Gn.Range.create(e.positionAt(a),e.positionAt(m)),p=Gn.Range.create(e.positionAt(s),e.positionAt(c)),v=Gn.Range.create(e.positionAt(f),e.positionAt(g));r.push(new Nb.ParserDirective(e,d,p,v)),s=-1,n.charAt(g)==="\r"?a=g+1:a=g;continue e;default:s===-1&&(s=u);break}}break;default:break e}return r}parse(e){this.document=Pb.TextDocument.create("","",0,e),this.buffer=e;let n=new zb.Dockerfile(this.document),r=this.getParserDirectives(this.document,this.buffer),i=0;this.escapeChar="\\",r.length>0?(n.setDirectives(r),this.escapeChar=n.getEscapeCharacter(),i=this.document.offsetAt(Gn.Position.create(r.length,0))):Vg.Util.isUTF8BOM(e.substring(0,1))&&(i=1);for(let a=i;a<this.buffer.length;a++){let s=this.buffer.charAt(a);switch(s){case" ":case"	":case"\r":case`
`:break;case"#":a=this.processComment(n,a);break;default:a=this.processInstruction(n,s,a);break}}return n.organizeComments(),n}processInstruction(e,n,r){let i=n,a=-1,s=!1;e:for(let c=r+1;c<this.buffer.length;c++)switch(n=this.buffer.charAt(c),n){case this.escapeChar:if(s=!0,n=this.buffer.charAt(c+1),n==="\r"||n===`
`)a===-1&&(a=c),c++;else if(n===" "||n==="	"){for(let u=c+2;u<this.buffer.length;u++)switch(this.buffer.charAt(u)){case" ":case"	":break;case"\r":case`
`:c=u;continue e;default:a=c+1,i=i+this.escapeChar,c=u-2;continue e}a=c+1,i=i+this.escapeChar;break e}else a=c+1,i=i+this.escapeChar,s=!1;break;case" ":case"	":if(s){t:for(let u=c+1;u<this.buffer.length;u++)switch(this.buffer.charAt(u)){case" ":case"	":break;case"\r":case`
`:c=u;continue e;default:break t}s=!1}return a===-1&&(a=c),c=this.processArguments(e,i,a,r,c),e.addInstruction(this.createInstruction(e,i,r,a,c)),c;case"\r":case`
`:if(s)continue;return a===-1&&(a=c),e.addInstruction(this.createInstruction(e,i,r,c,c)),c;case"#":if(s)continue;default:a=c+1,i=i+n,s=!1;break}return a===-1&&(a=this.buffer.length),e.addInstruction(this.createInstruction(e,i,r,a,this.buffer.length)),this.buffer.length}processHeredocs(e,n){let r=e.getKeyword();if(r===js.Keyword.ONBUILD){if(e=e.getTriggerInstruction(),e===null)return n;r=e.getKeyword()}if(r!==js.Keyword.ADD&&r!==js.Keyword.COPY&&r!==js.Keyword.RUN)return n;let i=[],a=!1;for(let s of e.getArguments()){let c=s.getValue();if(c.startsWith("<<")&&c.length>2){c.startsWith("<<-")&&(a=!0);let u=Vg.Util.parseHeredocName(c);u!==null&&i.push(u)}}if(i.length>0)for(let s of i)n=this.parseHeredoc(s,n,a);return n}processArguments(e,n,r,i,a){let s=!1;e:for(let c=a+1;c<this.buffer.length;c++)switch(this.buffer.charAt(c)){case"\r":case`
`:if(s)continue;return this.processHeredocs(this.createInstruction(e,n,i,r,c),c);case this.escapeChar:let u=this.buffer.charAt(c+1);if(u===`
`||u==="\r")s=!0,c++;else if(u===" "||u==="	"){for(let l=c+2;l<this.buffer.length;l++)switch(this.buffer.charAt(l)){case" ":case"	":break;case"\r":case`
`:s=!0;default:c=l;continue e}return this.buffer.length}continue;case"#":if(s){c=this.processComment(e,c);continue e}break;case" ":case"	":break;default:s&&(s=!1);break}return this.buffer.length}processComment(e,n){let r=this.buffer.length;e:for(let a=n+1;a<this.buffer.length;a++)switch(this.buffer.charAt(a)){case"\r":case`
`:r=a;break e}let i=Gn.Range.create(this.document.positionAt(n),this.document.positionAt(r));return e.addComment(new Ib.Comment(this.document,i)),r}parseHeredoc(e,n,r){let i=-1,a=!0;for(let s=n;s<this.buffer.length;s++)switch(this.buffer.charAt(s)){case" ":a=!1;break;case"	":r||(a=!1);break;case"\r":case`
`:if(i!==-1&&e===this.buffer.substring(i,s))return s;i=-1,a=!0;break;default:a&&(i=s,a=!1);break}return this.buffer.length}createInstruction(e,n,r,i,a){let s=this.document.positionAt(r),c=Gn.Range.create(s,this.document.positionAt(i)),u=Gn.Range.create(s,this.document.positionAt(a));return t.createInstruction(this.document,e,this.escapeChar,u,n,c)}};Vs.Parser=Wg});var qe=T(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.DockerfileParser=F.DefaultVariables=F.Directive=F.Keyword=F.Workdir=F.Volume=F.User=F.Stopsignal=F.Shell=F.Run=F.PropertyInstruction=F.Onbuild=F.ModifiableInstruction=F.Label=F.JSONInstruction=F.Heredoc=F.Healthcheck=F.From=F.Env=F.Entrypoint=F.Copy=F.Cmd=F.Arg=F.Add=F.Variable=F.Property=F.ParserDirective=F.Line=F.Instruction=F.Flag=F.Comment=F.JSONArgument=F.Argument=void 0;var Jb=yr();Object.defineProperty(F,"Argument",{enumerable:!0,get:o(function(){return Jb.Argument},"get")});var Qb=Yl();Object.defineProperty(F,"JSONArgument",{enumerable:!0,get:o(function(){return Qb.JSONArgument},"get")});var Xb=Xl();Object.defineProperty(F,"Comment",{enumerable:!0,get:o(function(){return Xb.Comment},"get")});var Zb=Eg(),ey=ug();Object.defineProperty(F,"Flag",{enumerable:!0,get:o(function(){return ey.Flag},"get")});var ty=rn();Object.defineProperty(F,"Instruction",{enumerable:!0,get:o(function(){return ty.Instruction},"get")});var ny=hi();Object.defineProperty(F,"Line",{enumerable:!0,get:o(function(){return ny.Line},"get")});var ry=eg();Object.defineProperty(F,"ParserDirective",{enumerable:!0,get:o(function(){return ry.ParserDirective},"get")});var iy=hs();Object.defineProperty(F,"Property",{enumerable:!0,get:o(function(){return iy.Property},"get")});var ay=ig();Object.defineProperty(F,"Variable",{enumerable:!0,get:o(function(){return ay.Variable},"get")});var sy=hg();Object.defineProperty(F,"Add",{enumerable:!0,get:o(function(){return sy.Add},"get")});var oy=vs();Object.defineProperty(F,"Arg",{enumerable:!0,get:o(function(){return oy.Arg},"get")});var cy=_s();Object.defineProperty(F,"Cmd",{enumerable:!0,get:o(function(){return cy.Cmd},"get")});var uy=ys();Object.defineProperty(F,"Copy",{enumerable:!0,get:o(function(){return uy.Copy},"get")});var ly=As();Object.defineProperty(F,"Entrypoint",{enumerable:!0,get:o(function(){return ly.Entrypoint},"get")});var gy=ks();Object.defineProperty(F,"Env",{enumerable:!0,get:o(function(){return gy.Env},"get")});var dy=bi();Object.defineProperty(F,"From",{enumerable:!0,get:o(function(){return dy.From},"get")});var fy=Cs();Object.defineProperty(F,"Healthcheck",{enumerable:!0,get:o(function(){return fy.Healthcheck},"get")});var hy=ng();Object.defineProperty(F,"Heredoc",{enumerable:!0,get:o(function(){return hy.Heredoc},"get")});var my=an();Object.defineProperty(F,"JSONInstruction",{enumerable:!0,get:o(function(){return my.JSONInstruction},"get")});var py=Ag();Object.defineProperty(F,"Label",{enumerable:!0,get:o(function(){return py.Label},"get")});var vy=Ri();Object.defineProperty(F,"ModifiableInstruction",{enumerable:!0,get:o(function(){return vy.ModifiableInstruction},"get")});var Ry=Ns();Object.defineProperty(F,"Onbuild",{enumerable:!0,get:o(function(){return Ry.Onbuild},"get")});var _y=_i();Object.defineProperty(F,"PropertyInstruction",{enumerable:!0,get:o(function(){return _y.PropertyInstruction},"get")});var by=Pg();Object.defineProperty(F,"Run",{enumerable:!0,get:o(function(){return by.Run},"get")});var yy=Ng();Object.defineProperty(F,"Shell",{enumerable:!0,get:o(function(){return yy.Shell},"get")});var Dy=Og();Object.defineProperty(F,"Stopsignal",{enumerable:!0,get:o(function(){return Dy.Stopsignal},"get")});var ky=Lg();Object.defineProperty(F,"User",{enumerable:!0,get:o(function(){return ky.User},"get")});var Sy=qg();Object.defineProperty(F,"Volume",{enumerable:!0,get:o(function(){return Sy.Volume},"get")});var Ay=Ls();Object.defineProperty(F,"Workdir",{enumerable:!0,get:o(function(){return Ay.Workdir},"get")});var Dh;(function(t){t.ADD="ADD",t.ARG="ARG",t.CMD="CMD",t.COPY="COPY",t.ENTRYPOINT="ENTRYPOINT",t.ENV="ENV",t.EXPOSE="EXPOSE",t.FROM="FROM",t.HEALTHCHECK="HEALTHCHECK",t.LABEL="LABEL",t.MAINTAINER="MAINTAINER",t.ONBUILD="ONBUILD",t.RUN="RUN",t.SHELL="SHELL",t.STOPSIGNAL="STOPSIGNAL",t.USER="USER",t.VOLUME="VOLUME",t.WORKDIR="WORKDIR"})(Dh||(F.Keyword=Dh={}));var kh;(function(t){t.escape="escape",t.syntax="syntax"})(kh||(F.Directive=kh={}));F.DefaultVariables=["ALL_PROXY","all_proxy","FTP_PROXY","ftp_proxy","HTTP_PROXY","http_proxy","HTTPS_PROXY","https_proxy","NO_PROXY","no_proxy"];var Sh;(function(t){function e(n){return new Zb.Parser().parse(n)}o(e,"parse"),t.parse=e})(Sh||(F.DockerfileParser=Sh={}))});var Ah=T(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.DockerFormatter=void 0;var ki=(ve(),z(pe)),Ar=qe(),Gg=class{static{o(this,"DockerFormatter")}getIndentation(e){let n="	";if(e&&e.insertSpaces){n="";for(let r=0;r<e.tabSize;r++)n=n+" "}return n}createFormattingEdit(e,n,r,i,a){return i?ki.TextEdit.replace({start:e.positionAt(n),end:e.positionAt(r)},a):ki.TextEdit.del({start:e.positionAt(n),end:e.positionAt(r)})}formatOnType(e,n,r,i){let a=Ar.DockerfileParser.parse(e.getText());if(a.getEscapeCharacter()===r){for(let m of a.getComments())if(m.getRange().start.line===n.line)return[];if(a.getDirective()&&n.line===0)return[];let c=e.getText();e:for(let m=e.offsetAt(n);m<c.length;m++)switch(c.charAt(m)){case" ":case"	":break;case"\r":case`
`:break e;default:return[]}let u=n.line+1,l=[],f=[];l[u]=!0,f[u]=!0;let g=[];return this.inHeredoc(a,u)&&g.push(u),this.formatLines(e,e.getText(),[u],l,f,g,i)}return[]}formatRange(e,n,r){let i=[];for(let a=n.start.line;a<=n.end.line;a++)i.push(a);return this.format(e,i,r)}formatDocument(e,n){let r=[];for(let i=0;i<e.lineCount;i++)r.push(i);return this.format(e,r,n)}inHeredoc(e,n){for(let r of e.getInstructions())if((r instanceof Ar.Copy||r instanceof Ar.Run)&&this.getHeredocLines(r.getHeredocs()).indexOf(n)!==-1)return!0;return!1}getHeredocLines(e){let n=-1;for(let a=0;a<e.length;a++){let s=e[a].getContentRange();if(s!==null){n=s.start.line;break}let c=e[a].getDelimiterRange();if(c!==null){n=c.start.line;break}}if(n===-1)return[];let r=-1;for(let a=e.length-1;a>=0;a--){let s=e[a].getDelimiterRange();if(s!==null){r=s.end.line;break}let c=e[a].getContentRange();if(c!==null){r=c.end.line;break}}let i=[];for(let a=n;a<=r;a++)i.push(a);return i}format(e,n,r){let i=e.getText(),a=Ar.DockerfileParser.parse(i),s=[],c=[],u=[];for(let l=0;l<e.lineCount;l++)s[l]=!1,c[l]=!1;for(let l of a.getInstructions()){let f=l.getRange();if(f.start.line!==f.end.line)for(let g=f.start.line+1;g<=f.end.line;g++)c[g]=!0;if(l instanceof Ar.Copy||l instanceof Ar.Run){let g=l.getHeredocs();g.length>0&&u.push(...this.getHeredocLines(g))}s[f.start.line]=!1;for(let g=f.start.line+1;g<=f.end.line;g++)s[g]=!0}return this.formatLines(e,i,n,s,c,u,r)}formatLines(e,n,r,i,a,s,c){let u=this.getIndentation(c),l=[];e:for(let f=0;f<r.length;f++){if(c&&c.ignoreMultilineInstructions&&a[r[f]])continue;if(s.indexOf(r[f])!==-1)continue;let g=e.offsetAt(ki.Position.create(r[f],0));for(let m=g;m<n.length;m++)switch(n.charAt(m)){case" ":case"	":break;case"\r":case`
`:if(m!==g){let d=ki.TextEdit.del({start:e.positionAt(g),end:e.positionAt(m)});l.push(d)}continue e;default:if(i[r[f]]){if(e.getText().substring(g,m)!==u){let p=this.createFormattingEdit(e,g,m,i[r[f]],u);l.push(p)}}else if(m!==g){let d=this.createFormattingEdit(e,g,m,i[r[f]],u);l.push(d)}continue e}if(g<n.length){let m=ki.TextEdit.del({start:e.positionAt(g),end:e.positionAt(n.length)});l.push(m)}}return l}};Ws.DockerFormatter=Gg});var Th=T(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.Validator=Bn.KEYWORDS=void 0;var ht=(ve(),z(pe)),rt=qe(),I=Si();Bn.KEYWORDS=["ADD","ARG","CMD","COPY","ENTRYPOINT","ENV","EXPOSE","FROM","HEALTHCHECK","LABEL","MAINTAINER","ONBUILD","RUN","SHELL","STOPSIGNAL","USER","VOLUME","WORKDIR"];var Ty=["TARGETPLATFORM","TARGETOS","TARGETARCH","TARGETVARIANT","BUILDPLATFORM","BUILDOS","BUILDARCH","BUILDVARIAN"],Gs=class t{static{o(this,"Validator")}constructor(e){this.settings={deprecatedMaintainer:I.ValidationSeverity.WARNING,directiveCasing:I.ValidationSeverity.WARNING,emptyContinuationLine:I.ValidationSeverity.WARNING,instructionCasing:I.ValidationSeverity.WARNING,instructionCmdMultiple:I.ValidationSeverity.WARNING,instructionEntrypointMultiple:I.ValidationSeverity.WARNING,instructionHealthcheckMultiple:I.ValidationSeverity.WARNING,instructionJSONInSingleQuotes:I.ValidationSeverity.WARNING,instructionWorkdirRelative:I.ValidationSeverity.WARNING},e&&(this.settings=e)}checkDirectives(e,n){let r=[];for(let i of e.getDirectives())i.getDirective()===rt.Directive.escape&&r.push(i);if(r.length>1){for(let i=1;i<r.length;i++)n.push(t.createDuplicatedEscapeDirective(r[i].getNameRange().start,r[i].getValueRange().end));return}for(let i of e.getDirectives())if(i.getDirective()===rt.Directive.escape){let s=i.getValue();if(s!=="\\"&&s!=="`"&&s!==""){let c=i.getValueRange();n.push(t.createInvalidEscapeDirective(c.start,c.end,s))}if(i.getName()!==rt.Directive.escape){let c=i.getNameRange(),u=this.createLowercaseDirective(c.start,c.end);u&&n.push(u)}}}checkArguments(e,n,r,i,a){let s=e instanceof rt.PropertyInstruction?e.getPropertyArguments():e.getArguments();if(s.length===0){if(e.getKeyword()!==rt.Keyword.RUN){let c=e.getInstructionRange();n.push(t.createMissingArgument(c.start.line,c.start,c.end))}}else if(r[0]===-1)for(let c=0;c<s.length;c++){let u=i(c,s[c].getValue(),s[c].getRange());if(u){let l=s[c].getRange();n.push(u(e.getInstructionRange().start.line,l.start,l.end,s[c].getValue()))}}else{for(let u=0;u<r.length;u++)if(r[u]===s.length){for(let l=0;l<s.length;l++){let f=s[l].getRange(),g=i(l,s[l].getValue(),f);g instanceof Function?n.push(g(e.getInstructionRange().start.line,f.start,f.end,s[l].getValue())):g!==null&&n.push(g)}return}let c=s[s.length-1].getRange();a?n.push(a(e.getInstructionRange().start.line,c.start,c.end)):n.push(t.createExtraArgument(e.getInstructionRange().start.line,c.start,c.end))}}checkVariables(e,n){for(let r of e.getVariables()){let i=r.getModifier();if(i!==null)switch(e.getKeyword()){case rt.Keyword.CMD:case rt.Keyword.ENTRYPOINT:case rt.Keyword.RUN:break;default:i===""?n.push(t.createVariableUnsupportedModifier(e.getRange().start.line,r.getRange(),r.toString(),i)):i!=="+"&&i!=="-"&&i!=="?"&&n.push(t.createVariableUnsupportedModifier(e.getRange().start.line,r.getModifierRange(),r.toString(),i));break}}}checkProperty(e,n,r,i,a,s,c,u){let l=a.getName();if(l===""){let g=a.getRange();u.push(t.createSyntaxMissingNames(i,g.start,g.end,r))}else if(l.indexOf("=")!==-1){let g=a.getNameRange(),m=e.getText(g),d=m.indexOf("=");m.charAt(0)==="'"?u.push(t.createSyntaxMissingSingleQuote(i,g.start,e.positionAt(e.offsetAt(g.start)+d),m.substring(0,m.indexOf("=")))):m.charAt(0)==='"'&&u.push(t.createSyntaxMissingDoubleQuote(i,g.start,e.positionAt(e.offsetAt(g.start)+d),m.substring(0,m.indexOf("="))));return}let f=a.getValue();if(f===null){if(!c){let g=a.getNameRange();s?u.push(t.createENVRequiresTwoArguments(i,g.start,g.end)):u.push(t.createSyntaxMissingEquals(i,g.start,g.end,l))}}else if(f.charAt(0)==='"'){let g=!1;for(let m=1;m<f.length;m++)switch(f.charAt(m)){case n:m++;break;case'"':m===f.length-1&&(g=!0);break}if(!g){let m=a.getValueRange();u.push(t.createSyntaxMissingDoubleQuote(i,m.start,m.end,a.getUnescapedValue()))}}else if(f.charAt(0)==="'"&&f.charAt(f.length-1)!=="'"){let g=a.getValueRange();u.push(t.createSyntaxMissingSingleQuote(i,g.start,g.end,f))}}validate(e){this.document=e;let n=[],r=rt.DockerfileParser.parse(e.getText());this.checkDirectives(r,n);let i=r.getInstructions();(i.length===0||r.getARGs().length===i.length)&&n.push(t.createNoSourceImage(e.positionAt(0),e.positionAt(0)));let a=[],s=[],c=[];for(let g of i)g instanceof rt.Cmd?a.push(g):g instanceof rt.Entrypoint?s.push(g):g instanceof rt.Healthcheck?c.push(g):g instanceof rt.From&&(this.createDuplicatesDiagnostics(n,this.settings.instructionCmdMultiple,"CMD",a),this.createDuplicatesDiagnostics(n,this.settings.instructionEntrypointMultiple,"ENTRYPOINT",s),this.createDuplicatesDiagnostics(n,this.settings.instructionHealthcheckMultiple,"HEALTHCHECK",c),a=[],s=[],c=[]);this.createDuplicatesDiagnostics(n,this.settings.instructionCmdMultiple,"CMD",a),this.createDuplicatesDiagnostics(n,this.settings.instructionEntrypointMultiple,"ENTRYPOINT",s),this.createDuplicatesDiagnostics(n,this.settings.instructionHealthcheckMultiple,"HEALTHCHECK",c),this.createDuplicateBuildStageNameDiagnostics(n,r.getFROMs());let u=r.getEscapeCharacter(),l=!1;for(let g of r.getInstructions()){let m=g.getKeyword();if(m==="FROM")l=!0;else if(!l&&m!=="ARG"){let d=g.getInstructionRange();n.push(t.createNoSourceImage(d.start,d.end)),l=!0}this.validateInstruction(e,u,g,m,!1,n),this.checkVariables(g,n)}for(let g of r.getOnbuildTriggers())this.validateInstruction(e,u,g,g.getKeyword(),!0,n);let f=[];for(let g of r.getComments())g.getContent()==="dockerfile-utils: ignore"&&f.push(g.getRange().start.line);e:for(let g=0;g<n.length;g++)if(n[g].instructionLine!==null){for(let m of f)if(m+1===n[g].instructionLine){n.splice(g,1),g--;continue e}}return n}getHeredocLines(e){if(e instanceof rt.Copy||e instanceof rt.Run){let n=[];for(let r of e.getHeredocs()){let i=r.getContentRange();if(i!==null)for(let a=i.start.line;a<=i.end.line;a++)n.push(a)}return n}return[]}validateInstruction(e,n,r,i,a,s){if(Bn.KEYWORDS.indexOf(i)===-1){let c=r.getInstructionRange();s.push(t.createUnknownInstruction(c.start.line,c.start,c.end,i))}else{if(i!==r.getInstruction()){let u=r.getInstructionRange(),l=this.createUppercaseInstruction(u.start.line,u.start,u.end);l&&s.push(l)}if(i==="MAINTAINER"){let u=r.getInstructionRange(),l=this.createMaintainerDeprecated(u.start.line,u.start,u.end);l&&s.push(l)}let c=r.getRange();if(c.start.line!==c.end.line&&!a){let u=e.getText(),l=c.end.line,f=this.getHeredocLines(r),g=0,m=-1;for(let d=c.start.line;d<=l;d++){if(d===f[g]){g++;continue}if(u.substring(e.offsetAt(ht.Position.create(d,0)),e.offsetAt(ht.Position.create(d+1,0))).trim().length===0){if(m===-1){m=d;continue}}else if(m!==-1){let v=t.createEmptyContinuationLine(ht.Position.create(m,0),ht.Position.create(d,0),this.settings.emptyContinuationLine);v&&s.push(v),m=-1}}if(m!==-1){let d=t.createEmptyContinuationLine(ht.Position.create(m,0),ht.Position.create(l+1,0),this.settings.emptyContinuationLine);d&&s.push(d),m=-1}}switch(i){case"CMD":this.checkJSONQuotes(r,s);break;case"ENTRYPOINT":case"RUN":case"VOLUME":this.checkArguments(r,s,[-1],function(){return null}),this.checkJSONQuotes(r,s);break;case"ARG":this.checkArguments(r,s,[-1],()=>null);let l=r.getProperty();l&&this.checkProperty(e,n,i,r.getRange().start.line,l,!0,!0,s);break;case"ENV":case"LABEL":this.checkArguments(r,s,[-1],function(){return null});let f=r.getProperties();if(f.length===1)this.checkProperty(e,n,i,r.getRange().start.line,f[0],!0,!1,s);else if(f.length!==0)for(let L of f)this.checkProperty(e,n,i,r.getRange().start.line,L,!1,!1,s);break;case"FROM":let g=r.getInstructionRange(),m=r.getFlags();for(let L of m){let x=L.getName();if(x!=="platform"){let M=L.getRange();s.push(t.createUnknownFromFlag(g.start.line,M.start,x===""?M.end:L.getNameRange().end,L.getName()))}}this.checkFlagValue(g.start.line,m,["platform"],s),this.checkArguments(r,s,[1,3],function(L,x,M){switch(L){case 0:let j=r.getVariables();if(j.length>0){let Me=j[0].getRange();if(Me.start.line===M.start.line&&Me.start.character===M.start.character&&Me.end.line===M.end.line&&Me.end.character===M.end.character&&!j[0].isDefined()){if(Ty.indexOf(j[0].getName())!==-1)return null;if(j[0].getModifier()==="-"){let st=j[0].getSubstitutionParameter();if(st!==""&&st!==null)return null}return t.createBaseNameEmpty(g.start.line,Me,j[0].toString())}return null}let Y=r,Se=Y.getImageDigestRange(),oe=Y.getImageTagRange();if(Se===null){if(oe===null)return null;let Me=e.getText(oe);return Me===""?t.createInvalidReferenceFormat(g.start.line,M):new RegExp(/^[\w][\w.-]{0,127}$/).test(Me)?null:t.createInvalidReferenceFormat(g.start.line,Y.getImageTagRange())}if(oe!==null&&oe.start.line===oe.end.line&&oe.start.character===oe.end.character)return t.createInvalidReferenceFormat(g.start.line,M);let fe=e.getText(Se),ze=fe.indexOf(":");if(ze===-1)return fe===""?t.createInvalidReferenceFormat(g.start.line,M):t.createInvalidReferenceFormat(g.start.line,Y.getImageDigestRange());let it=new RegExp(/[A-Fa-f0-9_+.-]+/),at=fe.substring(0,ze);if(!it.test(at))return t.createInvalidReferenceFormat(g.start.line,Y.getImageDigestRange());let St=fe.substring(ze+1);return new RegExp(/[A-Fa-f0-9]+/).test(St)?null:t.createInvalidReferenceFormat(g.start.line,Y.getImageDigestRange());case 1:return x.toUpperCase()==="AS"?null:t.createInvalidAs;case 2:return x=x.toLowerCase(),new RegExp(/^[a-z]([a-z0-9_\-.]*)*$/).test(x)?null:t.createInvalidBuildStageName(g.start.line,M,x);default:return null}},t.createRequiresOneOrThreeArguments);break;case"HEALTHCHECK":let d=r.getArguments(),p=r.getInstructionRange(),v=r.getFlags();if(d.length===0)s.push(t.createHEALTHCHECKRequiresAtLeastOneArgument(p.start.line,p));else{let x=d[0].getValue().toUpperCase();if(x==="NONE"){if(d.length>1){let M=d[1].getRange().start,j=d[d.length-1].getRange().end;s.push(t.createHealthcheckNoneUnnecessaryArgument(p.start.line,M,j))}break}else if(x==="CMD"){if(d.length===1){let M=d[0].getRange();s.push(t.createHealthcheckCmdArgumentMissing(p.start.line,M.start,M.end))}}else s.push(t.createHealthcheckTypeUnknown(p.start.line,d[0].getRange(),x))}let S=["interval","retries","start-period","timeout","start-interval"];for(let L of v){let x=L.getName();if(S.indexOf(x)===-1){let M=L.getRange();s.push(t.createUnknownHealthcheckFlag(p.start.line,M.start,x===""?M.end:L.getNameRange().end,L.getName()))}else if(x==="retries"){let M=L.getValue();if(M){let j=L.getValueRange(),Y=parseInt(M);isNaN(Y)||M.indexOf(".")!==-1?s.push(t.createInvalidSyntax(p.start.line,j.start,j.end,M)):Y<1&&s.push(t.createFlagAtLeastOne(p.start.line,j.start,j.end,"--retries",Y.toString()))}}}this.checkFlagValue(p.start.line,v,S,s),this.checkFlagDuration(p.start.line,v,["interval","start-period","timeout","start-interval"],s),this.checkDuplicateFlags(p.start.line,v,S,s);break;case"ONBUILD":this.checkArguments(r,s,[-1],function(){return null});let k=r,b=k.getTrigger();switch(b){case"FROM":case"MAINTAINER":s.push(t.createOnbuildTriggerDisallowed(k.getInstructionRange().start.line,k.getTriggerRange(),b));break;case"ONBUILD":s.push(t.createOnbuildChainingDisallowed(k.getInstructionRange().start.line,k.getTriggerRange()));break}break;case"SHELL":this.checkArguments(r,s,[-1],function(){return null}),this.checkJSON(e,r,s);break;case"STOPSIGNAL":this.checkArguments(r,s,[1],function(L,x){if(x.indexOf("SIG")===0||x.indexOf("$")!=-1)return null;for(var M=0;M<x.length;M++)if("0">x.charAt(M)||"9"<x.charAt(M))return t.createInvalidStopSignal;return null});let _=r.getExpandedArguments();if(_.length===1){let L=_[0].getValue(),x=r.getVariables();if(x.length===0){if(L.indexOf("$")!==-1){let M=r.getInstructionRange(),j=_[0].getRange();s.push(t.createInvalidStopSignal(M.start.line,j.start,j.end,L))}}else for(let M of x){let j=M.getRange(),Y=this.document.getText().substring(this.document.offsetAt(j.start),this.document.offsetAt(j.end));if(L.includes(Y)&&!M.isBuildVariable()&&!M.isDefined()){let Se=r.getInstructionRange(),oe=_[0].getRange();s.push(t.createInvalidStopSignal(Se.start.line,oe.start,oe.end,""));break}}}break;case"EXPOSE":let A=r.getArguments(),w=r.getExpandedArguments();if(w.length===0){let L=r.getInstructionRange();s.push(t.createMissingArgument(L.start.line,L.start,L.end))}else{let L=/^([0-9])+(-[0-9]+)?(:([0-9])+(-[0-9]*)?)?(\/(\w*))?(\/\w*)*$/;e:for(let x=0;x<w.length;x++){let M=w[x].getValue();M.charAt(0)==='"'&&M.charAt(M.length-1)==='"'&&(M=M.substring(1,M.length-1));let j=L.exec(M);if(j){if(j[7]){let Y=j[7].toLowerCase();if(Y!==""&&Y!=="tcp"&&Y!=="udp"&&Y!=="sctp"){let Se=w[x].getRange(),oe=this.document.offsetAt(Se.start),fe=this.document.getText().substring(oe,this.document.offsetAt(Se.end)),ze=oe+fe.indexOf(j[7].substring(0,1)),it=Y.length===1?oe+ze+1:oe+fe.length;s.push(t.createInvalidProto(r.getInstructionRange().start.line,this.document.positionAt(ze),this.document.positionAt(it),j[7]))}}}else{if(M.charAt(0)==="$")continue e;s.push(t.createInvalidPort(r.getInstructionRange().start.line,w[x].getRange(),M))}}}break;case"ADD":let V=r,B=V.getFlags(),te=r.getInstructionRange();for(let L of B){let x=L.getName(),M=L.getRange();if(x==="")s.push(t.createUnknownAddFlag(te.start.line,M.start,M.end,x));else if(x==="link"||x==="keep-git-dir"){let j=this.checkFlagBoolean(te.start.line,L);j!==null&&s.push(j)}else if(x!=="chmod"&&x!=="chown"&&x!=="checksum"&&x!=="exclude"){let j=L.getNameRange();s.push(t.createUnknownAddFlag(te.start.line,M.start,j.end,x))}}let X=this.checkDestinationIsDirectory(V,t.createADDRequiresAtLeastTwoArguments,t.createADDDestinationNotDirectory);X!==null&&s.push(X),this.checkFlagValue(te.start.line,B,["chmod","chown","checksum","exclude"],s),this.checkDuplicateFlags(te.start.line,B,["chmod","chown","checksum","keep-git-dir","link"],s),this.checkJSONQuotes(r,s);break;case"COPY":let ae=r.getInstructionRange(),ne=r,de=ne.getFlags();if(de.length>0){for(let x of de){let M=x.getName(),j=x.getRange();if(M==="")s.push(t.createUnknownCopyFlag(ae.start.line,j.start,j.end,M));else if(M==="link"||M==="parents"){let Y=this.checkFlagBoolean(ae.start.line,x);Y!==null&&s.push(Y)}else if(M!=="chmod"&&M!=="chown"&&M!=="from"&&M!=="exclude"&&M!=="parents"){let Y=x.getNameRange();s.push(t.createUnknownCopyFlag(ae.start.line,j.start,Y.end,M))}}let L=ne.getFromFlag();if(L){let x=L.getValue();if(x!==null&&!new RegExp(/^[a-zA-Z0-9].*$/).test(x)){let j=x===""?L.getRange():L.getValueRange();s.push(t.createFlagInvalidFrom(ae.start.line,j.start,j.end,x))}}}let ke=this.checkDestinationIsDirectory(ne,t.createCOPYRequiresAtLeastTwoArguments,t.createCOPYDestinationNotDirectory);ke!==null&&s.push(ke),this.checkFlagValue(ae.start.line,de,["chmod","chown","from","exclude"],s),this.checkDuplicateFlags(ae.start.line,de,["chmod","chown","from","link","parents"],s),this.checkJSONQuotes(r,s);break;case"WORKDIR":this.checkArguments(r,s,[-1],function(){return null});let se=r.getArgumentsContent();if(se){let L=se.substring(0,1),x=se.substring(se.length-1);(L==="'"&&x==="'"||L==='"'&&x==='"')&&(se=se.substring(1,se.length-1));let M=new RegExp(/^(\$|([a-zA-Z](\$|:(\$|\\|\/)))).*$/);if(!se.startsWith("/")&&!M.test(se)){let j=this.createWORKDIRNotAbsolute(r.getInstructionRange().start.line,r.getArgumentsRange());j&&s.push(j)}}break;default:this.checkArguments(r,s,[-1],function(){return null});break}}}hasHeredocs(e){for(let n of e)if(n.getValue().startsWith("<<"))return!0;return!1}getDestinationArgument(e){if(this.hasHeredocs(e)){let n=e[0].getRange().start.line,r=null;for(let i=1;i<e.length&&e[i].getRange().start.line===n;i++)r=e[i];return r}return e[e.length-1]}checkDestinationIsDirectory(e,n,r){if(e.getClosingBracket())return this.checkJsonDestinationIsDirectory(e,n,r);let i=e.getArguments();if(i.length===1)return n(e.getInstructionRange().start.line,i[0].getRange());if(i.length===0){let a=e.getInstructionRange();return n(a.start.line,a)}else if(i.length>2){let a=this.getDestinationArgument(i);if(a===null){let l=e.getInstructionRange();return n(l.start.line,l)}else if(this.hasHeredocs(i))return null;let s=e.getVariables();if(s.length!==0){let l=this.document.offsetAt(a.getRange().end),f=this.document.offsetAt(s[s.length-1].getRange().end);if(l===f||l-1===f)return null}let c=a.getValue(),u=c.charAt(c.length-1);if(u!=="\\"&&u!=="/")return r(e.getInstructionRange().start.line,a.getRange())}return null}createDuplicatesDiagnostics(e,n,r,i){if(i.length>1)for(let a=0;a<i.length-1;a++){let s=i[a].getInstructionRange(),c=this.createMultipleInstructions(s.start.line,s,n,r);c&&e.push(c)}}createDuplicateBuildStageNameDiagnostics(e,n){let r={};for(let i of n){let a=i.getBuildStage();a!==null&&(a=a.toLowerCase(),r[a]===void 0?r[a]=[i]:r[a].push(i))}for(let i in r)if(r[i].length>1)for(let a of r[i])e.push(t.createDuplicateBuildStageName(a.getInstructionRange().start.line,a.getBuildStageRange(),i))}checkJsonDestinationIsDirectory(e,n,r){let i=e.getJSONStrings();if(i.length===0)return n(e.getInstructionRange().start.line,e.getArgumentsRange());if(i.length===1)return n(e.getInstructionRange().start.line,i[0].getJSONRange());if(i.length>2){let a=i[i.length-1],s=e.getVariables();if(s.length!==0){let l=s[s.length-1],f=this.document.offsetAt(a.getRange().end),g=this.document.offsetAt(l.getRange().end);if(f===g||f-1===g)return null}let c=a.getValue(),u=c.charAt(c.length-2);if(u!=="\\"&&u!=="/")return r(e.getInstructionRange().start.line,i[i.length-1].getJSONRange())}return null}checkFlagValue(e,n,r,i){for(let a of n){let s=a.getName();a.getValue()===null&&r.indexOf(s)!==-1&&i.push(t.createFlagMissingValue(e,a.getNameRange(),s))}}checkFlagBoolean(e,n){let r=n.getValue();if(r==="")return t.createFlagMissingValue(e,n.getNameRange(),n.getName());if(r!==null){let i=r.toLowerCase();if(i!=="true"&&i!=="false")return t.createFlagExpectedBooleanValue(e,n.getValueRange(),n.getName(),r)}return null}checkFlagDuration(e,n,r,i){e:for(let a of n){let s=a.getName();if(r.indexOf(s)!==-1){let c=a.getValue();if(c!==null&&c.length!==0){switch(c.charAt(0)){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case".":case"-":break;default:let p=a.getValueRange();i.push(t.createFlagInvalidDuration(e,p.start,p.end,c));continue e}let u=!1,l=0,f=0,g=!1,m=!1,d=0;t:for(let p=0;p<c.length;p++)switch(u=!1,c.charAt(p)){case"-":if(g){let k=a.getValueRange();i.push(t.createFlagUnknownUnit(e,k,c.charAt(p),c));continue e}else if(m){let k=a.getValueRange();i.push(t.createFlagInvalidDuration(e,k.start,k.end,c));continue e}m=!0;continue;case".":d++;continue;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":g=!0;continue;default:if(d>1){let k=a.getValueRange();i.push(t.createFlagMissingDuration(e,k.start,k.end,c));continue e}d=0;let v=parseFloat(c.substring(l,p));for(let k=p+1;k<c.length;k++)if(t.isNumberRelated(c.charAt(k))){let b=c.substring(p,k);if(v<0||c.charAt(l)==="-"&&v===0){let _=a.getNameRange();i.push(t.createFlagLessThan1ms(e,_.start,_.end,s));continue e}switch(b){case"h":f+=v*1e3*60*60,p=k-1,l=p,u=!0;continue t;case"m":f+=v*1e3*60,p=k-1,l=p,u=!0;continue t;case"s":f+=v*1e3,p=k-1,l=p,u=!0;continue t;case"ms":f+=v,p=k-1,l=p,u=!0;continue t;case"us":case"\xB5s":f+=v/1e3,p=k-1,l=p,u=!0;continue t;case"ns":f+=v/1e6,p=k-1,l=p,u=!0;continue t;default:let _=a.getValueRange();i.push(t.createFlagUnknownUnit(e,_,b,c));continue e}}if(v<0||c.charAt(l)==="-"&&v===0){let k=a.getNameRange();i.push(t.createFlagLessThan1ms(e,k.start,k.end,s));continue e}let S=c.substring(p,c.length);switch(S){case"h":f+=v*1e3*60*60,u=!0;break t;case"m":f+=v*1e3*60,u=!0;break t;case"s":f+=v*1e3,u=!0;break t;case"ms":f+=v,u=!0;break t;case"us":case"\xB5s":f+=v/1e3,u=!0;break t;case"ns":f+=v/1e6,u=!0;break t;default:let k=a.getValueRange();i.push(t.createFlagUnknownUnit(e,k,S,c));break}continue e}if(u){if(f<1){let p=a.getNameRange();i.push(t.createFlagLessThan1ms(e,p.start,p.end,s))}}else{let p=a.getValueRange();i.push(t.createFlagMissingDuration(e,p.start,p.end,c))}}}}}static isNumberRelated(e){switch(e){case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return!0}return!1}checkDuplicateFlags(e,n,r,i){let a=n.map(function(s){return s.getName()});for(let s of r){let c=a.indexOf(s),u=a.lastIndexOf(s);if(c!==u){let l=n[c].getNameRange();i.push(t.createFlagDuplicate(e,l.start,l.end,a[c])),l=n[u].getNameRange(),i.push(t.createFlagDuplicate(e,l.start,l.end,a[c]))}}}checkJSON(e,n,r){if(n.getArgumentsContent()===null)return;let a=n.getArgumentsRange(),s=n.getArguments();if(s.length===1&&s[0].getValue()==="[]"||s.length===2&&s[0].getValue()==="["&&s[1].getValue()==="]"){r.push(t.createShellRequiresOne(n.getInstructionRange().start.line,a));return}let c=n.getClosingBracket();if(c){let u=e.getText();u=u.substring(e.offsetAt(n.getOpeningBracket().getRange().end),e.offsetAt(c.getRange().start)),u=u.trim(),u.charAt(u.length-1)!=='"'&&r.push(t.createShellJsonForm(n.getInstructionRange().start.line,a))}else r.push(t.createShellJsonForm(n.getInstructionRange().start.line,a))}checkJSONQuotes(e,n){let r=e.getArgumentsContent();if(r===null)return;let i=e.getArgumentsRange(),a=e.getArguments();if(a.length===1&&a[0].getValue()==="[]"||a.length===2&&a[0].getValue()==="["&&a[1].getValue()==="]")return;let s=!1,c=null,u=!1;e:for(let l=0;l<r.length;l++)switch(r.charAt(l)){case"[":c===null&&(c="[",s=!0);break;case"'":if(c==="["||c===","){u=!0,c="'";continue}else if(c==="'")if(u)u=!1;else break e;else break e;break;case",":if(s){if(!u)if(c==="'")c=",";else break e}else break e;break;case"]":if(!u){if(c==="'"||c===","){c=null;let f=t.createJSONInSingleQuotes(e.getInstructionRange().start.line,i,this.settings.instructionJSONInSingleQuotes);f&&n.push(f)}break e}break;case" ":case"	":break;default:if(!u)break e;break}}static formatMessage(e,...n){for(let r=0;r<n.length;r++)e=e.replace("${"+r+"}",n[r]);return e}static getDiagnosticMessage_DirectiveCasing(){return t.dockerProblems.directiveCasing}static getDiagnosticMessage_DirectiveEscapeDuplicated(){return t.dockerProblems.directiveEscapeDuplicated}static getDiagnosticMessage_DirectiveEscapeInvalid(e){return t.formatMessage(t.dockerProblems.directiveEscapeInvalid,e)}static getDiagnosticMessage_NoSourceImage(){return t.dockerProblems.noSourceImage}static getDiagnosticMessage_EmptyContinuationLine(){return t.dockerProblems.emptyContinuationLine}static getDiagnosticMessage_DuplicateBuildStageName(e){return t.formatMessage(t.dockerProblems.duplicateBuildStageName,e)}static getDiagnosticMessage_InvalidBuildStageName(e){return t.formatMessage(t.dockerProblems.invalidBuildStageName,e)}static getDiagnosticMessage_FlagAtLeastOne(e,n){return t.formatMessage(t.dockerProblems.flagAtLeastOne,e,n)}static getDiagnosticMessage_FlagDuplicate(e){return t.formatMessage(t.dockerProblems.flagDuplicate,e)}static getDiagnosticMessage_FlagInvalidDuration(e){return t.formatMessage(t.dockerProblems.flagInvalidDuration,e)}static getDiagnosticMessage_FlagLessThan1ms(e){return t.formatMessage(t.dockerProblems.flagLessThan1ms,e)}static getDiagnosticMessage_FlagMissingDuration(e){return t.formatMessage(t.dockerProblems.flagMissingDuration,e)}static getDiagnosticMessage_FlagInvalidFromValue(e){return t.formatMessage(t.dockerProblems.flagInvalidFrom,e)}static getDiagnosticMessage_FlagExpectedBooleanValue(e,n){return t.formatMessage(t.dockerProblems.flagExpectedBooleanValue,e,n)}static getDiagnosticMessage_FlagMissingValue(e){return t.formatMessage(t.dockerProblems.flagMissingValue,e)}static getDiagnosticMessage_FlagUnknown(e){return t.formatMessage(t.dockerProblems.flagUnknown,e)}static getDiagnosticMessage_FlagUnknownUnit(e,n){return t.formatMessage(t.dockerProblems.flagUnknownUnit,e,n)}static getDiagnosticMessage_BaseNameEmpty(e){return t.formatMessage(t.dockerProblems.baseNameEmpty,e)}static getDiagnosticMessage_InvalidAs(){return t.dockerProblems.invalidAs}static getDiagnosticMessage_InvalidPort(e){return t.formatMessage(t.dockerProblems.invalidPort,e)}static getDiagnosticMessage_InvalidProto(e){return t.formatMessage(t.dockerProblems.invalidProtocol,e)}static getDiagnosticMessage_InvalidReferenceFormat(){return t.dockerProblems.invalidReferenceFormat}static getDiagnosticMessage_InvalidSignal(e){return t.formatMessage(t.dockerProblems.invalidStopSignal,e)}static getDiagnosticMessage_InvalidSyntax(e){return t.formatMessage(t.dockerProblems.invalidSyntax,e)}static getDiagnosticMessage_InstructionExtraArgument(){return t.dockerProblems.instructionExtraArgument}static getDiagnosticMessage_InstructionMissingArgument(){return t.dockerProblems.instructionMissingArgument}static getDiagnosticMessage_ADDDestinationNotDirectory(){return t.formatMessage(t.dockerProblems.invalidDestination,"ADD")}static getDiagnosticMessage_ADDRequiresAtLeastTwoArguments(){return t.formatMessage(t.dockerProblems.instructionRequiresAtLeastTwoArguments,"ADD")}static getDiagnosticMessage_COPYDestinationNotDirectory(){return t.formatMessage(t.dockerProblems.invalidDestination,"COPY")}static getDiagnosticMessage_COPYRequiresAtLeastTwoArguments(){return t.formatMessage(t.dockerProblems.instructionRequiresAtLeastTwoArguments,"COPY")}static getDiagnosticMessage_HEALTHCHECKRequiresAtLeastOneArgument(){return t.formatMessage(t.dockerProblems.instructionRequiresAtLeastOneArgument,"HEALTHCHECK")}static getDiagnosticMessage_ENVRequiresTwoArguments(){return t.formatMessage(t.dockerProblems.instructionRequiresTwoArguments,"ENV")}static getDiagnosticMessage_InstructionRequiresOneOrThreeArguments(){return t.dockerProblems.fromRequiresOneOrThreeArguments}static getDiagnosticMessage_HealthcheckNoneUnnecessaryArgument(){return t.formatMessage(t.dockerProblems.instructionUnnecessaryArgument,"HEALTHCHECK NONE")}static getDiagnosticMessage_InstructionMultiple(e){return t.formatMessage(t.dockerProblems.instructionMultiple,e)}static getDiagnosticMessage_InstructionUnknown(e){return t.formatMessage(t.dockerProblems.instructionUnknown,e)}static getDiagnosticMessage_SyntaxMissingEquals(e){return t.formatMessage(t.dockerProblems.syntaxMissingEquals,e)}static getDiagnosticMessage_SyntaxMissingNames(e){return t.formatMessage(t.dockerProblems.syntaxMissingNames,e)}static getDiagnosticMessage_SyntaxMissingSingleQuote(e){return t.formatMessage(t.dockerProblems.syntaxMissingSingleQuote,e)}static getDiagnosticMessage_SyntaxMissingDoubleQuote(e){return t.formatMessage(t.dockerProblems.syntaxMissingDoubleQuote,e)}static getDiagnosticMessage_InstructionCasing(){return t.dockerProblems.instructionCasing}static getDiagnosticMessage_InstructionJSONInSingleQuotes(){return t.dockerProblems.instructionJSONInSingleQuotes}static getDiagnosticMessage_OnbuildChainingDisallowed(){return t.dockerProblems.onbuildChainingDisallowed}static getDiagnosticMessage_OnbuildTriggerDisallowed(e){return t.formatMessage(t.dockerProblems.onbuildTriggerDisallowed,e)}static getDiagnosticMessage_VariableModifierUnsupported(e,n){return t.formatMessage(t.dockerProblems.variableModifierUnsupported,e,n)}static getDiagnosticMessage_ShellJsonForm(){return t.dockerProblems.shellJsonForm}static getDiagnosticMessage_ShellRequiresOne(){return t.dockerProblems.shellRequiresOne}static getDiagnosticMessage_DeprecatedMaintainer(){return t.dockerProblems.deprecatedMaintainer}static getDiagnosticMessage_HealthcheckCmdArgumentMissing(){return t.dockerProblems.healthcheckCmdArgumentMissing}static getDiagnosticMessage_HealthcheckTypeUnknown(e){return t.formatMessage(t.dockerProblems.healthcheckTypeUnknown,e)}static getDiagnosticMessage_WORKDIRPathNotAbsolute(){return t.formatMessage(t.dockerProblems.workdirPathNotAbsolute)}static createDuplicatedEscapeDirective(e,n){return t.createError(null,e,n,t.getDiagnosticMessage_DirectiveEscapeDuplicated(),I.ValidationCode.DUPLICATED_ESCAPE_DIRECTIVE,[ht.DiagnosticTag.Unnecessary])}static createInvalidEscapeDirective(e,n,r){return t.createError(null,e,n,t.getDiagnosticMessage_DirectiveEscapeInvalid(r),I.ValidationCode.INVALID_ESCAPE_DIRECTIVE)}static createDuplicateBuildStageName(e,n,r){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_DuplicateBuildStageName(r),I.ValidationCode.DUPLICATE_BUILD_STAGE_NAME)}static createInvalidBuildStageName(e,n,r){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_InvalidBuildStageName(r),I.ValidationCode.INVALID_BUILD_STAGE_NAME)}static createFlagAtLeastOne(e,n,r,i,a){return t.createError(e,n,r,t.getDiagnosticMessage_FlagAtLeastOne(i,a),I.ValidationCode.FLAG_AT_LEAST_ONE)}static createFlagDuplicate(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_FlagDuplicate(i),I.ValidationCode.FLAG_DUPLICATE)}static createFlagInvalidDuration(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_FlagInvalidDuration(i),I.ValidationCode.FLAG_INVALID_DURATION)}static createFlagLessThan1ms(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_FlagLessThan1ms(i),I.ValidationCode.FLAG_LESS_THAN_1MS)}static createFlagMissingDuration(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_FlagMissingDuration(i),I.ValidationCode.FLAG_MISSING_DURATION)}static createFlagInvalidFrom(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_FlagInvalidFromValue(i),I.ValidationCode.FLAG_INVALID_FROM_VALUE)}static createFlagExpectedBooleanValue(e,n,r,i){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_FlagExpectedBooleanValue(r,i),I.ValidationCode.FLAG_EXPECTED_BOOLEAN_VALUE)}static createFlagMissingValue(e,n,r){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_FlagMissingValue(r),I.ValidationCode.FLAG_MISSING_VALUE)}static createUnknownAddFlag(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_FlagUnknown(i),I.ValidationCode.UNKNOWN_ADD_FLAG)}static createUnknownCopyFlag(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_FlagUnknown(i),I.ValidationCode.UNKNOWN_COPY_FLAG)}static createUnknownFromFlag(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_FlagUnknown(i),I.ValidationCode.UNKNOWN_FROM_FLAG)}static createUnknownHealthcheckFlag(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_FlagUnknown(i),I.ValidationCode.UNKNOWN_HEALTHCHECK_FLAG)}static createFlagUnknownUnit(e,n,r,i){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_FlagUnknownUnit(r,i),I.ValidationCode.FLAG_UNKNOWN_UNIT)}static createBaseNameEmpty(e,n,r){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_BaseNameEmpty(r),I.ValidationCode.BASE_NAME_EMPTY)}static createInvalidAs(e,n,r){return t.createError(e,n,r,t.getDiagnosticMessage_InvalidAs(),I.ValidationCode.INVALID_AS)}static createInvalidPort(e,n,r){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_InvalidPort(r),I.ValidationCode.INVALID_PORT)}static createInvalidProto(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_InvalidProto(i),I.ValidationCode.INVALID_PROTO)}static createInvalidReferenceFormat(e,n){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_InvalidReferenceFormat(),I.ValidationCode.INVALID_REFERENCE_FORMAT)}static createInvalidStopSignal(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_InvalidSignal(i),I.ValidationCode.INVALID_SIGNAL)}static createInvalidSyntax(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_InvalidSyntax(i),I.ValidationCode.INVALID_SYNTAX)}static createMissingArgument(e,n,r){return t.createError(e,n,r,t.getDiagnosticMessage_InstructionMissingArgument(),I.ValidationCode.ARGUMENT_MISSING)}static createExtraArgument(e,n,r){return t.createError(e,n,r,t.getDiagnosticMessage_InstructionExtraArgument(),I.ValidationCode.ARGUMENT_EXTRA)}static createHealthcheckNoneUnnecessaryArgument(e,n,r){return t.createError(e,n,r,t.getDiagnosticMessage_HealthcheckNoneUnnecessaryArgument(),I.ValidationCode.ARGUMENT_UNNECESSARY)}static createADDDestinationNotDirectory(e,n){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_ADDDestinationNotDirectory(),I.ValidationCode.INVALID_DESTINATION)}static createADDRequiresAtLeastTwoArguments(e,n){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_ADDRequiresAtLeastTwoArguments(),I.ValidationCode.ARGUMENT_REQUIRES_AT_LEAST_TWO)}static createCOPYDestinationNotDirectory(e,n){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_COPYDestinationNotDirectory(),I.ValidationCode.INVALID_DESTINATION)}static createCOPYRequiresAtLeastTwoArguments(e,n){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_COPYRequiresAtLeastTwoArguments(),I.ValidationCode.ARGUMENT_REQUIRES_AT_LEAST_TWO)}static createENVRequiresTwoArguments(e,n,r){return t.createError(e,n,r,t.getDiagnosticMessage_ENVRequiresTwoArguments(),I.ValidationCode.ARGUMENT_REQUIRES_TWO)}static createHEALTHCHECKRequiresAtLeastOneArgument(e,n){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_HEALTHCHECKRequiresAtLeastOneArgument(),I.ValidationCode.ARGUMENT_REQUIRES_AT_LEAST_ONE)}static createHealthcheckCmdArgumentMissing(e,n,r){return t.createError(e,n,r,t.getDiagnosticMessage_HealthcheckCmdArgumentMissing(),I.ValidationCode.HEALTHCHECK_CMD_ARGUMENT_MISSING)}static createHealthcheckTypeUnknown(e,n,r){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_HealthcheckTypeUnknown(r),I.ValidationCode.UNKNOWN_TYPE)}static createOnbuildChainingDisallowed(e,n){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_OnbuildChainingDisallowed(),I.ValidationCode.ONBUILD_CHAINING_DISALLOWED)}static createOnbuildTriggerDisallowed(e,n,r){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_OnbuildTriggerDisallowed(r),I.ValidationCode.ONBUILD_TRIGGER_DISALLOWED)}static createShellJsonForm(e,n){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_ShellJsonForm(),I.ValidationCode.SHELL_JSON_FORM)}static createShellRequiresOne(e,n){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_ShellRequiresOne(),I.ValidationCode.SHELL_REQUIRES_ONE)}static createRequiresOneOrThreeArguments(e,n,r){return t.createError(e,n,r,t.getDiagnosticMessage_InstructionRequiresOneOrThreeArguments(),I.ValidationCode.ARGUMENT_REQUIRES_ONE_OR_THREE)}static createNoSourceImage(e,n){return t.createError(null,e,n,t.getDiagnosticMessage_NoSourceImage(),I.ValidationCode.NO_SOURCE_IMAGE)}static createSyntaxMissingEquals(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_SyntaxMissingEquals(i),I.ValidationCode.SYNTAX_MISSING_EQUALS)}static createSyntaxMissingSingleQuote(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_SyntaxMissingSingleQuote(i),I.ValidationCode.SYNTAX_MISSING_SINGLE_QUOTE)}static createSyntaxMissingDoubleQuote(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_SyntaxMissingDoubleQuote(i),I.ValidationCode.SYNTAX_MISSING_DOUBLE_QUOTE)}static createSyntaxMissingNames(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_SyntaxMissingNames(i),I.ValidationCode.SYNTAX_MISSING_NAMES)}static createVariableUnsupportedModifier(e,n,r,i){return t.createError(e,n.start,n.end,t.getDiagnosticMessage_VariableModifierUnsupported(r,i),I.ValidationCode.UNSUPPORTED_MODIFIER)}static createUnknownInstruction(e,n,r,i){return t.createError(e,n,r,t.getDiagnosticMessage_InstructionUnknown(i),I.ValidationCode.UNKNOWN_INSTRUCTION)}static createError(e,n,r,i,a,s){return t.createDiagnostic(ht.DiagnosticSeverity.Error,e,n,r,i,a,s)}static createJSONInSingleQuotes(e,n,r){return r===I.ValidationSeverity.ERROR?t.createError(e,n.start,n.end,t.getDiagnosticMessage_InstructionJSONInSingleQuotes(),I.ValidationCode.JSON_IN_SINGLE_QUOTES):r===I.ValidationSeverity.WARNING?t.createWarning(e,n.start,n.end,t.getDiagnosticMessage_InstructionJSONInSingleQuotes(),I.ValidationCode.JSON_IN_SINGLE_QUOTES):null}static createEmptyContinuationLine(e,n,r){return r===I.ValidationSeverity.ERROR?t.createError(null,e,n,t.getDiagnosticMessage_EmptyContinuationLine(),I.ValidationCode.EMPTY_CONTINUATION_LINE):r===I.ValidationSeverity.WARNING?t.createWarning(null,e,n,t.getDiagnosticMessage_EmptyContinuationLine(),I.ValidationCode.EMPTY_CONTINUATION_LINE):null}createMultipleInstructions(e,n,r,i){return r===I.ValidationSeverity.ERROR?t.createError(e,n.start,n.end,t.getDiagnosticMessage_InstructionMultiple(i),I.ValidationCode.MULTIPLE_INSTRUCTIONS,[ht.DiagnosticTag.Unnecessary]):r===I.ValidationSeverity.WARNING?t.createWarning(e,n.start,n.end,t.getDiagnosticMessage_InstructionMultiple(i),I.ValidationCode.MULTIPLE_INSTRUCTIONS,[ht.DiagnosticTag.Unnecessary]):null}createLowercaseDirective(e,n){return this.settings.directiveCasing===I.ValidationSeverity.ERROR?t.createError(null,e,n,t.getDiagnosticMessage_DirectiveCasing(),I.ValidationCode.CASING_DIRECTIVE):this.settings.directiveCasing===I.ValidationSeverity.WARNING?t.createWarning(null,e,n,t.getDiagnosticMessage_DirectiveCasing(),I.ValidationCode.CASING_DIRECTIVE):null}createUppercaseInstruction(e,n,r){return this.settings.instructionCasing===I.ValidationSeverity.ERROR?t.createError(e,n,r,t.getDiagnosticMessage_InstructionCasing(),I.ValidationCode.CASING_INSTRUCTION):this.settings.instructionCasing===I.ValidationSeverity.WARNING?t.createWarning(e,n,r,t.getDiagnosticMessage_InstructionCasing(),I.ValidationCode.CASING_INSTRUCTION):null}createMaintainerDeprecated(e,n,r){return this.settings.deprecatedMaintainer===I.ValidationSeverity.ERROR?t.createError(e,n,r,t.getDiagnosticMessage_DeprecatedMaintainer(),I.ValidationCode.DEPRECATED_MAINTAINER,[ht.DiagnosticTag.Deprecated]):this.settings.deprecatedMaintainer===I.ValidationSeverity.WARNING?t.createWarning(e,n,r,t.getDiagnosticMessage_DeprecatedMaintainer(),I.ValidationCode.DEPRECATED_MAINTAINER,[ht.DiagnosticTag.Deprecated]):null}createWORKDIRNotAbsolute(e,n){return this.settings.instructionWorkdirRelative===I.ValidationSeverity.ERROR?t.createError(e,n.start,n.end,t.getDiagnosticMessage_WORKDIRPathNotAbsolute(),I.ValidationCode.WORKDIR_IS_NOT_ABSOLUTE):this.settings.instructionWorkdirRelative===I.ValidationSeverity.WARNING?t.createWarning(e,n.start,n.end,t.getDiagnosticMessage_WORKDIRPathNotAbsolute(),I.ValidationCode.WORKDIR_IS_NOT_ABSOLUTE):null}static createWarning(e,n,r,i,a,s){return t.createDiagnostic(ht.DiagnosticSeverity.Warning,e,n,r,i,a,s)}static createDiagnostic(e,n,r,i,a,s,c){return{instructionLine:n,range:{start:r,end:i},message:a,severity:e,code:s,tags:c,source:"dockerfile-utils"}}};Bn.Validator=Gs;Gs.dockerProblems={baseNameEmpty:"base name (${0}) should not be blank",directiveCasing:"Parser directives should be written in lowercase letters",directiveEscapeDuplicated:"only one escape parser directive can be used",directiveEscapeInvalid:"invalid ESCAPE '${0}'. Must be ` or \\",noSourceImage:"No source image provided with `FROM`",emptyContinuationLine:"Empty continuation line",fromRequiresOneOrThreeArguments:"FROM requires either one or three arguments",invalidAs:"Second argument should be AS",invalidPort:"Invalid containerPort: ${0}",invalidProtocol:"Invalid proto: ${0}",invalidReferenceFormat:"invalid reference format",invalidStopSignal:"Invalid signal: ${0}",invalidSyntax:'parsing "${0}": invalid syntax',invalidDestination:"When using ${0} with more than one source file, the destination must be a directory and end with a / or a \\",syntaxMissingEquals:'Syntax error - can\'t find = in "${0}". Must be of the form: name=value',syntaxMissingNames:"${0} names cannot be blank",syntaxMissingSingleQuote:'failed to process "${0}": unexpected end of statement while looking for matching single-quote',syntaxMissingDoubleQuote:'failed to process "${0}": unexpected end of statement while looking for matching double-quote',duplicateBuildStageName:"duplicate name ${0}",invalidBuildStageName:'invalid name for build stage: "${0}", name can\'t start with a number or contain symbols',flagAtLeastOne:"${0} must be at least 1 (not ${1})",flagDuplicate:"Duplicate flag specified: ${0}",flagInvalidDuration:"time: invalid duration ${0}",flagInvalidFrom:"invalid from flag value ${0}: invalid reference format",flagExpectedBooleanValue:"expecting boolean value for flag ${0}, not: ${1}",flagLessThan1ms:'Interval "${0}" cannot be less than 1ms',flagMissingDuration:"time: missing unit in duration ${0}",flagMissingValue:"Missing a value on flag: ${0}",flagUnknown:"Unknown flag: ${0}",flagUnknownUnit:"time: unknown unit ${0} in duration ${1}",instructionExtraArgument:"Instruction has an extra argument",instructionMissingArgument:"Instruction has no arguments",instructionMultiple:"There can only be one ${0} instruction in a Dockerfile or build stage. Only the last one will have an effect.",instructionRequiresOneArgument:"${0} requires exactly one argument",instructionRequiresAtLeastOneArgument:"${0} requires at least one argument",instructionRequiresAtLeastTwoArguments:"${0} requires at least two arguments",instructionRequiresTwoArguments:"${0} must have two arguments",instructionUnnecessaryArgument:"${0} takes no arguments",instructionUnknown:"Unknown instruction: ${0}",instructionCasing:"Instructions should be written in uppercase letters",instructionJSONInSingleQuotes:"Instruction written as a JSON array but is using single quotes instead of double quotes",variableModifierUnsupported:'failed to process "${0}": unsupported modifier (${1}) in substitution',onbuildChainingDisallowed:"Chaining ONBUILD via `ONBUILD ONBUILD` isn't allowed",onbuildTriggerDisallowed:"${0} isn't allowed as an ONBUILD trigger",shellJsonForm:"SHELL requires the arguments to be in JSON form",shellRequiresOne:"SHELL requires at least one argument",deprecatedMaintainer:"MAINTAINER has been deprecated",healthcheckCmdArgumentMissing:"Missing command after HEALTHCHECK CMD",healthcheckTypeUnknown:'Unknown type"${0}" in HEALTHCHECK (try CMD)',workdirPathNotAbsolute:"WORKDIR paths should be absolute"}});var Si=T(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.validate=ct.formatOnType=ct.formatRange=ct.format=ct.ValidationSeverity=ct.ValidationCode=void 0;var Bs=(Fi(),z(Li)),Bg=Ah(),Ey=Th(),Eh;(function(t){t[t.CASING_INSTRUCTION=0]="CASING_INSTRUCTION",t[t.CASING_DIRECTIVE=1]="CASING_DIRECTIVE",t[t.ARGUMENT_MISSING=2]="ARGUMENT_MISSING",t[t.ARGUMENT_EXTRA=3]="ARGUMENT_EXTRA",t[t.ARGUMENT_REQUIRES_ONE=4]="ARGUMENT_REQUIRES_ONE",t[t.ARGUMENT_REQUIRES_AT_LEAST_ONE=5]="ARGUMENT_REQUIRES_AT_LEAST_ONE",t[t.ARGUMENT_REQUIRES_TWO=6]="ARGUMENT_REQUIRES_TWO",t[t.ARGUMENT_REQUIRES_AT_LEAST_TWO=7]="ARGUMENT_REQUIRES_AT_LEAST_TWO",t[t.ARGUMENT_REQUIRES_ONE_OR_THREE=8]="ARGUMENT_REQUIRES_ONE_OR_THREE",t[t.ARGUMENT_UNNECESSARY=9]="ARGUMENT_UNNECESSARY",t[t.DUPLICATE_BUILD_STAGE_NAME=10]="DUPLICATE_BUILD_STAGE_NAME",t[t.EMPTY_CONTINUATION_LINE=11]="EMPTY_CONTINUATION_LINE",t[t.INVALID_BUILD_STAGE_NAME=12]="INVALID_BUILD_STAGE_NAME",t[t.FLAG_AT_LEAST_ONE=13]="FLAG_AT_LEAST_ONE",t[t.FLAG_DUPLICATE=14]="FLAG_DUPLICATE",t[t.FLAG_INVALID_DURATION=15]="FLAG_INVALID_DURATION",t[t.FLAG_LESS_THAN_1MS=16]="FLAG_LESS_THAN_1MS",t[t.FLAG_MISSING_DURATION=17]="FLAG_MISSING_DURATION",t[t.FLAG_MISSING_VALUE=18]="FLAG_MISSING_VALUE",t[t.FLAG_UNKNOWN_UNIT=19]="FLAG_UNKNOWN_UNIT",t[t.NO_SOURCE_IMAGE=20]="NO_SOURCE_IMAGE",t[t.INVALID_ESCAPE_DIRECTIVE=21]="INVALID_ESCAPE_DIRECTIVE",t[t.INVALID_AS=22]="INVALID_AS",t[t.INVALID_DESTINATION=23]="INVALID_DESTINATION",t[t.INVALID_PORT=24]="INVALID_PORT",t[t.INVALID_PROTO=25]="INVALID_PROTO",t[t.INVALID_REFERENCE_FORMAT=26]="INVALID_REFERENCE_FORMAT",t[t.INVALID_SIGNAL=27]="INVALID_SIGNAL",t[t.INVALID_SYNTAX=28]="INVALID_SYNTAX",t[t.ONBUILD_CHAINING_DISALLOWED=29]="ONBUILD_CHAINING_DISALLOWED",t[t.ONBUILD_TRIGGER_DISALLOWED=30]="ONBUILD_TRIGGER_DISALLOWED",t[t.SHELL_JSON_FORM=31]="SHELL_JSON_FORM",t[t.SHELL_REQUIRES_ONE=32]="SHELL_REQUIRES_ONE",t[t.SYNTAX_MISSING_EQUALS=33]="SYNTAX_MISSING_EQUALS",t[t.SYNTAX_MISSING_NAMES=34]="SYNTAX_MISSING_NAMES",t[t.SYNTAX_MISSING_SINGLE_QUOTE=35]="SYNTAX_MISSING_SINGLE_QUOTE",t[t.SYNTAX_MISSING_DOUBLE_QUOTE=36]="SYNTAX_MISSING_DOUBLE_QUOTE",t[t.MULTIPLE_INSTRUCTIONS=37]="MULTIPLE_INSTRUCTIONS",t[t.UNKNOWN_INSTRUCTION=38]="UNKNOWN_INSTRUCTION",t[t.UNKNOWN_ADD_FLAG=39]="UNKNOWN_ADD_FLAG",t[t.UNKNOWN_COPY_FLAG=40]="UNKNOWN_COPY_FLAG",t[t.UNKNOWN_FROM_FLAG=41]="UNKNOWN_FROM_FLAG",t[t.UNKNOWN_HEALTHCHECK_FLAG=42]="UNKNOWN_HEALTHCHECK_FLAG",t[t.UNKNOWN_TYPE=43]="UNKNOWN_TYPE",t[t.UNSUPPORTED_MODIFIER=44]="UNSUPPORTED_MODIFIER",t[t.DEPRECATED_MAINTAINER=45]="DEPRECATED_MAINTAINER",t[t.HEALTHCHECK_CMD_ARGUMENT_MISSING=46]="HEALTHCHECK_CMD_ARGUMENT_MISSING",t[t.FLAG_INVALID_FROM_VALUE=47]="FLAG_INVALID_FROM_VALUE",t[t.FLAG_INVALID_LINK_VALUE=48]="FLAG_INVALID_LINK_VALUE",t[t.FLAG_EXPECTED_BOOLEAN_VALUE=48]="FLAG_EXPECTED_BOOLEAN_VALUE",t[t.JSON_IN_SINGLE_QUOTES=49]="JSON_IN_SINGLE_QUOTES",t[t.WORKDIR_IS_NOT_ABSOLUTE=50]="WORKDIR_IS_NOT_ABSOLUTE",t[t.BASE_NAME_EMPTY=51]="BASE_NAME_EMPTY",t[t.DUPLICATED_ESCAPE_DIRECTIVE=52]="DUPLICATED_ESCAPE_DIRECTIVE"})(Eh||(ct.ValidationCode=Eh={}));var Ch;(function(t){t[t.IGNORE=0]="IGNORE",t[t.WARNING=1]="WARNING",t[t.ERROR=2]="ERROR"})(Ch||(ct.ValidationSeverity=Ch={}));function Cy(t,e){let n=Bs.TextDocument.create("","",0,t);return new Bg.DockerFormatter().formatDocument(n,e)}o(Cy,"format");ct.format=Cy;function Py(t,e,n){let r=Bs.TextDocument.create("","",0,t);return new Bg.DockerFormatter().formatRange(r,e,n)}o(Py,"formatRange");ct.formatRange=Py;function Iy(t,e,n,r){let i=Bs.TextDocument.create("","",0,t);return new Bg.DockerFormatter().formatOnType(i,e,n,r)}o(Iy,"formatOnType");ct.formatOnType=Iy;function Ny(t,e){let n=Bs.TextDocument.create("","",0,t);return new Ey.Validator(e).validate(n)}o(Ny,"validate");ct.validate=Ny});var Kn={};wi(Kn,{TextDocument:()=>Kg});function $g(t,e){if(t.length<=1)return t;var n=t.length/2|0,r=t.slice(0,n),i=t.slice(n);$g(r,e),$g(i,e);for(var a=0,s=0,c=0;a<r.length&&s<i.length;){var u=e(r[a],i[s]);u<=0?t[c++]=r[a++]:t[c++]=i[s++]}for(;a<r.length;)t[c++]=r[a++];for(;s<i.length;)t[c++]=i[s++];return t}function Ih(t,e,n){n===void 0&&(n=0);for(var r=e?[n]:[],i=0;i<t.length;i++){var a=t.charCodeAt(i);(a===13||a===10)&&(a===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function Nh(t){var e=t.start,n=t.end;return e.line>n.line||e.line===n.line&&e.character>n.character?{start:n,end:e}:t}function Oy(t){var e=Nh(t.range);return e!==t.range?{newText:t.newText,range:e}:t}var My,Ph,Kg,$n=Oi(()=>{"use strict";My=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},Ph=(function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return o(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:o(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:o(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:o(function(){return this._version},"get"),enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){for(var r=0,i=e;r<i.length;r++){var a=i[r];if(t.isIncremental(a)){var s=Nh(a.range),c=this.offsetAt(s.start),u=this.offsetAt(s.end);this._content=this._content.substring(0,c)+a.text+this._content.substring(u,this._content.length);var l=Math.max(s.start.line,0),f=Math.max(s.end.line,0),g=this._lineOffsets,m=Ih(a.text,!1,c);if(f-l===m.length)for(var d=0,p=m.length;d<p;d++)g[d+l+1]=m[d];else m.length<1e4?g.splice.apply(g,My([l+1,f-l],m,!1)):this._lineOffsets=g=g.slice(0,l+1).concat(m,g.slice(f+1));var v=a.text.length-(u-c);if(v!==0)for(var d=l+1+m.length,p=g.length;d<p;d++)g[d]=g[d]+v}else if(t.isFull(a))this._content=a.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received")}this._version=n},t.prototype.getLineOffsets=function(){return this._lineOffsets===void 0&&(this._lineOffsets=Ih(this._content,!0)),this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){var a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}var s=r-1;return{line:s,character:e-n[s]}},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:o(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),t.isIncremental=function(e){var n=e;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")},t.isFull=function(e){var n=e;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0},t})();(function(t){function e(i,a,s,c){return new Ph(i,a,s,c)}o(e,"create"),t.create=e;function n(i,a,s){if(i instanceof Ph)return i.update(a,s),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}o(n,"update"),t.update=n;function r(i,a){for(var s=i.getText(),c=$g(a.map(Oy),function(p,v){var S=p.range.start.line-v.range.start.line;return S===0?p.range.start.character-v.range.start.character:S}),u=0,l=[],f=0,g=c;f<g.length;f++){var m=g[f],d=i.offsetAt(m.range.start);if(d<u)throw new Error("Overlapping edit");d>u&&l.push(s.substring(u,d)),m.newText.length&&l.push(m.newText),u=i.offsetAt(m.range.end)}return l.push(s.substr(u)),l.join("")}o(r,"applyEdits"),t.applyEdits=r})(Kg||(Kg={}));o($g,"mergeSort");o(Ih,"computeLineOffsets");o(Nh,"getWellformedRange");o(Oy,"getWellformedEdit")});var vn=T(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.Util=Tr.KEYWORDS=void 0;Tr.KEYWORDS=["ADD","ARG","CMD","COPY","ENTRYPOINT","ENV","EXPOSE","FROM","HEALTHCHECK","LABEL","MAINTAINER","ONBUILD","RUN","SHELL","STOPSIGNAL","USER","VOLUME","WORKDIR"];var wy=(function(){function t(){}return o(t,"Util"),t.isWhitespace=function(e){return e===" "||e==="	"||t.isNewline(e)},t.isNewline=function(e){return e==="\r"||e===`
`},t.isInsideRange=function(e,n){return n===null?!1:n.start.line===n.end.line?n.start.line===e.line&&n.start.character<=e.character&&e.character<=n.end.character:n.start.line===e.line?n.start.character<=e.character:n.end.line===e.line?e.character<=n.end.character:n.start.line<e.line&&e.line<n.end.line},t.isEmpty=function(e){return e.start.line===e.end.line&&e.start.character===e.end.character},t.rangeEquals=function(e,n){return t.positionEquals(e.start,n.start)&&t.positionEquals(e.end,n.end)},t.positionEquals=function(e,n){return e.line==n.line&&e.character===n.character},t.positionBefore=function(e,n){return e.line<n.line?!0:e.line>n.line?!1:e.character<n.character},t})();Tr.Util=wy});var Mh=T(Rn=>{"use strict";var xy=Rn&&Rn.__awaiter||function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return o(i,"adopt"),new(n||(n=Promise))(function(a,s){function c(f){try{l(r.next(f))}catch(g){s(g)}}o(c,"fulfilled");function u(f){try{l(r.throw(f))}catch(g){s(g)}}o(u,"rejected");function l(f){f.done?a(f.value):i(f.value).then(c,u)}o(l,"step"),l((r=r.apply(t,e||[])).next())})},Ly=Rn&&Rn.__generator||function(t,e){var n={label:0,sent:o(function(){if(a[0]&1)throw a[1];return a[1]},"sent"),trys:[],ops:[]},r,i,a,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){n.label=l[1];break}if(l[0]===6&&n.label<a[1]){n.label=a[1],a=l;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(l);break}a[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(f){l=[6,f],i=0}finally{r=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.DockerAssist=void 0;var be=(ve(),z(pe)),He=vn(),Ue=qe(),Fy=(function(){function t(e,n,r){this.document=e,this.dockerRegistryClient=n,this.deprecatedSupport=r&&r.deprecatedSupport,this.snippetSupport=r&&r.snippetSupport,this.supportedTags=r&&r.tagSupport&&r.tagSupport.valueSet}return o(t,"DockerAssist"),t.prototype.computeProposals=function(e){for(var n=this.document.getText(),r=this.document.offsetAt(e),i=Ue.DockerfileParser.parse(n),a=i.getEscapeCharacter(),s=-1,c=0,u=i.getDirectives();c<u.length;c++){var l=u[c],f=l.getNameRange();if(s=f.start.line,e.line===s){if(e.character<=f.start.character)return[this.createEscape(0,r,Ue.Directive.escape),this.createSyntax(0,r,Ue.Directive.syntax)];if(e.character<=f.end.character){var g=l.getName().substring(0,e.character-f.start.character);if(g=g.toLowerCase(),Ue.Directive.escape.indexOf(g)===0)return[this.createEscape(g.length,r,Ue.Directive.escape)];if(Ue.Directive.syntax.indexOf(g)===0)return[this.createSyntax(g.length,r,Ue.Directive.syntax)]}return[]}}var m=i.getComments();if(m.length!==0)if(e.line===s+1){var d=m[0].getRange();if(d.start.line===e.line&&d.start.character<e.character){var f=m[0].getContentRange();if(f===null||e.character<=f.start.character)return[this.createEscape(0,r,Ue.Directive.escape),this.createSyntax(0,r,Ue.Directive.syntax)];var p=m[0].getContent();if(e.character<=f.end.character){var v=p.substring(0,e.character-f.start.character);if(Ue.Directive.escape.indexOf(v.toLowerCase())===0)return[this.createEscape(v.length,r,Ue.Directive.escape)];if(Ue.Directive.syntax.indexOf(v.toLowerCase())===0)return[this.createSyntax(v.length,r,Ue.Directive.syntax)]}return[]}}else for(var S=0,k=m;S<k.length;S++){var p=k[S],f=p.getRange();if(f.start.line===e.line&&f.start.character<e.character&&e.character<=f.end.character)return[]}var b=this.calculateTruePrefix(i,n,r,a);if(b.content!==""){var _=b.content.lastIndexOf("$");if(_!==-1&&b.content.charAt(_-1)!=="\\"){var A=b.content.substring(_+1).toLowerCase(),w=A.length+1,V=[];if(A===""){for(var B=0,te=i.getAvailableVariables(e.line);B<te.length;B++){var X=te[B],ae=i.resolveVariable(X,e.line);V.push(this.createVariableCompletionItem(X,w,r,!0,ae))}for(var ne=0,de=Ue.DefaultVariables;ne<de.length;ne++){var X=de[ne],ae=i.resolveVariable(X,e.line);V.push(this.createVariableCompletionItem(X,w,r,!0,ae))}}else{var ke=!1;A.charAt(0)==="{"&&(ke=!0,A=A.substring(1));for(var se=i.getAvailableVariables(e.line),L=0,x=Ue.DefaultVariables;L<x.length;L++){var X=x[L];se.indexOf(X)===-1&&se.push(X)}for(var M=0,j=se;M<j.length;M++){var X=j[M];if(X.toLowerCase().indexOf(A)===0){var ae=i.resolveVariable(X,e.line);V.push(this.createVariableCompletionItem(X,w,r,ke,ae))}}}return V.sort(function(st,je){return st.label.toLowerCase()===je.label.toLowerCase()?st.label.localeCompare(je.label)*-1:st.label.localeCompare(je.label)}),V}}var Y="";e:for(var Se=0,oe=i.getInstructions();Se<oe.length;Se++){var fe=oe[Se];if(He.Util.isInsideRange(e,fe.getInstructionRange())||b.content===fe.getKeyword())break;if(He.Util.isInsideRange(e,fe.getRange()))switch(fe.getKeyword()){case"ADD":return this.createAddProposals(i,fe,e,r,b.content);case"COPY":return this.createCopyProposals(i,fe,e,r,b.content);case"FROM":return this.createFromProposals(fe,e,r,b.content);case"HEALTHCHECK":var ze=fe.getSubcommand();return ze&&ze.isBefore(e)?[]:this.createHealthcheckProposals(r,b.content);case"ONBUILD":var it=fe.getArguments();if(it.length===0||He.Util.isInsideRange(e,it[0].getRange())){Y="ONBUILD";break e}else{var at=fe.getTriggerInstruction();switch(at.getKeyword()){case"ADD":return this.createAddProposals(i,at,e,r,b.content);case"COPY":return this.createCopyProposals(i,at,e,r,b.content);case"HEALTHCHECK":var St=at.getSubcommand();return St&&St.isBefore(e)?[]:this.createHealthcheckProposals(r,b.content)}}return[];default:return[]}}if(b.content==="")return i.getInstructions().length===0?[this.createFROM(0,r,"FROM")]:this.createProposals(He.KEYWORDS,Y,0,r);for(var lt=[],xt=b.content.toUpperCase(),Me=0;Me<He.KEYWORDS.length;Me++){if(He.KEYWORDS[Me]===xt)return[];He.KEYWORDS[Me].indexOf(xt)===0&&lt.push(He.KEYWORDS[Me])}return lt.length===0?[]:this.createProposals(lt,Y,r-b.offset,r)},t.prototype.createProposals=function(e,n,r,i){for(var a=[],s=0;s<e.length;s++)switch(e[s]){case"ARG":this.snippetSupport?(a.push(this.createARG_NameOnly(r,i)),a.push(this.createARG_DefaultValue(r,i))):a.push(this.createARG(r,i));break;case"HEALTHCHECK":a.push(this.createHEALTHCHECK_CMD(r,i)),a.push(this.createHEALTHCHECK_NONE(r,i));break;case"FROM":case"MAINTAINER":case"ONBUILD":if(n)break;default:a.push(this.createSingleProposals(e[s],r,i));break}return a},t.prototype.createAddProposals=function(e,n,r,i,a){var s=new Map;s.set("chown",this.createADD_FlagChown.bind(this));var c=n.getArguments(),u=this.createFlagProposals(n.getFlags(),c,r,i,a,s);return u!==null?u:this.createTargetFolderProposals(e,c,r,i,a)},t.prototype.createOtherFlagProposals=function(e,n,r,i,a){if(r.length===0)return n;if(r.length===e.size)return[];var s=[];return e.forEach(function(c,u){r.indexOf(u)===-1&&s.push(u)}),s.map(function(c){var u=e.get(c);return u(i,a)})},t.prototype.createFlagProposals=function(e,n,r,i,a,s){var c=[];s.forEach(function(S){c.push(S(a.length,i))});var u=!0;n.length>0&&He.Util.positionBefore(n[0].getRange().start,this.document.positionAt(i))&&(u=!1);for(var l=[],f=!1,g=0,m=e;g<m.length;g++){var d=m[g],p=d.getName();s.has(p)&&l.push(p),He.Util.isInsideRange(r,d.getRange())&&(f=!0)}if(f){if(a==="--")return this.createOtherFlagProposals(s,c,l,a.length,i);var v=null;if(s.forEach(function(S,k){"--".concat(k,"=").indexOf(a)===0&&(v=S(a.length,i))}),v!==null)return[v]}return u||n.length>0&&He.Util.isInsideRange(r,n[0].getRange())&&a==="-"?this.createOtherFlagProposals(s,c,l,a.length,i):null},t.prototype.createCopyProposals=function(e,n,r,i,a){var s=n.getFromFlag();if(s&&He.Util.isInsideRange(r,s.getValueRange())){for(var c={},u=[],l=0,f=!1,g=this.document.getText().substring(this.document.offsetAt(s.getValueRange().start),i).toLowerCase(),m=0,d=e.getFROMs();m<d.length;m++){var p=d[m];if(n.isAfter(p)){var v=p.getImage(),S=p.getBuildStage();if(S){var k=S.toLowerCase();k.indexOf(g)===0&&!c[k]&&(c[k]=!0,u.push(this.createSourceImageCompletionItem(S,v,l,g.length,i))),f=!1}else c[l]||(c[l]=!0,u.push(this.createSourceImageCompletionItem(l.toString(),v,l,g.length,i)),f=!0);l++}else break}return f&&u.length>0&&u.pop(),u}var b=new Map;b.set("chown",this.createCOPY_FlagChown.bind(this)),b.set("from",this.createCOPY_FlagFrom.bind(this));var _=n.getArguments(),A=this.createFlagProposals(n.getFlags(),_,r,i,a,b);return A!==null?A:this.createTargetFolderProposals(e,_,r,i,a)},t.prototype.createTargetFolderProposals=function(e,n,r,i,a){if(n.length===1)return He.Util.positionBefore(n[0].getRange().end,r)?this.createWorkdirPathProposals(e,r,i,a):[];var s=n[n.length-1].getRange();return He.Util.isInsideRange(r,s)||He.Util.positionBefore(s.end,r)?this.createWorkdirPathProposals(e,r,i,a):[]},t.prototype.createWorkdirPathProposals=function(e,n,r,i){for(var a=[],s=0,c=e.getAvailableWorkingDirectories(n.line);s<c.length;s++){var u=c[s];u.startsWith(i)&&a.push(this.createPlainTextCompletionItem(u,i.length,r,u,be.CompletionItemKind.Folder))}return a},t.prototype.createFromProposals=function(e,n,r,i){var a=this;if(He.Util.isInsideRange(n,e.getImageTagRange())){var s=i.indexOf(":"),c=i.indexOf(":");s===c?i=i.substring(s+1):i=i.substring(s+1,c);var u=this.dockerRegistryClient;return new Promise(function(f){return xy(a,void 0,void 0,function(){var g,m,d,p,v;return Ly(this,function(S){switch(S.label){case 0:return g=[],[4,u.getTags(e.getImageName())];case 1:for(m=S.sent(),d=0,p=m;d<p.length;d++)v=p[d],v.indexOf(i)===0&&g.push({textEdit:this.createTextEdit(i.length,this.document.offsetAt(n),v),label:v,kind:be.CompletionItemKind.Property,insertTextFormat:be.InsertTextFormat.PlainText});return f(g),[2]}})})})}var l=e.getArguments();return l.length>0&&l[0].isBefore(n)?[]:"--platform".indexOf(i)===0?[this.createFROM_FlagPlatform(i.length,r)]:[]},t.prototype.createHealthcheckProposals=function(e,n){var r=[];n.length<3&&"CMD".indexOf(n.toUpperCase())===0&&r.push(this.createHEALTHCHECK_CMD_Subcommand(n.length,e)),n.length<4&&"NONE".indexOf(n.toUpperCase())===0&&r.push(this.createHEALTHCHECK_NONE_Subcommand(n.length,e)),"--interval".indexOf(n)===0&&r.push(this.createHEALTHCHECK_FlagInterval(n.length,e)),"--retries".indexOf(n)===0&&r.push(this.createHEALTHCHECK_FlagRetries(n.length,e)),"--start-interval".indexOf(n)===0&&r.push(this.createHEALTHCHECK_FlagStartInterval(n.length,e)),"--start-period".indexOf(n)===0&&r.push(this.createHEALTHCHECK_FlagStartPeriod(n.length,e)),"--timeout".indexOf(n)===0&&r.push(this.createHEALTHCHECK_FlagTimeout(n.length,e));for(var i=0;i<r.length;i++)r[i].sortText=i.toString();return r},t.prototype.calculateTruePrefix=function(e,n,r,i){var a=n.charAt(r-1),s=!0;switch(a){case`
`:var c="";e:for(var u=r-2;u>=0;u--)switch(n.charAt(u)){case" ":case"	":if(!s)break e;break;case"\r":case`
`:s=!0;break;case i:if(s){s=!1;continue}break;default:if(s)break e;r=u,c=n.charAt(u).toUpperCase()+c;break}if(c!=="")return{content:c,offset:r};break;case"\r":case" ":case"	":break;default:s=!1;for(var l=a,f=r-2;f>=0;f--)if(a=n.charAt(f),He.Util.isNewline(a))s=!0;else if(He.Util.isWhitespace(a)){if(s)continue;break}else{if(a===i){if(s){s=!1;continue}}else if(s)break;l=a+l}for(var g=0,m=e.getInstructions();g<m.length;g++){var d=m[g],p=d.getInstructionRange(),v=this.document.offsetAt(p.start);if(v<=r&&r<=this.document.offsetAt(p.end))return{content:l,offset:v};for(var S=0,k=d.getArguments();S<k.length;S++){var b=k[S],_=b.getRange(),A=this.document.offsetAt(_.start);if(A<=r&&r<=this.document.offsetAt(_.end))return{content:l,offset:A}}if(d instanceof Ue.ModifiableInstruction)for(var w=0,V=d.getFlags();w<V.length;w++){var B=V[w],te=B.getRange(),X=this.document.offsetAt(te.start);if(X<=r&&r<=this.document.offsetAt(te.end))return{content:l,offset:X}}}}return{content:"",offset:r}},t.prototype.createSingleProposals=function(e,n,r){switch(e){case"ADD":return this.createADD(n,r,e);case"CMD":return this.createCMD(n,r,e);case"COPY":return this.createCOPY(n,r,e);case"ENTRYPOINT":return this.createENTRYPOINT(n,r,e);case"ENV":return this.createENV(n,r,e);case"EXPOSE":return this.createEXPOSE(n,r,e);case"FROM":return this.createFROM(n,r,e);case"LABEL":return this.createLABEL(n,r,e);case"MAINTAINER":return this.createMAINTAINER(n,r,e);case"ONBUILD":return this.createONBUILD(n,r,e);case"RUN":return this.createRUN(n,r,e);case"SHELL":return this.createSHELL(n,r,e);case"STOPSIGNAL":return this.createSTOPSIGNAL(n,r,e);case"WORKDIR":return this.createWORKDIR(n,r,e);case"VOLUME":return this.createVOLUME(n,r,e);case"USER":return this.createUSER(n,r,e)}throw new Error("Unknown keyword found: "+e)},t.prototype.createADD=function(e,n,r){return this.createKeywordCompletionItem("ADD","ADD source dest",e,n,"ADD ${1:source} ${2:dest}",r)},t.prototype.createARG=function(e,n){return this.createKeywordCompletionItem("ARG","ARG",e,n,"ARG","ARG")},t.prototype.createARG_NameOnly=function(e,n){return this.createKeywordCompletionItem("ARG","ARG name",e,n,"ARG ${1:name}","ARG_NameOnly")},t.prototype.createARG_DefaultValue=function(e,n){return this.createKeywordCompletionItem("ARG","ARG name=defaultValue",e,n,"ARG ${1:name}=${2:defaultValue}","ARG_DefaultValue")},t.prototype.createCMD=function(e,n,r){return this.createKeywordCompletionItem("CMD",'CMD [ "executable" ]',e,n,'CMD [ "${1:executable}" ]',r)},t.prototype.createCOPY=function(e,n,r){return this.createKeywordCompletionItem("COPY","COPY source dest",e,n,"COPY ${1:source} ${2:dest}",r)},t.prototype.createENTRYPOINT=function(e,n,r){return this.createKeywordCompletionItem("ENTRYPOINT",'ENTRYPOINT [ "executable" ]',e,n,'ENTRYPOINT [ "${1:executable}" ]',r)},t.prototype.createENV=function(e,n,r){return this.createKeywordCompletionItem("ENV","ENV key=value",e,n,"ENV ${1:key}=${2:value}",r)},t.prototype.createEXPOSE=function(e,n,r){return this.createKeywordCompletionItem("EXPOSE","EXPOSE port",e,n,"EXPOSE ${1:port}",r)},t.prototype.createFROM=function(e,n,r){return this.createKeywordCompletionItem("FROM","FROM baseImage",e,n,"FROM ${1:baseImage}",r)},t.prototype.createHEALTHCHECK_CMD=function(e,n){if(this.snippetSupport)return this.createKeywordCompletionItem("HEALTHCHECK",'HEALTHCHECK --interval=30s --timeout=30s --start-period=5s --retries=3 CMD [ "executable" ]',e,n,'HEALTHCHECK --interval=${1:30s} --timeout=${2:30s} --start-period=${3:5s} --retries=${4:3} CMD [ "${5:executable}" ]',"HEALTHCHECK_CMD");var r=this.createTextEdit(e,n,"HEALTHCHECK CMD");return{data:"HEALTHCHECK_CMD",textEdit:r,label:"HEALTHCHECK CMD",kind:be.CompletionItemKind.Keyword,insertTextFormat:be.InsertTextFormat.PlainText}},t.prototype.createHEALTHCHECK_CMD_Subcommand=function(e,n){if(this.snippetSupport)return this.createKeywordCompletionItem("CMD",'CMD [ "executable" ]',e,n,'CMD [ "${1:executable}" ]',"HEALTHCHECK_CMD");var r=this.createTextEdit(e,n,"CMD");return{data:"HEALTHCHECK_CMD",textEdit:r,label:"CMD",kind:be.CompletionItemKind.Keyword,insertTextFormat:be.InsertTextFormat.PlainText}},t.prototype.createADD_FlagChown=function(e,n){return this.snippetSupport?this.createFlagCompletionItem("--chown=user:group",e,n,"--chown=${1:user:group}","ADD_FlagChown"):this.createFlagCompletionItem("--chown=",e,n,"--chown=","ADD_FlagChown")},t.prototype.createCOPY_FlagChown=function(e,n){return this.snippetSupport?this.createFlagCompletionItem("--chown=user:group",e,n,"--chown=${1:user:group}","COPY_FlagChown"):this.createFlagCompletionItem("--chown=",e,n,"--chown=","COPY_FlagChown")},t.prototype.createCOPY_FlagFrom=function(e,n){return this.snippetSupport?this.createFlagCompletionItem("--from=stage",e,n,"--from=${1:stage}","COPY_FlagFrom"):this.createFlagCompletionItem("--from=",e,n,"--from=","COPY_FlagFrom")},t.prototype.createFROM_FlagPlatform=function(e,n){return this.snippetSupport?this.createFlagCompletionItem("--platform=arm64",e,n,"--platform=${1:arm64}","FROM_FlagPlatform"):this.createFlagCompletionItem("--platform=",e,n,"--platform=","FROM_FlagPlatform")},t.prototype.createHEALTHCHECK_FlagInterval=function(e,n){return this.snippetSupport?this.createFlagCompletionItem("--interval=30s",e,n,"--interval=${1:30s}","HEALTHCHECK_FlagInterval"):this.createFlagCompletionItem("--interval=",e,n,"--interval=","HEALTHCHECK_FlagInterval")},t.prototype.createHEALTHCHECK_FlagRetries=function(e,n){return this.snippetSupport?this.createFlagCompletionItem("--retries=3",e,n,"--retries=${1:3}","HEALTHCHECK_FlagRetries"):this.createFlagCompletionItem("--retries=",e,n,"--retries=","HEALTHCHECK_FlagRetries")},t.prototype.createHEALTHCHECK_FlagStartInterval=function(e,n){return this.snippetSupport?this.createFlagCompletionItem("--start-interval=5s",e,n,"--start-interval=${1:5s}","HEALTHCHECK_FlagStartInterval"):this.createFlagCompletionItem("--start-interval=",e,n,"--start-interval=","HEALTHCHECK_FlagStartInterval")},t.prototype.createHEALTHCHECK_FlagStartPeriod=function(e,n){return this.snippetSupport?this.createFlagCompletionItem("--start-period=5s",e,n,"--start-period=${1:5s}","HEALTHCHECK_FlagStartPeriod"):this.createFlagCompletionItem("--start-period=",e,n,"--start-period=","HEALTHCHECK_FlagStartPeriod")},t.prototype.createHEALTHCHECK_FlagTimeout=function(e,n){return this.snippetSupport?this.createFlagCompletionItem("--timeout=30s",e,n,"--timeout=${1:30s}","HEALTHCHECK_FlagTimeout"):this.createFlagCompletionItem("--timeout=",e,n,"--timeout=","HEALTHCHECK_FlagTimeout")},t.prototype.createHEALTHCHECK_NONE=function(e,n){return this.createPlainTextCompletionItem("HEALTHCHECK NONE",e,n,"HEALTHCHECK NONE",be.CompletionItemKind.Keyword,"HEALTHCHECK_NONE")},t.prototype.createHEALTHCHECK_NONE_Subcommand=function(e,n){return this.createPlainTextCompletionItem("NONE",e,n,"NONE",be.CompletionItemKind.Keyword,"HEALTHCHECK_NONE")},t.prototype.createLABEL=function(e,n,r){return this.createKeywordCompletionItem("LABEL",'LABEL key="value"',e,n,'LABEL ${1:key}="${2:value}"',r)},t.prototype.createMAINTAINER=function(e,n,r){var i=this.createKeywordCompletionItem("MAINTAINER","MAINTAINER name",e,n,"MAINTAINER ${1:name}",r);return this.supportedTags!==void 0&&this.supportedTags.length>0&&this.supportedTags.indexOf(be.CompletionItemTag.Deprecated)>=0&&(i.tags=[be.CompletionItemTag.Deprecated]),this.deprecatedSupport&&(i.deprecated=!0),i},t.prototype.createONBUILD=function(e,n,r){return this.createKeywordCompletionItem("ONBUILD","ONBUILD INSTRUCTION",e,n,"ONBUILD ${1:INSTRUCTION}",r)},t.prototype.createRUN=function(e,n,r){return this.createKeywordCompletionItem("RUN","RUN command",e,n,"RUN ${1:command}",r)},t.prototype.createSHELL=function(e,n,r){return this.createKeywordCompletionItem("SHELL",'SHELL [ "executable" ]',e,n,'SHELL [ "${1:executable}" ]',r)},t.prototype.createSTOPSIGNAL=function(e,n,r){return this.createKeywordCompletionItem("STOPSIGNAL","STOPSIGNAL signal",e,n,"STOPSIGNAL ${1:signal}",r)},t.prototype.createUSER=function(e,n,r){return this.createKeywordCompletionItem("USER","USER daemon",e,n,"USER ${1:daemon}",r)},t.prototype.createVOLUME=function(e,n,r){return this.createKeywordCompletionItem("VOLUME",'VOLUME [ "/data" ]',e,n,'VOLUME [ "${1:/data}" ]',r)},t.prototype.createWORKDIR=function(e,n,r){return this.createKeywordCompletionItem("WORKDIR","WORKDIR /the/workdir/path",e,n,"WORKDIR ${1:/the/workdir/path}",r)},t.prototype.createEscape=function(e,n,r){return this.createKeywordCompletionItem(Ue.Directive.escape,"escape=`",e,n,"escape=${1:`}",r)},t.prototype.createSyntax=function(e,n,r){return this.createKeywordCompletionItem(Ue.Directive.syntax,"syntax=docker/dockerfile:experimental",e,n,"syntax=${1:docker/dockerfile:experimental}",r)},t.prototype.createKeywordCompletionItem=function(e,n,r,i,a,s){this.snippetSupport||(n=e,a=e);var c=this.createTextEdit(r,i,a);return{data:s,textEdit:c,label:n,kind:be.CompletionItemKind.Keyword,insertTextFormat:this.snippetSupport?be.InsertTextFormat.Snippet:be.InsertTextFormat.PlainText}},t.prototype.createPlainTextCompletionItem=function(e,n,r,i,a,s){var c=this.createTextEdit(n,r,i);return{data:s,textEdit:c,label:e,kind:a,insertTextFormat:be.InsertTextFormat.PlainText}},t.prototype.createFlagCompletionItem=function(e,n,r,i,a){var s=this.createTextEdit(n,r,i);return{data:a,textEdit:s,label:e,kind:be.CompletionItemKind.Field,insertTextFormat:this.snippetSupport?be.InsertTextFormat.Snippet:be.InsertTextFormat.PlainText}},t.prototype.createSourceImageCompletionItem=function(e,n,r,i,a){return{textEdit:this.createTextEdit(i,a,e),label:e,documentation:n,kind:be.CompletionItemKind.Reference,insertTextFormat:be.InsertTextFormat.PlainText,sortText:r.toString()}},t.prototype.createVariableCompletionItem=function(e,n,r,i,a){return e=i?"${"+e+"}":"$"+e,{textEdit:this.createTextEdit(n,r,e),label:e,kind:be.CompletionItemKind.Variable,insertTextFormat:be.InsertTextFormat.PlainText,documentation:a}},t.prototype.createTextEdit=function(e,n,r){return e===0?be.TextEdit.insert(this.document.positionAt(n),r):be.TextEdit.replace(be.Range.create(this.document.positionAt(n-e),this.document.positionAt(n)),r)},t})();Rn.DockerAssist=Fy});var Oh=T(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.DockerRegistryClient=void 0;var qy=require("https"),Hy=(function(){function t(e){this.logger=e}return o(t,"DockerRegistryClient"),t.prototype.getTags=function(e,n){var r=this;return e.indexOf("/")===-1&&(e="library/"+e),this.requestToken(e).then(function(i){return i===null?[]:r.listTags(i.token,e).then(function(a){if(!n)return a.tags;for(var s=[],c=0,u=a.tags;c<u.length;c++){var l=u[c];l.indexOf(n)===0&&s.push(l)}return s})})},t.prototype.requestToken=function(e){var n=this;return this.performHttpsGet({hostname:"auth.docker.io",port:443,path:"/token?service=registry.docker.io&scope=repository:"+e+":pull",headers:{Accept:"application/json"}}).catch(function(r){return n.log(r),null})},t.prototype.listTags=function(e,n){var r=this;return this.performHttpsGet({hostname:"registry-1.docker.io",port:443,path:"/v2/"+n+"/tags/list",headers:{Accept:"application/json",Authorization:"Bearer "+e}}).catch(function(i){return r.log(i),{tags:[]}})},t.prototype.performHttpsGet=function(e){return new Promise(function(n,r){var i=qy.get(e,function(a){if(a.statusCode!==200){var s=new Error(a.statusMessage);s.statusCode=a.statusCode,a.resume(),r(s)}else{var c="";a.on("data",function(u){c+=u}),a.on("end",function(){n(JSON.parse(c))})}});i.end(),i.on("error",function(a){r(a)})})},t.prototype.log=function(e){this.logger&&this.logger.log(e.toString())},t})();Ks.DockerRegistryClient=Hy});var wh=T($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.DockerCommands=void 0;var Uy=($n(),z(Kn)),mt=(ve(),z(pe)),sn=Si(),ge=Yg(),jy=(function(){function t(){}return o(t,"DockerCommands"),t.prototype.analyzeDiagnostics=function(e,n){for(var r=[],i=0;i<e.length;i++)switch(typeof e[i].code=="string"&&(e[i].code=parseInt(e[i].code)),e[i].code){case sn.ValidationCode.CASING_DIRECTIVE:r.push({title:"Convert directive to lowercase",command:ge.CommandIds.LOWERCASE,arguments:[n,e[i].range]});break;case sn.ValidationCode.CASING_INSTRUCTION:r.push({title:"Convert instruction to uppercase",command:ge.CommandIds.UPPERCASE,arguments:[n,e[i].range]});break;case sn.ValidationCode.ARGUMENT_EXTRA:r.push({title:"Remove extra argument",command:ge.CommandIds.EXTRA_ARGUMENT,arguments:[n,e[i].range]});break;case sn.ValidationCode.INVALID_ESCAPE_DIRECTIVE:r.push({title:"Convert to backslash",command:ge.CommandIds.DIRECTIVE_TO_BACKSLASH,arguments:[n,e[i].range]}),r.push({title:"Convert to backtick",command:ge.CommandIds.DIRECTIVE_TO_BACKTICK,arguments:[n,e[i].range]});break;case sn.ValidationCode.INVALID_AS:r.push({title:"Convert to AS",command:ge.CommandIds.CONVERT_TO_AS,arguments:[n,e[i].range]});break;case sn.ValidationCode.UNKNOWN_HEALTHCHECK_FLAG:r.push({title:"Convert to --interval",command:ge.CommandIds.FLAG_TO_HEALTHCHECK_INTERVAL,arguments:[n,e[i].range]}),r.push({title:"Convert to --retries",command:ge.CommandIds.FLAG_TO_HEALTHCHECK_RETRIES,arguments:[n,e[i].range]}),r.push({title:"Convert to --start-period",command:ge.CommandIds.FLAG_TO_HEALTHCHECK_START_PERIOD,arguments:[n,e[i].range]}),r.push({title:"Convert to --timeout",command:ge.CommandIds.FLAG_TO_HEALTHCHECK_TIMEOUT,arguments:[n,e[i].range]});break;case sn.ValidationCode.UNKNOWN_ADD_FLAG:r.push({title:"Convert to --chown",command:ge.CommandIds.FLAG_TO_CHOWN,arguments:[n,e[i].range]});break;case sn.ValidationCode.UNKNOWN_COPY_FLAG:r.push({title:"Convert to --chown",command:ge.CommandIds.FLAG_TO_CHOWN,arguments:[n,e[i].range]}),r.push({title:"Convert to --from",command:ge.CommandIds.FLAG_TO_COPY_FROM,arguments:[n,e[i].range]});break;case sn.ValidationCode.EMPTY_CONTINUATION_LINE:e[i].range.start.line+1===e[i].range.end.line?r.push({title:"Remove empty continuation line",command:ge.CommandIds.REMOVE_EMPTY_CONTINUATION_LINE,arguments:[n,e[i].range]}):r.push({title:"Remove empty continuation lines",command:ge.CommandIds.REMOVE_EMPTY_CONTINUATION_LINE,arguments:[n,e[i].range]});break}return r},t.prototype.computeCommandEdits=function(e,n,r){var i=Uy.TextDocument.create("","",0,e),a=r[1];switch(n){case ge.CommandIds.LOWERCASE:var s=i.getText().substring(i.offsetAt(a.start),i.offsetAt(a.end));return[mt.TextEdit.replace(a,s.toLowerCase())];case ge.CommandIds.UPPERCASE:var c=i.getText().substring(i.offsetAt(a.start),i.offsetAt(a.end));return[mt.TextEdit.replace(a,c.toUpperCase())];case ge.CommandIds.EXTRA_ARGUMENT:return[mt.TextEdit.del(a)];case ge.CommandIds.DIRECTIVE_TO_BACKSLASH:return[mt.TextEdit.replace(a,"\\")];case ge.CommandIds.DIRECTIVE_TO_BACKTICK:return[mt.TextEdit.replace(a,"`")];case ge.CommandIds.CONVERT_TO_AS:return[mt.TextEdit.replace(a,"AS")];case ge.CommandIds.FLAG_TO_CHOWN:return[mt.TextEdit.replace(a,"--chown")];case ge.CommandIds.FLAG_TO_HEALTHCHECK_INTERVAL:return[mt.TextEdit.replace(a,"--interval")];case ge.CommandIds.FLAG_TO_HEALTHCHECK_RETRIES:return[mt.TextEdit.replace(a,"--retries")];case ge.CommandIds.FLAG_TO_HEALTHCHECK_START_PERIOD:return[mt.TextEdit.replace(a,"--start-period")];case ge.CommandIds.FLAG_TO_HEALTHCHECK_TIMEOUT:return[mt.TextEdit.replace(a,"--timeout")];case ge.CommandIds.FLAG_TO_COPY_FROM:return[mt.TextEdit.replace(a,"--from")];case ge.CommandIds.REMOVE_EMPTY_CONTINUATION_LINE:return[mt.TextEdit.del(a)]}return null},t})();$s.DockerCommands=jy});var xh=T(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.DockerFolding=void 0;var Vy=($n(),z(Kn)),_n=(ve(),z(pe)),Wy=qe(),Gy=(function(){function t(){}return o(t,"DockerFolding"),t.prototype.createFoldingRange=function(e,n,r,i,a,s){return e?{startLine:n,endLine:r,kind:s}:_n.FoldingRange.create(n,r,i,a,s)},t.prototype.getLineLength=function(e,n){for(var r=e.getText(_n.Range.create(n,0,n,_n.uinteger.MAX_VALUE)),i=r.length,a=r.charAt(i-1);a==="\r"||a===`
`;)i--,a=r.charAt(i-1);return i},t.prototype.computeFoldingRanges=function(e,n,r){if(r<1)return[];for(var i=[],a=Wy.DockerfileParser.parse(e),s=Vy.TextDocument.create("","",0,e),c=0,u=a.getInstructions();c<u.length;c++){var l=u[c],f=l.getRange();if(f.start.line!==f.end.line){var g=this.getLineLength(s,f.start.line),m=this.getLineLength(s,f.end.line);if(i.push(this.createFoldingRange(n,f.start.line,f.end.line,g,m)),i.length===r)return i}}var d=a.getComments();if(d.length<2)return i;for(var p=!1,v=d[0].getRange(),S=_n.Position.create(v.start.line+1,v.start.character),k=1;k<d.length;k++){var f=d[k].getRange();if(f.start.line===S.line)S=_n.Position.create(f.end.line+1,f.end.character),p=!0;else{if(p&&(i.push(this.createFoldingRange(n,v.start.line,S.line-1,v.end.character,S.character,_n.FoldingRangeKind.Comment)),i.length===r))return i;v=f,S=_n.Position.create(v.start.line+1,v.start.character),p=!1}}return p&&i.push(this.createFoldingRange(n,v.start.line,S.line-1,v.end.character,S.character,_n.FoldingRangeKind.Comment)),i},t})();Ys.DockerFolding=Gy});var zg=T(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.DockerDefinition=void 0;var By=(ve(),z(pe)),bn=vn(),Ai=qe(),Ky=(function(){function t(){}return o(t,"DockerDefinition"),t.prototype.computeBuildStageDefinition=function(e,n){for(var r=void 0,i=0,a=e.getCOPYs();i<a.length;i++){var s=a[i],c=s.getFromFlag();if(c){var u=c.getValueRange();if(u&&u.start.line===n.line&&u.start.character<=n.character&&n.character<=u.end.character){r=c.getValue();break}}}for(var l=0,f=e.getFROMs();l<f.length;l++){var s=f[l],u=s.getBuildStageRange();if(u){if(u.start.line===n.line&&u.start.character<=n.character&&n.character<=u.end.character)return u;if(r!==void 0&&s.getBuildStage().toLowerCase()===r.toLowerCase())return u}if(u=s.getImageNameRange(),bn.Util.isInsideRange(n,u)){for(var g=s.getImageName(),m=0,d=e.getFROMs();m<d.length;m++){var p=d[m];if(g===p.getBuildStage()&&p.getRange().start.line<u.start.line)return p.getBuildStageRange()}return null}}return null},t.computeVariableDefinition=function(e,n){for(var r=null,i=0,a=e.getARGs();i<a.length;i++){var s=a[i],c=s.getProperty();if(c&&bn.Util.isInsideRange(n,c.getNameRange())){r=c.getName();break}}if(r===null)e:for(var u=0,l=e.getENVs();u<l.length;u++)for(var f=l[u],g=f.getProperties(),m=0,d=g;m<d.length;m++){var c=d[m];if(bn.Util.isInsideRange(n,c.getNameRange())){r=c.getName();break e}}if(r===null)e:for(var p=0,v=e.getInstructions();p<v.length;p++)for(var S=v[p],k=0,b=S.getVariables();k<b.length;k++){var _=b[k];if(bn.Util.isInsideRange(n,_.getNameRange())){r=_.getName();break e}}for(var A=0,w=e.getInstructions();A<w.length;A++){var S=w[A];if(S instanceof Ai.Arg){var c=S.getProperty();if(c&&c.getName()===r)return c}else if(S instanceof Ai.Env)for(var g=S.getProperties(),V=0,B=g;V<B.length;V++){var c=B[V];if(c.getName()===r)return c}}return null},t.findDefinition=function(e,n){for(var r=0,i=e.getFROMs();r<i.length;r++)for(var a=i[r],s=0,c=a.getVariables();s<c.length;s++){var u=c[s];if(bn.Util.isInsideRange(n,u.getNameRange())){for(var l=0,f=e.getInitialARGs();l<f.length;l++){var g=f[l],m=g.getProperty();if(m&&m.getName()===u.getName())return m}return null}}var d=e.getContainingImage(n);return d===null?null:t.computeVariableDefinition(d,n)},t.checkHeredocs=function(e,n){for(var r=0,i=e;r<i.length;r++){var a=i[r],s=a.getNameRange();if(bn.Util.isInsideRange(n,s))return bn.Util.isEmpty(s)?null:s;var c=a.getDelimiterRange();if(c!==null&&bn.Util.isInsideRange(n,c))return s}return null},t.computeHeredocDefinition=function(e,n){for(var r=0,i=e.getInstructions();r<i.length;r++){var a=i[r];if(a instanceof Ai.Copy){var s=t.checkHeredocs(a.getHeredocs(),n);if(s!==null)return s}else if(a instanceof Ai.Run){var s=t.checkHeredocs(a.getHeredocs(),n);if(s!==null)return s}}return null},t.prototype.computeVariableDefinition=function(e,n){var r=t.findDefinition(e,n);return r?r.getNameRange():null},t.prototype.computeDefinitionRange=function(e,n){var r=Ai.DockerfileParser.parse(e),i=this.computeBuildStageDefinition(r,n);return i===null&&(i=this.computeVariableDefinition(r,n),i===null)?t.computeHeredocDefinition(r,n):i},t.prototype.computeDefinition=function(e,n,r){var i=this.computeDefinitionRange(n,r);return i!==null?By.Location.create(e.uri,i):null},t})();zs.DockerDefinition=Ky});var Jg=T(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.DockerHighlight=void 0;var $y=($n(),z(Kn)),De=(ve(),z(pe)),Ti=qe(),Yy=zg(),Ei=vn(),zy=(function(){function t(){}return o(t,"DockerHighlight"),t.prototype.computeHighlightRanges=function(e,n){var r=Ti.DockerfileParser.parse(e),i=new Yy.DockerDefinition,a=i.computeDefinitionRange(e,n),s=a===null?r.getContainingImage(n):r.getContainingImage(a.start),c=[];if(a===null){for(var u=0,l=r.getCOPYs();u<l.length;u++){var f=l[u],g=f.getFromFlag();if(g){var m=g.getValueRange();if(m&&m.start.line===n.line&&m.start.character<=n.character&&n.character<=m.end.character){for(var d=g.getValue(),p=0,v=r.getCOPYs();p<v.length;p++){var S=v[p],k=S.getFromFlag();k&&k.getValue().toLowerCase()===d.toLowerCase()&&c.push(De.DocumentHighlight.create(k.getValueRange(),De.DocumentHighlightKind.Read))}return c}}}for(var b=0,_=r.getFROMs();b<_.length;b++)for(var A=_[b],w=0,V=A.getVariables();w<V.length;w++){var B=V[w];if(Ei.Util.isInsideRange(n,B.getNameRange())){for(var te=B.getName(),X=0,ae=r.getFROMs();X<ae.length;X++)for(var ne=ae[X],de=0,ke=ne.getVariables();de<ke.length;de++){var se=ke[de];se.getName()===te&&c.push(De.DocumentHighlight.create(se.getNameRange(),De.DocumentHighlightKind.Read))}return c}}if(s!==null)for(var L=0,x=s.getInstructions();L<x.length;L++)for(var f=x[L],M=0,j=f.getVariables();M<j.length;M++){var B=j[M];if(Ei.Util.isInsideRange(n,B.getNameRange())){for(var te=B.getName(),Y=0,Se=s.getInstructions();Y<Se.length;Y++){var oe=Se[Y];if(!(oe instanceof Ti.From))for(var fe=0,ze=oe.getVariables();fe<ze.length;fe++){var it=ze[fe];it.getName()===te&&c.push(De.DocumentHighlight.create(it.getNameRange(),De.DocumentHighlightKind.Read))}}return c}}}else{for(var at=0,St=r.getInstructions();at<St.length;at++){var f=St[at];if(f instanceof Ti.Copy||f instanceof Ti.Run)for(var lt=0,xt=f.getHeredocs();lt<xt.length;lt++){var Me=xt[lt],st=Me.getNameRange();if(Ei.Util.positionEquals(a.start,st.start)&&Ei.Util.positionEquals(a.start,st.start)){c.push(De.DocumentHighlight.create(a,De.DocumentHighlightKind.Write));var je=Me.getDelimiterRange();return je!==null&&c.push(De.DocumentHighlight.create(je,De.DocumentHighlightKind.Read)),c}}}for(var Bt=$y.TextDocument.create("","",0,e),gt=Bt.getText().substring(Bt.offsetAt(a.start),Bt.offsetAt(a.end)),Lt=!1,zn=r.getFROMs(),Kt=0,Jn=zn;Kt<Jn.length;Kt++){var A=Jn[Kt],d=A.getBuildStage();d&&gt.toLowerCase()===d.toLowerCase()&&(c.push(De.DocumentHighlight.create(A.getBuildStageRange(),De.DocumentHighlightKind.Write)),Lt=!0)}if(Lt){for(var Ft=0,un=zn;Ft<un.length;Ft++){var A=un[Ft];A.getRange().start.line>a.start.line&&A.getImageName()===gt&&c.push(De.DocumentHighlight.create(A.getImageNameRange(),De.DocumentHighlightKind.Read))}for(var Ir=0,Ni=r.getCOPYs();Ir<Ni.length;Ir++){var f=Ni[Ir],g=f.getFromFlag();g&&g.getValue().toLowerCase()===gt.toLowerCase()&&c.push(De.DocumentHighlight.create(g.getValueRange(),De.DocumentHighlightKind.Read))}return c}for(var $t=0,Nr=s.getARGs();$t<Nr.length;$t++){var Qn=Nr[$t],dt=Qn.getProperty();dt&&dt.getName()===gt&&c.push(De.DocumentHighlight.create(dt.getNameRange(),De.DocumentHighlightKind.Write))}for(var Xn=0,Yt=s.getENVs();Xn<Yt.length;Xn++)for(var R=Yt[Xn],C=0,N=R.getProperties();C<N.length;C++){var dt=N[C];dt.getName()===gt&&c.push(De.DocumentHighlight.create(dt.getNameRange(),De.DocumentHighlightKind.Write))}for(var q=0,le=s.getInstructions();q<le.length;q++){var f=le[q];if(!(f instanceof Ti.From))for(var ce=0,Re=f.getVariables();ce<Re.length;ce++){var B=Re[ce];B.getName()===gt&&c.push(De.DocumentHighlight.create(B.getNameRange(),De.DocumentHighlightKind.Read))}}for(var Ce=0,J=r.getInitialARGs();Ce<J.length;Ce++){var Qn=J[Ce],dt=Qn.getProperty();if(dt&&Ei.Util.rangeEquals(dt.getNameRange(),a))for(var he=0,ee=r.getFROMs();he<ee.length;he++)for(var A=ee[he],Ae=0,Ve=A.getVariables();Ae<Ve.length;Ae++){var B=Ve[Ae];B.getName()===gt&&c.push(De.DocumentHighlight.create(B.getNameRange(),De.DocumentHighlightKind.Read))}}}return c},t})();Js.DockerHighlight=zy});var qh=T(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.DockerSymbols=void 0;var Lh=(ve(),z(pe)),Fh=qe(),Jy=(function(){function t(){}return o(t,"DockerSymbols"),t.prototype.createSymbolInformation=function(e,n,r,i,a){return a?{name:e,location:{uri:n,range:r},kind:i,deprecated:!0}:{name:e,location:{uri:n,range:r},kind:i}},t.prototype.parseSymbolInformation=function(e,n){for(var r=Fh.DockerfileParser.parse(n),i=[],a=0,s=r.getDirectives();a<s.length;a++){var c=s[a];i.push(this.createSymbolInformation(c.getName(),e.uri,c.getNameRange(),Lh.SymbolKind.Property,!1))}for(var u=0,l=r.getInstructions();u<l.length;u++){var f=l[u],g=f.getKeyword();i.push(this.createSymbolInformation(f.getInstruction(),e.uri,f.getInstructionRange(),Lh.SymbolKind.Function,g===Fh.Keyword.MAINTAINER))}return i},t})();Qs.DockerSymbols=Jy});var Zs=T(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.PlainTextDocumentation=void 0;var Qy=(function(){function t(){this.dockerMessages={hoverAdd:"Copy files, folders, or remote URLs from `source` to the `dest` path in the image's filesystem.\n\n",hoverArg:`Define a variable with an optional default value that users can override at build-time when using \`docker build\`.

Since Docker 1.9

`,hoverCmd:`Provide defaults for an executing container. If an executable is not specified, then ENTRYPOINT must be specified as well. There can only be one CMD instruction in a Dockerfile.

`,hoverCopy:"Copy files or folders from `source` to the `dest` path in the image's filesystem.\n\n",hoverEntrypoint:`Configures the container to be run as an executable.

`,hoverEnv:"Set the environment variable `key` to the value `value`.\n\n",hoverExpose:"Define the network `port`s that this container will listen on at runtime.\n\n",hoverFrom:"Set the `baseImage` to use for subsequent instructions. FROM must be the first instruction in a Dockerfile.\n\n",hoverHealthcheck:`Define how Docker should test the container to check that it is still working. Alternatively, disable the base image's HEALTHCHECK instruction. There can only be one HEALTHCHECK instruction in a Dockerfile.

Since Docker 1.12

`,hoverLabel:`Adds metadata to an image.

Since Docker 1.6

`,hoverMaintainer:`Set the Author field of the generated images. This instruction has been deprecated in favor of LABEL.

`,hoverOnbuild:`Add a trigger instruction to the image that will be executed when the image is used as a base image for another build.

`,hoverRun:`Execute any commands on top of the current image as a new layer and commit the results.

`,hoverShell:`Override the default shell used for the shell form of commands.

Since Docker 1.12

`,hoverStopsignal:`Set the system call signal to use to send to the container to exit. Signals can be valid unsigned numbers or a signal name in the SIGNAME format such as SIGKILL.

Since Docker 1.9

`,hoverUser:`Set the user name or UID to use when running the image in addition to any subsequent CMD, ENTRYPOINT, or RUN instructions that follow it in the Dockerfile.

`,hoverVolume:`Create a mount point with the specified name and mark it as holding externally mounted volumes from the native host or from other containers.

`,hoverWorkdir:"Set the working directory for any subsequent ADD, COPY, CMD, ENTRYPOINT, or RUN` instructions that follow it in the `Dockerfile`.\n\n",hoverAddFlagChown:"The username, groupname, or UID/GID combination to own the added content.",hoverCopyFlagChown:"The username, groupname, or UID/GID combination to own the copied content.",hoverCopyFlagFrom:`The previous build stage to use as the source location instead of the build's context.

Since Docker 17.05.0-ce.`,hoverFromFlagPlatform:`The platform of the image if referencing a multi-platform image.

Since Docker CE 18.04.`,hoverHealthcheckFlagInterval:"The seconds to wait for the health check to run after the container has started, and then again the number of seconds to wait before running again after the previous check has completed.",hoverHealthcheckFlagRetries:"The number of consecutive failures of this health check before the container is considered to be `unhealthy`.",hoverHealthcheckFlagStartInterval:"The number of seconds to wait between health checks during the start period.",hoverHealthcheckFlagStartPeriod:`The number of seconds to wait for the container to startup. Failures during this grace period will not count towards the maximum number of retries. However, should a health check succeed during this period then any subsequent failures will count towards the maximum number of retries.

Since Docker 17.05.0-ce.`,hoverHealthcheckFlagTimeout:"The number of seconds to wait for the check to complete before considering it to have failed.",hoverEscape:"Sets the character to use to escape characters and newlines in this Dockerfile. If unspecified, the default escape character is `\\`.\n\n",hoverSyntax:`Set the location of the Dockerfile builder to use for building the current Dockerfile.

`,signatureEscape:"Sets this Dockerfile's escape character. If unspecified, the default escape character is `\\`.",signatureEscape_Param:"The character to use to escape characters and newlines in this Dockerfile.",signatureAdd_Signature0:"Copy new files, directories or remote URLs to the image's filesystem.",signatureAdd_Signature0_Param1:"The resource to copy or unpack if it is a local tar archive in a recognized compression format.",signatureAdd_Signature0_Param3:"The name of the destination file or folder.",signatureArg_Signature0:"Define a variable that users can pass a value to at build-time with `docker build`.",signatureArg_Signature0_Param:"The name of the variable.",signatureArg_Signature1:"Define a variable with an optional default value that users can override at build-time with `docker build`.",signatureArg_Signature1_Param1:"The default value of the variable.",signatureCmd_Signature0:"Set the default executable and parameters for this executing container.",signatureCmd_Signature0_Param0:"The default executable for this executing container.",signatureCmd_Signature0_Param1:"A parameter to the default executable.",signatureCmd_Signature1:"Set the default parameters for this executing container. An ENTRYPOINT instruction must also be specified.",signatureCmd_Signature1_Param0:"A parameter to the entrypoint executable.",signatureCopy_Signature0:"Copy new files and directories to the image's filesystem.",signatureCopy_Signature0_Param0:"Optional flags to configure this instruction.",signatureCopy_Signature0_Param1:"The resource to copy.",signatureCopyFlagFrom:"Set the build stage to use as the source location of this copy instruction instead of the build's context.",signatureCopyFlagFrom_Param:"The build stage or image name to use as the source. Also may be a numeric index.",signatureEntrypoint_Signature0:"Configure this container for running as an executable.",signatureEntrypoint_Signature0_Param1:"The container's main executable.",signatureEntrypoint_Signature0_Param2:"A parameter to the entrypoint executable.",signatureEnv_Signature0:"Set an environment variable to the specified value. The value will be in the environment of any descendent Dockerfiles",signatureEnv_Signature0_Param0:"The name of the environment variable.",signatureEnv_Signature0_Param1:"The value to set the environment variable to.",signatureExpose:"Define network ports for this container to listen on at runtime.",signatureExpose_Param0:"The port that this container should listen on.",signatureFrom_Signature0:"Set the base image to use for any subsequent instructions that follow.",signatureFrom_Signature0_Param:"The name of the base image to use.",signatureFrom_Signature1_Param1:"The tag of the base image to use.",signatureFrom_Signature2_Param1:"The digest of the base image to use.",signatureFrom_Signature3:"Set the base image to use for any subsequent instructions that follow and also give this build stage a name.",signatureFrom_Signature3_Param2:"The name of this build stage.",signatureFrom_Param2:"The name of this build stage.",signatureHealthcheck_Signature0:"Define how Docker should test the container to check that it is still working.",signatureHealthcheck_Signature1_Param2:"The parameters to the CMD instruction for the healthcheck.",signatureHealthcheck_Signature2:"Disable the inherited HEALTHCHECK instruction from the base image.",signatureLabel_Signature0:"Set metadata to an image.",signatureLabel_Signature0_Param0:"The name of the metadata.",signatureLabel_Signature0_Param1:"The value of the metadata.",signatureMaintainer:'Set the "Author" field of this image.',signatureMaintainer_Param:"The name of this image's maintainer.",signatureOnbuild:"Register a build instruction as a trigger to be executed when this image is used as a base image for another build.",signatureOnbuild_Param:"The build instruction to register as a trigger instruction.",signatureRun_Signature0:"Execute commands inside a shell.",signatureRun_Signature0_Param0:"The command to run.",signatureRun_Signature0_Param1:"A parameter to the command.",signatureRun_Signature1:"Execute commands without invoking a command shell.",signatureShell:"Override default shell used for the shell form of commands.",signatureShell_Param1:"The shell executable to use.",signatureShell_Param2:"The parameters to the shell executable.",signatureStopsignal:"Set the system call signal to use to send to the container to exit.",signatureStopsignal_Param:"The signal to send to the container to exit. This may be an valid unsigned number or a signal name in the SIGNAME format such as SIGKILL.",signatureUser_Signature0:"Set the user name to use for running any RUN, CMD, and ENTRYPOINT instructions that follow.",signatureUser_Signature0_Param:"The user name to use.",signatureUser_Signature1:"Set the user name and user group to use for running any RUN, CMD, and ENTRYPOINT instructions that follow.",signatureUser_Signature1_Param1:"The group name to use.",signatureUser_Signature2:"Set the UID to use for running any RUN, CMD, and ENTRYPOINT instructions that follow.",signatureUser_Signature2_Param:"The UID to use.",signatureUser_Signature3:"Set the UID and GID to use for running any RUN, CMD, and ENTRYPOINT instructions that follow.",signatureUser_Signature3_Param1:"The GID to use.",signatureVolume_Signature0:"Create mount points for holding externally mounted volumes from the native host or other containers.",signatureVolume_Signature0_Param0:"The name of the mount point.",signatureWorkdir:"Set the working directory for any ADD, COPY, CMD, ENTRYPOINT, or RUN instructions that follow.",signatureWorkdir_Param:"The absolute or relative path to use as the working directory. Will be created if it does not exist.",proposalArgNameOnly:"Define a variable that users can set at build-time when using `docker build`.\n\n",proposalArgDefaultValue:"Define a variable with the given default value that users can override at build-time when using `docker build`.\n\n",proposalHealthcheckExec:`Define how Docker should test the container to check that it is still working. There can only be one HEALTHCHECK instruction in a Dockerfile.

Since Docker 1.12

`,proposalHealthcheckNone:`Disable the HEALTHCHECK instruction inherited from the base image if one exists. There can only be one HEALTHCHECK instruction in a Dockerfile.

Since Docker 1.12`},this.markdowns={ADD:this.dockerMessages.hoverAdd+`ADD hello.txt /absolute/path
ADD hello.txt relative/to/workdir`,ADD_FlagChown:this.dockerMessages.hoverAddFlagChown,ARG:this.dockerMessages.hoverArg+`ARG userName
ARG testOutputDir=test`,ARG_NameOnly:this.dockerMessages.proposalArgNameOnly+"ARG userName",ARG_DefaultValue:this.dockerMessages.proposalArgDefaultValue+"ARG testOutputDir=test",CMD:this.dockerMessages.hoverCmd+'CMD [ "/bin/ls", "-l" ]',COPY:this.dockerMessages.hoverCopy+`COPY hello.txt /absolute/path
COPY hello.txt relative/to/workdir`,COPY_FlagChown:this.dockerMessages.hoverCopyFlagChown,COPY_FlagFrom:this.dockerMessages.hoverCopyFlagFrom,ENTRYPOINT:this.dockerMessages.hoverEntrypoint+'ENTRYPOINT [ "/opt/app/run.sh", "--port", "8080" ]',ENV:this.dockerMessages.hoverEnv+"ENV buildTag=1.0",EXPOSE:this.dockerMessages.hoverExpose+`EXPOSE 8080
EXPOSE 80 443 22
EXPOSE 7000-8000`,FROM:this.dockerMessages.hoverFrom+`FROM baseImage
FROM baseImage:tag
FROM baseImage@digest`,FROM_FlagPlatform:this.dockerMessages.hoverFromFlagPlatform,HEALTHCHECK:this.dockerMessages.hoverHealthcheck+`HEALTHCHECK --interval=10m --timeout=5s \\
    CMD curl -f http://localhost/ || exit 1
HEALTHCHECK NONE`,HEALTHCHECK_CMD:this.dockerMessages.proposalHealthcheckExec+`HEALTHCHECK --interval=10m --timeout=5s \\
    CMD curl -f http://localhost/ || exit 1`,HEALTHCHECK_FlagInterval:this.dockerMessages.hoverHealthcheckFlagInterval,HEALTHCHECK_FlagRetries:this.dockerMessages.hoverHealthcheckFlagRetries,HEALTHCHECK_FlagStartInterval:this.dockerMessages.hoverHealthcheckFlagStartInterval,HEALTHCHECK_FlagStartPeriod:this.dockerMessages.hoverHealthcheckFlagStartPeriod,HEALTHCHECK_FlagTimeout:this.dockerMessages.hoverHealthcheckFlagTimeout,HEALTHCHECK_NONE:this.dockerMessages.proposalHealthcheckNone,LABEL:this.dockerMessages.hoverLabel+'LABEL version="1.0"',MAINTAINER:this.dockerMessages.hoverMaintainer+"MAINTAINER name",ONBUILD:this.dockerMessages.hoverOnbuild+`ONBUILD ADD . /opt/app/src/extensions
ONBUILD RUN /usr/local/bin/build.sh /opt/app`,RUN:this.dockerMessages.hoverRun+"RUN apt-get update && apt-get install -y curl",SHELL:this.dockerMessages.hoverShell+'SHELL [ "powershell", "-command" ]',STOPSIGNAL:this.dockerMessages.hoverStopsignal+"STOPSIGNAL 9",USER:this.dockerMessages.hoverUser+"USER daemon",VOLUME:this.dockerMessages.hoverVolume+'VOLUME [ "/var/db" ]',WORKDIR:this.dockerMessages.hoverWorkdir+`WORKDIR /path/to/workdir
WORKDIR relative/path`,escape:this.dockerMessages.hoverEscape+"# escape=`",syntax:this.dockerMessages.hoverSyntax+`# syntax=docker/dockerfile:1.0
# syntax=docker/dockerfile:1.0.0-experimental`,signatureEscape:this.dockerMessages.signatureEscape,signatureEscape_Param:this.dockerMessages.signatureEscape_Param,signatureAdd_Signature0:this.dockerMessages.signatureAdd_Signature0,signatureAdd_Signature0_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureAdd_Signature0_Param1:this.dockerMessages.signatureAdd_Signature0_Param1,signatureAdd_Signature0_Param2:this.dockerMessages.signatureAdd_Signature0_Param1,signatureAdd_Signature0_Param3:this.dockerMessages.signatureAdd_Signature0_Param3,signatureAdd_Signature1:this.dockerMessages.signatureAdd_Signature0,signatureAdd_Signature1_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureAdd_Signature1_Param2:this.dockerMessages.signatureAdd_Signature0_Param1,signatureAdd_Signature1_Param3:this.dockerMessages.signatureAdd_Signature0_Param1,signatureAdd_Signature1_Param4:this.dockerMessages.signatureAdd_Signature0_Param3,signatureArg_Signature0:this.dockerMessages.signatureArg_Signature0,signatureArg_Signature0_Param:this.dockerMessages.signatureArg_Signature0_Param,signatureArg_Signature1:this.dockerMessages.signatureArg_Signature1,signatureArg_Signature1_Param0:this.dockerMessages.signatureArg_Signature0_Param,signatureArg_Signature1_Param1:this.dockerMessages.signatureArg_Signature1_Param1,signatureCmd_Signature0:this.dockerMessages.signatureCmd_Signature0,signatureCmd_Signature0_Param1:this.dockerMessages.signatureCmd_Signature0_Param0,signatureCmd_Signature0_Param2:this.dockerMessages.signatureCmd_Signature0_Param1,signatureCmd_Signature0_Param3:this.dockerMessages.signatureCmd_Signature0_Param1,signatureCmd_Signature1:this.dockerMessages.signatureCmd_Signature1,signatureCmd_Signature1_Param1:this.dockerMessages.signatureCmd_Signature1_Param0,signatureCmd_Signature1_Param2:this.dockerMessages.signatureCmd_Signature1_Param0,signatureCmd_Signature1_Param3:this.dockerMessages.signatureCmd_Signature1_Param0,signatureCmd_Signature2:this.dockerMessages.signatureCmd_Signature0,signatureCmd_Signature2_Param0:this.dockerMessages.signatureCmd_Signature0_Param0,signatureCmd_Signature2_Param1:this.dockerMessages.signatureCmd_Signature0_Param1,signatureCmd_Signature2_Param2:this.dockerMessages.signatureCmd_Signature0_Param1,signatureCopy_Signature0:this.dockerMessages.signatureCopy_Signature0,signatureCopy_Signature0_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureCopy_Signature0_Param1:this.dockerMessages.signatureCopy_Signature0_Param1,signatureCopy_Signature0_Param2:this.dockerMessages.signatureCopy_Signature0_Param1,signatureCopy_Signature0_Param3:this.dockerMessages.signatureAdd_Signature0_Param3,signatureCopy_Signature1:this.dockerMessages.signatureCopy_Signature0,signatureCopy_Signature1_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureCopy_Signature1_Param2:this.dockerMessages.signatureCopy_Signature0_Param1,signatureCopy_Signature1_Param3:this.dockerMessages.signatureCopy_Signature0_Param1,signatureCopy_Signature1_Param4:this.dockerMessages.signatureAdd_Signature0_Param3,signatureCopyFlagFrom:this.dockerMessages.signatureCopyFlagFrom,signatureCopyFlagFrom_Param:this.dockerMessages.signatureCopyFlagFrom_Param,signatureEntrypoint_Signature0:this.dockerMessages.signatureEntrypoint_Signature0,signatureEntrypoint_Signature0_Param1:this.dockerMessages.signatureEntrypoint_Signature0_Param1,signatureEntrypoint_Signature0_Param2:this.dockerMessages.signatureEntrypoint_Signature0_Param2,signatureEntrypoint_Signature0_Param3:this.dockerMessages.signatureEntrypoint_Signature0_Param2,signatureEntrypoint_Signature1:this.dockerMessages.signatureEntrypoint_Signature0,signatureEntrypoint_Signature1_Param0:this.dockerMessages.signatureEntrypoint_Signature0_Param1,signatureEntrypoint_Signature1_Param1:this.dockerMessages.signatureEntrypoint_Signature0_Param2,signatureEntrypoint_Signature1_Param2:this.dockerMessages.signatureEntrypoint_Signature0_Param2,signatureEnv_Signature0:this.dockerMessages.signatureEnv_Signature0,signatureEnv_Signature0_Param0:this.dockerMessages.signatureEnv_Signature0_Param0,signatureEnv_Signature0_Param1:this.dockerMessages.signatureEnv_Signature0_Param1,signatureEnv_Signature1:this.dockerMessages.signatureEnv_Signature0,signatureEnv_Signature1_Param0:this.dockerMessages.signatureEnv_Signature0_Param0,signatureEnv_Signature1_Param1:this.dockerMessages.signatureEnv_Signature0_Param1,signatureEnv_Signature2:this.dockerMessages.signatureEnv_Signature0,signatureEnv_Signature2_Param0:this.dockerMessages.signatureEnv_Signature0_Param0,signatureEnv_Signature2_Param1:this.dockerMessages.signatureEnv_Signature0_Param1,signatureEnv_Signature2_Param2:this.dockerMessages.signatureEnv_Signature0_Param0,signatureEnv_Signature2_Param3:this.dockerMessages.signatureEnv_Signature0_Param1,signatureExpose:this.dockerMessages.signatureExpose,signatureExpose_Param0:this.dockerMessages.signatureExpose_Param0,signatureExpose_Param1:this.dockerMessages.signatureExpose_Param0,signatureFrom_Signature0:this.dockerMessages.signatureFrom_Signature0,signatureFrom_Signature0_Param:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature1:this.dockerMessages.signatureFrom_Signature0,signatureFrom_Signature1_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature1_Param1:this.dockerMessages.signatureFrom_Signature1_Param1,signatureFrom_Signature2:this.dockerMessages.signatureFrom_Signature0,signatureFrom_Signature2_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature2_Param1:this.dockerMessages.signatureFrom_Signature2_Param1,signatureFrom_Signature3:this.dockerMessages.signatureFrom_Signature3,signatureFrom_Signature3_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature3_Param2:this.dockerMessages.signatureFrom_Signature3_Param2,signatureFrom_Signature4:this.dockerMessages.signatureFrom_Signature3,signatureFrom_Signature4_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature4_Param1:this.dockerMessages.signatureFrom_Signature1_Param1,signatureFrom_Signature4_Param3:this.dockerMessages.signatureFrom_Signature3_Param2,signatureFrom_Signature5:this.dockerMessages.signatureFrom_Signature3,signatureFrom_Signature5_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature5_Param1:this.dockerMessages.signatureFrom_Signature2_Param1,signatureFrom_Signature5_Param3:this.dockerMessages.signatureFrom_Signature3_Param2,signatureHealthcheck:this.dockerMessages.signatureHealthcheck_Signature0,signatureHealthcheck_Signature0:this.dockerMessages.signatureHealthcheck_Signature0,signatureHealthcheck_Signature1:this.dockerMessages.signatureHealthcheck_Signature0,signatureHealthcheck_Signature1_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureHealthcheck_Signature1_Param2:this.dockerMessages.signatureHealthcheck_Signature1_Param2,signatureHealthcheck_Signature2:this.dockerMessages.signatureHealthcheck_Signature0,signatureHealthcheckFlagInterval_Param:this.dockerMessages.hoverHealthcheckFlagInterval,signatureHealthcheckFlagRetries_Param:this.dockerMessages.hoverHealthcheckFlagRetries,signatureHealthcheckFlagStartPeriod_Param:this.dockerMessages.hoverHealthcheckFlagStartPeriod,signatureHealthcheckFlagTimeout_Param:this.dockerMessages.hoverHealthcheckFlagTimeout,signatureLabel_Signature0:this.dockerMessages.signatureLabel_Signature0,signatureLabel_Signature0_Param0:this.dockerMessages.signatureLabel_Signature0_Param0,signatureLabel_Signature0_Param1:this.dockerMessages.signatureLabel_Signature0_Param1,signatureLabel_Signature1:this.dockerMessages.signatureLabel_Signature0,signatureLabel_Signature1_Param0:this.dockerMessages.signatureLabel_Signature0_Param0,signatureLabel_Signature1_Param1:this.dockerMessages.signatureLabel_Signature0_Param1,signatureLabel_Signature2:this.dockerMessages.signatureLabel_Signature0,signatureLabel_Signature2_Param0:this.dockerMessages.signatureLabel_Signature0_Param0,signatureLabel_Signature2_Param1:this.dockerMessages.signatureLabel_Signature0_Param1,signatureLabel_Signature2_Param2:this.dockerMessages.signatureLabel_Signature0_Param0,signatureLabel_Signature2_Param3:this.dockerMessages.signatureLabel_Signature0_Param1,signatureMaintainer:this.dockerMessages.signatureMaintainer,signatureMaintainer_Param:this.dockerMessages.signatureMaintainer_Param,signatureOnbuild:this.dockerMessages.signatureOnbuild,signatureOnbuild_Param:this.dockerMessages.signatureOnbuild_Param,signatureRun_Signature0:this.dockerMessages.signatureRun_Signature0,signatureRun_Signature0_Param0:this.dockerMessages.signatureRun_Signature0_Param0,signatureRun_Signature0_Param1:this.dockerMessages.signatureRun_Signature0_Param1,signatureRun_Signature0_Param2:this.dockerMessages.signatureRun_Signature0_Param1,signatureRun_Signature1:this.dockerMessages.signatureRun_Signature1,signatureRun_Signature1_Param1:this.dockerMessages.signatureRun_Signature0_Param0,signatureRun_Signature1_Param2:this.dockerMessages.signatureRun_Signature0_Param1,signatureRun_Signature1_Param3:this.dockerMessages.signatureRun_Signature0_Param1,signatureShell:this.dockerMessages.signatureShell,signatureShell_Param1:this.dockerMessages.signatureShell_Param1,signatureShell_Param2:this.dockerMessages.signatureShell_Param2,signatureShell_Param3:this.dockerMessages.signatureShell_Param2,signatureStopsignal:this.dockerMessages.signatureStopsignal,signatureStopsignal_Param:this.dockerMessages.signatureStopsignal_Param,signatureUser_Signature0:this.dockerMessages.signatureUser_Signature0,signatureUser_Signature0_Param:this.dockerMessages.signatureUser_Signature0_Param,signatureUser_Signature1:this.dockerMessages.signatureUser_Signature1,signatureUser_Signature1_Param0:this.dockerMessages.signatureUser_Signature0,signatureUser_Signature1_Param1:this.dockerMessages.signatureUser_Signature1_Param1,signatureUser_Signature2:this.dockerMessages.signatureUser_Signature2,signatureUser_Signature2_Param:this.dockerMessages.signatureUser_Signature2_Param,signatureUser_Signature3:this.dockerMessages.signatureUser_Signature3,signatureUser_Signature3_Param0:this.dockerMessages.signatureUser_Signature2_Param,signatureUser_Signature3_Param1:this.dockerMessages.signatureUser_Signature3_Param1,signatureVolume_Signature0:this.dockerMessages.signatureVolume_Signature0,signatureVolume_Signature0_Param0:this.dockerMessages.signatureVolume_Signature0_Param0,signatureVolume_Signature0_Param1:this.dockerMessages.signatureVolume_Signature0_Param0,signatureVolume_Signature1:this.dockerMessages.signatureVolume_Signature0,signatureVolume_Signature1_Param1:this.dockerMessages.signatureVolume_Signature0_Param0,signatureVolume_Signature1_Param2:this.dockerMessages.signatureVolume_Signature0_Param0,signatureWorkdir:this.dockerMessages.signatureWorkdir,signatureWorkdir_Param:this.dockerMessages.signatureWorkdir_Param}}return o(t,"PlainTextDocumentation"),t.prototype.getDocumentation=function(e){return this.markdowns[e]},t})();Xs.PlainTextDocumentation=Qy});var Uh=T(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.DockerSignatures=void 0;var Xy=($n(),z(Kn)),Zy=Zs(),Hh=qe(),Ye=vn(),eD=(function(){function t(){this.documentation=new Zy.PlainTextDocumentation}return o(t,"DockerSignatures"),t.prototype.computeSignatures=function(e,n){var r=Xy.TextDocument.create("","",0,e),i=Hh.DockerfileParser.parse(r.getText());if(n.line===0){var a=i.getDirective();if(a!==null&&a.getDirective()===Hh.Directive.escape)return{signatures:[{label:"escape=\\",documentation:this.documentation.getDocumentation("signatureEscape"),parameters:[{label:"\\",documentation:this.documentation.getDocumentation("signatureEscape_Param")}]}],activeSignature:0,activeParameter:0}}for(var s=0,c=i.getComments();s<c.length;s++){var u=c[s];if(Ye.Util.isInsideRange(n,u.getRange()))return{signatures:[],activeSignature:null,activeParameter:null}}var l=this.getInstructionSignatures(r,i.getOnbuildTriggers(),n);return l||(l=this.getInstructionSignatures(r,i.getInstructions(),n),l||(l={signatures:[],activeSignature:null,activeParameter:null})),l},t.prototype.getInstructionSignatures=function(e,n,r){for(var i=0,a=n;i<a.length;i++){var s=a[i];if(Ye.Util.isInsideRange(r,s.getRange())){if(Ye.Util.isInsideRange(r,s.getInstructionRange()))return null}else continue;switch(s.getKeyword()){case"ADD":var c=s,u={label:"ADD [flags] source ... dest",documentation:this.documentation.getDocumentation("signatureAdd_Signature0"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureAdd_Signature0_Param0")},{label:"source",documentation:this.documentation.getDocumentation("signatureAdd_Signature0_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureAdd_Signature0_Param2")},{label:"dest",documentation:this.documentation.getDocumentation("signatureAdd_Signature0_Param3")}]},l={label:'ADD [flags] [ "source", ..., "dest" ]',documentation:this.documentation.getDocumentation("signatureAdd_Signature1"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureAdd_Signature1_Param0")},{label:"["},{label:'"source"',documentation:this.documentation.getDocumentation("signatureAdd_Signature1_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureAdd_Signature1_Param3")},{label:'"dest"',documentation:this.documentation.getDocumentation("signatureAdd_Signature1_Param4")},{label:"]"}]};return this.getJSONInstructionSignatureHelp(e,c,r,[l],u,!0,!1,!1,!1);case"ARG":var f={signatures:[{label:"ARG name",documentation:this.documentation.getDocumentation("signatureArg_Signature0"),parameters:[{label:"name",documentation:this.documentation.getDocumentation("signatureArg_Signature0_Param")}]},{label:"ARG name=defaultValue",documentation:this.documentation.getDocumentation("signatureArg_Signature1"),parameters:[{label:"name",documentation:this.documentation.getDocumentation("signatureArg_Signature1_Param0")},{label:"defaultValue",documentation:this.documentation.getDocumentation("signatureArg_Signature1_Param1")}]}],activeSignature:0,activeParameter:0},g=s.getTextContent(),m=g.indexOf("=");return m!==-1&&(f={signatures:[{label:"ARG name=defaultValue",documentation:this.documentation.getDocumentation("signatureArg_Signature1"),parameters:[{label:"name",documentation:this.documentation.getDocumentation("signatureArg_Signature1_Param0")},{label:"defaultValue",documentation:this.documentation.getDocumentation("signatureArg_Signature1_Param1")}]}],activeSignature:0,activeParameter:0},e.offsetAt(r)>e.offsetAt(s.getRange().start)+m&&(f.activeParameter=1)),f;case"CMD":var d=s,p={label:'CMD [ "executable", "parameter", ... ]',documentation:this.documentation.getDocumentation("signatureCmd_Signature0"),parameters:[{label:"["},{label:'"executable"',documentation:this.documentation.getDocumentation("signatureCmd_Signature0_Param1")},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureCmd_Signature0_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureCmd_Signature0_Param3")},{label:"]"}]},v={label:'CMD [ "parameter", "parameter2", ... ]',documentation:this.documentation.getDocumentation("signatureCmd_Signature1"),parameters:[{label:"["},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureCmd_Signature1_Param1")},{label:'"parameter2"',documentation:this.documentation.getDocumentation("signatureCmd_Signature1_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureCmd_Signature1_Param3")},{label:"]"}]},S={label:"CMD executable parameter ...",documentation:this.documentation.getDocumentation("signatureCmd_Signature2"),parameters:[{label:"executable",documentation:this.documentation.getDocumentation("signatureCmd_Signature2_Param0")},{label:"parameter",documentation:this.documentation.getDocumentation("signatureCmd_Signature2_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureCmd_Signature2_Param2")}]};return this.getJSONInstructionSignatureHelp(e,d,r,[p,v],S,!1,!0,!1,!0);case"COPY":var k=s,b=k.getFromFlag();if(b!==null){var _=b.getValueRange();if(_!==null&&Ye.Util.isInsideRange(r,_))return{signatures:[{label:"--from=stage",documentation:this.documentation.getDocumentation("signatureCopyFlagFrom"),parameters:[{label:"stage",documentation:this.documentation.getDocumentation("signatureCopyFlagFrom_Param")}]}],activeSignature:0,activeParameter:0}}var A={label:"COPY [flags] source ... dest",documentation:this.documentation.getDocumentation("signatureCopy_Signature0"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureCopy_Signature0_Param0")},{label:"source",documentation:this.documentation.getDocumentation("signatureCopy_Signature0_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureCopy_Signature0_Param2")},{label:"dest",documentation:this.documentation.getDocumentation("signatureCopy_Signature0_Param3")}]},w={label:'COPY [flags] [ "source", ..., "dest" ]',documentation:this.documentation.getDocumentation("signatureCopy_Signature1"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureCopy_Signature1_Param0")},{label:"["},{label:'"source"',documentation:this.documentation.getDocumentation("signatureCopy_Signature1_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureCopy_Signature1_Param3")},{label:'"dest"',documentation:this.documentation.getDocumentation("signatureCopy_Signature1_Param4")},{label:"]"}]};return this.getJSONInstructionSignatureHelp(e,k,r,[w],A,!0,!1,!1,!1);case"ENTRYPOINT":var V=s,B={label:'ENTRYPOINT [ "executable", "parameter", ... ]',documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature0"),parameters:[{label:"["},{label:'"executable"',documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature0_Param1")},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature0_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature0_Param3")},{label:"]"}]},te={label:"ENTRYPOINT executable parameter ...",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature1"),parameters:[{label:"executable",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature1_Param0")},{label:"parameter",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature1_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature1_Param2")}]};return this.getJSONInstructionSignatureHelp(e,V,r,[B],te,!1,!0,!1,!0);case"ENV":var X=[{label:"ENV key value",documentation:this.documentation.getDocumentation("signatureEnv_Signature0"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureEnv_Signature0_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureEnv_Signature0_Param1")}]},{label:"ENV key=value",documentation:this.documentation.getDocumentation("signatureEnv_Signature1"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureEnv_Signature1_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureEnv_Signature1_Param1")}]},{label:"ENV key=value key2=value2",documentation:this.documentation.getDocumentation("signatureEnv_Signature2"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureEnv_Signature2_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureEnv_Signature2_Param1")},{label:"key2",documentation:this.documentation.getDocumentation("signatureEnv_Signature2_Param2")},{label:"value2",documentation:this.documentation.getDocumentation("signatureEnv_Signature2_Param3")}]}];return this.getPropertySignatureHelp(e,r,X,s.getProperties());case"EXPOSE":var ae={signatures:[{label:"EXPOSE port ...",documentation:this.documentation.getDocumentation("signatureExpose"),parameters:[{label:"port",documentation:this.documentation.getDocumentation("signatureExpose_Param0")},{label:"...",documentation:this.documentation.getDocumentation("signatureExpose_Param1")}]}],activeSignature:0,activeParameter:0},ne=s.getArguments();return ne.length>0&&e.offsetAt(r)>e.offsetAt(ne[0].getRange().end)&&(ae.activeParameter=1),ae;case"FROM":return this.getFromSignatureHelp(r,s);case"HEALTHCHECK":for(var de={label:"HEALTHCHECK [flags] CMD ...",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature0"),parameters:[{label:"CMD"}]},ke={label:"HEALTHCHECK [flags] CMD ...",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature1"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature1_Param0")},{label:"CMD"},{label:"...",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature1_Param2")}]},se={label:"HEALTHCHECK NONE",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature2"),parameters:[{label:"NONE"}]},L=s,x=L.getFlags(),M=0,j=x;M<j.length;M++){var Y=j[M],_=Y.getValueRange();if(_!==null&&Ye.Util.isInsideRange(r,_)){switch(Y.getName()){case"interval":return{signatures:[{label:"HEALTHCHECK --interval=30s ...",documentation:this.documentation.getDocumentation("signatureHealthcheck"),parameters:[{label:"30s",documentation:this.documentation.getDocumentation("signatureHealthcheckFlagInterval_Param")}]}],activeSignature:0,activeParameter:0};case"retries":return{signatures:[{label:"HEALTHCHECK --retries=3 ...",documentation:this.documentation.getDocumentation("signatureHealthcheck"),parameters:[{label:"3",documentation:this.documentation.getDocumentation("signatureHealthcheckFlagRetries_Param")}]}],activeSignature:0,activeParameter:0};case"start-period":return{signatures:[{label:"HEALTHCHECK --start-period=5s ...",documentation:this.documentation.getDocumentation("signatureHealthcheck"),parameters:[{label:"5s",documentation:this.documentation.getDocumentation("signatureHealthcheckFlagStartPeriod_Param")}]}],activeSignature:0,activeParameter:0};case"timeout":return{signatures:[{label:"HEALTHCHECK --timeout=30s ...",documentation:this.documentation.getDocumentation("signatureHealthcheck"),parameters:[{label:"30s",documentation:this.documentation.getDocumentation("signatureHealthcheckFlagTimeout_Param")}]}],activeSignature:0,activeParameter:0}}break}}var Se=L.getArguments();if(x.length==0&&Se.length===0)return{signatures:[de,se],activeSignature:0,activeParameter:0};var oe=L.getSubcommand();if(oe===null)return{signatures:[ke],activeSignature:0,activeParameter:0};var fe=oe.isBefore(r),ze=oe.isAfter(r),it=oe.getValue();if("NONE".indexOf(it.toUpperCase())===0)return fe?null:{signatures:[se],activeSignature:0,activeParameter:0};var at=fe?2:ze?0:1;return{signatures:[ke],activeSignature:0,activeParameter:at};case"LABEL":var St=[{label:"LABEL key value",documentation:this.documentation.getDocumentation("signatureLabel_Signature0"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureLabel_Signature0_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureLabel_Signature0_Param1")}]},{label:"LABEL key=value",documentation:this.documentation.getDocumentation("signatureLabel_Signature1"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureLabel_Signature1_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureLabel_Signature1_Param1")}]},{label:"LABEL key=value key2=value2",documentation:this.documentation.getDocumentation("signatureLabel_Signature2"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureLabel_Signature2_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureLabel_Signature2_Param1")},{label:"key2",documentation:this.documentation.getDocumentation("signatureLabel_Signature2_Param2")},{label:"value2",documentation:this.documentation.getDocumentation("signatureLabel_Signature2_Param3")}]}];return this.getPropertySignatureHelp(e,r,St,s.getProperties());case"MAINTAINER":return{signatures:[{label:"MAINTAINER name",documentation:this.documentation.getDocumentation("signatureMaintainer"),parameters:[{label:"name",documentation:this.documentation.getDocumentation("signatureMaintainer_Param")}]}],activeSignature:0,activeParameter:0};case"ONBUILD":var lt=s.getArguments();return lt.length>0&&lt[0].isBefore(r)?null:{signatures:[{label:"ONBUILD INSTRUCTION",documentation:this.documentation.getDocumentation("signatureOnbuild"),parameters:[{label:"INSTRUCTION",documentation:this.documentation.getDocumentation("signatureOnbuild_Param")}]}],activeSignature:0,activeParameter:0};case"RUN":var xt=s,Me={label:"RUN command parameter ...",documentation:this.documentation.getDocumentation("signatureRun_Signature0"),parameters:[{label:"command",documentation:this.documentation.getDocumentation("signatureRun_Signature0_Param0")},{label:"parameter",documentation:this.documentation.getDocumentation("signatureRun_Signature0_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureRun_Signature0_Param2")}]},st={label:'RUN [ "command", "parameter", ... ]',documentation:this.documentation.getDocumentation("signatureRun_Signature1"),parameters:[{label:"["},{label:'"command"',documentation:this.documentation.getDocumentation("signatureRun_Signature1_Param1")},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureRun_Signature1_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureRun_Signature1_Param3")},{label:"]"}]};return this.getJSONInstructionSignatureHelp(e,xt,r,[st],Me,!1,!1,!1,!0);case"SHELL":var je=s,Bt={signatures:[{label:'SHELL [ "executable", "parameter", ... ]',documentation:this.documentation.getDocumentation("signatureShell"),parameters:[{label:"["},{label:'"executable"',documentation:this.documentation.getDocumentation("signatureShell_Param1")},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureShell_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureShell_Param3")},{label:"]"}]}],activeSignature:0,activeParameter:null};return Bt.activeParameter=this.getJSONSignatureActiveParameter(e,je,r,!1,!1,!0),Bt.activeParameter===-1?null:Bt;case"STOPSIGNAL":return{signatures:[{label:"STOPSIGNAL signal",documentation:this.documentation.getDocumentation("signatureStopsignal"),parameters:[{label:"signal",documentation:this.documentation.getDocumentation("signatureStopsignal_Param")}]}],activeSignature:0,activeParameter:0};case"USER":var gt={signatures:[{label:"USER user",documentation:this.documentation.getDocumentation("signatureUser_Signature0"),parameters:[{label:"user",documentation:this.documentation.getDocumentation("signatureUser_Signature0_Param")}]},{label:"USER user:group",documentation:this.documentation.getDocumentation("signatureUser_Signature1"),parameters:[{label:"user",documentation:this.documentation.getDocumentation("signatureUser_Signature1_Param0")},{label:"group",documentation:this.documentation.getDocumentation("signatureUser_Signature1_Param1")}]},{label:"USER uid",documentation:this.documentation.getDocumentation("signatureUser_Signature2"),parameters:[{label:"uid",documentation:this.documentation.getDocumentation("signatureUser_Signature2_Param")}]},{label:"USER uid:gid",documentation:this.documentation.getDocumentation("signatureUser_Signature3"),parameters:[{label:"uid",documentation:this.documentation.getDocumentation("signatureUser_Signature3_Param0")},{label:"gid",documentation:this.documentation.getDocumentation("signatureUser_Signature3_Param1")}]}],activeSignature:0,activeParameter:0},Lt=s.getTextContent().indexOf(":");return Lt!==-1&&(gt={signatures:[{label:"USER user:group",documentation:this.documentation.getDocumentation("signatureUser_Signature1"),parameters:[{label:"user",documentation:this.documentation.getDocumentation("signatureUser_Signature1_Param0")},{label:"group",documentation:this.documentation.getDocumentation("signatureUser_Signature1_Param1")}]},{label:"USER uid:gid",documentation:this.documentation.getDocumentation("signatureUser_Signature3"),parameters:[{label:"uid",documentation:this.documentation.getDocumentation("signatureUser_Signature3_Param0")},{label:"gid",documentation:this.documentation.getDocumentation("signatureUser_Signature3_Param1")}]}],activeSignature:0,activeParameter:0},e.offsetAt(r)>e.offsetAt(s.getRange().start)+Lt&&(gt.activeParameter=1)),gt;case"VOLUME":var zn=s,Kt={label:'VOLUME [ "/vol", ... ]',documentation:this.documentation.getDocumentation("signatureVolume_Signature1"),parameters:[{label:"["},{label:'"/vol"',documentation:this.documentation.getDocumentation("signatureVolume_Signature1_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureVolume_Signature1_Param2")},{label:"]"}]},Jn={label:"VOLUME /vol ...",documentation:this.documentation.getDocumentation("signatureVolume_Signature0"),parameters:[{label:"/vol",documentation:this.documentation.getDocumentation("signatureVolume_Signature0_Param0")},{label:"...",documentation:this.documentation.getDocumentation("signatureVolume_Signature0_Param1")}]};return this.getJSONInstructionSignatureHelp(e,zn,r,[Kt],Jn,!1,!0,!0,!0);case"WORKDIR":return{signatures:[{label:"WORKDIR /the/workdir/path",documentation:this.documentation.getDocumentation("signatureWorkdir"),parameters:[{label:"/the/workdir/path",documentation:this.documentation.getDocumentation("signatureWorkdir_Param")}]}],activeSignature:0,activeParameter:0}}}return null},t.prototype.getFromSignatureHelp=function(e,n){var r={label:"FROM baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature0"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature0_Param")}]},i={label:"FROM baseImage:tag",documentation:this.documentation.getDocumentation("signatureFrom_Signature1"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature1_Param0")},{label:"tag",documentation:this.documentation.getDocumentation("signatureFrom_Signature1_Param1")}]},a={label:"FROM baseImage@digest",documentation:this.documentation.getDocumentation("signatureFrom_Signature2"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature2_Param0")},{label:"digest",documentation:this.documentation.getDocumentation("signatureFrom_Signature2_Param1")}]},s={label:"FROM baseImage AS stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature3"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature3_Param0")},{label:""},{label:"AS"},{label:"stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature3_Param2")}]},c={label:"FROM baseImage:tag AS stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature4"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature4_Param0")},{label:"tag",documentation:this.documentation.getDocumentation("signatureFrom_Signature4_Param1")},{label:"AS"},{label:"stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature4_Param3")}]},u={label:"FROM baseImage@digest AS stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature5"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature5_Param0")},{label:"digest",documentation:this.documentation.getDocumentation("signatureFrom_Signature5_Param1")},{label:"AS"},{label:"stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature5_Param3")}]},l=[r,i,a,s,c,u],f=n.getArguments();if(f.length>=3&&f[2].isBefore(e))return null;if(f.length===0)return{signatures:l,activeSignature:0,activeParameter:0};var g=f[0].getValue(),m=g.indexOf("@")!==-1,d=!m&&g.indexOf(":")!==-1,p=f.length>1||f[0].isBefore(e);return{signatures:this.getFromSignatures(l,d,m,p),activeSignature:0,activeParameter:this.getFromActiveParameter(e,n,d,m,f)}},t.prototype.getFromSignatures=function(e,n,r,i){return r?i?[e[5]]:[e[2],e[5]]:n?i?[e[4]]:[e[1],e[4]]:i?[e[3],e[4],e[5]]:e},t.prototype.getFromActiveParameter=function(e,n,r,i,a){var s=r&&Ye.Util.isInsideRange(e,n.getImageTagRange()),c=i&&Ye.Util.isInsideRange(e,n.getImageDigestRange());if(a.length===1){if(a[0].isBefore(e))return 2}else if(a.length===2){if(a[1].isBefore(e))return 3;if(Ye.Util.isInsideRange(e,a[1].getRange())||a[0].isBefore(e))return 2}else{if(Ye.Util.isInsideRange(e,a[2].getRange())||a[1].isBefore(e))return 3;if(Ye.Util.isInsideRange(e,a[1].getRange())||a[0].isBefore(e))return 2}return s||c?1:0},t.prototype.getJSONInstructionSignatureHelp=function(e,n,r,i,a,s,c,u,l){var f=this.getJSONSignatureActiveParameter(e,n,r,s,u,l);return f===-1?(f=this.getSignatureActiveParameter(n,r,s,u?1:2,l),{signatures:[a],activeSignature:0,activeParameter:f}):f===0?c?(i.push(a),{signatures:i,activeSignature:0,activeParameter:0}):(i.unshift(a),{signatures:i,activeSignature:0,activeParameter:0}):f===1&&s?c?(i.push(a),{signatures:i,activeSignature:0,activeParameter:1}):(i.unshift(a),{signatures:i,activeSignature:0,activeParameter:1}):{signatures:i,activeSignature:0,activeParameter:f}},t.prototype.getJSONSignatureActiveParameter=function(e,n,r,i,a,s){var c=i?1:0;if(i){var u=n.getFlags();if(u.length>0){var l=u[u.length-1].getRange().end;if(Ye.Util.positionBefore(r,l)||Ye.Util.positionEquals(r,l))return 0}}var f=n.getClosingBracket();if(f){var g=f.getRange();if(g.end.line===r.line&&g.end.character===r.character)return a?3+c:4+c;if(f.isBefore(r))return-1}var m=n.getJSONStrings();if(!a&&m.length>1&&m[1].isBefore(r))return m.length===2||s||Ye.Util.isInsideRange(r,m[m.length-1].getRange())?3+c:2+c;if(m.length>0&&m[0].isBefore(r)){if(m.length>2)return 2+c;var d=e.offsetAt(m[0].getRange().end),p=e.offsetAt(r),v=e.getText().substring(d,p);return v.indexOf(",")===-1?1+c:s?2+c:3+c}var S=n.getOpeningBracket();if(S){var g=S.getRange();return g.end.line===r.line&&g.end.character===r.character||S.isBefore(r)?1+c:0+c}else if(n.getArguments().length===0)return 0+c;return-1},t.prototype.getSignatureActiveParameter=function(e,n,r,i,a){var s=r?1:0,c=e.getArguments();if(a)for(var u=c.length-1;u>=0;u--){if(c[u].isBefore(n))return Math.min(u+1,i)+s;if(Ye.Util.isInsideRange(n,c[u].getRange()))return Math.min(u,i)+s}switch(c.length){case 1:return c[0].isBefore(n)?2+s:0+s;default:return c[c.length-1].isBefore(n)||Ye.Util.isInsideRange(n,c[c.length-1].getRange())?2+s:c[0].isBefore(n)?1+s:0+s}},t.prototype.getPropertySignatureHelp=function(e,n,r,i){return{signatures:this.getPropertySignatures(e,n,r,i),activeSignature:0,activeParameter:this.getPropertySignatureActiveParameter(e,n,i)}},t.prototype.getPropertySignatures=function(e,n,r,i){if(i.length===0)return r;if(i.length===1){var a=i[0].getValueRange();if(a===null)return t.isNameBefore(i[0],n)?[r[0]]:r;var s=e.getText().substring(e.offsetAt(i[0].getNameRange().end),e.offsetAt(a.start));if(s.indexOf("=")===-1)return[r[0]];if(t.isValueBefore(i[0],n))return[r[2]]}else return[r[2]];return[r[1],r[2]]},t.prototype.getPropertySignatureActiveParameter=function(e,n,r){if(r.length===0)return 0;for(var i=r.length-1;i>0;i--){if(t.isInValue(r[i],n))return 3;if(t.isNameBefore(r[i],n)||t.isInName(r[i],n))return 2}if(t.isInValue(r[0],n))return 1;if(t.isValueBefore(r[0],n)){var a=e.getText().substring(e.offsetAt(r[0].getNameRange().end),e.offsetAt(r[0].getValueRange().start));return a.indexOf("=")===-1?1:2}return t.isNameBefore(r[0],n)?1:0},t.isInName=function(e,n){return Ye.Util.isInsideRange(n,e.getNameRange())},t.isNameBefore=function(e,n){var r=e.getNameRange();return t.isInName(e,n)?!1:r.start.line<n.line?!0:r.start.line===n.line?r.end.character<n.character:!1},t.isInValue=function(e,n){var r=e.getValueRange();return r?Ye.Util.isInsideRange(n,r):!1},t.isValueBefore=function(e,n){var r=e.getValueRange();return r===null?!1:r.start.line<n.line?!0:r.start.line===n.line?r.start.line===r.end.line?r.end.character<n.character:r.start.character<n.character:!1},t})();eo.DockerSignatures=eD});var jh=T(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.DockerLinks=void 0;var Qg=(ve(),z(pe)),tD=qe(),nD=(function(){function t(){}return o(t,"DockerLinks"),t.prototype.getLinks=function(e){for(var n=tD.DockerfileParser.parse(e),r=[],i=n.getFROMs().reduce(function(g,m){var d=m.getBuildStage();return d!==null&&g.push(d),g},[]),a=0,s=n.getFROMs();a<s.length;a++){var c=s[a],u=c.getImageName(),l=c.getRegistry();if(l==="ghcr.io"){var f=u.lastIndexOf("/");if(f===-1)continue;r.push({range:Qg.Range.create(c.getRegistryRange().start,c.getImageNameRange().end),target:"https://github.com/".concat(u,"/pkgs/container/").concat(u.substring(f+1))});continue}if(l==="mcr.microsoft.com"){r.push({range:Qg.Range.create(c.getRegistryRange().start,c.getImageNameRange().end),target:"https://mcr.microsoft.com/artifact/mar/"+u});continue}if(l==="quay.io"){r.push({range:Qg.Range.create(c.getRegistryRange().start,c.getImageNameRange().end),target:"https://quay.io/repository/"+u});continue}u!==null&&i.indexOf(u)===-1&&(u.indexOf("/")===-1?r.push({range:c.getImageNameRange(),data:"_/"+u+"/"}):r.push({range:c.getImageNameRange(),data:"r/"+u+"/"}))}return r},t.prototype.resolveLink=function(e){return e.data&&(e.target="https://hub.docker.com/"+e.data),e},t})();to.DockerLinks=nD});var Vh=T(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.DockerRename=void 0;var rD=(ve(),z(pe)),Xg=qe(),iD=Jg(),yn=vn(),aD=(function(){function t(){}return o(t,"DockerRename"),t.prototype.prepareRename=function(e,n){for(var r=Xg.DockerfileParser.parse(e),i=r.getContainingImage(n),a=0,s=r.getCOPYs();a<s.length;a++){var c=s[a],u=c.getFromFlag();if(u){var l=u.getValueRange();if(yn.Util.isInsideRange(n,l))return l}}for(var f=r.getFROMs(),g=0,m=f;g<m.length;g++){var d=m[g];if(yn.Util.isInsideRange(n,d.getBuildStageRange()))return d.getBuildStageRange();var l=d.getImageNameRange();if(yn.Util.isInsideRange(n,l))for(var p=d.getImageName(),v=0,S=f;v<S.length;v++){var k=S[v];if(k.getBuildStage()===p&&k.getBuildStageRange().start.line<l.start.line)return l}}if(i===null)return null;for(var b=0,_=i.getENVs();b<_.length;b++)for(var A=_[b],w=0,V=A.getProperties();w<V.length;w++){var B=V[w];if(yn.Util.isInsideRange(n,B.getNameRange()))return B.getNameRange()}for(var te=0,X=i.getARGs();te<X.length;te++){var ae=X[te],B=ae.getProperty();if(B!==null&&yn.Util.isInsideRange(n,B.getNameRange()))return B.getNameRange()}for(var ne=0,de=i.getInstructions();ne<de.length;ne++){for(var c=de[ne],ke=0,se=c.getVariables();ke<se.length;ke++){var L=se[ke];if(yn.Util.isInsideRange(n,L.getNameRange()))return L.getNameRange()}if(c instanceof Xg.Copy||c instanceof Xg.Run)for(var x=0,M=c.getHeredocs();x<M.length;x++){var j=M[x],l=j.getNameRange();if(yn.Util.isInsideRange(n,l)||(l=j.getDelimiterRange(),yn.Util.isInsideRange(n,l)))return l}}return null},t.prototype.rename=function(e,n,r,i){for(var a=[],s=new iD.DockerHighlight,c=s.computeHighlightRanges(n,r),u=0,l=c;u<l.length;u++){var f=l[u];a.push(rD.TextEdit.replace(f.range,i))}return a},t})();no.DockerRename=aD});var Wh=T(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.DockerHover=void 0;var ro=(ve(),z(pe)),Dn=qe(),wt=vn(),sD=(function(){function t(e,n){this.markdown=e,this.plainText=n}return o(t,"DockerHover"),t.prototype.onHover=function(e,n,r){var i=Dn.DockerfileParser.parse(e),a=i.getContainingImage(n);if(!a)return null;var s=this.computeHoverKey(i,n);if(s){if(r&&r.length>0){switch(r[0]){case ro.MarkupKind.Markdown:var c=this.markdown.getMarkdown(s);return c?{contents:{kind:ro.MarkupKind.Markdown,value:c.contents}}:null;case ro.MarkupKind.PlainText:var u=this.plainText.getDocumentation(s);if(u)return{contents:{kind:ro.MarkupKind.PlainText,value:u}}}return null}var l=this.markdown.getMarkdown(s);return l===void 0?null:l}for(var f=0,g=a.getInstructions();f<g.length;f++){var m=g[f];if(m instanceof Dn.Arg){var d=m.getProperty();if(d&&wt.Util.isInsideRange(n,d.getNameRange())&&d.getValue()!==null)return{contents:d.getValue()}}if(m instanceof Dn.Env)for(var p=0,v=m.getProperties();p<v.length;p++){var d=v[p];if(wt.Util.isInsideRange(n,d.getNameRange())&&d.getValue()!==null)return{contents:d.getValue()}}}for(var S=0,k=a.getInstructions();S<k.length;S++)for(var m=k[S],b=0,_=m.getVariables();b<_.length;b++){var A=_[b];if(wt.Util.isInsideRange(n,A.getNameRange())){var w=i.resolveVariable(A.getName(),A.getNameRange().start.line);if(w||w==="")return{contents:w};if(w===null)return null}}return null},t.prototype.computeHoverKey=function(e,n){for(var r=0,i=e.getDirectives();r<i.length;r++){var a=i[r],s=a.getNameRange();switch(a.getDirective()){case Dn.Directive.escape:if(wt.Util.isInsideRange(n,s))return Dn.Directive.escape;break;case Dn.Directive.syntax:if(wt.Util.isInsideRange(n,s))return Dn.Directive.syntax;break}}for(var c=e.getContainingImage(n),u=0,l=c.getInstructions();u<l.length;u++){var f=l[u],g=f.getInstructionRange();if(wt.Util.isInsideRange(n,g))return f.getKeyword();if(f instanceof Dn.Onbuild){var s=f.getTriggerRange();if(wt.Util.isInsideRange(n,s))return f.getTrigger()}var m=this.getFlagsHover(n,f);if(m!==null)return m}return null},t.prototype.getFlagsHover=function(e,n){switch(n.getKeyword()){case"ADD":for(var r=n.getFlags(),i=0,a=r;i<a.length;i++){var s=a[i];if(wt.Util.isInsideRange(e,s.getNameRange()))switch(s.getName()){case"chown":return"ADD_FlagChown"}}break;case"COPY":for(var c=n.getFlags(),u=0,l=c;u<l.length;u++){var s=l[u];if(wt.Util.isInsideRange(e,s.getNameRange()))switch(s.getName()){case"chown":return"COPY_FlagChown";case"from":return"COPY_FlagFrom"}}break;case"FROM":for(var f=n.getFlags(),g=0,m=f;g<m.length;g++){var s=m[g];if(wt.Util.isInsideRange(e,s.getNameRange()))return s.getName()==="platform"?"FROM_FlagPlatform":null}break;case"HEALTHCHECK":for(var d=n.getFlags(),p=0,v=d;p<v.length;p++){var s=v[p];if(wt.Util.isInsideRange(e,s.getNameRange())){switch(s.getName()){case"interval":return"HEALTHCHECK_FlagInterval";case"retries":return"HEALTHCHECK_FlagRetries";case"start-interval":return"HEALTHCHECK_FlagStartInterval";case"start-period":return"HEALTHCHECK_FlagStartPeriod";case"timeout":return"HEALTHCHECK_FlagTimeout"}return null}}break;case"ONBUILD":var S=n.getTriggerInstruction();if(S!==null)return this.getFlagsHover(e,S);break}return null},t})();io.DockerHover=sD});var Zg=T(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.MarkdownDocumentation=void 0;var oD=(function(){function t(){this.dockerMessages={hoverAdd:"Copy files, folders, or remote URLs from `source` to the `dest` path in the image's filesystem.\n\n",hoverArg:`Define a variable with an optional default value that users can override at build-time when using \`docker build\`.

Since Docker 1.9

`,hoverCmd:"Provide defaults for an executing container. If an executable is not specified, then `ENTRYPOINT` must be specified as well. There can only be one `CMD` instruction in a `Dockerfile`.\n\n",hoverCopy:"Copy files or folders from `source` to the `dest` path in the image's filesystem.\n\n",hoverEntrypoint:`Configures the container to be run as an executable.

`,hoverEnv:"Set the environment variable `key` to the value `value`.\n\n",hoverExpose:"Define the network `port`s that this container will listen on at runtime.\n\n",hoverFrom:"Set the `baseImage` to use for subsequent instructions. `FROM` must be the first instruction in a `Dockerfile`.\n\n",hoverHealthcheck:"Define how Docker should test the container to check that it is still working. Alternatively, disable the base image's `HEALTHCHECK` instruction. There can only be one `HEALTHCHECK` instruction in a `Dockerfile`.\n\nSince Docker 1.12\n\n",hoverLabel:`Adds metadata to an image.

Since Docker 1.6

`,hoverMaintainer:"Set the _Author_ field of the generated images. This instruction has been deprecated in favor of `LABEL`.\n\n",hoverOnbuild:`Add a _trigger_ instruction to the image that will be executed when the image is used as a base image for another build.

`,hoverRun:`Execute any commands on top of the current image as a new layer and commit the results.

`,hoverShell:`Override the default shell used for the _shell_ form of commands.

Since Docker 1.12

`,hoverStopsignal:"Set the system call signal to use to send to the container to exit. Signals can be valid unsigned numbers or a signal name in the `SIGNAME` format such as `SIGKILL`.\n\nSince Docker 1.9\n\n",hoverUser:"Set the user name or UID to use when running the image in addition to any subsequent `CMD`, `ENTRYPOINT`, or `RUN` instructions that follow it in the `Dockerfile`.\n\n",hoverVolume:`Create a mount point with the specified name and mark it as holding externally mounted volumes from the native host or from other containers.

`,hoverWorkdir:"Set the working directory for any subsequent `ADD`, `COPY`, `CMD`, `ENTRYPOINT`, or `RUN` instructions that follow it in the `Dockerfile`.\n\n",hoverEscape:"Sets the character to use to escape characters and newlines in this Dockerfile. If unspecified, the default escape character is `\\`.\n\n",hoverSyntax:`Set the location of the Dockerfile builder to use for building the current Dockerfile.

`,hoverOnlineDocumentationFooter:`

[Online documentation](\${0})`,hoverAddFlagChown:"The username, groupname, or UID/GID combination to own the added content.",hoverCopyFlagChown:"The username, groupname, or UID/GID combination to own the copied content.",hoverCopyFlagFrom:`The previous build stage to use as the source location instead of the build's context.

Since Docker 17.05.0-ce.`,hoverFromFlagPlatform:`The platform of the image if referencing a multi-platform image.

Since Docker CE 18.04.`,hoverHealthcheckFlagInterval:"The seconds to wait for the health check to run after the container has started, and then again the number of seconds to wait before running again after the previous check has completed.",hoverHealthcheckFlagRetries:"The number of consecutive failures of this health check before the container is considered to be `unhealthy`.",hoverHealthcheckFlagStartInterval:"The number of seconds to wait between health checks during the start period.",hoverHealthcheckFlagStartPeriod:`The number of seconds to wait for the container to startup. Failures during this grace period will not count towards the maximum number of retries. However, should a health check succeed during this period then any subsequent failures will count towards the maximum number of retries.

Since Docker 17.05.0-ce.`,hoverHealthcheckFlagTimeout:"The number of seconds to wait for the check to complete before considering it to have failed.",proposalArgNameOnly:"Define a variable that users can set at build-time when using `docker build`.\n\n",proposalArgDefaultValue:"Define a variable with the given default value that users can override at build-time when using `docker build`.\n\n",proposalHealthcheckExec:"Define how Docker should test the container to check that it is still working. There can only be one `HEALTHCHECK` instruction in a `Dockerfile`.\n\nSince Docker 1.12\n\n",proposalHealthcheckNone:"Disable the `HEALTHCHECK` instruction inherited from the base image if one exists. There can only be one `HEALTHCHECK` instruction in a `Dockerfile`.\n\nSince Docker 1.12"},this.markdowns={ADD:{contents:this.dockerMessages.hoverAdd+"```\nADD hello.txt /absolute/path\nADD hello.txt relative/to/workdir\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#add")},ADD_FlagChown:{contents:this.dockerMessages.hoverAddFlagChown},ARG:{contents:this.dockerMessages.hoverArg+"```\nARG userName\nARG testOutputDir=test\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#arg")},ARG_NameOnly:{contents:this.dockerMessages.proposalArgNameOnly+"```\nARG userName\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#arg")},ARG_DefaultValue:{contents:this.dockerMessages.proposalArgDefaultValue+"```\nARG testOutputDir=test\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#arg")},CMD:{contents:this.dockerMessages.hoverCmd+'```\nCMD [ "/bin/ls", "-l" ]\n```\n'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#cmd")},COPY:{contents:this.dockerMessages.hoverCopy+"```\nCOPY hello.txt /absolute/path\nCOPY hello.txt relative/to/workdir\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#copy")},COPY_FlagChown:{contents:this.dockerMessages.hoverCopyFlagChown},COPY_FlagFrom:{contents:this.dockerMessages.hoverCopyFlagFrom},ENTRYPOINT:{contents:this.dockerMessages.hoverEntrypoint+'```\nENTRYPOINT [ "/opt/app/run.sh", "--port", "8080" ]\n```'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#entrypoint")},ENV:{contents:this.dockerMessages.hoverEnv+"```\nENV buildTag=1.0\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#env")},EXPOSE:{contents:this.dockerMessages.hoverExpose+"```\nEXPOSE 8080\nEXPOSE 80 443 22\nEXPOSE 7000-8000\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#expose")},FROM:{contents:this.dockerMessages.hoverFrom+"```\nFROM baseImage\nFROM baseImage:tag\nFROM baseImage@digest\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#from")},FROM_FlagPlatform:{contents:this.dockerMessages.hoverFromFlagPlatform},HEALTHCHECK:{contents:this.dockerMessages.hoverHealthcheck+"```\nHEALTHCHECK --interval=10m --timeout=5s \\\n    CMD curl -f http://localhost/ || exit 1\nHEALTHCHECK NONE\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#healthcheck")},HEALTHCHECK_CMD:{contents:this.dockerMessages.proposalHealthcheckExec+"```\nHEALTHCHECK --interval=10m --timeout=5s \\\n    CMD curl -f http://localhost/ || exit 1\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#healthcheck")},HEALTHCHECK_FlagInterval:{contents:this.dockerMessages.hoverHealthcheckFlagInterval},HEALTHCHECK_FlagRetries:{contents:this.dockerMessages.hoverHealthcheckFlagRetries},HEALTHCHECK_FlagStartInterval:{contents:this.dockerMessages.hoverHealthcheckFlagStartInterval},HEALTHCHECK_FlagStartPeriod:{contents:this.dockerMessages.hoverHealthcheckFlagStartPeriod},HEALTHCHECK_FlagTimeout:{contents:this.dockerMessages.hoverHealthcheckFlagTimeout},HEALTHCHECK_NONE:{contents:this.dockerMessages.proposalHealthcheckNone+"```\nHEALTHCHECK NONE\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#healthcheck")},LABEL:{contents:this.dockerMessages.hoverLabel+'```\nLABEL version="1.0"\n```\n'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#label")},MAINTAINER:{contents:this.dockerMessages.hoverMaintainer+"```\nMAINTAINER name\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#maintainer")},ONBUILD:{contents:this.dockerMessages.hoverOnbuild+"```\nONBUILD ADD . /opt/app/src/extensions\nONBUILD RUN /usr/local/bin/build.sh /opt/app```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#cmd")},RUN:{contents:this.dockerMessages.hoverRun+"```\nRUN apt-get update && apt-get install -y curl\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#run")},SHELL:{contents:this.dockerMessages.hoverShell+'```\nSHELL [ "powershell", "-command" ]\n```\n'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#shell")},STOPSIGNAL:{contents:this.dockerMessages.hoverStopsignal+"```\nSTOPSIGNAL 9\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#stopsignal")},USER:{contents:this.dockerMessages.hoverUser+"```\nUSER daemon\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#user")},VOLUME:{contents:this.dockerMessages.hoverVolume+'```\nVOLUME [ "/var/db" ]\n```\n'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#volume")},WORKDIR:{contents:this.dockerMessages.hoverWorkdir+"```\nWORKDIR /path/to/workdir\nWORKDIR relative/path\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#workdir")},escape:{contents:this.dockerMessages.hoverEscape+"```\n# escape=`\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#escape")},syntax:{contents:this.dockerMessages.hoverSyntax+"```\n# syntax=docker/dockerfile:1.0\n# syntax=docker/dockerfile:1.0.0-experimental\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#syntax")}}}return o(t,"MarkdownDocumentation"),t.prototype.formatMessage=function(e,n){return e.replace("${0}",n)},t.prototype.getMarkdown=function(e){return this.markdowns[e]},t})();ao.MarkdownDocumentation=oD});var Gh=T(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.DockerCompletion=void 0;var so=(ve(),z(pe)),cD=Zg(),uD=Zs(),lD=(function(){function t(){this.dockerMarkdown=new cD.MarkdownDocumentation,this.dockerPlainText=new uD.PlainTextDocumentation}return o(t,"DockerCompletion"),t.prototype.resolveCompletionItem=function(e,n){if(!e.documentation&&e.data)if(n==null)e.documentation=this.dockerPlainText.getDocumentation(e.data);else{for(var r=0,i=n;r<i.length;r++){var a=i[r];if(a===so.MarkupKind.PlainText)return e.documentation={kind:so.MarkupKind.PlainText,value:this.dockerPlainText.getDocumentation(e.data)},e;if(a===so.MarkupKind.Markdown)return e.documentation={kind:so.MarkupKind.Markdown,value:this.dockerMarkdown.getMarkdown(e.data).contents},e}e.documentation=this.dockerPlainText.getDocumentation(e.data)}return e},t})();oo.DockerCompletion=lD});var Bh=T(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.DockerSemanticTokens=Er.TokensLegend=void 0;var gD=($n(),z(Kn)),U=(ve(),z(pe)),on=qe(),Ci=vn(),kn=(function(){function t(){}return o(t,"TokensLegend"),t.init=function(){var e=0;this.tokenTypes[U.SemanticTokenTypes.keyword]=e++,this.tokenTypes[U.SemanticTokenTypes.comment]=e++,this.tokenTypes[U.SemanticTokenTypes.parameter]=e++,this.tokenTypes[U.SemanticTokenTypes.property]=e++,this.tokenTypes[U.SemanticTokenTypes.namespace]=e++,this.tokenTypes[U.SemanticTokenTypes.class]=e++,this.tokenTypes[U.SemanticTokenTypes.macro]=e++,this.tokenTypes[U.SemanticTokenTypes.string]=e++,this.tokenTypes[U.SemanticTokenTypes.variable]=e++,this.tokenTypes[U.SemanticTokenTypes.operator]=e++,this.tokenTypes[U.SemanticTokenTypes.modifier]=e++,this.tokenModifiers[U.SemanticTokenModifiers.declaration]=1,this.tokenModifiers[U.SemanticTokenModifiers.definition]=2,this.tokenModifiers[U.SemanticTokenModifiers.deprecated]=4},t.getTokenType=function(e){var n=this.tokenTypes[e];return n},t.getTokenModifiers=function(e){for(var n=0,r=0,i=e;r<i.length;r++){var a=i[r];n|=this.tokenModifiers[a]}return n},t.tokenTypes={},t.tokenModifiers={},t})();Er.TokensLegend=kn;kn.init();var dD=(function(){function t(e){this.currentRange=null,this.tokens=[],this.quote=null,this.escapedQuote=null,this.content=e,this.document=gD.TextDocument.create("","",0,e),this.dockerfile=on.DockerfileParser.parse(e),this.escapeCharacter=this.dockerfile.getEscapeCharacter()}return o(t,"DockerSemanticTokens"),t.prototype.computeSemanticTokens=function(){for(var e=this.dockerfile.getComments(),n=this.dockerfile.getInstructions(),r=0,i=n;r<i.length;r++){var a=i[r],s=a.getRange();if(s.start.line!==s.end.line)for(var c=0;c<e.length;c++){var u=e[c].getRange();s.start.line<u.start.line&&u.start.line<s.end.line&&(e.splice(c,1),c--)}}e=e.concat(this.dockerfile.getInstructions()),e.sort(function(S,k){return S.getRange().start.line-k.getRange().start.line});for(var l=0,f=this.dockerfile.getDirectives();l<f.length;l++){var g=f[l],s=g.getRange(),m=g.getNameRange(),d={start:s.start,end:m.start};this.createToken(null,d,U.SemanticTokenTypes.comment,[],!1),this.createToken(null,m,U.SemanticTokenTypes.property,[],!1);var p=g.getValueRange(),v={start:{character:p.start.character-1,line:p.start.line},end:{character:p.start.character,line:p.start.line}};this.createToken(null,v,U.SemanticTokenTypes.operator,[],!1),p.start.character!==p.end.character&&this.createToken(null,p,U.SemanticTokenTypes.parameter,[],!1)}for(var c=0;c<e.length;c++)if(e[c]instanceof on.Comment){var s=e[c].getRange();this.createToken(null,s,U.SemanticTokenTypes.comment,[],!1)}else this.quote=null,this.escapedQuote=null,this.createTokensForInstruction(e[c]);return{data:this.tokens}},t.prototype.createTokensForInstruction=function(e){var n=e.getInstructionRange(),r=[];if(e.getKeyword()===on.Keyword.MAINTAINER&&(r=[U.SemanticTokenModifiers.deprecated]),this.createToken(e,n,U.SemanticTokenTypes.keyword,r),e instanceof on.ModifiableInstruction)for(var i=0,a=e.getFlags();i<a.length;i++){var s=a[i],c=s.getRange(),u=s.getNameRange(),l={start:c.start,end:u.end};this.createToken(e,l,U.SemanticTokenTypes.parameter);var f=s.getValue();if(f!==null)if(s.hasOptions()){var g={start:l.end,end:{line:l.end.line,character:l.end.character+1}};this.createToken(e,g,U.SemanticTokenTypes.operator,[],!1,!1);for(var m=0,d=s.getOptions();m<d.length;m++){var p=d[m];u=p.getNameRange(),this.createToken(e,u,U.SemanticTokenTypes.parameter);var v=p.getValueRange();if(v!==null){var S={start:u.end,end:v.start};this.createToken(e,S,U.SemanticTokenTypes.operator,[],!1,!1),p.getValue()!==""&&this.createToken(e,v,U.SemanticTokenTypes.property)}}}else{var v=s.getValueRange(),g={start:l.end,end:v.start};this.createToken(e,g,U.SemanticTokenTypes.operator,[],!1,!1),f!==""&&this.createToken(e,v,U.SemanticTokenTypes.property)}}var k=e.getArguments();if(k.length===0){var b=e.getRange();b.start.line!==b.end.line&&this.handleLineChange(e,n.end,b.end);return}switch(e.getKeyword()){case on.Keyword.ARG:case on.Keyword.ENV:for(var _=e,A=0,w=_.getProperties();A<w.length;A++){var V=w[A],u=V.getNameRange();this.createToken(e,u,U.SemanticTokenTypes.variable,[U.SemanticTokenModifiers.declaration],!1);var v=V.getValueRange();if(v!==null){var g={start:u.end,end:v.start};if(this.document.getText(g).startsWith("=")){var B=this.document.offsetAt(u.end);g={start:u.end,end:this.document.positionAt(B+1)},this.createToken(e,g,U.SemanticTokenTypes.operator,[],!1,!1)}this.createToken(e,v,U.SemanticTokenTypes.parameter,[],!0,!0)}}return;case on.Keyword.FROM:var te=e;this.createToken(e,te.getImageNameRange(),U.SemanticTokenTypes.class);var X=te.getImageTagRange();X!==null&&this.createToken(e,X,U.SemanticTokenTypes.property);var ae=te.getImageDigestRange();ae!==null&&this.createToken(e,ae,U.SemanticTokenTypes.property);var ne=e.getArguments();if(ne.length>1)if(ne[1].getValue().toUpperCase()==="AS"){var de=ne[1].getRange();this.createToken(e,de,U.SemanticTokenTypes.keyword),ne.length>2&&(this.createToken(e,ne[2].getRange(),U.SemanticTokenTypes.namespace),ne.length>3&&this.createArgumentTokens(e,ne.slice(3)))}else this.createArgumentTokens(e,ne.slice(1));return;case on.Keyword.HEALTHCHECK:var ke=e,b=ke.getSubcommand().getRange();this.createToken(e,b,U.SemanticTokenTypes.keyword),k.length>1&&this.createArgumentTokens(e,k.slice(1));return;case on.Keyword.ONBUILD:var se=e;this.createTokensForInstruction(se.getTriggerInstruction());return}this.createArgumentTokens(e,k)},t.prototype.createArgumentTokens=function(e,n){for(var r=null,i=0;i<n.length;i++)r=n[i].getRange(),this.createToken(e,n[i].getRange(),U.SemanticTokenTypes.parameter,[],!0,!0);var a=e.getRange();(r.end.line!==a.end.line||r.end.character!==a.end.character)&&this.handleLineChange(e,r.end,a.end)},t.prototype.handleLineChange=function(e,n,r){for(var i=-1,a=this.document.offsetAt(n);a<this.document.offsetAt(r);a++)switch(this.content.charAt(a)){case this.escapeCharacter:i===-1&&this.createEscapeToken(e,a);break;case"\r":case`
`:if(i!==-1){var s={start:this.document.positionAt(i),end:this.document.positionAt(a)};this.createToken(null,s,U.SemanticTokenTypes.comment,[],!1),i=-1}break;case"#":i===-1&&(i=a);break}},t.prototype.createEscapeToken=function(e,n){var r={start:this.document.positionAt(n),end:this.document.positionAt(n+1)};this.createToken(e,r,U.SemanticTokenTypes.macro,[],!1,!1,!1)},t.prototype.createVariableToken=function(e,n,r){var i=n.getModifierRange();if(i===null)this.createToken(e,r,U.SemanticTokenTypes.variable,[],!1);else{var a=U.Range.create(U.Position.create(i.start.line,i.start.character-1),i.start);r.start.character<a.start.character&&(this.createToken(e,U.Range.create(r.start,a.start),U.SemanticTokenTypes.variable,[],!1),this.createToken(e,a,U.SemanticTokenTypes.operator,[],!1,!1,!1)),r.end.character>a.end.character&&(i.end.character>=r.start.character?(i.start.character!==i.end.character&&this.createToken(e,i,U.SemanticTokenTypes.modifier,[],!1,!1,!1),i.end.character!==r.end.character&&this.createToken(e,U.Range.create(i.end,r.end),U.SemanticTokenTypes.variable,[],!1)):this.createToken(e,r,U.SemanticTokenTypes.variable,[],!1))}},t.prototype.createToken=function(e,n,r,i,a,s,c){if(i===void 0&&(i=[]),a===void 0&&(a=!0),s===void 0&&(s=!1),c===void 0&&(c=!0),c&&this.currentRange!==null&&this.currentRange.end.line!==n.start.line&&this.handleLineChange(e,this.currentRange.end,n.start),s){var u=this.document.offsetAt(n.start),l=u,f=-1,g=!1,m=this.document.offsetAt(n.end);e:for(var d=u;d<m;d++){var p=this.content.charAt(d);switch(p){case this.escapeCharacter:t:for(var v=d+1;v<m;v++){var S=this.content.charAt(v);switch(S){case" ":case"	":continue;case"\r":v++;case`
`:g=!0,d=v;continue e;default:break t}}g=!1,u===-1&&(u=d);break;case"'":case'"':if(g=!1,this.quote===null){if(this.escapedQuote===null&&(this.quote=p,l=d,u!==-1&&u!==l)){var k={start:this.document.positionAt(u),end:this.document.positionAt(l)};this.createToken(e,k,r,i)}}else if(this.quote===p){var b={start:this.document.positionAt(l),end:this.document.positionAt(d+1)};this.createToken(e,b,U.SemanticTokenTypes.string,[],!0,!1),f=d+1,u=-1,this.quote=null}break;case"#":if(g){for(var v=d+1;v<m;v++){var S=this.content.charAt(v);switch(S){case"\r":v++;case`
`:d=v;continue e}}break}case" ":case"	":case"\r":case`
`:if(g)continue;default:g=!1,u===-1&&(u=d);break}}if(this.quote!==null){var b={start:this.document.positionAt(l),end:this.document.positionAt(m)};this.createToken(e,b,U.SemanticTokenTypes.string,[],!0,!1);return}else if(f!==-1){if(f!==m){var k={start:this.document.positionAt(f),end:this.document.positionAt(m)};this.createToken(e,k,r,i)}return}else(this.quote!==null||this.escapedQuote!==null)&&(r=U.SemanticTokenTypes.string,n={start:this.document.positionAt(l),end:n.end})}if(n.start.line!==n.end.line){for(var u=this.document.offsetAt(n.start),m=this.document.offsetAt(n.end),_=!1,A=!0,g=!1,d=u;d<m;d++){var p=this.content.charAt(d);switch(p){case"#":if(g){var w=!0;e:for(var v=d+1;v<m;v++)switch(this.content.charAt(v)){case" ":case"	":break;case"\r":var V={start:this.document.positionAt(d),end:this.document.positionAt(v)};this.createToken(null,V,U.SemanticTokenTypes.comment,[],!1),d=v+1,u=-1,w=!1,v++;break;case`
`:var B={start:this.document.positionAt(d),end:this.document.positionAt(v)};this.createToken(null,B,U.SemanticTokenTypes.comment,[],!1),d=v,u=-1,w=!1;break;case"#":w||(d=v),w=!0;break;default:if(w)break;d=v-1;break e}}break;case this.escapeCharacter:var te=!1;e:for(var v=d+1;v<m;v++)switch(this.content.charAt(v)){case" ":case"	":case"\r":break;case`
`:if(!te){if(!_&&u!==-1){if(d!==u){var X={start:this.document.positionAt(u),end:this.document.positionAt(d)};this.createToken(e,X,r,i)}_=!0}this.createEscapeToken(e,d)}A=!1,g=!0,te=!0,d=v,u=-1;break;case"#":if(g){d=v-1;break e}case"\\":if(!g){_=!1,g=!1,d=v;break e}d=v,te=!1,u=v;break;default:u===-1&&(_=!1,g=!1,u=v,d=v);break e}break;default:u===-1&&(_=!1,g=!1,u=d);break}}if(u===-1)return;var k={start:this.document.positionAt(u),end:this.document.positionAt(m)};this.createToken(e,k,r,i,a,s,A);return}if(a){for(var ae=n.start,ne=null,de=0,ke=e.getVariables();de<ke.length;de++){var se=ke[de],L=se.getRange();if(Ci.Util.isInsideRange(n.start,L)&&Ci.Util.isInsideRange(n.end,L)){if(r===U.SemanticTokenTypes.string)break;this.createVariableToken(e,se,n);return}else if(Ci.Util.isInsideRange(L.start,n)){Ci.Util.positionBefore(ae,L.start)&&this.createToken(e,{start:ae,end:L.start},r,i,!1);var x=L;if(L.end.character>n.end.character&&(x.end=n.end),this.createVariableToken(e,se,x),ne=L,Ci.Util.positionEquals(n.end,L.end))return;ae=L.end}}ne!==null&&(n={start:ne.end,end:n.end})}this.currentRange===null?this.tokens=this.tokens.concat([n.start.line,n.start.character,n.end.character-n.start.character,kn.getTokenType(r),kn.getTokenModifiers(i)]):this.currentRange.end.line!==n.start.line?this.tokens=this.tokens.concat([n.start.line-this.currentRange.end.line,n.start.character,n.end.character-n.start.character,kn.getTokenType(r),kn.getTokenModifiers(i)]):this.tokens=this.tokens.concat([n.start.line-this.currentRange.start.line,n.start.character-this.currentRange.start.character,n.end.character-n.start.character,kn.getTokenType(r),kn.getTokenModifiers(i)]),this.currentRange=n},t})();Er.DockerSemanticTokens=dD});var zh=T(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.LanguageService=void 0;var fD=($n(),z(Kn)),co=Si(),hD=Mh(),mD=Oh(),Kh=wh(),pD=xh(),vD=zg(),RD=Jg(),_D=qh(),bD=Uh(),$h=jh(),yD=Zs(),Yh=Vh(),DD=Wh(),kD=Zg(),SD=Gh(),AD=Bh(),TD=(function(){function t(){this.markdownDocumentation=new kD.MarkdownDocumentation,this.plainTextDocumentation=new yD.PlainTextDocumentation,this.foldingRangeLineFoldingOnly=!1,this.foldingRangeLimit=Number.MAX_VALUE}return o(t,"LanguageService"),t.prototype.setLogger=function(e){this.logger=e},t.prototype.setCapabilities=function(e){this.completionItemCapabilities=e&&e.completion&&e.completion.completionItem,this.hoverContentFormat=e&&e.hover&&e.hover.contentFormat,this.foldingRangeLineFoldingOnly=e&&e.foldingRange&&e.foldingRange.lineFoldingOnly,this.foldingRangeLimit=e&&e.foldingRange&&e.foldingRange.rangeLimit},t.prototype.computeCodeActions=function(e,n,r){var i=new Kh.DockerCommands;return i.analyzeDiagnostics(r.diagnostics,e.uri)},t.prototype.computeLinks=function(e){var n=new $h.DockerLinks;return n.getLinks(e)},t.prototype.resolveLink=function(e){var n=new $h.DockerLinks;return n.resolveLink(e)},t.prototype.computeCommandEdits=function(e,n,r){var i=new Kh.DockerCommands;return i.computeCommandEdits(e,n,r)},t.prototype.computeCompletionItems=function(e,n){var r=fD.TextDocument.create("","",0,e),i=new hD.DockerAssist(r,new mD.DockerRegistryClient(this.logger),this.completionItemCapabilities);return i.computeProposals(n)},t.prototype.resolveCompletionItem=function(e){if(!e.documentation){var n=new SD.DockerCompletion;return n.resolveCompletionItem(e,this.completionItemCapabilities&&this.completionItemCapabilities.documentationFormat)}return e},t.prototype.computeDefinition=function(e,n,r){var i=new vD.DockerDefinition;return i.computeDefinition(e,n,r)},t.prototype.computeFoldingRanges=function(e){var n=new pD.DockerFolding;return n.computeFoldingRanges(e,this.foldingRangeLineFoldingOnly,this.foldingRangeLimit)},t.prototype.computeHighlightRanges=function(e,n){var r=new RD.DockerHighlight;return r.computeHighlightRanges(e,n)},t.prototype.computeHover=function(e,n){var r=new DD.DockerHover(this.markdownDocumentation,this.plainTextDocumentation);return r.onHover(e,n,this.hoverContentFormat)},t.prototype.computeSymbols=function(e,n){var r=new _D.DockerSymbols;return r.parseSymbolInformation(e,n)},t.prototype.computeSignatureHelp=function(e,n){var r=new bD.DockerSignatures;return r.computeSignatures(e,n)},t.prototype.computeRename=function(e,n,r,i){var a=new Yh.DockerRename;return a.rename(e,n,r,i)},t.prototype.prepareRename=function(e,n){var r=new Yh.DockerRename;return r.prepareRename(e,n)},t.prototype.computeSemanticTokens=function(e){var n=new AD.DockerSemanticTokens(e);return n.computeSemanticTokens()},t.prototype.validate=function(e,n){return co.validate(e,n)},t.prototype.format=function(e,n){return co.format(e,n)},t.prototype.formatRange=function(e,n,r){return co.formatRange(e,n,r)},t.prototype.formatOnType=function(e,n,r,i){return co.formatOnType(e,n,r,i)},t})();uo.LanguageService=TD});var Yg=T(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.DockerfileLanguageServiceFactory=Cr.CommandIds=void 0;var ED=zh(),Jh;(function(t){t.LOWERCASE="docker.command.convertToLowercase",t.UPPERCASE="docker.command.convertToUppercase",t.EXTRA_ARGUMENT="docker.command.removeExtraArgument",t.DIRECTIVE_TO_BACKTICK="docker.command.directiveToBacktick",t.DIRECTIVE_TO_BACKSLASH="docker.command.directiveToBackslash",t.FLAG_TO_CHOWN="docker.command.flagToChown",t.FLAG_TO_COPY_FROM="docker.command.flagToCopyFrom",t.FLAG_TO_HEALTHCHECK_INTERVAL="docker.command.flagToHealthcheckInterval",t.FLAG_TO_HEALTHCHECK_RETRIES="docker.command.flagToHealthcheckRetries",t.FLAG_TO_HEALTHCHECK_START_PERIOD="docker.command.flagToHealthcheckStartPeriod",t.FLAG_TO_HEALTHCHECK_TIMEOUT="docker.command.flagToHealthcheckTimeout",t.REMOVE_EMPTY_CONTINUATION_LINE="docker.command.removeEmptyContinuationLine",t.CONVERT_TO_AS="docker.command.convertToAS"})(Jh||(Cr.CommandIds=Jh={}));var Qh;(function(t){function e(){return new ED.LanguageService}o(e,"createLanguageService"),t.createLanguageService=e})(Qh||(Cr.DockerfileLanguageServiceFactory=Qh={}))});Object.defineProperty(exports,"__esModule",{value:!0});var Xh=require("fs"),lo=(Fi(),z(Li)),Ne=dh(),CD=zu(),kt=Si(),ut=Yg(),Sn=null,ed=null,Pi=new Map,Pr=new Map,Q=(0,Ne.createConnection)(Ne.ProposedFeatures.all),ye=ut.DockerfileLanguageServiceFactory.createLanguageService();ye.setLogger({log(t){Q.console.log(t)}});var Ii=!1,Yn=!1,Zh=!1,em=!1,Gt={};function Xe(t){return Gt[t]?Promise.resolve(Gt[t]):new Promise((e,n)=>{let r=(0,CD.uriToFilePath)(t);r===void 0?e(null):Xh.exists(r,i=>{i?Xh.readFile(r,(a,s)=>{e(lo.TextDocument.create(t,"dockerfile",1,s.toString()))}):e(null)})})}o(Xe,"getDocument");function PD(t){return t.textDocument&&t.textDocument.completion&&t.textDocument.completion.completionItem&&t.textDocument.completion.completionItem.deprecatedSupport}o(PD,"supportsDeprecatedItems");function ID(t){return t.textDocument&&t.textDocument.completion&&t.textDocument.completion.completionItem&&t.textDocument.completion.completionItem.snippetSupport}o(ID,"supportsSnippets");function ND(t){let e=t.textDocument&&t.textDocument.codeAction&&t.textDocument.codeAction.codeActionLiteralSupport&&t.textDocument.codeAction.codeActionLiteralSupport.codeActionKind&&t.textDocument.codeAction.codeActionLiteralSupport.codeActionKind.valueSet;if(e==null)return!1;for(let n of e)if(n===Ne.CodeActionKind.QuickFix)return!0;return!1}o(ND,"supportsCodeActionQuickFixes");function MD(t){return t.textDocument&&t.textDocument.completion&&t.textDocument.completion.completionItem&&t.textDocument.completion.completionItem.documentationFormat}o(MD,"getCompletionItemDocumentationFormat");function OD(t){return t.textDocument&&t.textDocument.hover&&t.textDocument.hover.contentFormat}o(OD,"getHoverContentFormat");function wD(t){return t.textDocument&&t.textDocument.foldingRange&&t.textDocument.foldingRange.lineFoldingOnly}o(wD,"getLineFoldingOnly");function xD(t){let e=t.textDocument&&t.textDocument.foldingRange&&t.textDocument.foldingRange.rangeLimit;return e==null||typeof e=="boolean"||isNaN(e)?e=Number.MAX_VALUE:typeof e!="number"&&(e=Number(e)),e}o(xD,"getRangeLimit");function LD(t){ye.setCapabilities({completion:{completionItem:{deprecatedSupport:PD(t),documentationFormat:MD(t),snippetSupport:ID(t)}},hover:{contentFormat:OD(t)},foldingRange:{lineFoldingOnly:wD(t),rangeLimit:xD(t)}})}o(LD,"setServiceCapabilities");Q.onInitialized(()=>{Yn&&Q.client.register(Ne.DidChangeConfigurationNotification.type)});Q.onInitialize(t=>{LD(t.capabilities),Ii=t.capabilities.workspace&&t.capabilities.workspace.applyEdit===!0,Zh=t.capabilities.workspace&&t.capabilities.workspace.workspaceEdit&&t.capabilities.workspace.workspaceEdit.documentChanges===!0,Yn=t.capabilities.workspace&&t.capabilities.workspace.configuration===!0;let e=t.capabilities.textDocument&&t.capabilities.textDocument.rename&&t.capabilities.textDocument.rename.prepareSupport===!0,n=t.capabilities.textDocument&&t.capabilities.textDocument.semanticTokens;return em=ND(t.capabilities),{capabilities:{textDocumentSync:Ne.TextDocumentSyncKind.Incremental,codeActionProvider:Ii,completionProvider:{resolveProvider:!0,triggerCharacters:["="," ","$","-"]},executeCommandProvider:Ii?{commands:[ut.CommandIds.LOWERCASE,ut.CommandIds.UPPERCASE,ut.CommandIds.EXTRA_ARGUMENT,ut.CommandIds.DIRECTIVE_TO_BACKSLASH,ut.CommandIds.DIRECTIVE_TO_BACKTICK,ut.CommandIds.FLAG_TO_CHOWN,ut.CommandIds.FLAG_TO_COPY_FROM,ut.CommandIds.FLAG_TO_HEALTHCHECK_INTERVAL,ut.CommandIds.FLAG_TO_HEALTHCHECK_RETRIES,ut.CommandIds.FLAG_TO_HEALTHCHECK_START_PERIOD,ut.CommandIds.FLAG_TO_HEALTHCHECK_TIMEOUT,ut.CommandIds.CONVERT_TO_AS,ut.CommandIds.REMOVE_EMPTY_CONTINUATION_LINE]}:void 0,documentFormattingProvider:!0,documentRangeFormattingProvider:!0,documentOnTypeFormattingProvider:{firstTriggerCharacter:"\\",moreTriggerCharacter:["`"]},hoverProvider:!0,documentSymbolProvider:!0,documentHighlightProvider:!0,renameProvider:e?{prepareProvider:!0}:!0,definitionProvider:!0,signatureHelpProvider:{triggerCharacters:["-","[",","," ","="]},documentLinkProvider:{resolveProvider:!0},semanticTokensProvider:n?{full:{delta:!1},legend:{tokenTypes:[Ne.SemanticTokenTypes.keyword,Ne.SemanticTokenTypes.comment,Ne.SemanticTokenTypes.parameter,Ne.SemanticTokenTypes.property,Ne.SemanticTokenTypes.namespace,Ne.SemanticTokenTypes.class,Ne.SemanticTokenTypes.macro,Ne.SemanticTokenTypes.string,Ne.SemanticTokenTypes.variable,Ne.SemanticTokenTypes.operator],tokenModifiers:[Ne.SemanticTokenModifiers.declaration,Ne.SemanticTokenModifiers.definition,Ne.SemanticTokenModifiers.deprecated]}}:void 0,foldingRangeProvider:!0}}});function td(t){let e=kt.ValidationSeverity.WARNING,n=kt.ValidationSeverity.WARNING,r=kt.ValidationSeverity.WARNING,i=kt.ValidationSeverity.WARNING,a=kt.ValidationSeverity.WARNING,s=kt.ValidationSeverity.WARNING,c=kt.ValidationSeverity.WARNING,u=kt.ValidationSeverity.WARNING,l=kt.ValidationSeverity.WARNING;return t&&(e=cn(t.deprecatedMaintainer),n=cn(t.directiveCasing),r=cn(t.emptyContinuationLine),i=cn(t.instructionCasing),a=cn(t.instructionCmdMultiple),s=cn(t.instructionEntrypointMultiple),c=cn(t.instructionHealthcheckMultiple),u=cn(t.instructionJSONInSingleQuotes),l=cn(t.instructionWorkdirRelative)),{deprecatedMaintainer:e,directiveCasing:n,emptyContinuationLine:r,instructionCasing:i,instructionCmdMultiple:a,instructionEntrypointMultiple:s,instructionHealthcheckMultiple:c,instructionJSONInSingleQuotes:u,instructionWorkdirRelative:l}}o(td,"convertValidatorConfiguration");function go(t){if(Yn)FD(t.uri).then(e=>{let n=td(e),r=ye.validate(t.getText(),n);Q.sendDiagnostics({uri:t.uri,diagnostics:r})});else{let e=ye.validate(t.getText(),ed);Q.sendDiagnostics({uri:t.uri,diagnostics:e})}}o(go,"validateTextDocument");function cn(t){switch(t){case"ignore":return kt.ValidationSeverity.IGNORE;case"warning":return kt.ValidationSeverity.WARNING;case"error":return kt.ValidationSeverity.ERROR}return null}o(cn,"getSeverity");function nd(t){let e=Pi.get(t);return e||(e=Q.workspace.getConfiguration({section:"docker.languageserver.formatter",scopeUri:t}),Pi.set(t,e)),e}o(nd,"getFormatterConfiguration");function FD(t){let e=Pr.get(t);return e||(e=Q.workspace.getConfiguration({section:"docker.languageserver.diagnostics",scopeUri:t}),Pr.set(t,e)),e}o(FD,"getValidatorConfiguration");Q.onNotification(Ne.DidChangeConfigurationNotification.type,()=>{nm()});function tm(t){let e=[];for(let n in Gt)e.push({section:t,scopeUri:n});return e}o(tm,"getConfigurationItems");function qD(){let t=tm("docker.languageserver.formatter");Pi.clear(),Q.workspace.getConfiguration(t).then(e=>{for(let n=0;n<e.length;n++){let r=t[n].scopeUri;e[n]&&!Pi.has(r)&&Pi.set(r,Promise.resolve(e[n]))}})}o(qD,"refreshFormatterConfigurations");function HD(){let t=tm("docker.languageserver.diagnostics");Pr.clear(),Q.workspace.getConfiguration(t).then(e=>{let n=[];for(let r=0;r<e.length;r++){let i=t[r].scopeUri;e[r]&&!Pr.has(i)&&(Pr.set(i,Promise.resolve(e[r])),n.push(i))}for(let r of n)go(Gt[r])})}o(HD,"refreshValidatorConfigurations");function nm(){qD(),HD()}o(nm,"refreshConfigurations");Q.onDidChangeConfiguration(t=>{if(Yn)nm();else{let e=t.settings;e.docker&&e.docker.languageserver?(e.docker.languageserver.diagnostics&&(ed=td(e.docker.languageserver.diagnostics)),e.docker.languageserver.formatter&&(Sn=e.docker.languageserver.formatter)):(Sn=null,ed=td(null)),Object.keys(Gt).forEach(n=>{go(Gt[n])})}});Q.onCompletion(t=>Xe(t.textDocument.uri).then(e=>e?ye.computeCompletionItems(e.getText(),t.position):null));Q.onSignatureHelp(t=>Xe(t.textDocument.uri).then(e=>e!==null?ye.computeSignatureHelp(e.getText(),t.position):{signatures:[],activeSignature:null,activeParameter:null}));Q.onCompletionResolve(t=>ye.resolveCompletionItem(t));Q.onHover(t=>Xe(t.textDocument.uri).then(e=>e?ye.computeHover(e.getText(),t.position):null));Q.onDocumentHighlight(t=>Xe(t.textDocument.uri).then(e=>e?ye.computeHighlightRanges(e.getText(),t.position):[]));Q.onCodeAction(t=>{if(Ii&&t.context.diagnostics.length>0){let e=ye.computeCodeActions(t.textDocument,t.range,t.context);return em?Xe(t.textDocument.uri).then(n=>{let r=[];for(let i of e){let a={title:i.title,kind:Ne.CodeActionKind.QuickFix},s=rm(t.textDocument.uri,n,i.command,i.arguments);s&&(a.edit=s),r.push(a)}return r}):e}return[]});function rm(t,e,n,r){let i=ye.computeCommandEdits(e.getText(),n,r);if(i)if(Zh){let a=Ne.VersionedTextDocumentIdentifier.create(t,e.version);return{documentChanges:[Ne.TextDocumentEdit.create(a,i)]}}else return{changes:{[t]:i}};return null}o(rm,"computeWorkspaceEdit");Q.onExecuteCommand(t=>{if(Ii){let e=t.arguments[0];Xe(e).then(n=>{if(n){let r=rm(e,n,t.command,t.arguments);r&&Q.workspace.applyEdit(r)}return null})}});Q.onDefinition(t=>Xe(t.textDocument.uri).then(e=>e?ye.computeDefinition(t.textDocument,e.getText(),t.position):null));Q.onRenameRequest(t=>Xe(t.textDocument.uri).then(e=>{if(e){let n=ye.computeRename(t.textDocument,e.getText(),t.position,t.newName);return{changes:{[t.textDocument.uri]:n}}}return null}));Q.onPrepareRename(t=>Xe(t.textDocument.uri).then(e=>e?ye.prepareRename(e.getText(),t.position):null));Q.onDocumentSymbol(t=>Xe(t.textDocument.uri).then(e=>e?ye.computeSymbols(t.textDocument,e.getText()):[]));Q.onDocumentFormatting(t=>Xe(t.textDocument.uri).then(e=>{if(Yn)return nd(e.uri).then(n=>{if(e){let r=t.options;return r.ignoreMultilineInstructions=n!==null&&n.ignoreMultilineInstructions,ye.format(e.getText(),r)}return[]});if(e){let n=t.options;return n.ignoreMultilineInstructions=Sn!==null&&Sn.ignoreMultilineInstructions,ye.format(e.getText(),n)}return[]}));Q.onDocumentRangeFormatting(t=>Xe(t.textDocument.uri).then(e=>{if(Yn)return nd(e.uri).then(n=>{if(e){let r=t.options;return r.ignoreMultilineInstructions=n!==null&&n.ignoreMultilineInstructions,ye.formatRange(e.getText(),t.range,r)}return[]});if(e){let n=t.options;return n.ignoreMultilineInstructions=Sn!==null&&Sn.ignoreMultilineInstructions,ye.formatRange(e.getText(),t.range,t.options)}return[]}));Q.onDocumentOnTypeFormatting(t=>Xe(t.textDocument.uri).then(e=>{if(Yn)return nd(e.uri).then(n=>{if(e){let r=t.options;return r.ignoreMultilineInstructions=n!==null&&n.ignoreMultilineInstructions,ye.formatOnType(e.getText(),t.position,t.ch,r)}return[]});if(e){let n=t.options;return n.ignoreMultilineInstructions=Sn!==null&&Sn.ignoreMultilineInstructions,ye.formatOnType(e.getText(),t.position,t.ch,t.options)}return[]}));Q.onDocumentLinks(t=>Xe(t.textDocument.uri).then(e=>e?ye.computeLinks(e.getText()):[]));Q.onDocumentLinkResolve(t=>ye.resolveLink(t));Q.onFoldingRanges(t=>Xe(t.textDocument.uri).then(e=>e?ye.computeFoldingRanges(e.getText()):[]));Q.onDidOpenTextDocument(t=>{let e=lo.TextDocument.create(t.textDocument.uri,t.textDocument.languageId,t.textDocument.version,t.textDocument.text);Gt[t.textDocument.uri]=e,go(e)});Q.languages.semanticTokens.on(t=>Xe(t.textDocument.uri).then(e=>e?ye.computeSemanticTokens(e.getText()):{data:[]}));Q.onDidChangeTextDocument(t=>{let e=Gt[t.textDocument.uri],n=e.getText(),r=n,i=t.contentChanges;for(let a=0;a<i.length;a++){let s=i[a];if(!s.range&&!s.rangeLength){n=s.text,e=lo.TextDocument.create(t.textDocument.uri,e.languageId,t.textDocument.version,n);break}let c=e.offsetAt(s.range.start),u=null;s.range.end?u=e.offsetAt(s.range.end):u=c+s.rangeLength,n=n.substring(0,c)+s.text+n.substring(u),e=lo.TextDocument.create(t.textDocument.uri,e.languageId,t.textDocument.version,n)}Gt[t.textDocument.uri]=e,r!==n&&go(e)});Q.onDidCloseTextDocument(t=>{Pr.delete(t.textDocument.uri),Q.sendDiagnostics({uri:t.textDocument.uri,diagnostics:[]}),delete Gt[t.textDocument.uri]});Q.listen();
