try{let a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},b=(new a.Error).stack;b&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[b]="da431762-af9b-4737-9d3f-2b8824ab5d95",a._sentryDebugIdIdentifier="sentry-dbid-da431762-af9b-4737-9d3f-2b8824ab5d95")}catch(a){}"use strict";exports.id=3084,exports.ids=[3084],exports.modules={5998:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E7:()=>m,Kq:()=>p,R4:()=>n,checkAnthropicAuthStatus:()=>o});var e=c(944);c(7004);var f=c(74688),g=c(13234),h=c(55511),i=c.n(h),j=c(36676),k=a([g]);g=(k.then?(await k)():k)[0];let q=null;async function l(){return q||(q=(await (0,f.S)()).anthropic),q}async function m(){try{let a=await l(),b=function(){let a=i().randomBytes(32).toString("base64url"),b=i().createHash("sha256").update(a).digest("base64url");return{verifier:a,challenge:b}}(),c=i().randomBytes(32).toString("base64url"),d=new URL(a.authorizeUrl);d.searchParams.set("code","true"),d.searchParams.set("client_id",a.clientId),d.searchParams.set("response_type","code"),d.searchParams.set("redirect_uri",a.redirectUri),d.searchParams.set("scope",a.scopes.join(" ")),d.searchParams.set("state",c),d.searchParams.set("code_challenge",b.challenge),d.searchParams.set("code_challenge_method","S256");let e={verifier:b.verifier,state:c,timestamp:Date.now()};return g.Hv.upsert({key:"anthropic-oauth-data",value:JSON.stringify(e)}),{success:!0,authUrl:d.toString(),verifier:b.verifier,state:c}}catch(a){return console.error("Error starting OAuth flow:",a),{success:!1,error:"Failed to start OAuth flow"}}}async function n(a){if(!a)return{success:!1,error:"Missing authorization code"};try{let b,c=await l(),[d,e]=a.includes("#")?a.split("#"):[a,null],f=g.Hv.get("anthropic-oauth-data");if(!f)return{success:!1,error:"OAuth session not found. Please start the authentication process again."};try{b=JSON.parse(f)}catch(a){return{success:!1,error:"Invalid OAuth session data"}}if(Date.now()-b.timestamp>6e5)return g.Hv.delete("anthropic-oauth-data"),{success:!1,error:"OAuth session expired. Please try again."};let h={grant_type:"authorization_code",code:d,redirect_uri:c.redirectUri,client_id:c.clientId,code_verifier:b.verifier,state:e||b.state},i=await fetch(c.tokenUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!i.ok){let a=await i.text();throw Error(`Token exchange failed: ${a}`)}let j=await i.json(),k=await fetch(c.apiKeyUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j.access_token}`},body:JSON.stringify({})});if(!k.ok){let a=await k.text();throw Error(`API key creation failed: ${a}`)}let m=await k.json();return g.FI.upsert({provider:"Anthropic",apikey:m.raw_key,google_Oauth:JSON.stringify({type:"oauth_generated",key_id:m.id,key_name:m.name,created_at:m.created_at,partial_key_hint:m.partial_key_hint})}),g.Hv.delete("anthropic-oauth-data"),{success:!0,apiKey:m.raw_key,keyName:m.name}}catch(a){return console.error("Error in OAuth callback:",a),g.Hv.delete("anthropic-oauth-data"),{success:!1,error:a.message||"Failed to complete OAuth flow"}}}async function o(){try{let a=g.FI.getByProvider("Anthropic");if(!a?.apikey)return{authenticated:!1};let b=null;if(a.google_Oauth)try{b=JSON.parse(a.google_Oauth)}catch{}return{authenticated:!0,isOAuthGenerated:b?.type==="oauth_generated",keyName:b?.key_name,keyHint:b?.partial_key_hint}}catch(a){return console.error("Error checking auth status:",a),{authenticated:!1}}}async function p(){try{let a=g.FI.getByProvider("Anthropic");if(a?.google_Oauth)try{let b=JSON.parse(a.google_Oauth);"oauth_generated"===b.type&&g.FI.upsert({provider:"Anthropic",apikey:"",google_Oauth:""})}catch{}return{success:!0}}catch(a){return console.error("Error during logout:",a),{success:!1,error:"Failed to logout"}}}(0,j.D)([m,n,o,p]),(0,e.A)(m,"00b89bb6be3fa9addff10ae3c9891c9da59aa415e7",null),(0,e.A)(n,"4098181cb8335db6fb724c1bce6c6e2bd777095ffb",null),(0,e.A)(o,"004bdb222160fa159aa02f4174dbdc357efe8db1e8",null),(0,e.A)(p,"008e4ab70bd2d55f514cf3d52c16c0f47e2bb7c8ce",null),d()}catch(a){d(a)}})},6088:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>h});var e=c(43084),f=c(3999),g=a([e]);e=(g.then?(await g)():g)[0];let h={context:{secrets:{delete:async a=>await f.A.delete(`${await (0,e.bm)()}/secret/${a}`),store:async(a,b)=>await f.A.post(`${await (0,e.bm)()}/secrets`,{key:a,value:b})},globalState:{update:async(a,b)=>await f.A.post(`${await (0,e.bm)()}/globalState`,{key:a,value:b})}},window:{showErrorMessage:async a=>await f.A.post(`${await (0,e.bm)()}/showErrorMessage`,{message:a}),showWarningMessage:async a=>await f.A.post(`${await (0,e.bm)()}/showWarningMessage`,{message:a}),showInformationMessage:async a=>await f.A.post(`${await (0,e.bm)()}/showInformationMessage`,{message:a})},commands:{executeCommand:async a=>await f.A.post(`${await (0,e.bm)()}/executeCommand`,{command:a})},workspace:{getConfiguration:()=>({update:async(a,b)=>await f.A.post(`${await (0,e.bm)()}/config`,{key:a,value:b})})},newFileWithCode:async a=>await f.A.post(`${await (0,e.bm)()}/newFileWithCode`,{code:a}),insertCode:async a=>await f.A.post(`${await (0,e.bm)()}/insertCode`,{code:a}),getSelectedText:async()=>(await f.A.get(`${await (0,e.bm)()}/getSelectedText`)).data,getLanguage:async()=>{let a=await f.A.get(`${await (0,e.bm)()}/language`);return a.data.includes("react")?"jsx":a.data},getFileName:async()=>(await f.A.get(`${await (0,e.bm)()}/filename`)).data,getIdeLanguage:async()=>(await f.A.get(`${await (0,e.bm)()}/ideLanguage`)).data,getVersion:async()=>(await f.A.get(`${await (0,e.bm)()}/version`)).data};d()}catch(a){d(a)}})},33295:(a,b,c)=>{c.d(b,{G:()=>q});var d=c(55511),e=c.n(d),f=c(29021),g=c(5230),h=c(81630),i=c(91645),j=c(21820),k=c(33873),l=c.n(k),m=c(79551),n=c(74688);let o=null,p="https://developers.google.com/gemini-code-assist/auth_failure_gemini";class q{constructor(){this.clientInitialized=!1,this.client=new g.OAuth2Client}async ensureOAuthConfig(){o||(o=(await (0,n.S)()).gemini),this.clientInitialized||(this.client=new g.OAuth2Client(o.clientId,o.clientSecret,"http://localhost"),this.client.on("tokens",async a=>{await this.cacheCredentials(a)}),this.clientInitialized=!0)}getCodeGPTCredentialPath(){return l().join(j.homedir(),".codegpt","gemini-oauth.json")}async cacheCredentials(a){let b=this.getCodeGPTCredentialPath();await f.promises.mkdir(l().dirname(b),{recursive:!0});let c=JSON.stringify(a,null,2);await f.promises.writeFile(b,c)}async loadCachedCredentials(){await this.ensureOAuthConfig();try{let a=this.getCodeGPTCredentialPath(),b=await f.promises.readFile(a,"utf-8");this.client.setCredentials(JSON.parse(b));let{token:c}=await this.client.getAccessToken();if(!c)return!1;return await this.client.getTokenInfo(c),!0}catch{return!1}}async clearCachedCredentials(){try{await f.promises.rm(this.getCodeGPTCredentialPath(),{force:!0})}catch{}}getAvailablePort(){return new Promise((a,b)=>{let c=0;try{let d=i.createServer();d.listen(0,()=>{c=d.address().port}),d.on("listening",()=>{d.close(),d.unref()}),d.on("error",a=>b(a)),d.on("close",()=>a(c))}catch(a){b(a)}})}async fetchUserInfo(){try{let{token:a}=await this.client.getAccessToken();if(!a)return{};let b=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${a}`}});if(!b.ok)return console.error("Failed to fetch user info:",b.status,b.statusText),{};return await b.json()}catch(a){return console.error("Error retrieving user info:",a),{}}}async authWithWeb(){await this.ensureOAuthConfig();let a=await this.getAvailablePort(),b=`http://localhost:${a}/oauth2callback`,c=e().randomBytes(32).toString("hex");return{authUrl:this.client.generateAuthUrl({client_id:o.clientId,redirect_uri:b,access_type:"offline",scope:o.scopes,state:c}),loginCompletePromise:new Promise((d,e)=>{let f=h.createServer(async(g,h)=>{try{g.url.includes("/oauth2callback")||(h.writeHead(301,{Location:p}),h.end(),e(Error("Unexpected request: "+g.url)));let f=new m.URL(g.url,`http://localhost:${a}`).searchParams;if(f.get("error"))h.writeHead(301,{Location:p}),h.end(),e(Error(`Error during authentication: ${f.get("error")}`));else if(f.get("state")!==c)h.end("State mismatch. Possible CSRF attack"),e(Error("State mismatch. Possible CSRF attack"));else if(f.get("code")){let{tokens:a}=await this.client.getToken({code:f.get("code"),redirect_uri:b});this.client.setCredentials(a),await this.cacheCredentials(a),this.fetchUserInfo().catch(()=>{}),h.writeHead(301,{Location:"https://developers.google.com/gemini-code-assist/auth_success_gemini"}),h.end(),d()}else e(Error("No code found in request"))}catch(a){e(a)}finally{f.close()}});f.listen(a)})}}async getAuthenticatedClient(){return await this.loadCachedCredentials()?this.client:null}async isAuthenticated(){return await this.loadCachedCredentials()}}},43084:(a,b,c)=>{c.a(a,async(a,d)=>{try{let o;c.d(b,{AX:()=>y,BN:()=>Z,Bj:()=>D,CA:()=>ai,CG:()=>av,CZ:()=>r,Ct:()=>G,DH:()=>an,Dk:()=>p,Hu:()=>v,I3:()=>al,IO:()=>ao,JP:()=>U,Jw:()=>t,MP:()=>C,RK:()=>am,S_:()=>aa,So:()=>ac,TG:()=>B,Tq:()=>X,UU:()=>_,Vn:()=>aw,WP:()=>O,Ww:()=>W,XQ:()=>ak,Yp:()=>ax,Z_:()=>at,_P:()=>R,_R:()=>ar,_S:()=>I,_X:()=>aq,_f:()=>u,aM:()=>K,bm:()=>ag,fm:()=>ae,gn:()=>M,gv:()=>$,hq:()=>E,iJ:()=>L,iR:()=>aj,ju:()=>ah,lG:()=>Y,le:()=>A,li:()=>au,m_:()=>F,o0:()=>af,pc:()=>Q,pe:()=>N,ph:()=>ad,s_:()=>w,t2:()=>ab,vE:()=>T,vK:()=>q,vR:()=>J,vV:()=>V,vk:()=>z,wt:()=>x,x6:()=>s,yH:()=>H,zU:()=>P});var e=c(944);c(7004);var f=c(13234),g=c(39040),h=c(6088),i=c(3999),j=c(54777),k=c(31921),l=c(31421),m=c(36676),n=a([f,h]);[f,h]=n.then?(await n)():n;let p=async a=>{i.A.post(`${await ag()}/copy`,{code:a})},q=async()=>{try{let a=await fetch(`${await ag()}/paste`);return await a.text()}catch(a){return console.error("Error pasting text:",a),""}},r=async a=>{i.A.post(`${await ag()}/openUrl`,{url:a})},s=async a=>i.A.post(`${await ag()}/openWebviewUrl`,{url:a}).then(a=>a.data),t=async a=>i.A.post(`${await ag()}/insertCode`,{code:a}).then(a=>a.data),u=async a=>i.A.post(`${await ag()}/insertCodeInTerminal`,{code:a}).then(a=>a.data),v=async(a,b)=>i.A.post(`${await ag()}/config`,{key:a,value:b}).then(a=>a.data),w=async(a,b)=>{f.FI.upsert({provider:b,organization_id:a})},x=async(a,b)=>{let c=f.FI.getByProvider(b),d=!c||!c.apikey;return f.FI.upsert({provider:b,apikey:a}),{isFirstConnection:d}},y=async(a,b)=>{let c=f.FI.getByProvider(b),d=!c||!c.custom_link;return f.FI.upsert({provider:b,custom_link:a}),{isFirstConnection:d}},z=async a=>{let b=f.FI.getByProvider("Google AI Studio"),c=!b||!b.google_Oauth;return f.FI.upsert({provider:"Google AI Studio",google_Oauth:a}),{ok:!0,error:"",isFirstConnection:c}},A=async(a,b)=>{f.$W.upsert({provider:b,max_tokens:Number(a)})},B=async(a,b)=>{f.$W.upsert({provider:b,temperature:Number(a)})},C=async(a,b)=>{f.$W.upsert({provider:b,memory:Number(a)})},D=async(a,b)=>{f.FI.upsert({provider:b,region:a})},E=async(a,b)=>{f.FI.upsert({provider:b,access_key_id:a})},F=async(a,b)=>{f.FI.upsert({provider:b,secret_access_key:a})},G=async(a,b)=>{f.FI.upsert({provider:b,session_token:a})},H=async a=>i.A.post(`${await ag()}/changeIframeUrl`,{url:a}).then(a=>a.data),I=async a=>(f.DV.upsert({enabled:+!!a}),i.A.post(`${await ag()}/autocompleteEnabled`,{value:+!!a}).then(a=>a.data)),J=async a=>{f.DV.upsert({max_tokens:Number(a)})},K=async a=>{let[b,c]=a.split(" - ");f.DV.upsert({model:c,provider:b})},L=async a=>{f.DV.upsert({delay:Number(a)})},M=async()=>i.A.get(`${await ag()}/cleanCache`).then(a=>a.data),N=async()=>({selectedCode:await i.A.get(`${await ag()}/getSelectedText/full`).then(a=>a.data)}),O=async()=>await h.A.getFileName(),P=async()=>{let a=await new Promise(a=>{(0,l.exec)("ollama ls",b=>{a(!b)})});if(a)return!0;try{let b=await fetch("http://localhost:54112/1/api/ollama/tags");a=200===b.status}catch(b){console.error("Error checking Ollama status:",b),a=!1}return a},Q=async()=>await i.A.get(`${await ag()}/getProjectStructure`).then(a=>a.data),R=async(a,b,c)=>{let d=new URLSearchParams({...a?{filePath:a}:{},...b?{from:b.toString()}:{},...c?{to:c.toString()}:{}});return await i.A.get(`${await ag()}/getFileContent?${d.toString()}`).then(a=>a.data)},S=new Map,T=async()=>{let a=await ag();if(S.has(a))return i.A.get(`${a}/getAllPathsFromProject`).then(b=>{S.set(a,b.data)}).catch(()=>{S.set(a,[])}),S.get(a);let b=await i.A.get(`${a}/getAllPathsFromProject`).then(a=>a.data).catch(()=>[]);return S.set(a,b),b},U=async({filePath:a,content:b})=>await i.A.post(`${await ag()}/writeFileContent`,{filePath:a,content:b}).then(a=>a.data),V=async({folderPath:a})=>await i.A.post(`${await ag()}/createFolder`,{folderPath:a}).then(a=>a.data),W=async({filePath:a})=>{console.log("[deleteFile] Attempting to delete file:",a);try{return(await i.A.post(`${await ag()}/deleteFile`,{filePath:a})).data}catch(b){return b.response?.data?.error||`Failed to delete file: ${a}`}},X=async({filePath:a,absolutePath:b=!1,startLine:c,endLine:d})=>await i.A.post(`${await ag()}/openFile`,{filePath:a,startLine:c,endLine:d,absolutePath:b}).then(a=>a.data),Y=async a=>{let b=await T()||[];return b.length?new j.A(b).search(a,{limit:6}):[]},Z=async()=>{let a=await T()||[];if(!a.length)return[];let b=new Set;for(let c of a){let a=c?.split("/"),d=a?.length>1?a?.pop():c,e=d?.split(".")??[],f=e?.length>1&&e?.pop();f&&b.add(f)}return Array.from(b)},$=async()=>await i.A.get(`${await ag()}/extensionVersion`).then(a=>!1===a.data.ok?(console.error("Error in getExtensionVersion:",a.data.error),null):a.data),_=async({model:a,fromMarketplace:b,graph:c,provider:d})=>{console.log({model:a,fromMarketplace:b,provider:d,graph:c}),await i.A.post(`${await ag()}/model`,{model:a,fromMarketplace:b,provider:d,graph:c})},aa=async a=>(f.mf.upsert({enabled:+!!a}),await i.A.post(`${await ag()}/autoSelect`,{enabled:a}).then(a=>a.data)),ab=async()=>await i.A.get(`${await ag()}/autoSelect`).then(a=>a.data),ac=async a=>{let b=f.$W.getByProvider(a);return b?.memory??10},ad=async(a,b)=>{f.Hv.upsert({key:a,value:b})},ae=async a=>f.Hv.get(a),af=async()=>f.jM.get(),ag=async()=>{let a=await ah();return a.includes("?")&&(a=a.split("?")[0]),console.log({extensionUrl:`http://localhost:${a}`}),`http://localhost:${a}`},ah=async()=>{let a=(await (0,k.b3)()).get("referer");return a&&a.split("/")[3]||"54113"},ai=async()=>{try{let a=await fetch(`${await ag()}/workspaceFolder`);return await a.text()}catch(a){return console.error("Error getting workspace folder:",a),""}},aj=async()=>{try{let a=await ai(),{ok:b}=JSON.parse(a);return!1!==b}catch{return!0}},ak=async({type:a,currentKey:b})=>{let c=f.Hv.getAll().filter(c=>c.key.startsWith(`${a}-`)&&!c.key.startsWith(`${a}-${b}`));c?.forEach(a=>f.Hv.delete(a.key))},al=async()=>{["mention-prompts-all","recommended-codegpt-models-all","agent-default-all","extension-version-all","funnel-all","marketplace-agents-all","marketplace-groups-all","providers-all"].forEach(a=>f.Hv.delete(a))},am=async()=>{if(o)return o;let a=await (0,g.zf)();return o=a.json,a.json},an=async()=>{try{let a=await ah().catch(()=>"54113"),b=await fetch(`http://localhost:${a}/api/codegptplusbeta/me`);if(!b.ok)throw Error(`HTTP error! status: ${b.status}`);let c=await b.json();if(c?.planId==="prod_S3MhTzkaqqx3CG"){let a=await aq();if(a&&a.length>0)return{id:a[0].id,label:a[0].name,image:"",fromMarketplace:!0,description:a[0].name};return null}}catch(a){console.error("Error checking for byok plan:",a)}return await am()},ao=async()=>(await (0,g.GT)()).json,ap="favoritesModels",aq=async()=>await ae(ap)||[],ar=async a=>await ad(ap,a),as="cachedCredits",at=async()=>await ae(as)||null,au=async a=>{await ad(as,{balanceUsd:a,updatedAt:Date.now()})},av=async a=>{let b=f.FI.getByProvider(a);return b?.apikey},aw=async a=>{fetch(`${await ag()}/chatLog`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a})}).catch(a=>{console.log({e:a})})},ax=async()=>{let{checkGeminiAuthStatus:a}=await Promise.resolve().then(c.bind(c,49091)),{checkClaudeCodeAuthStatus:b}=await Promise.resolve().then(c.bind(c,80346)),{checkAnthropicAuthStatus:d}=await Promise.resolve().then(c.bind(c,5998)),e=f.FI.getAll(),g=[];for(let a of e)(a.apikey||a.google_Oauth||a.access_key_id||a.secret_access_key)&&g.push(a.provider);try{let[c,e,f]=await Promise.all([a(),b(),d()]);c.authenticated&&!g.includes("gemini-cli")&&g.push("gemini-cli"),e.authenticated&&!g.includes("claudecode")&&g.push("claudecode"),f.authenticated&&f.isOAuthGenerated&&!g.includes("anthropic")&&g.push("anthropic")}catch(a){console.error("Error checking OAuth status:",a)}return{hasCredentials:g.length>0,providers:g}};(0,m.D)([p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,H,I,J,K,L,N,O,P,Q,R,Y,T,U,Z,$,G,_,M,X,aa,ab,ac,ad,ae,ag,ah,al,ai,aj,ak,am,an,ao,af,aw,aq,ar,at,au,av,ax,V,W]),(0,e.A)(p,"7fd7c079cedcabc3eed8a52f53c1c0aeb484c0aaea",null),(0,e.A)(q,"7f51bf8f9a316017aec03ca8bfe61090fcac719ef7",null),(0,e.A)(r,"7fa2772590e0699d1d010337e7a0da8faaa63489b9",null),(0,e.A)(s,"7f075fe4eb4779b86e3548069ec7a3dbf2bd633386",null),(0,e.A)(t,"7f495aa5ba681768ae876b12b07e49c3ace1fe5f07",null),(0,e.A)(u,"7f9e11aa20cbf70fd693670b982bb4c4bf1f121f94",null),(0,e.A)(v,"7f71f42ef6c3e44445dc93223b82e9bd0c8737d82a",null),(0,e.A)(w,"7f1027f312a48b9b4c43597183afb9426c759dfa72",null),(0,e.A)(x,"7fbcfab52cbeba2f54194c42b3ce70f49ff67d7a04",null),(0,e.A)(y,"7fd2b94ba70461bc2a1a34ca2bdb03a3beb9347dd0",null),(0,e.A)(z,"7f03e09697866cfd523c243c35ecc9bbde5bd70b3f",null),(0,e.A)(A,"7feda8ea06797d45fba03917d4282931722d5de9b0",null),(0,e.A)(B,"7fc53c467f6c52d9a1c46547dbe2c00862add96f9c",null),(0,e.A)(C,"7f4a779a390254f3882b1edee640e272656a859b41",null),(0,e.A)(D,"7f66f6555fa465797e1e794094dc14edd45ee65339",null),(0,e.A)(E,"7ffc29737f323546db42860dbca61a286ff9db739a",null),(0,e.A)(F,"7f4a51bc04fa62209307d4099477db395b23a9ff04",null),(0,e.A)(H,"7feec6c8419d45bc80cea789d6391feab6d825a559",null),(0,e.A)(I,"7f7b71350c2213e0b54967d46d2327ff38a459d292",null),(0,e.A)(J,"7f900f7135fcc630d11284906428e0d713cfcf6466",null),(0,e.A)(K,"7fe28747baa118b78454c25beb4bbcd3d4fb8af0a4",null),(0,e.A)(L,"7f7470d48614b97c951dbecd0f3f734ece8a1af7a6",null),(0,e.A)(N,"7f4e0a7de644d4ce512f66d13794a16f6407c5ecd7",null),(0,e.A)(O,"7f883708d4441cd4106ff2d6041a8419f1ba6e27e8",null),(0,e.A)(P,"7f712124ee358526ba7ddac484deee3be8b4d3dd55",null),(0,e.A)(Q,"7f0c00faa81fe4c271c3ebbc19ec60dc6252718982",null),(0,e.A)(R,"7f3ff871e7be0a3c12edaa6b8e072521802686c6a8",null),(0,e.A)(Y,"7f6ca2797d1b0c63c7631bc25e258b953a09812826",null),(0,e.A)(T,"7f78fe083c653587e42a5d4e7e46b514a492e4ff16",null),(0,e.A)(U,"7fb5b3804e663a58d4ca4dcb612358e1e3742d8d27",null),(0,e.A)(Z,"7f3c98ef67853dd18a9ff3a4fac6249ef93e0f6cbe",null),(0,e.A)($,"7f59c1c2d286e00b972137f6c18ac0978fad829f5d",null),(0,e.A)(G,"7f7be1ed0620e8a9f9b6528f70cd1481557e3d2663",null),(0,e.A)(_,"7fadfa9cd367703ceb7cbe3cdd746e2e4948bb0c7b",null),(0,e.A)(M,"7f8eaa64864e107c8e31dbd0c2d07234753a12deae",null),(0,e.A)(X,"7f2ed82e8afcbde9d20d70a60385dcb2166002e063",null),(0,e.A)(aa,"7fac33e97d15e8fcb8742f831345bb3cd89ccd1b25",null),(0,e.A)(ab,"7fdd418bd9fc00a6cac5780bba79b7134ed56ff970",null),(0,e.A)(ac,"7fe7d140db3d47c5de91623876ee950544e652f861",null),(0,e.A)(ad,"7fb625e96a99dffbf7df8a297d6ff6a913f8063767",null),(0,e.A)(ae,"7f202c26e4c9e6593884a8478a3eb31d677739d0fd",null),(0,e.A)(ag,"7f595d1d9e0d0f15ec1d3a116d136260c81b7d6414",null),(0,e.A)(ah,"7f9ef971166898bbd29f126efe0921d8f2751a337e",null),(0,e.A)(al,"7f4737f6893f620f02bf343fd37a23ef1d7da33e4a",null),(0,e.A)(ai,"7f47c6c3719e045dd6414c40d18b691fcf6588d5a2",null),(0,e.A)(aj,"7fcc9f0296a88e04a8de8e2a0e59fe0d9dfa34b6a4",null),(0,e.A)(ak,"7f5801ea388ae142c5751a5e4b40753d0e4cff58d4",null),(0,e.A)(am,"7fffefdc1044c10ccf03aa3b121b891388af9e2abf",null),(0,e.A)(an,"7fbb0a132452dd31b0312d7ffbfc23ef0935252ad6",null),(0,e.A)(ao,"7f145e5ee51b14bd817a4e0c3a3ff7afce32f00db0",null),(0,e.A)(af,"7f9a0b7c5bd883e69ca986b796fabc3b64dfc75021",null),(0,e.A)(aw,"7fdcc4b0a2dfc2152f19411e263df51afafd0d0ab7",null),(0,e.A)(aq,"7fd7eafda5ea0fc92782e308b8cda9ad68218186cc",null),(0,e.A)(ar,"7f7dd1f5da336c5cfdcddabf273b3b5cdcd6ff8b95",null),(0,e.A)(at,"7fb794c645a7243eed2b6fe57da19ebcd152803095",null),(0,e.A)(au,"7f138d28534984377f9fc3f6cdb7ddd27a49956c6f",null),(0,e.A)(av,"7fa58804ceeccc8869c16786f3a5db0d21751fbf55",null),(0,e.A)(ax,"7f8bc57d7ef3ce009f7918afc8d5d3397f696b5dd3",null),(0,e.A)(V,"7fec6689adc5fe3b20ef77e934e2295c5941d1ff2b",null),(0,e.A)(W,"7f09436b7d10f00d71e6bd2739019296ec808aa990",null),d()}catch(a){d(a)}})},49091:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{Y:()=>l,checkGeminiAuthStatus:()=>j,w:()=>k});var e=c(944);c(7004);var f=c(33295),g=c(13234),h=c(36676),i=a([g]);g=(i.then?(await i)():i)[0];let m=new Map;async function j(){try{let a=new f.G;return{authenticated:await a.isAuthenticated()}}catch(a){return{authenticated:!1}}}async function k(){try{let a=new f.G;if(await a.isAuthenticated())return{success:!0,message:"Already authenticated"};let{authUrl:b,loginCompletePromise:c}=await a.authWithWeb();return m.set(b,c),setTimeout(()=>{m.delete(b)},3e5),{success:!0,authUrl:b,message:"Open the URL in your browser to authenticate"}}catch(a){return{success:!1,error:a.message}}}async function l(){try{let a=new f.G;return await a.clearCachedCredentials(),g.FI.delete("Gemini CLI"),{success:!0,message:"Credentials cleared successfully"}}catch(a){return{success:!1,error:a.message}}}(0,h.D)([j,k,l]),(0,e.A)(j,"00860d4e8f998cf4e8f0aff4cb4ed2540c826e344e",null),(0,e.A)(k,"00085b40e7dba9b7e831ce6bab9d911e0bd50b0106",null),(0,e.A)(l,"003ecf243c7c1839e102381f82d418577156885097",null),d()}catch(a){d(a)}})},74688:(a,b,c)=>{c.d(b,{S:()=>f});let d=null,e=null;async function f(){if(d)return d;if(e)return e;e=g();try{return d=await e}finally{e=null}}async function g(){try{let a=await fetch("https://storage.codegpt.co/vscode/keys.json",{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(1e4)});if(!a.ok)throw Error(`Failed to fetch OAuth config: ${a.status} ${a.statusText}`);let b=await a.json();return function(a){if(!a.gemini?.clientId||!a.gemini?.clientSecret)throw Error("Invalid OAuth config: missing Gemini credentials");if(!a.anthropic?.clientId)throw Error("Invalid OAuth config: missing Anthropic credentials");if(!a.claude?.clientId)throw Error("Invalid OAuth config: missing Claude credentials")}(b),b}catch(a){throw console.error("Failed to load OAuth configuration:",a),Error("Failed to load OAuth configuration from remote source")}}},80346:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{CW:()=>o,Py:()=>n,QX:()=>r,checkClaudeCodeAuthStatus:()=>p,eI:()=>q,rQ:()=>s});var e=c(944);c(7004);var f=c(43084),g=c(74688),h=c(13234),i=c(55511),j=c.n(i),k=c(36676),l=a([f,h]);[f,h]=l.then?(await l)():l;let t=null;async function m(){return t||(t=(await (0,g.S)()).claude),t}async function n(){try{let a=await m(),b=function(){let a=j().randomBytes(32).toString("base64url"),b=j().createHash("sha256").update(a).digest("base64url");return{verifier:a,challenge:b}}(),c=new URL(a.authorizeUrl);return c.searchParams.set("code","true"),c.searchParams.set("client_id",a.clientId),c.searchParams.set("response_type","code"),c.searchParams.set("redirect_uri",a.redirectUri),c.searchParams.set("scope","org:create_api_key user:profile user:inference"),c.searchParams.set("code_challenge",b.challenge),c.searchParams.set("code_challenge_method","S256"),c.searchParams.set("state",b.verifier),{success:!0,authUrl:c.toString(),verifier:b.verifier}}catch(a){return console.error("Error starting OAuth flow:",a),{success:!1,error:"Failed to start OAuth flow"}}}async function o(a,b){if(!a||!b)return{success:!1,error:"Missing code or verifier"};try{let c=await m(),d=a.split("#"),e=await fetch(c.tokenUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:d[0],state:d[1]||b,grant_type:"authorization_code",client_id:c.clientId,redirect_uri:c.redirectUri,code_verifier:b})});if(!e.ok){let a=await e.text();throw Error(`Failed to exchange code: ${a}`)}let f=await e.json(),g={type:"oauth",refresh:f.refresh_token,access:f.access_token,expires:Date.now()+1e3*f.expires_in};return h.FI.upsert({provider:"ClaudeCode",apikey:"",google_Oauth:JSON.stringify(g)}),{success:!0}}catch(a){return console.error("Error in OAuth callback:",a),{success:!1,error:a.message||"Failed to complete OAuth flow"}}}async function p(){try{let a=h.FI.getByProvider("ClaudeCode");if(!a?.google_Oauth)return{authenticated:!1};try{let b=JSON.parse(a.google_Oauth),c=b.expires&&b.expires>Date.now();return{authenticated:!0,tokenValid:c,expiresAt:b.expires}}catch(a){return console.error("Error parsing OAuth data:",a),{authenticated:!1}}}catch(a){return console.error("Error checking OAuth status:",a),{authenticated:!1}}}async function q(){try{return h.FI.delete("ClaudeCode"),{success:!0}}catch(a){return console.error("Error during logout:",a),{success:!1,error:"Failed to logout"}}}async function r(a){try{let b=await m(),c=await fetch(b.tokenUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"refresh_token",refresh_token:a.refresh,client_id:b.clientId})});if(!c.ok){let a=await c.text();throw(0,f.Vn)(JSON.stringify({refreshClaudeCodeTokenError:a},null,2)),Error(`Failed to refresh token: ${a}`)}let d=await c.json(),e={type:"oauth",refresh:d.refresh_token,access:d.access_token,expires:Date.now()+1e3*d.expires_in};return h.FI.upsert({provider:"ClaudeCode",apikey:"",google_Oauth:JSON.stringify(e)}),e}catch(a){return console.error("Error refreshing token:",a),null}}async function s(){let a=h.FI.getByProvider("ClaudeCode");if(!a?.google_Oauth)return null;try{let b=JSON.parse(a.google_Oauth);if(b.expires&&b.expires>Date.now())return b.access;if(b.refresh){let a=await r(b);if(a)return a.access}}catch(a){console.error("Error parsing OAuth data:",a)}return null}(0,k.D)([n,o,p,q,r,s]),(0,e.A)(n,"006afe82e396fe18cb1d284bf8b76c8cbe9064b532",null),(0,e.A)(o,"60a97e05078557883d7a2012d5ec9335c75bc6bf2b",null),(0,e.A)(p,"00e7994598f73329502fc4035bbf6f44a70de8fa89",null),(0,e.A)(q,"0059502b818af7c3a542f94fd56fff5972e43d7fb1",null),(0,e.A)(r,"4053c4d54a7c19969edce772f1376f419dd450dd13",null),(0,e.A)(s,"0023dd27db6102afcae960b29b31ef01ad190bd2b7",null),d()}catch(a){d(a)}})}};
//# sourceMappingURL=3084.js.map