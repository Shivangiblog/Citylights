(()=>{"use strict";var e={106(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ProblemTypes=void 0,(i=t.ProblemTypes||(t.ProblemTypes={})).ACCESS_DENIED="http://ns.adobe.com/adobecloud/problem/accessdenied",i.ASSET_LOCKED="http://ns.adobe.com/adobecloud/problem/assetlocked",i.ASSET_MOVED="http://ns.adobe.com/adobecloud/problem/assetmoved",i.ASSET_NAME_CONFLICT="http://ns.adobe.com/adobecloud/problem/assetnameconflict",i.ASSET_NAME_INVALID="http://ns.adobe.com/adobecloud/problem/assetnamenotvalid",i.ASSET_NOT_FOUND="http://ns.adobe.com/adobecloud/problem/assetnotfound",i.ASSET_STATE_NOT_ALLOWED="http://ns.adobe.com/adobecloud/problem/assetstatenotallowed",i.BAD_REQUEST="http://ns.adobe.com/adobecloud/problem/badrequest",i.BULK_REQUEST_NOT_ATTEMPTED="http://ns.adobe.com/adobecloud/problem/bulkrequestnotattempted",i.COMPOSITE_INTEGRITY="http://ns.adobe.com/adobecloud/problem/compositeintegrity",i.DCX_VALIDATION="http://ns.adobe.com/adobecloud/problem/dcxvalidation",i.DIRECTORY_NOT_EMPTY="http://ns.adobe.com/adobecloud/problem/directorynotempty",i.EMBED_INVALID="http://ns.adobe.com/adobecloud/problem/embedinvalid",i.EMBED_TOO_LARGE="http://ns.adobe.com/adobecloud/problem/embedtoolarge",i.ENCRYPTION_KEY_INACCESSIBLE="http://ns.adobe.com/adobecloud/problem/encryptionkeyinaccessible",i.INVALID_FRAGMENT="http://ns.adobe.com/adobecloud/problem/invalidfragment",i.LIMIT_CHILDREN_COUNT="http://ns.adobe.com/adobecloud/problem/limit/childrencount",i.LIMIT_COMPONENT_COUNT="http://ns.adobe.com/adobecloud/problem/limit/componentcount",i.LIMIT_EMBED_SELECTOR_COUNT="http://ns.adobe.com/adobecloud/problem/limit/embedspecifierselectorcount",i.LIMIT_MILESTONE_COUNT="http://ns.adobe.com/adobecloud/problem/limit/milestonecount",i.LIMIT_MILESTONE_LABEL_LENGTH="http://ns.adobe.com/adobecloud/problem/limit/milestonelabellength",i.LIMIT_NAME_LENGTH="http://ns.adobe.com/adobecloud/problem/limit/namelength",i.LIMIT_OPERATION_COUNT="http://ns.adobe.com/adobecloud/problem/limit/operationcount",i.LIMIT_PATH_SEGMENT_COUNT="http://ns.adobe.com/adobecloud/problem/limit/pathsegmentcount",i.LIMIT_RESOURCE_COUNT="http://ns.adobe.com/adobecloud/problem/limit/resourcecount",i.LIMIT_RESOURCE_SIZE="http://ns.adobe.com/adobecloud/problem/limit/resourcesize",i.INVALID_BLOCK_SIZE="http://ns.adobe.com/adobecloud/problem/invalidblocksize",i.MISSING_UPLOADED_LINKS="http://ns.adobe.com/adobecloud/problem/missingUploadedLinks",i.INVALID_TRANSFER_LINKS="http://ns.adobe.com/adobecloud/problem/invalidTransferLinks",i.NOT_ENTITLED="http://ns.adobe.com/adobecloud/problem/notentitled",i.OPERATION_FAILED="http://ns.adobe.com/adobecloud/problem/operationfailed",i.OPERATION_TARGET_CONFLICT="http://ns.adobe.com/adobecloud/problem/operation/targetconflict",i.QUOTA_EXCEEDED="http://ns.adobe.com/adobecloud/problem/quotaexceeded",i.REPOSITORY_NOT_FOUND="http://ns.adobe.com/adobecloud/problem/repositorynotfound",i.RESOURCE_BLOCKED="http://ns.adobe.com/adobecloud/problem/resourceblocked",i.RESOURCE_NOT_ALLOWED="http://ns.adobe.com/adobecloud/problem/resourcenotallowed",i.RESOURCE_NOT_FOUND="http://ns.adobe.com/adobecloud/problem/resourcenotfound",i.RESOURCE_NOT_READY="http://ns.adobe.com/adobecloud/problem/resourcenotready",i.RESPONSE_TOO_LARGE="http://ns.adobe.com/adobecloud/problem/responsetoolarge",i.USER_BLOCKED="http://ns.adobe.com/adobecloud/problem/userblocked",i.VERSION_NOT_FOUND="http://ns.adobe.com/adobecloud/problem/versionnotfound",i.PARTIAL_ASSET="http://ns.adobe.com/adobecloud/problem/partialasset";let r={ASSET_MOVED:"ASSET_MOVED",INVALID_JSON:"INVALID_JSON",READ_ONLY:"READ_ONLY",INVALID_PARAMS:"",INVALID_LINKS:"INVALID_LINKS",PRECONDITION_FAILED:"PRECONDITION_FAILED",INVALID_DATA:"INVALID_DATA",DUPLICATE_VALUE:"DUPLICATE_VALUE",NO_BASE_BRANCH_DATA:"NO_BASE_BRANCH_DATA",INVALID_STATE:"INVALID_STATE",DELETED_COMPOSITE:"DELETED_COMPOSITE",INCOMPLETE_COMPOSITE:"INCOMPLETE_COMPOSITE",UNEXPECTED_RESPONSE:"UNEXPECTED_RESPONSE",NETWORK_ERROR:"NETWORK_ERROR",COMPONENT_DOWNLOAD_ERROR:"COMPONENT_DOWNLOAD_ERROR",COMPONENT_UPLOAD_ERROR:"COMPONENT_UPLOAD_ERROR",COMPONENT_MODIFIED_ERROR:"COMPONENT_MODIFIED_ERROR",UPDATE_CONFLICT:"UPDATE_CONFLICT",NO_COMPOSITE:"NO_COMPOSITE",ALREADY_EXISTS:"ALREADY_EXISTS",SERVICE_IS_INACTIVE:"SERVICE_IS_INACTIVE",EXCEEDS_QUOTA:"EXCEEDS_QUOTA",NOT_IMPLEMENTED:"NOT_IMPLEMENTED",RETRYABLE_SERVER_ERROR:"RETRYABLE_SERVER_ERROR",TIMED_OUT:"TIMED_OUT",UNEXPECTED:"UNEXPECTED",TERMINATED_INPUTSTREAM:"TERMINATED_INPUTSTREAM",WRONG_ENDPOINT:"WRONG_ENDPOINT",OUT_OF_SPACE:"ENOSPC",FILE_EXISTS_IN_CLOUD:"FILE_EXISTS_IN_CLOUD",ASSET_NOT_FOUND:"ASSET_NOT_FOUND",COMPOSITE_NOT_FOUND:"COMPOSITE_NOT_FOUND",NOT_FOUND:"NOT_FOUND",UNAUTHORIZED:"UNAUTHORIZED",FORBIDDEN:"FORBIDDEN",METHOD_NOT_ALLOWED:"METHOD_NOT_ALLOWED",NOT_ACCEPTABLE:"NOT_ACCEPTABLE",BANDWIDTH_LIMIT_EXCEEDED:"BANDWIDTH_LIMIT_EXCEEDED",ABORTED:"ABORTED",TOO_MANY_REDIRECTS:"TOO_MANY_REDIRECTS",INSECURE_REDIRECT:"INSECURE_REDIRECT",RESOURCE_NOT_READY:"RESOURCE_NOT_READY",ASSET_LOCKED:"ASSET_LOCKED"},s={[r.SERVICE_IS_INACTIVE]:!0,[r.ABORTED]:!0,[r.INSECURE_REDIRECT]:!0,[r.TOO_MANY_REDIRECTS]:!0,[r.NOT_IMPLEMENTED]:!0,[r.EXCEEDS_QUOTA]:!0,[r.RETRYABLE_SERVER_ERROR]:!0,[r.TIMED_OUT]:!0,[r.TERMINATED_INPUTSTREAM]:!0,[r.WRONG_ENDPOINT]:!0,[r.OUT_OF_SPACE]:!0,[r.INVALID_PARAMS]:!0,[r.INVALID_STATE]:!0};class o extends Error{constructor(e,t,i,r,s){var a;if(super(),this.code=e,this.name="AdobeDCXError",this._additionalData={},"application/problem+json"===(null==(a=null==r?void 0:r.headers)?void 0:a["content-type"])&&r.response&&"object"==typeof r.response&&"function"==typeof r.response.slice)try{const e=JSON.parse(new TextDecoder("utf-8").decode(r.response));r.response=e}catch(t){const e=r.response;r.response={originalBody:e,message:"Failed to parse JSON problem type response body.",parseError:t}}if(i instanceof Error&&(this._underlyingError=i),this._response=r||(n(i)?i.response:void 0),this._additionalData=s,this._message=t,this.message=("string"==typeof e&&""!==e?"["+e+"] ":"")+(this._message||""),Object.setPrototypeOf(this,o.prototype),Error.captureStackTrace)Error.captureStackTrace(this,o);else try{const e=Error();if(e.name=this.name,e.stack){const t=e.stack.split("\n");t.length>0&&t.splice(1,1),this.stack=t.join("\n")}}catch(e){}}get response(){return this._response}get problemType(){var e;if("application/problem+json"===(null==(e=this._response)?void 0:e.headers["content-type"]))return this._response.response.type}get underlyingError(){return this._underlyingError}get additionalData(){return this._additionalData}set additionalData(e){this._additionalData=e}get failedComponents(){return this._additionalData.failedComponents}static wrapError(e,i,n,a){var l,c,u,d;if(n&&s[n.code])return n;if(a&&"object"==typeof a){let s=a.statusCode,h=403===s&&("403.1"===(null==(u=null==(c=null==(l=a.response)?void 0:l.message)?void 0:c.match(/code=(\d+.\d+)/))?void 0:u[1])||(null==(d=a.response)?void 0:d.type)===t.ProblemTypes.QUOTA_EXCEEDED);if(s>=500&&s<600||h)501===s?(e=r.NOT_IMPLEMENTED,i="Unimplemented request"):507===s||h?(e=r.EXCEEDS_QUOTA,i="Quota exceeded"):(e=r.RETRYABLE_SERVER_ERROR,i="Server error");else if(n instanceof o&&e===n.code&&n.code===this.UNEXPECTED_RESPONSE)return n}return new o(e,i,n,a)}toString(){return`${this.name}: ${this.message}`}static networkError(e,t,i){return o.wrapError(r.NETWORK_ERROR,e,t,i)}static unexpectedResponse(e,t,i){return o.wrapError(r.UNEXPECTED_RESPONSE,e,t,i)}}function n(e){return!(!e||"object"!=typeof e)&&"AdobeDCXError"===e.name}o.ABORTED=r.ABORTED,o.INSECURE_REDIRECT=r.INSECURE_REDIRECT,o.TOO_MANY_REDIRECTS=r.TOO_MANY_REDIRECTS,o.INVALID_JSON=r.INVALID_JSON,o.READ_ONLY=r.READ_ONLY,o.INVALID_PARAMS=r.INVALID_PARAMS,o.INVALID_DATA=r.INVALID_DATA,o.DUPLICATE_VALUE=r.DUPLICATE_VALUE,o.NO_BASE_BRANCH_DATA=r.NO_BASE_BRANCH_DATA,o.INVALID_STATE=r.INVALID_STATE,o.DELETED_COMPOSITE=r.DELETED_COMPOSITE,o.INCOMPLETE_COMPOSITE=r.INCOMPLETE_COMPOSITE,o.UNEXPECTED_RESPONSE=r.UNEXPECTED_RESPONSE,o.NETWORK_ERROR=r.NETWORK_ERROR,o.COMPONENT_DOWNLOAD_ERROR=r.COMPONENT_DOWNLOAD_ERROR,o.COMPONENT_UPLOAD_ERROR=r.COMPONENT_UPLOAD_ERROR,o.COMPONENT_MODIFIED_ERROR=r.COMPONENT_MODIFIED_ERROR,o.UPDATE_CONFLICT=r.UPDATE_CONFLICT,o.NO_COMPOSITE=r.NO_COMPOSITE,o.ALREADY_EXISTS=r.ALREADY_EXISTS,o.SERVICE_IS_INACTIVE=r.SERVICE_IS_INACTIVE,o.EXCEEDS_QUOTA=r.EXCEEDS_QUOTA,o.NOT_IMPLEMENTED=r.NOT_IMPLEMENTED,o.RETRYABLE_SERVER_ERROR=r.RETRYABLE_SERVER_ERROR,o.TIMED_OUT=r.TIMED_OUT,o.UNEXPECTED=r.UNEXPECTED,o.TERMINATED_INPUTSTREAM=r.TERMINATED_INPUTSTREAM,o.WRONG_ENDPOINT=r.WRONG_ENDPOINT,o.OUT_OF_SPACE=r.OUT_OF_SPACE,o.FILE_EXISTS_IN_CLOUD=r.FILE_EXISTS_IN_CLOUD,o.ASSET_NOT_FOUND=r.ASSET_NOT_FOUND,o.COMPOSITE_NOT_FOUND=r.COMPOSITE_NOT_FOUND,o.NOT_FOUND=r.NOT_FOUND,o.UNAUTHORIZED=r.UNAUTHORIZED,o.FORBIDDEN=r.FORBIDDEN,o.PRECONDITION_FAILED=r.PRECONDITION_FAILED,o.RESOURCE_NOT_READY=r.RESOURCE_NOT_READY,o.ASSET_LOCKED=r.ASSET_LOCKED;let a=new Map([[400,{code:r.UNEXPECTED_RESPONSE,message:"Bad request"}],[401,{code:r.UNAUTHORIZED,message:"Unauthorized"}],[403,{code:r.FORBIDDEN,message:"Forbidden"}],[404,{code:r.NOT_FOUND,message:"Not found"}],[405,{code:r.METHOD_NOT_ALLOWED,message:"The user is authorized to act on this resource, but cannot use the specified method."}],[406,{code:r.NOT_ACCEPTABLE,message:"Unable to obtain resource in a content type matching the Accept header or rendition type parameter."}],[409,{code:r.ALREADY_EXISTS,message:"Already exists"}],[412,{code:r.PRECONDITION_FAILED,message:"Precondition failed"}],[501,{code:r.NOT_IMPLEMENTED,message:"Not implemented"}],[507,{code:r.EXCEEDS_QUOTA,message:"Exceeds quota"}],[509,{code:r.BANDWIDTH_LIMIT_EXCEEDED,message:"Bandwidth limit exceeded"}]]),l=new Map(Object.entries({[t.ProblemTypes.ASSET_MOVED]:{code:r.ASSET_MOVED,message:"Asset moved to a different region while operation was in progress"},[t.ProblemTypes.COMPOSITE_INTEGRITY]:{code:r.INCOMPLETE_COMPOSITE,message:"Incomplete composite. invoke missingComponentsFromError with this error for more information."},[t.ProblemTypes.PARTIAL_ASSET]:{code:r.NO_COMPOSITE,message:"Asset is partially created. No Manifest found"},[t.ProblemTypes.LIMIT_RESOURCE_COUNT]:{code:r.UNEXPECTED_RESPONSE,message:"Resource count limit exceed"},[t.ProblemTypes.QUOTA_EXCEEDED]:{code:r.EXCEEDS_QUOTA,message:"Quota exceeded"},[t.ProblemTypes.ASSET_LOCKED]:{code:r.ASSET_LOCKED,message:"Asset is locked and cannot be modified"}})),c=e=>{var t,i;let r=l.get(null!=(i=null==(t=e.response)?void 0:t.type)?i:"")||a.get(e.statusCode);return r?new o(r.code,r.message,void 0,e,e.response):void 0},u=(e,t)=>e&&t?e<300&&e>199||c(t)||!1:new o(r.NETWORK_ERROR,"Invalid or missing status code or response",void 0,t);t.AdobeDCXError=o,t.DCXError=o,t.ErrorCodes=r,t.HTTP_STATUS_ERROR_MAP=a,t._defaultStatusValidator=u,t._handleErrorResponsePayload=function(e){var t;let i,r=Array.isArray(e.response)?e.response.reduce((e,t)=>e||t.error,void 0):e.response.error;if(!r)return e;let s=u(e.statusCode,e);if(s instanceof o)throw s;let n=(i=l.get(null!=(t=r.type)?t:"")||("number"==typeof r.status?a.get(r.status):void 0))?new o(i.code,i.message,r,e):void 0;if(n)throw n;throw new o(r.type||o.UNEXPECTED_RESPONSE,r.title||"Unexpected Error",r,e)},t._responseToError=c,t.default=o,t.isAdobeDCXError=n,t.networkError=function(e,t,i){return o.networkError(e,t,i)},t.unexpectedResponse=function(e,t,i){return o.unexpectedResponse(e,t,i)}},632(){try{self["workbox:core:6.5.3"]&&_()}catch(e){}},980(){try{self["workbox:precaching:6.5.3"]&&_()}catch(e){}},172(){try{self["workbox:routing:6.5.3"]&&_()}catch(e){}},928(){try{self["workbox:strategies:6.5.3"]&&_()}catch(e){}}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,i),o.exports}i.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),(()=>{let e,t,r;i(632);class s extends Error{constructor(e,t){super(((e,...t)=>{let i=e;return t.length>0&&(i+=` :: ${JSON.stringify(t)}`),i})(e,t)),this.name=e,this.details=t}}let o=new Set,n={googleAnalytics:"googleAnalytics",precache:"precache-v2",prefix:"workbox",runtime:"runtime",suffix:"undefined"!=typeof registration?registration.scope:""},a=e=>[n.prefix,e,n.suffix].filter(e=>e&&e.length>0).join("-"),l=e=>e||a(n.precache);function c(e,t){let i=new URL(e);for(let e of t)i.searchParams.delete(e);return i.href}async function u(e,t,i,r){let s=c(t.url,i);if(t.url===s)return e.match(t,r);let o=Object.assign(Object.assign({},r),{ignoreSearch:!0});for(let n of(await e.keys(t,o)))if(s===c(n.url,i))return e.match(n,r)}class d{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}async function h(){for(let e of o)await e()}function g(e,t){let i=t();return e.waitUntil(i),i}async function E(t,i){let r=null;if(t.url&&(r=new URL(t.url).origin),r!==self.location.origin)throw new s("cross-origin-copy-response",{origin:r});let o=t.clone(),n={headers:new Headers(o.headers),status:o.status,statusText:o.statusText},a=i?i(n):n,l=!function(){if(void 0===e){let t=new Response("");if("body"in t)try{new Response(t.body),e=!0}catch(t){e=!1}e=!1}return e}()?await o.blob():o.body;return new Response(l,a)}i(980);class p{constructor(){this.updatedURLs=[],this.notUpdatedURLs=[],this.handlerWillStart=async({request:e,state:t})=>{t&&(t.originalRequest=e)},this.cachedResponseWillBeUsed=async({event:e,state:t,cachedResponse:i})=>{if("install"===e.type&&t&&t.originalRequest&&t.originalRequest instanceof Request){let e=t.originalRequest.url;i?this.notUpdatedURLs.push(e):this.updatedURLs.push(e)}return i}}}class f{constructor({precacheController:e}){this.cacheKeyWillBeUsed=async({request:e,params:t})=>{let i=(null==t?void 0:t.cacheKey)||this._precacheController.getCacheKeyForURL(e.url);return i?new Request(i,{headers:e.headers}):e},this._precacheController=e}}function m(e){return"string"==typeof e?new Request(e):e}i(928);class T{constructor(e,t){for(const i of(this._cacheKeys={},Object.assign(this,t),this.event=t.event,this._strategy=e,this._handlerDeferred=new d,this._extendLifetimePromises=[],this._plugins=[...e.plugins],this._pluginStateMap=new Map,this._plugins))this._pluginStateMap.set(i,{});this.event.waitUntil(this._handlerDeferred.promise)}async fetch(e){let{event:t}=this,i=m(e);if("navigate"===i.mode&&t instanceof FetchEvent&&t.preloadResponse){let e=await t.preloadResponse;if(e)return e}let r=this.hasCallback("fetchDidFail")?i.clone():null;try{for(let e of this.iterateCallbacks("requestWillFetch"))i=await e({request:i.clone(),event:t})}catch(e){if(e instanceof Error)throw new s("plugin-error-request-will-fetch",{thrownErrorMessage:e.message})}let o=i.clone();try{let e;for(let r of(e=await fetch(i,"navigate"===i.mode?void 0:this._strategy.fetchOptions),this.iterateCallbacks("fetchDidSucceed")))e=await r({event:t,request:o,response:e});return e}catch(e){throw r&&await this.runCallbacks("fetchDidFail",{error:e,event:t,originalRequest:r.clone(),request:o.clone()}),e}}async fetchAndCachePut(e){let t=await this.fetch(e),i=t.clone();return this.waitUntil(this.cachePut(e,i)),t}async cacheMatch(e){let t,i=m(e),{cacheName:r,matchOptions:s}=this._strategy,o=await this.getCacheKey(i,"read"),n=Object.assign(Object.assign({},s),{cacheName:r});for(let e of(t=await caches.match(o,n),this.iterateCallbacks("cachedResponseWillBeUsed")))t=await e({cacheName:r,matchOptions:s,cachedResponse:t,request:o,event:this.event})||void 0;return t}async cachePut(e,t){let i=m(e);await new Promise(e=>setTimeout(e,0));let r=await this.getCacheKey(i,"write");if(!t)throw new s("cache-put-with-no-response",{url:new URL(String(r.url),location.href).href.replace(RegExp(`^${location.origin}`),"")});let o=await this._ensureResponseSafeToCache(t);if(!o)return!1;let{cacheName:n,matchOptions:a}=this._strategy,l=await self.caches.open(n),c=this.hasCallback("cacheDidUpdate"),d=c?await u(l,r.clone(),["__WB_REVISION__"],a):null;try{await l.put(r,c?o.clone():o)}catch(e){if(e instanceof Error)throw"QuotaExceededError"===e.name&&await h(),e}for(let e of this.iterateCallbacks("cacheDidUpdate"))await e({cacheName:n,oldResponse:d,newResponse:o.clone(),request:r,event:this.event});return!0}async getCacheKey(e,t){let i=`${e.url} | ${t}`;if(!this._cacheKeys[i]){let r=e;for(let e of this.iterateCallbacks("cacheKeyWillBeUsed"))r=m(await e({mode:t,request:r,event:this.event,params:this.params}));this._cacheKeys[i]=r}return this._cacheKeys[i]}hasCallback(e){for(let t of this._strategy.plugins)if(e in t)return!0;return!1}async runCallbacks(e,t){for(let i of this.iterateCallbacks(e))await i(t)}*iterateCallbacks(e){for(let t of this._strategy.plugins)if("function"==typeof t[e]){let i=this._pluginStateMap.get(t),r=r=>{let s=Object.assign(Object.assign({},r),{state:i});return t[e](s)};yield r}}waitUntil(e){return this._extendLifetimePromises.push(e),e}async doneWaiting(){let e;for(;e=this._extendLifetimePromises.shift();)await e}destroy(){this._handlerDeferred.resolve(null)}async _ensureResponseSafeToCache(e){let t=e,i=!1;for(let e of this.iterateCallbacks("cacheWillUpdate"))if(t=await e({request:this.request,response:t,event:this.event})||void 0,i=!0,!t)break;return!i&&t&&200!==t.status&&(t=void 0),t}}class S{constructor(e={}){this.cacheName=e.cacheName||a(n.runtime),this.plugins=e.plugins||[],this.fetchOptions=e.fetchOptions,this.matchOptions=e.matchOptions}handle(e){let[t]=this.handleAll(e);return t}handleAll(e){e instanceof FetchEvent&&(e={event:e,request:e.request});let t=e.event,i="string"==typeof e.request?new Request(e.request):e.request,r=new T(this,{event:t,request:i,params:"params"in e?e.params:void 0}),s=this._getResponse(r,i,t),o=this._awaitComplete(s,r,i,t);return[s,o]}async _getResponse(e,t,i){let r;await e.runCallbacks("handlerWillStart",{event:i,request:t});try{if(!(r=await this._handle(t,e))||"error"===r.type)throw new s("no-response",{url:t.url})}catch(s){if(s instanceof Error){for(let o of e.iterateCallbacks("handlerDidError"))if(r=await o({error:s,event:i,request:t}))break}if(r);else throw s}for(let s of e.iterateCallbacks("handlerWillRespond"))r=await s({event:i,request:t,response:r});return r}async _awaitComplete(e,t,i,r){let s,o;try{s=await e}catch(e){}try{await t.runCallbacks("handlerDidRespond",{event:r,request:i,response:s}),await t.doneWaiting()}catch(e){e instanceof Error&&(o=e)}if(await t.runCallbacks("handlerDidComplete",{event:r,request:i,response:s,error:o}),t.destroy(),o)throw o}}class O extends S{constructor(e={}){e.cacheName=l(e.cacheName),super(e),this._fallbackToNetwork=!1!==e.fallbackToNetwork,this.plugins.push(O.copyRedirectedCacheableResponsesPlugin)}async _handle(e,t){let i=await t.cacheMatch(e);return i||(t.event&&"install"===t.event.type?await this._handleInstall(e,t):await this._handleFetch(e,t))}async _handleFetch(e,t){let i,r=t.params||{};if(this._fallbackToNetwork){let s=r.integrity,o=e.integrity,n=!o||o===s;i=await t.fetch(new Request(e,{integrity:"no-cors"!==e.mode?o||s:void 0})),s&&n&&"no-cors"!==e.mode&&(this._useDefaultCacheabilityPluginIfNeeded(),await t.cachePut(e,i.clone()))}else throw new s("missing-precache-entry",{cacheName:this.cacheName,url:e.url});return i}async _handleInstall(e,t){this._useDefaultCacheabilityPluginIfNeeded();let i=await t.fetch(e);if(!await t.cachePut(e,i.clone()))throw new s("bad-precaching-response",{url:e.url,status:i.status});return i}_useDefaultCacheabilityPluginIfNeeded(){let e=null,t=0;for(let[i,r]of this.plugins.entries())r!==O.copyRedirectedCacheableResponsesPlugin&&(r===O.defaultPrecacheCacheabilityPlugin&&(e=i),r.cacheWillUpdate&&t++);0===t?this.plugins.push(O.defaultPrecacheCacheabilityPlugin):t>1&&null!==e&&this.plugins.splice(e,1)}}O.defaultPrecacheCacheabilityPlugin={cacheWillUpdate:async({response:e})=>!e||e.status>=400?null:e},O.copyRedirectedCacheableResponsesPlugin={cacheWillUpdate:async({response:e})=>e.redirected?await E(e):e};class C{constructor({cacheName:e,plugins:t=[],fallbackToNetwork:i=!0}={}){this._urlsToCacheKeys=new Map,this._urlsToCacheModes=new Map,this._cacheKeysToIntegrities=new Map,this._strategy=new O({cacheName:l(e),plugins:[...t,new f({precacheController:this})],fallbackToNetwork:i}),this.install=this.install.bind(this),this.activate=this.activate.bind(this)}get strategy(){return this._strategy}precache(e){this.addToCacheList(e),this._installAndActiveListenersAdded||(self.addEventListener("install",this.install),self.addEventListener("activate",this.activate),this._installAndActiveListenersAdded=!0)}addToCacheList(e){let t=[];for(let i of e){"string"==typeof i?t.push(i):i&&void 0===i.revision&&t.push(i.url);let{cacheKey:e,url:r}=function(e){if(!e)throw new s("add-to-cache-list-unexpected-type",{entry:e});if("string"==typeof e){let t=new URL(e,location.href);return{cacheKey:t.href,url:t.href}}let{revision:t,url:i}=e;if(!i)throw new s("add-to-cache-list-unexpected-type",{entry:e});if(!t){let e=new URL(i,location.href);return{cacheKey:e.href,url:e.href}}let r=new URL(i,location.href),o=new URL(i,location.href);return r.searchParams.set("__WB_REVISION__",t),{cacheKey:r.href,url:o.href}}(i),o="string"!=typeof i&&i.revision?"reload":"default";if(this._urlsToCacheKeys.has(r)&&this._urlsToCacheKeys.get(r)!==e)throw new s("add-to-cache-list-conflicting-entries",{firstEntry:this._urlsToCacheKeys.get(r),secondEntry:e});if("string"!=typeof i&&i.integrity){if(this._cacheKeysToIntegrities.has(e)&&this._cacheKeysToIntegrities.get(e)!==i.integrity)throw new s("add-to-cache-list-conflicting-integrities",{url:r});this._cacheKeysToIntegrities.set(e,i.integrity)}this._urlsToCacheKeys.set(r,e),this._urlsToCacheModes.set(r,o),t.length>0&&console.warn(`Workbox is precaching URLs without revision info: ${t.join(", ")}
This is generally NOT safe. Learn more at https://bit.ly/wb-precache`)}}install(e){return g(e,async()=>{let t=new p;for(let[i,r]of(this.strategy.plugins.push(t),this._urlsToCacheKeys)){let t=this._cacheKeysToIntegrities.get(r),s=this._urlsToCacheModes.get(i),o=new Request(i,{integrity:t,cache:s,credentials:"same-origin"});await Promise.all(this.strategy.handleAll({params:{cacheKey:r},request:o,event:e}))}let{updatedURLs:i,notUpdatedURLs:r}=t;return{updatedURLs:i,notUpdatedURLs:r}})}activate(e){return g(e,async()=>{let e=await self.caches.open(this.strategy.cacheName),t=await e.keys(),i=new Set(this._urlsToCacheKeys.values()),r=[];for(let s of t)i.has(s.url)||(await e.delete(s),r.push(s.url));return{deletedURLs:r}})}getURLsToCacheKeys(){return this._urlsToCacheKeys}getCachedURLs(){return[...this._urlsToCacheKeys.keys()]}getCacheKeyForURL(e){let t=new URL(e,location.href);return this._urlsToCacheKeys.get(t.href)}getIntegrityForCacheKey(e){return this._cacheKeysToIntegrities.get(e)}async matchPrecache(e){let t=e instanceof Request?e.url:e,i=this.getCacheKeyForURL(t);if(i)return(await self.caches.open(this.strategy.cacheName)).match(i)}createHandlerBoundToURL(e){let t=this.getCacheKeyForURL(e);if(!t)throw new s("non-precached-url",{url:e});return i=>(i.request=new Request(e),i.params=Object.assign({cacheKey:t},i.params),this.strategy.handle(i))}}let v=()=>(t||(t=new C),t);i(172);let y=e=>e&&"object"==typeof e?e:{handle:e};class A{constructor(e,t,i="GET"){this.handler=y(t),this.match=e,this.method=i}setCatchHandler(e){this.catchHandler=y(e)}}class R extends A{constructor(e,t,i){super(({url:t})=>{let i=e.exec(t.href);if(i)return t.origin!==location.origin&&0!==i.index?void 0:i.slice(1)},t,i)}}class I{constructor(){this._routes=new Map,this._defaultHandlerMap=new Map}get routes(){return this._routes}addFetchListener(){self.addEventListener("fetch",e=>{let{request:t}=e,i=this.handleRequest({request:t,event:e});i&&e.respondWith(i)})}addCacheListener(){self.addEventListener("message",e=>{if(e.data&&"CACHE_URLS"===e.data.type){let{payload:t}=e.data,i=Promise.all(t.urlsToCache.map(t=>{"string"==typeof t&&(t=[t]);let i=new Request(...t);return this.handleRequest({request:i,event:e})}));e.waitUntil(i),e.ports&&e.ports[0]&&i.then(()=>e.ports[0].postMessage(!0))}})}handleRequest({request:e,event:t}){let i,r=new URL(e.url,location.href);if(!r.protocol.startsWith("http"))return;let s=r.origin===location.origin,{params:o,route:n}=this.findMatchingRoute({event:t,request:e,sameOrigin:s,url:r}),a=n&&n.handler,l=e.method;if(!a&&this._defaultHandlerMap.has(l)&&(a=this._defaultHandlerMap.get(l)),!a)return;try{i=a.handle({url:r,request:e,event:t,params:o})}catch(e){i=Promise.reject(e)}let c=n&&n.catchHandler;return i instanceof Promise&&(this._catchHandler||c)&&(i=i.catch(async i=>{if(c)try{return await c.handle({url:r,request:e,event:t,params:o})}catch(e){e instanceof Error&&(i=e)}if(this._catchHandler)return this._catchHandler.handle({url:r,request:e,event:t});throw i})),i}findMatchingRoute({url:e,sameOrigin:t,request:i,event:r}){for(let s of this._routes.get(i.method)||[]){let o,n=s.match({url:e,sameOrigin:t,request:i,event:r});if(n)return Array.isArray(o=n)&&0===o.length||n.constructor===Object&&0===Object.keys(n).length?o=void 0:"boolean"==typeof n&&(o=void 0),{route:s,params:o}}return{}}setDefaultHandler(e,t="GET"){this._defaultHandlerMap.set(t,y(e))}setCatchHandler(e){this._catchHandler=y(e)}registerRoute(e){this._routes.has(e.method)||this._routes.set(e.method,[]),this._routes.get(e.method).push(e)}unregisterRoute(e){if(!this._routes.has(e.method))throw new s("unregister-route-but-not-found-with-method",{method:e.method});let t=this._routes.get(e.method).indexOf(e);if(t>-1)this._routes.get(e.method).splice(t,1);else throw new s("unregister-route-route-not-registered")}}let w="-precache-",b=async(e,t=w)=>{let i=(await self.caches.keys()).filter(i=>i.includes(t)&&i.includes(self.registration.scope)&&i!==e);return await Promise.all(i.map(e=>self.caches.delete(e))),i},N=[/ds.*\.adobe\.io/,/.*\.adobelivecreate\.com/,/cchome.*\.adobe\.io/],U=/.*\.adobe\.com\/service\/(?:cctypekit|faster-typekit|use-fonts|font-services|byof|api-cdn)/,D=/\/(edit-image|card-maker|embed\/preload|edit-image-preload)/,L="not_in_ape_session",P="Debug",M="timeStart",F="timeEnd",x="isFailure";var k,V,B,G,W,z,H,j,K,Y,X,q,$,Q,J,Z,ee,et,ei,er,es,eo,en,ea,el,ec,e_,eu,ed,eh,eg,eE=((ed={}).USER_SERVICE_CODE="user.service_code",ed.USER_SERVICE_LEVEL="user.service_level",ed.USER_ACCOUNT_TYPE="hz.user.account_type",ed.EVENT_PKG_INGEST_TYPE="ingesttype",ed.EVENT_PKG_PROJECT="project",ed.EVENT_PKG_TIME="time",ed.EVENT_PKG_ENVIRONMENT="environment",ed.EVENT_PKG_DATA="data",ed.OVERRIDE_PKG_PROJECT="override.ingest.project",ed.EVENT_PAGENAME="event.pagename",ed.EVENT_GUID="event.guid",ed.EVENT_USER_AGENT="event.user_agent",ed.EVENT_URL="event.url",ed.EVENT_THREAD="custom.thread",ed.EVENT_SOURCE="custom.source",ed.EVENT_STATUS="custom.eventStatus",ed.EVENT_INSTRUMENTATION_TYPE="custom.instrumentationType",ed.EVENT_INSTRUMENTATION_FLAG="custom.instrumentationFlag",ed.EVENT_FEATURE_NAME="custom.eventFeatureName",ed.EVENT_FEATURE_FLOW_STATE="custom.eventFeatureFlowState",ed.EVENT_MODIFIERS="custom.modifiers",ed.EVENT_SOURCE_CLIENT_ID="source.client_id",ed.EVENT_SOURCE_NAME="source.name",ed.EVENT_SOURCE_VERSION="source.version",ed.EVENT_MOBILE_APP_VERSION="hz.mobile_app_version",ed.EVENT_NETWORK_TYPE="hz.network_type",ed.EVENT_BUILD="event.build",ed.EVENT_BUILD_BRANCH="custom.buildBranch",ed.EVENT_BUNDLE_HASH="hz.event.bundle_hash",ed.EVENT_OVERRIDES_CONFIGURATION_HASH="hz.event.overrides_configuration_hash",ed.APP_CONFIG_OVERRIDES="custom.app_config_overrides",ed.EVENT_ENVIRONMENT="custom.envName",ed.EVENT_ENVIRONMENT_TYPE="custom.env",ed.ENV_FW_NAME="env.fw.name",ed.CUSTOM_EDITOR_IS_FOCUS_MODE="custom.editor.is_focus_mode",ed.EVENT_CATEGORY="event.category",ed.EVENT_SUBCATEGORY="event.subcategory",ed.EVENT_TYPE="event.type",ed.EVENT_SUBTYPE="event.subtype",ed.EVENT_COUNT="event.count",ed.EVENT_ACTION_CATEGORY="custom.actionCategory",ed.EVENT_ACTION_NAME="custom.actionName",ed.EVENT_WORKFLOW="event.workflow",ed.EVENT_TIME_START="event.dts_start",ed.EVENT_TIME_END="event.dts_end",ed.EVENT_VALUE="event.value",ed.EVENT_DURATION="custom.duration",ed.EVENT_AVG_FRAME_DURATION="custom.averageFrameDuration",ed.EVENT_AVG_RENDER_DURATION="custom.averageRenderDuration",ed.EVENT_AVG_AUTHORING_DURATION="custom.averageAuthoringDuration",ed.EVENT_USER_GUID="event.user_guid",ed.EVENT_PROFILE_GUID="event.profile_guid",ed.EVENT_SESSION_ID="event.session_guid",ed.EVENT_MCID_GUID="event.mcid_guid",ed.EVENT_CONTEXT_GUID="event.context_guid",ed.EVENT_LOCALE="event.language",ed.DISPLAYED_LANGUAGE="custom.displayedLanguage",ed.PROFILE_COUNTRY="hz.user.profile_country",ed.ACCESS_COUNTRY="hz.user.access_country",ed.PWA_INSTALLATION_SOURCE="custom.pwa.installation_source",ed.EVENT_APE_STATUS="hz.event.ape_status",ed.EVENT_APE_DURATION="hz.event.ape_duration",ed.EVENT_APE_TIME_SINCE_LAST_EVENT="hz.event.ape_time_since_last_event",ed.EVENT_APE_GUID="hz.event.ape_guid",ed.APE_START_TIME="ape_start_time",ed.APE_LAST_EVENT_TIME="ape_last_event_time",ed.ENTITLEMENT_TYPE="custom.user.entitlement_type_express",ed.GEN_AI_TOTAL_CREDITS="custom.user.gen_ai.total_credits",ed.USER_COMPLIMENTARY_PREMIUM="custom.user.complimentary_premium",ed.IS_TRIAL_USER="custom.user.is_trial_user",ed.USER_TRIAL_DAYS_REMAINING="custom.user.trial_days_remaining",ed.USER_MARKET_SEGMENT="custom.user.market_segment",ed.USER_OFFER_ID="custom.user.offer_id",ed.USER_BILLING_FREQUENCY="custom.user.billing_frequency",ed.USER_NUMBER_OF_LICENSES="custom.user.number_of_licenses",ed.USER_STORE_UI="custom.user.store_ui",ed.USER_SUBSCRIPTIONS="custom.user.subscriptions",ed.SESSION_RECORDING_URL="hz.session.recording_url",ed.CONTEXT_USER_ROLE="custom.userRole",ed.CONTEXT_WEBVIEW_ROLE="custom.webviewRole",ed.CONTEXT_INIT="context.init",ed.CONTEXT_GUID="context.guid",ed.CONTEXT_PARAMS="context.params",ed.EVENT_REFERRER="event.referrer",ed.EVENT_ERROR_CODE="event.error_code",ed.EVENT_ERROR_DESC="event.error_desc",ed.EVENT_ERROR_TYPE="event.error_type",ed.UI_VIEW_TYPE="ui.view_type",ed.UI_SEARCH_KEYWORD="ui.search_keyword",ed.CUSTOM_UI_ORIGINAL_KEYWORD="custom.ui.original_keyword",ed.CONTENT_ID="content.id",ed.CONTENT_IS_REPLACED_WITH_LINKED_ASSET="content.is.replaced.with.linked.asset",ed.CONTENT_NAME="content.name",ed.CONTENT_TYPE="content.type",ed.CONTENT_STATUS="content.status",ed.CONTENT_DIMENSION="content.dimension",ed.CONTENT_SIZE="content.size",ed.CONTENT_MIMETYPE="content.mimetype",ed.CONTENT_EXTENSION="content.extension",ed.CONTENT_AUTHOR="content.author",ed.CONTENT_CATEGORY="content.category",ed.CONTENT_UI_TRIGGER="content.ui.trigger",ed.CONTENT_COLLECTION="custom.ui.collection",ed.CONTENT_COLLECTION_PATH="custom.ui.collection_path",ed.CONTENT_SCHEMA_VERSION="custom.contentSchemaVersion",ed.CONTENT_IS_NEW="custom.contentIsNew",ed.CONTENT_PHOTO_CATEGORY="content.photo_category",ed.LOG_TRACEFLOW_CATEGORY="custom.traceflow",ed.LOG_TRACE_ID="custom.traceId",ed.LOG_SPAN_ID="custom.spanId",ed.LOG_MESSAGE="custom.message",ed.LOG_LEVEL="custom.level",ed.LOG_METADATA="custom.meta",ed.ERROR_UUID="custom.errorUUID",ed.ERROR_MESSAGE="custom.errorMessage",ed.ERROR_CODE="custom.errorCode",ed.ERROR_FULL_STACK="custom.fullStack",ed.ERROR_FULL_MESSAGE_WITH_CODE="custom.fullMessageWithCode",ed.ERROR_CATEGORY="custom.errorCategory",ed.ERROR_IS_EXPECTED="custom.errorIsExpected",ed.ERROR_LOG_METADATA="custom.errorLogMetadata",ed.ERROR_CLIENT_FATAL="custom.clientFatal",ed.CONTENT_LOCATION="custom.content.location",ed.CONTENT_UPDATED_LOCATION="custom.content.updated_location",ed.CONTENT_SELECTION_COUNT="custom.content.selection_count",ed.CUSTOM_HAS_PREMIUM_CONTENT="custom.has_premium_content",ed.CUSTOM_GRID_OPERATION_LEVEL="custom.grid.operation_level",ed.CUSTOM_FIREFLY_MODAL="custom.firefly.modal",ed.CUSTOM_CONTENT_DURATION="custom.content.duration",ed.CUSTOM_ASSET_COUNT="custom.asset.count",ed.CUSTOM_CONTENT_MIMETYPE="custom.content.mimetype",ed.CUSTOM_CONTENT_DROP_LOCATION="custom.content.drop_location",ed.CUSTOM_CONTENT_TEXT_SCRIPTS="custom.content.text_scripts",ed.CUSTOM_ASSET_CLASS="custom.asset_class",ed.CUSTOM_RECOMMENDATION_RANK="custom.recommendation.rank",ed.CUSTOM_TAB_NAME="custom.ui.tab_name",ed.DOCUMENT_ADDED_SCENE_NO="custom.document.addedSceneNo",ed.DOCUMENT_DUPLICATED_SCENE_NO="custom.document.duplicatedSceneNo",ed.DOCUMENT_SCENE="custom.document.scene",ed.DOCUMENT_SCENE_NO="custom.document.sceneNo",ed.DOCUMENT_SOURCE_SCENE_NO="custom.document.sourceSceneNo",ed.DOCUMENT_PASTED_SCENE_NO="custom.document.pastedSceneNo",ed.DOCUMENT_COPIED_SCENE_NO="custom.document.copiedSceneNo",ed.DOCUMENT_UPDATED_SCENE_NO="custom.document.updatedSceneNo",ed.DOCUMENT_DURATION="custom.document.duration",ed.DOCUMENT_UPDATED_DURATION="custom.document.updatedDuration",ed.DOCUMENT_PAGE_ID="custom.document.pageId",ed.DOCUMENT_PAGE_NO="custom.document.pageNo",ed.DOCUMENT_ZOOM_LEVEL="custom.document.zoomLevel",ed.DOCUMENT_UPDATED_ZOOM_LEVEL="custom.document.updatedZoomLevel",ed.DOCUMENT_OBJECT_TYPE="custom.document.objectType",ed.DOCUMENT_OFFSET="custom.document.offset",ed.DOCUMENT_UPDATED_OFFSET="custom.document.updatedOffset",ed.DOCUMENT_VIDEO_WINDOW="custom.document.videoWindow",ed.DOCUMENT_UPDATED_WINDOW="custom.document.updatedWindow",ed.DOCUMENT_SIZE="custom.document.size",ed.DOCUMENT_UPDATED_SIZE="custom.document.updatedSize",ed.OBJECT_VOLUME="custom.content.volume",ed.OBJECT_UPDATED_VOLUME="custom.content.updatedVolume",ed.OBJECT_SIZE="custom.object.size",ed.OBJECT_UPDATED_SIZE="custom.object.updatedSize",ed.OBJECT_ARTBOARD_SIZE="custom.object.artboardSize",ed.CONTENT_OPACITY_VALUE="custom.content.opacity_value",ed.CONTENT_BLEND_MODE="custom.content.blend_mode",ed.UI_TRIM_DIRECTION="custom.ui.trimDirection",ed.OBJECT_PREVIOUS_OFFSET="custom.document.offset",ed.OBJECT_UPDATED_OFFSET="custom.document.updatedOffset",ed.UI_METHOD="custom.ui.method",ed.CONTENT_ADJUSTMENT_MAP="custom.content.adjustment_map",ed.DOCUMENT_SCENE_COUNT="custom.document.scene_count",ed.DOCUMENT_CONTENT_LIST="custom.document.content_list",ed.CONTEXTUAL_TRACK_STATUS="custom.contextual_track.status",ed.CONTENT_FILTER_NAME="custom.content.effect_name",ed.CONTENT_FILTER_CATEGORY="custom.content.effect_category",ed.CONTENT_FILTER_INTENSITY_VALUE="custom.content.effect_intensity_value",ed.CONTENT_FILTER_DUOTONE_MAP="custom.content.effect_duotone_map",ed.DOCUMENT_APPLIED_DURATION_SCENE_COUNT="custom.scene.applied_duration_scene_count",ed.DOCUMENT_UPDATED_SCENE_COUNT="custom.document.num_scene_applied",ed.CUSTOM_UI_LOCATION="custom.ui.location",ed.CUSTOM_CONTENT_MULTISELECT="custom.content.multiselect",ed.CUSTOM_CONTENT_SELECTION_COUNT="custom.content.selection_count",ed.CUSTOM_IMAGE_SELECTION_COUNT="custom.image.selection_count",ed.CUSTOM_VIDEO_SELECTION_COUNT="custom.video.selection_count",ed.CUSTOM_TEXT_SELECTION_COUNT="custom.text.selection_count",ed.CUSTOM_SHAPE_SELECTION_COUNT="custom.shape.selection_count",ed.CUSTOM_ICON_SELECTION_COUNT="custom.icon.selection_count",ed.CUSTOM_GIF_SELECTION_COUNT="custom.gif.selection_count",ed.CUSTOM_UI_FILTER="custom.ui.filter",ed.UI_SORT_TYPE="custom.ui.sort_type",ed.UI_FILTER="ui.filter",ed.UI_SORT_ORDER="ui.sort_order",ed.CUSTOM_EDITOR_IS_DRAWING="custom.editor.is_drawing",ed.CUSTOM_DELETE_TYPE="custom.delete_type",ed.CUSTOM_DOCUMENT_NUMPAGESTOTAL="custom.document.numPagesTotal",ed.CUSTOM_MOVE_ORIGIN="custom.move.origin",ed.CUSTOM_MOVE_DESTINATION="custom.move.destination",ed.CUSTOM_MOVE_ASSET_COUNT="custom.move.asset_count",ed.CUSTOM_MULTIPLE_UPLOADS="custom.asset.multiple_uploads",ed.CUSTOM_CONTENT_RESOLUTION="custom.content.resolution",ed.CUSTOM_FILE_COUNT="custom.file_count",ed.CUSTOM_UI_METHOD="custom.ui.method",ed.CUSTOM_COLLAB_REVIEW_MODEL="custom.collab.review_model",ed.CUSTOM_COLLAB_REVIEW_STATUS="custom.collab.review_status",ed.CUSTOM_CONTENT_SETTING="custom.content.setting",ed.CUSTOM_MIGRATION_STATUS="custom.migration.status",ed.CUSTOM_PLAYBOOK_COLLECTION_NAME="custom.playbook.collection_name",ed.CUSTOM_DOCUMENT_RENAME="custom.document.rename",ed.CUSTOM_AUDIO_EFFECT_ID="custom.audio.effect_id",ed.CUSTOM_AUDIO_ADJUSTMENT_MAP="custom.audio.adjustment_map",ed.CUSTOM_AUDIO_TRACK_NO="custom.audio.track_no",ed.CUSTOM_AUDIO_FILE_SEQUENCE="custom.audio.file_sequence",ed.CUSTOM_AUDIO_TRACK_TYPE="custom.audio.track_type",ed.CUSTOM_AUDIO_ID="custom.audio.id",ed.CUSTOM_AUDIO_DURATION="custom.audio.duration",ed.CUSTOM_ENHANCE_SPEECH_ADJUST_PARAMS="custom.audio.enhance_speech_adjust_param",ed.CUSTOM_UI_TRIGGER="custom.ui.trigger",ed.IS_NEW_USER="hz.is_new_to_projectx",ed.USER_FIRST_ACCESS_TIME="hz.user.first_access_time",ed.CUSTOM_USER_ADMIN_ROLE="custom.user.admin_role",ed.CUSTOM_USER_MANAGER_CAPABILITIES="custom.user.manager_capabilities",ed.CUSTOM_EDU_USER_TYPE="custom.user.edu.profile_role",ed.CUSTOM_EDU_CLASS_ID="custom.edu.class_id",ed.CUSTOM_EDU_ACTION_TYPE="custom.edu.action_type",ed.CUSTOM_EDU_LESSON_NAME="custom.edu.lesson_name",ed.CUSTOM_EDU_COURSE_NAME="custom.edu.course_name",ed.CUSTOM_EDU_BLOG_NAME="custom.edu.blog_name",ed.CUSTOM_EDU_TEMPLATE_TITLE="custom.edu.template_title",ed.CUSTOM_EDU_CTA_TARGET_PAGE="custom.edu.cta_target_page",ed.CUSTOM_EDU_TEMPLATE_ID="custom.template.id",ed.IS_K12="is_k12",ed.IS_EDU_USER="hz.user.is_edu",ed.CUSTOM_USER_ID_TYPE="custom.user.entitlement_feature_set_type_express",ed.CUSTOM_USER_OFFERING="custom.user.offering_express",ed.CUSTOM_LEARN_CATEGORY="custom.learn.category",ed.ORG_ID="hz.user.org_id",ed.NUM_RESOURCES="custom.numResources",ed.RESOLUTION="custom.resolution",ed.SELECT_GUID="custom.selectGuid",ed.SELECT_TYPE="custom.selectType",ed.SVG_TAG="custom.svgTag",ed.PLATFORM_TYPE="hz.source_platform_type",ed.MOBILE_ID="hz.mobile_id",ed.DEVICE_NAME="hz.device_name",ed.DEVICE_HEIGHT="hz.user.device_screen_height",ed.DEVICE_WIDTH="hz.user.device_screen_width",ed.MOBILE_INSTALL_DATE="hz.mobile_install_date",ed.EXPERIMENTS_ASSIGNED="hz.assigned_experiment_variants",ed.EXPERIMENTS_EXPOSED="hz.experiment_exposed_variants",ed.EXPERIMENT_ID="hz.experiment_id",ed.EXPERIMENT_VARIANT_NAME="hz.experiment_variant_name",ed.EXPERIMENT_TRIGGERED_PROPERTY_VALUE="hz.experiment_triggered_property_value",ed.EXPERIMENT_TRIGGERED_EXPOSURE_EVENT="hz.experiment_triggered_exposure_event",ed.GLOBAL_HOLDOUTS_ASSIGNED="hz.event.assigned_holdout_variants",ed.FEATURE_ROLLOUTS_ASSIGNED="hz.user.pfr_assigned",ed.CONTENT_REPLACE_TYPE="custom.content.replace_type",ed.CUSTOM_UI_SEARCH_TYPE="custom.ui.search_type",ed.CUSTOM_UI_KEYWORK_RANK="custom.ui.keyword_rank",ed.CUSTOM_SEARCH_PREFIX_QUERY="custom.search.prefix_query",ed.CUSTOM_SEARCH_SUGGESTION_LIST_SHOWN="custom.search.suggestion_list_shown",ed.CUSTOM_TASK_NAME="custom.task.name",ed.CUSTOM_TASK_TYPE="custom.task.type",ed.CUSTOM_TASK_IS_WEBPAGE="custom.task.is_webpage",ed.CUSTOM_TASK_CREATE_SELECTION="custom.task.create_selection",ed.CUSTOM_SEARCH_SUGGESTED_TASK_AND_QUICKACTION="custom.search.suggested_task_and_quickaction",ed.CUSTOM_QA_GROUP="custom.qa.group",ed.CUSTOM_QA_TYPE="custom.qa.type",ed.CUSTOM_QA_LOCATION="custom.qa.location",ed.CUSTOM_SEARCH_ID="custom.search.id",ed.CUSTOM_SEARCH_QUERY_SUGGESTION_COUNT="custom.search.query_suggestion_count",ed.CUSTOM_SEARCH_QUERY_SUGGESTION_ELIGIBLE="custom.search.query_suggestion_eligible",ed.CUSTOM_SEARCH_RESULT_COUNT="custom.search.result_count",ed.CUSTOM_CONTENT_IMPRESSION_LIST="custom.content.impression_list",ed.CUSTOM_TEMPLATES_TASK_NAME="custom.templates.task",ed.CUSTOM_SEARCH_TOOL_NAME="custom.tool.name",ed.CUSTOM_SEARCH_SUGGESTED_TOOL="custom.search.suggested_tool",ed.CUSTOM_RECOMMENDED_SEARCH_CLICK="custom.recommended_search_click",ed.CUSTOM_RECOMMENDATION_SOURCE="custom.recommendation.source",ed.CUSTOM_QUICK_ASSIGN_BUTTON="custom.quick_assign.location",ed.CUSTOM_SEARCH_RANK="custom.search.rank",ed.CUSTOM_TEMPLATES_PAGE_COUNT="custom.templates.page_count",ed.CUSTOM_MOBILE_DOWNLOAD_TRIGGER="custom.mobile.download_trigger",ed.CUSTOM_UI_STYLE_FILTER="custom.ui.style_filter",ed.CUSTOM_UI_MOOD_FILTER="custom.ui.mood_filter",ed.CUSTOM_UI_TYPE_FILTER="custom.ui.type_filter",ed.CUSTOM_UI_REGION_FILTER_ALL="custom.ui.region_filter_all",ed.CUSTOM_UI_REGION_FILTER_DEFAULT="custom.ui.region_filter_default",ed.CUSTOM_UI_REGION_FILTER_ADDED="custom.ui.region_filter_added",ed.CUSTOM_UI_STATUS_FILTER="custom.ui.status_filter",ed.CUSTOM_UI_CATEGORY_FILTER="custom.ui.category_filter",ed.CUSTOM_UI_SUBJECT_FILTER="custom.ui.subject_filter",ed.CUSTOM_UI_GRADE_FILTER="custom.ui.grade_filter",ed.CUSTOM_UI_ACTIVITY_TYPE_FILTER="custom.ui.activity_type_filter",ed.CUSTOM_UI_SIZE_FILTER="custom.ui.size_filter",ed.CUSTOM_UI_TARGET_RESOURCE_FILTER="custom.ui.target_resource_filter",ed.CUSTOM_UI_KEYWORD_FILTER="custom.ui.keyword_filter",ed.CUSTOM_UI_TASK_FILTER="custom.ui.task_filter",ed.CUSTOM_UI_PEOPLE_FILTER="custom.ui.people_filter",ed.CUSTOM_UI_COLOR_FILTER="custom.ui.color_filter",ed.CUSTOM_UI_GENRE_FILTER="custom.ui.genre_filter",ed.CUSTOM_UI_VOCAL_FILTER="custom.ui.vocal_filter",ed.CUSTOM_UI_ORIENTATION_FILTER="custom.ui.orientation_filter",ed.CUSTOM_UI_GENERATIVE_AI_FILTER="custom.ui.generative_ai_filter",ed.CUSTOM_UI_SEARCH_KEYWORD_LENGTH="custom.ui.search_keyword_length",ed.CUSTOM_UI_SEARCH_KEYWORD_TOKEN_COUNT="custom.ui.search_keyword_token_count",ed.USS_TRACKING_NULL_RECOVERY="uss_tracking.null_recovery",ed.USS_TRACKING_QUERY_RECALL="uss_tracking.original_query_recall",ed.USS_TRACKING_ADOBE_ONE_RECALL="uss_tracking.adobe_one_recall",ed.USS_TRACKING_ADOBE_ONE_RESCORE="uss_tracking.adobe_one_rescore",ed.USS_TRACKING_DESIGN_TYPE_BOOST="uss_tracking.design_type_boost",ed.USS_TRACKING_VIDEO_T20_RESULT_COUNT="uss_tracking.video_t20_result_count",ed.USS_TRACKING_VIDEO_T100_RESULT_COUNT="uss_tracking.video_t100_result_count",ed.USS_TRACKING_QUERY_INTENT="uss_tracking.query_intent",ed.USS_TRACKING_SPELLCHECK_IS_CORRECTED="uss_tracking.spellcheck_is_corrected",ed.USS_TRACKING_CONTENT_INTERLEAVING_EXECUTED="uss_tracking.content_interleaving_executed",ed.USS_TRACKING_IS_VALID_RECALL_SET_FOR_CONTENT_INTERLEAVING="uss_tracking.is_valid_recall_set_for_content_interleaving",ed.USS_TRACKING_NO_OF_LONG_PROMPT_AC_SUGGEST="uss_tracking.no_of_longprompt_ac_suggest",ed.CUSTOM_SEARCH_LONG_PROMPT_QUERY="custom.search.long_prompt_query",ed.CUSTOM_SCREEN_LOAD_TYPE="custom.screen_load_time",ed.CUSTOM_SESSION_RESTORE_REASON="custom.session_restore_reason",ed.CUSTOM_PAGE_TASK_ID="custom.page.task_id",ed.CUSTOM_PAGE_UPDATED_TASK_ID="custom.page.updated_task_id",ed.CUSTOM_TASK_GROUP="custom.task.group",ed.CUSTOM_TASK_SUBGROUP="custom.task.subgroup",ed.CUSTOM_PANEL_NAME="custom.panel.name",ed.CUSTOM_PRINT_WORKFLOW="custom.print.workflow",ed.CUSTOM_PRINT_SIZE="custom.print.size",ed.CUSTOM_ADDON_IS_AUTHENTICATED="custom.addon.is_authenticated",ed.CUSTOM_LINK_DETAILS="custom.link.details",ed.CUSTOM_UI_CTA_MESSAGE="custom.ui.cta_message",ed.CUSTOM_UI_CARD_MESSAGE="custom.ui.card_message",ed.CUSTOM_TEMPLATE_BRANDED="custom.template_branded",ed.CUSTOM_ANIMATION_EFFECT_CATEGORY="custom.animation.effect_category",ed.CUSTOM_ANIMATION_EFFECT_ID="custom.animation.effect_id",ed.CUSTOM_ANIMATION_ADJUSTMENT_MAP="custom.animation.adjustment_map",ed.CUSTOM_ANIMATION_IS_MULTISELECT="custom.animation.is_multiselect",ed.CUSTOM_ANIMATION_SCENE_PRESET_CATEGORY="custom.animation.scene_preset_category",ed.CUSTOM_ANIMATION_SCENE_PRESET_ID="custom.animation.scene_preset_id",ed.CUSTOM_ANIMATION_NUM_CLICK_ORDERS="custom.animation.num_click_orders",ed.CUSTOM_ANIMATION_NUM_CLICK_ORDER_ACTION_CARDS="custom.animation.num_click_order_action_cards",ed.CUSTOM_CLICK_ORDER_ADJUSTMENT_TYPE="custom.click_order.adjustment_type",ed.CUSTOM_TRANSITION_ADJUSTMENT_MAP="custom.transition.adjustment_map",ed.CUSTOM_TRANSITION_DURATION="custom.transition.duration",ed.CUSTOM_TRANSITION_EFFECT_NAME="custom.transition.effect_name",ed.CUSTOM_TRANSITION_EFFECT_ID="custom.transition.effect_id",ed.CUSTOM_TRANSITION_NUM_PAGES_APPLIED="custom.transition.num_pages_applied",ed.CUSTOM_TRANSITION_NUM_APPLIED="custom.transition.num_transition_applied",ed.CUSTOM_PROJECT_ID="custom.project.id",ed.CUSTOM_PROJECTS_OPEN_FROM="custom.projects.open_from",ed.CUSTOM_COLLAB_WORKFLOW="custom.collab.workflow",ed.CUSTOM_LIBRARY_FILTER="custom.library.filter",ed.CUSTOM_LIBRARY_TYPE="custom.library.type",ed.CUSTOM_COLLAB_ACCESS_LEVEL="custom.collab.access_level",ed.CUSTOM_COLLAB_USER_TYPE="custom.collab.user_type",ed.CUSTOM_LIBRARY_ASSET_TYPES="custom.library.asset_types",ed.CUSTOM_GENERAL_TOGGLE_MODE="custom.general.toggle_mode",ed.CUSTOM_LIBRARY_COUNT="custom.library.count",ed.CUSTOM_PROJECT_COUNT="custom.project.count",ed.CUSTOM_REFERRER_APP="custom.referrer.app",ed.CUSTOM_REFERRER_LANDING_TAB="custom.referrer.app_landing_tab",ed.CUSTOM_REFERRER_ASSET_ID="custom.referrer.app_integration_asset_id",ed.CUSTOM_REFERRER_INTENT="custom.referrer.app_intent",ed.CUSTOM_REFERRER_ACTION="custom.referrer.app_action",ed.CUSTOM_REFERRER_NBA_ACTION="custom.referrer.nba_action",ed.CUSTOM_REFERRER_LOCATION="custom.referrer.location",ed.CUSTOM_CONTENT_LOCK_STATUS="custom.content.lock_status",ed.CUSTOM_DOCUMENT_LOCK_STATUS="custom.document.lock_status",ed.CUSTOM_CONTENT_LOCK_SETTING="custom.content.lock_setting",ed.EVENT_SOURCE_OS_VERSION="hz.user.os_version",ed.EVENT_SOURCE_OS_NAME="hz.user.os_name",ed.EVENT_SOURCE_DEVICE_MODEL="hz.user.device_model",ed.EVENT_SOURCE_BROWSER_NAME="hz.user.browser_name",ed.EVENT_SOURCE_BROWSER_VERSION="hz.user.browser_version",ed.EVENT_SOURCE_PLATFORM_TYPE_DETAIL="hz.user.platform_type_detail",ed.CUSTOM_DOCUMENT_NAVIGATION_METHOD="custom.document.navigation_method",ed.CUSTOM_DOCUMENT_PREVIOUS_NAVIGATION_METHOD="custom.document.previous_navigation_method",ed.CUSTOM_CONTENT_PAGE_COUNT="custom.content.page_count",ed.CUSTOM_DOCUMENT_RESOLUTION="custom.document.resolution",ed.CUSTOM_UI_ADD_PAGE_OPTION="custom.ui.add_page_option",ed.CUSTOM_TEXT_AUTO_STYLE="custom.text.auto_style",ed.CUSTOM_TEXT_FLOW_FLAG="custom.text.text_flow_flag",ed.CUSTOM_OPERATION_NAME="custom.operation.name",ed.CUSTOM_OPERATION_PREVIEW="custom.operation.preview",ed.CUSTOM_OPERATION_RESULT_STATUS="custom.operation.result_status",ed.CUSTOM_OPERATION_TARGET_ACTION="custom.operation.target_action",ed.CUSTOM_OPERATION_TARGET_NAME="custom.operation.target_name",ed.CUSTOM_OPERATION_TARGET_NORMALIZED_VALUE="custom.operation.target_normalized_value",ed.CUSTOM_OPERATION_TARGET_VALUE="custom.operation.target_value",ed.CUSTOM_OPERATION_TARGET_VALUE_ORIGINAL="custom.operation.target_value_original",ed.CUSTOM_TEXT_SELECTION_SPAN="custom.text.selection_span",ed.CUSTOM_OPERATION_TYPE="custom.operation.type",ed.CUSTOM_TEXT_SELECTION_METHOD="custom.text.selection_method",ed.CUSTOM_FONT_TYPE="custom.font.type",ed.CUSTOM_TEXT_ORIGINAL_FONT="custom.text.original_font",ed.CUSTOM_TEXT_FALLBACK_FONT="custom.text.fallback_font",ed.CUSTOM_TEXT_FALLBACK_TYPE="custom.text.fallback_type",ed.CUSTOM_TEXT_SCRIPT_CODE="custom.text.script_code",ed.CUSTOM_TEXT_COUNT="custom.text.count",ed.CUSTOM_TEXT_NUM_OBJECTS="custom.text.num_objects",ed.CUSTOM_DOCUMENT_SPELLCHECKER_STATUS="custom.document.spellchecker_status",ed.CUSTOM_TEXT_SPELLCHECKER_LANGUAGE="custom.text.spellchecker_language",ed.CUSTOM_TEXT_SPELLCHECKER_ACTION="custom.text.spellchecker_action",ed.CUSTOM_TEXT_SPELLCHECKER_RECOMMENDATION_RANK="custom.text.spellchecker_recommendation_rank",ed.CUSTOM_TEXT_SPELLCHECKER_IGNORED_WORD="custom.text.spellchecker_ignored_word",ed.EVENT_MOBILE_EXPERIENCE_TYPE="hz.event.mobile_experience_type",ed.EVENT_VIDEO_WEBCODECS_EXPERIENCE="hz.event.video_webcodecs_experience",ed.CUSTOM_GIF_LOOP_TYPE="custom.gif.loop_type",ed.CUSTOM_CONTENT_LOOP_TYPE="custom.content.loop_type",ed.CUSTOM_CONTENT_COMPLETE_LOOP="custom.content.complete_loop",ed.EVENT_MOBILE_BUILD_TYPE="hz.event.mobile_build_type",ed.NUM_PAGES_ADDED="custom.document.num_pages_added_using_copy_paste",ed.ADDED_PAGE_PREVIOUS_TASK="custom.added_page.previous_task",ed.CUSTOM_FEEDBACK_SATISFACTION_RESPONSE="custom.feedback.satisfaction_response",ed.CUSTOM_GEN_AI_EXPAND="custom.gen_ai.expand",ed.CUSTOM_RESIZE_MODEL_ID="custom.resize.model_id",ed.CUSTOM_RESIZE_RECENT_ENABLED="custom.resize.recent_enabled",ed.CUSTOM_RESIZE_TYPE="custom.resize.type",ed.CUSTOM_RESIZE_ORIGINAL_ASPECT_RATIO="custom.resize.original_aspect_ratio",ed.CUSTOM_RESIZE_RESIZED_ASPECT_RATIO="custom.resize.resized_aspect_ratio",ed.CUSTOM_RESIZE_DESIGN_TOKEN_COUNT="custom.resize.design_token_count",ed.CUSTOM_PAGE_TASK_GROUP="custom.page.task_group",ed.CUSTOM_PRINT_ADDON_PAGE_TYPE="custom.print_addon.page_type",ed.CUSTOM_PRINT_ADDON_EXPERIENCE_TYPE="custom.print_addon.experience_type",ed.CUSTOM_INPUT_WIDTH="custom.input_width",ed.CUSTOM_INPUT_HEIGHT="custom.input_height",ed.CUSTOM_INPUT_UNIT="custom.input_unit",ed.CUSTOM_LAYER_SELECTION_METHOD="custom.layer.selection_method",ed.CUSTOM_LAYER_SELECTION_TYPE="custom.layer.selection_type",ed.CUSTOM_LAYER_COACHMARK_SELECTION="custom.layer.coachmark_selection",ed.CUSTOM_SHARE_MENU_TYPE="custom.share.menu_type",ed.CUSTOM_OUTLINE_TO_PRESENTATION_FLAG="custom.presentation.outline_to_presentation_flag",ed.CUSTOM_DOCUMENT_ACROBAT_ORIGIN_FLAG="custom.document.acrobat_origin_flag",ed.CUSTOM_PRESENTATION_AUDIENCE="custom.outline_to_presentation.presentation_audience",ed.CUSTOM_PRESENTATION_TONE="custom.outline_to_presentation.presentation_tone",ed.CUSTOM_PRESENTATION_LENGTH="custom.outline_to_presentation.presentation_length",ed.CUSTOM_PRESENTATION_LEVEL_OF_DETAIL="custom.outline_to_presentation.level_of_detail",ed.CUSTOM_PRESENTATION_IMAGE_SOURCES="custom.outline_to_presentation.presentation_image_sources",ed.CUSTOM_USE_DOC_IMAGES_TOGGLE_STATUS="custom.outline_to_presentation.use_doc_images_toggle_status",ed.CUSTOM_GENERATIVE_PRESENTATION_GENERATED_LANGUAGE="custom.generative_presentation.generated_language",ed.CUSTOM_PRESENTATION_NUM_LAYOUTS="custom.presentation.num_layouts",ed.CUSTOM_PRESENTATION_LAYOUTS_DETAILS="custom.presentation.layouts_details",ed.CUSTOM_DOCUMENT_RULERS_STATUS="custom.document.rulers_status",ed.CUSTOM_ACTION_NAME="custom.action.name",ed.CUSTOM_GEN_AI_HAS_3P_MODELS="custom.gen_ai.has_3p_models",ed.IS_FOCUS_MODE="is_focus_mode",ed.CUSTOM_FOCUS_MODE_ENTRY="custom.focusmode.entry",ed.CUSTOM_FOCUS_MODE_TYPE="custom.focusmode.type",ed.CUSTOM_ICON_NUM_COLORS="custom.icon.num_colors",ed.CUSTOM_ICON_CUSTOMIZATION_TYPE="custom.icon.customization_type",ed.IS_IN_GROUP="custom.content.grouped_element_flag",ed.IS_GROUP="custom.content.is_group",ed.GROUP_ELEMENTS="custom.group.grouped_elements_count",ed.GROUP_ACTION_AREA="custom.group.action_area",ed.NUM_GROUPS="custom.document.num_groups",ed.CUSTOM_FEEDBACK_TRIGGER="custom.feedback.trigger",ed.CUSTOM_CLIP_LENGTH="custom.clip.length",ed.CUSTOM_RECOMMENDATION_LIST="custom.recommendation.list",ed.CUSTOM_VIDEOS_ID="custom.videos.id",ed.CUSTOM_UPLOADED_VIDEO_COUNT="custom.video.uploaded_video_count",ed.CUSTOM_AUDIO_CHUNK="custom.audio.chunk",ed.CUSTOM_ADDON_ID="custom.addon.id",ed.CUSTOM_ADDON_NAME="custom.addon.name",ed.CUSTOM_TEMPLATE_ID="custom.template.id",ed.CUSTOM_SERVICE_TYPE="custom.service.type",ed.CUSTOM_FEEDBACK_SCORE="custom.feedback.score",ed.CUSTOM_TEMPLATES_TASK="custom.templates.task",ed.CUSTOM_TEMPLATE_TOPICS="custom.template.topics",ed.CUSTOM_FEEDBACK_CONSENT="custom.feedback.consent",ed.CUSTOM_PARENT_TEMPLATE_ID="custom.parent_template.id",ed.CUSTOM_TEMPLATE_VARIANT_TYPE="custom.template_variant.type",ed.CUSTOM_FEEDBACK_FOLLOWUP_RESPONSE="custom.feedback.followup_response",ed.CUSTOM_FEEDBACK_CATEGORY_FOLLOWUP="custom.feedback.category_followup",ed.CUSTOM_FEEDBACK_DETAIL_RESPONSE="custom.feedback.detail_response",ed.CUSTOM_FEEDBACK_CATEGORY_RESPONSE="custom.feedback.category_response",ed.CUSTOM_DOCUMENT_ID="custom.document.id",ed.CUSTOM_TIMELINE_ID="custom.timeline.id",ed.CUSTOM_EXPORT_REMAINING_LIMIT="custom.export.remaining_limit",ed),ep=((k={}).PROMO_ID="custom.campaign.promo_id",k.CGEN="custom.campaign.cgen_code",k.TRACKING_ID="custom.campaign.tracking_id",k.SDID="custom.campaign.sdid",k.MV="custom.campaign.mv",k.MV2="custom.campaign.mv2",k.RECENT_CAMPAIGN="custom.campaign.recent",k.RECENT_MV="custom.campaign.recent_mv",k.RECENT_MV2="custom.campaign.recent_mv2",k.REFERRER="custom.referrer.app",k),ef=((V={}).event="event",V.content="content",V.source="source",V.user="user",V.custom="custom",V),em=((B={}).UNINITIALIZED="uninitialized",B.ALLOWED="allowed",B.DENIED="denied",B);let eT="can not get ECID";var eS="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),eO=new Uint8Array(16);let eC=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ev=function(e){return"string"==typeof e&&eC.test(e)};for(var ey=[],eA=0;eA<256;++eA)ey.push((eA+256).toString(16).substr(1));let eR=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(ey[e[t+0]]+ey[e[t+1]]+ey[e[t+2]]+ey[e[t+3]]+"-"+ey[e[t+4]]+ey[e[t+5]]+"-"+ey[e[t+6]]+ey[e[t+7]]+"-"+ey[e[t+8]]+ey[e[t+9]]+"-"+ey[e[t+10]]+ey[e[t+11]]+ey[e[t+12]]+ey[e[t+13]]+ey[e[t+14]]+ey[e[t+15]]).toLowerCase();if(!ev(i))throw TypeError("Stringified UUID is invalid");return i},eI=function(e,t,i){var r=(e=e||{}).random||(e.rng||function(){if(!eS)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return eS(eO)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){i=i||0;for(var s=0;s<16;++s)t[i+s]=r[s];return t}return eR(r)},ew=["authorization","authtoken","servicetoken"];function eb(e){if(!e)return e;try{let t=eN(e);if(!t)return{};return JSON.parse(t)}catch(e){return console.error("safeCopy() - Failed to copy",e),{}}}function eN(e){try{let t=new Set;return JSON.stringify(e,(e,i)=>{if("string"==typeof e&&ew.includes(e.toLowerCase()))return"xxxxx";if(null!==i){if(i instanceof Date)return i.toISOString();let e=typeof i;if("object"===e||i instanceof Array){if(t.has(i))return"--visited--";t.add(i)}else if("bigint"===e)return i.toString();else if("number"===e&&!Number.isFinite(i))return i.toString()}return i})}catch(e){return console.error("safeStringify() - Failed to stringify",e),""}}var eU=i(106);Error.stackTraceLimit=50;class eD extends Error{get code(){return this._code}get uuid(){return this._uuid||(this._uuid=eI()),this._uuid}set uuid(e){this._uuid=e}get isExpected(){return!!this._isExpected||this.previousError instanceof eD&&this.previousError.isExpected}set isExpected(e){this._isExpected=e}hasErrorCode(e){return this.code===e||this.previousError instanceof eD&&this.previousError.hasErrorCode(e)}findErrorBy(e){return e(this)?this:this.previousError instanceof eD?this.previousError.findErrorBy(e):void 0}getDataRepresentation(e={skipStack:!1}){let t={kind:"HzError",code:this.code,message:this.message,stack:e.skipStack?void 0:this.stack,uuid:this.uuid,category:this.category,isExpected:this.isExpected,logMetadata:this.logMetadata};return this.previousError&&(this.previousError instanceof eD?t.previousErrorData=this.previousError.getDataRepresentation(e):t.previousErrorData={kind:"Error",name:this.previousError.name,message:this.previousError.message,stack:e.skipStack?void 0:this.previousError.stack}),eb(t)}_getErrorMessageWithCode(e){return(0,eU.isAdobeDCXError)(e)?`${e.name}: ${e.code}: ${e.message}`:`${e.name}: ${e.message}`}_getDCXUnderlyingErrorMessage(e){let t=this._getErrorMessageWithCode(e);return(0,eU.isAdobeDCXError)(e)&&e.underlyingError&&(t+=`
From underlying error: ${this._getDCXUnderlyingErrorMessage(e.underlyingError)}`),t}_getDCXErrorFullStack(e){let t=e.stack;return(0,eU.isAdobeDCXError)(e)&&e.underlyingError&&(t+=`
From underlying error: ${this._getDCXErrorFullStack(e.underlyingError)}`),t}get fullStack(){let e=this.stack||"";return this.previousError&&(e+="\nFrom previous error: ",this.previousError instanceof eD?e+=this.previousError.fullStack:(0,eU.isAdobeDCXError)(this.previousError)?e+=this._getDCXErrorFullStack(this.previousError):e+=this.previousError.stack),e.replace(/access_token=[0-9A-Za-z-._%=]+/,"")}get messageWithCode(){return this.category?`${this.category}: ${this.code}: ${this.message}`:`${this.code}: ${this.message}`}get fullMessageWithCode(){let e=this.messageWithCode;return this.previousError&&(e+="\nFrom previous error: ",this.previousError instanceof eD?e+=this.previousError.fullMessageWithCode:(0,eU.isAdobeDCXError)(this.previousError)?e+=this._getDCXUnderlyingErrorMessage(this.previousError):e+=this.previousError),e}get fullLogMetadata(){let e=this.logMetadata;if(this.previousError instanceof eD){let t=this.previousError.fullLogMetadata;t&&((e=Object.assign({},this.logMetadata)).previousLogMetadata=t)}return e}constructor(e,t,i){super(t),this._code=e,this._isExpected=!1,this.name=e+"Error",i&&(i instanceof Error?this.previousError=i:(this.previousError=i.previousError,this.category=i.category,this.logMetadata=i.logMetadata,this.isExpected=!!i.isExpected))}}let eL={maxAttempts:5,delay:100,shouldUseServiceDelay:!1};function eP(e,t,i){let r={...eL,...t};if("number"!=typeof r.maxAttempts||r.maxAttempts<1||Math.floor(r.maxAttempts)!==r.maxAttempts)throw Error(`retry: maxAttempts must be an integer, at least 1, found ${r.maxAttempts}`);let s=0,o=0,n=r.progressMessagePrefix||e.name,a=(...t)=>((...t)=>{if(!r.timeoutInterval)return e(...t);{let o,a=0,l=new Promise((e,t)=>{let l={...{timedOutOperation:n,attemptNumber:s,maxAttempts:r.maxAttempts,timeoutInterval:r.timeoutInterval},...i};a=setTimeout(()=>{t(new eD("OperationTimeout","Operation Timeout",{logMetadata:l}))},r.timeoutInterval),o=e});return Promise.race([e(...t),l]).then(e=>(o(),e)).finally(()=>{clearTimeout(a)})}})(...t).then(e=>(r.progressCallback&&s>0&&r.progressCallback(`${n} succeeded after retries`,{failedAttempts:s,totalDelay:o}),e)).catch(async e=>{var i;if(++s===r.maxAttempts)return r.progressCallback&&r.progressCallback(`${n} failed after retries, giving up.`,{failedAttempts:s,totalDelay:o},e),Promise.reject(e);if("function"==typeof r.shouldRetry)try{if(!await r.shouldRetry(e))return Promise.reject(e)}catch(e){return r.progressCallback&&r.progressCallback(`shouldRetry of ${n} failed`,{failedAttempts:s,totalDelay:o},e),Promise.reject(e)}let l=0;if(r.shouldUseServiceDelay){let t=e.response;t&&(l=function(e){let t=e.get("retry-after"),i=0;if(t){if(isNaN(t)){let e=Date.parse(t)-Date.now();e>0&&(i=e)}else i=Number(t);i=Math.floor((i+(Math.random()+1))*1e3)}return i}(t.headers))}if(0===l&&(l=Math.floor(2**(s-1)*r.delay*(Math.random()+1))),"function"==typeof r.affectDelayHook){let t=r.affectDelayHook(e);t&&(0===t.type&&(l=t.value),1===t.type&&l<t.value&&(l=Math.floor(t.value*(Math.random()+1))))}if(o+=l,"function"==typeof r.preRetryHook)try{await r.preRetryHook(e)}catch(e){return r.progressCallback&&r.progressCallback(`preRetryHook of ${n} failed`,{failedAttempts:s,totalDelay:o,nextRetry:l},e),Promise.reject(e)}return r.progressCallback&&r.progressCallback(`${n} failed, trying again after delay.`,{failedAttempts:s,totalDelay:o,nextRetry:l},e),(i=l,new Promise(e=>{setTimeout(e,i)})).then(()=>a(...t))});return a}var eM=((G={}).default="default",G.noStore="no-store",G.reload="reload",G.noCache="no-cache",G.forceCache="force-cache",G.onlyIfCached="only-if-cached",G),eF=((W={}).omit="omit",W.sameOrigin="same-origin",W.include="include",W),ex=((z={}).follow="follow",z.error="error",z.manual="manual",z),ek=((H={}).noReferrer="no-referrer",H.noReferrerWhenDowngrade="no-referrer-when-downgrade",H.origin="origin",H.originWhenCrossOrigin="origin-when-cross-origin",H.sameOrigin="same-origin",H.strictOrigin="strict-origin",H.strictOriginWhenCrossOrigin="strict-origin-when-cross-origin",H.unsafeURL="unsafe-url",H),eV=((j={})[j.Browser=0]="Browser",j[j.Node=1]="Node",j[j.Worker=2]="Worker",j);function eB(e){return Symbol.for(e)}var eG=new function e(t){var i=this;i._currentContext=t?new Map(t):new Map,i.getValue=function(e){return i._currentContext.get(e)},i.setValue=function(t,r){var s=new e(i._currentContext);return s._currentContext.set(t,r),s},i.deleteValue=function(t){var r=new e(i._currentContext);return r._currentContext.delete(t),r}},eW=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,s,o=i.call(e),n=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)n.push(r.value)}catch(e){s={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return n},ez=function(e,t,i){if(i||2==arguments.length)for(var r,s=0,o=t.length;s<o;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))},eH=function(){function e(){}return e.prototype.active=function(){return eG},e.prototype.with=function(e,t,i){for(var r=[],s=3;s<arguments.length;s++)r[s-3]=arguments[s];return t.call.apply(t,ez([i],eW(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),ej="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof i.g?i.g:{},eK="1.7.0",eY=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,eX=function(e){var t=new Set([e]),i=new Set,r=e.match(eY);if(!r)return function(){return!1};var s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(null!=s.prerelease)return function(t){return t===e};function o(e){return i.add(e),!1}return function(e){if(t.has(e))return!0;if(i.has(e))return!1;var r=e.match(eY);if(!r)return o(e);var n={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(null!=n.prerelease||s.major!==n.major)return o(e);if(0===s.major)return s.minor===n.minor&&s.patch<=n.patch?(t.add(e),!0):o(e);return s.minor<=n.minor?(t.add(e),!0):o(e)}}(eK),eq=Symbol.for("opentelemetry.js.api."+eK.split(".")[0]);function e$(e,t,i,r){void 0===r&&(r=!1);var s,o=ej[eq]=null!=(s=ej[eq])?s:{version:eK};if(!r&&o[e]){var n=Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return i.error(n.stack||n.message),!1}if(o.version!==eK){var n=Error("@opentelemetry/api: Registration of version v"+o.version+" for "+e+" does not match previously registered API v"+eK);return i.error(n.stack||n.message),!1}return o[e]=t,i.debug("@opentelemetry/api: Registered a global for "+e+" v"+eK+"."),!0}function eQ(e){var t,i,r=null==(t=ej[eq])?void 0:t.version;if(r&&eX(r))return null==(i=ej[eq])?void 0:i[e]}function eJ(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+eK+".");var i=ej[eq];i&&delete i[e]}var eZ=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,s,o=i.call(e),n=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)n.push(r.value)}catch(e){s={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return n},e0=function(e,t,i){if(i||2==arguments.length)for(var r,s=0,o=t.length;s<o;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))},e1=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e3("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e3("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e3("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e3("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e3("verbose",this._namespace,e)},e}();function e3(e,t,i){var r=eQ("diag");if(r)return i.unshift(t),r[e].apply(r,e0([],eZ(i),!1))}(K=eh||(eh={}))[K.NONE=0]="NONE",K[K.ERROR=30]="ERROR",K[K.WARN=50]="WARN",K[K.INFO=60]="INFO",K[K.DEBUG=70]="DEBUG",K[K.VERBOSE=80]="VERBOSE",K[K.ALL=9999]="ALL";var e2=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,s,o=i.call(e),n=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)n.push(r.value)}catch(e){s={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return n},e5=function(e,t,i){if(i||2==arguments.length)for(var r,s=0,o=t.length;s<o;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))},e4=function(){function e(){function e(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=eQ("diag");if(r)return r[e].apply(r,e5([],e2(t),!1))}}var t=this;t.setLogger=function(e,i){if(void 0===i&&(i={logLevel:eh.INFO}),e===t){var r,s,o,n=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(r=n.stack)?r:n.message),!1}"number"==typeof i&&(i={logLevel:i});var a=eQ("diag"),l=function(e,t){function i(i,r){var s=t[i];return"function"==typeof s&&e>=r?s.bind(t):function(){}}return e<eh.NONE?e=eh.NONE:e>eh.ALL&&(e=eh.ALL),t=t||{},{error:i("error",eh.ERROR),warn:i("warn",eh.WARN),info:i("info",eh.INFO),debug:i("debug",eh.DEBUG),verbose:i("verbose",eh.VERBOSE)}}(null!=(s=i.logLevel)?s:eh.INFO,e);if(a&&!i.suppressOverrideMessage){var c=null!=(o=Error().stack)?o:"<failed to generate stacktrace>";a.warn("Current logger will be overwritten from "+c),l.warn("Current logger will overwrite one already registered from "+c)}return e$("diag",l,t,!0)},t.disable=function(){eJ("diag",t)},t.createComponentLogger=function(e){return new e1(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),e6=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,s,o=i.call(e),n=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)n.push(r.value)}catch(e){s={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return n},e9=function(e,t,i){if(i||2==arguments.length)for(var r,s=0,o=t.length;s<o;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))},e7="context",e8=new eH,te=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return e$(e7,e,e4.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,i){for(var r,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return(r=this._getContextManager()).with.apply(r,e9([e,t,i],e6(s),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return eQ(e7)||e8},e.prototype.disable=function(){this._getContextManager().disable(),eJ(e7,e4.instance())},e}(),tt=te.getInstance(),ti=(e4.instance(),Y=function(e,t){return(Y=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}Y(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),tr=function(){function e(){}return e.prototype.createHistogram=function(e,t){return tg},e.prototype.createCounter=function(e,t){return th},e.prototype.createUpDownCounter=function(e,t){return tE},e.prototype.createObservableGauge=function(e,t){return tf},e.prototype.createObservableCounter=function(e,t){return tp},e.prototype.createObservableUpDownCounter=function(e,t){return tm},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),ts=function(){},to=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ti(t,e),t.prototype.add=function(e,t){},t}(ts),tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ti(t,e),t.prototype.add=function(e,t){},t}(ts),ta=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ti(t,e),t.prototype.record=function(e,t){},t}(ts),tl=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),tc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ti(t,e),t}(tl),t_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ti(t,e),t}(tl),tu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ti(t,e),t}(tl),td=new tr,th=new to,tg=new ta,tE=new tn,tp=new tc,tf=new t_,tm=new tu,tT=new(function(){function e(){}return e.prototype.getMeter=function(e,t,i){return td},e}()),tS="metrics",tO=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return e$(tS,e,e4.instance())},e.prototype.getMeterProvider=function(){return eQ(tS)||tT},e.prototype.getMeter=function(e,t,i){return this.getMeterProvider().getMeter(e,t,i)},e.prototype.disable=function(){eJ(tS,e4.instance())},e})().getInstance(),tC=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),tv={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},ty={set:function(e,t,i){null!=e&&(e[t]=i)}},tA=eB("OpenTelemetry Baggage Key");function tR(e){return e.getValue(tA)||void 0}function tI(){return tR(te.getInstance().active())}function tw(e,t){return e.setValue(tA,t)}function tb(e){return e.deleteValue(tA)}var tN=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,s,o=i.call(e),n=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)n.push(r.value)}catch(e){s={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return n},tU=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tD=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=tN(e,2);return[t[0],t[1]]})},e.prototype.setEntry=function(t,i){var r=new e(this._entries);return r._entries.set(t,i),r},e.prototype.removeEntry=function(t){var i=new e(this._entries);return i._entries.delete(t),i},e.prototype.removeEntries=function(){for(var t,i,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var o=new e(this._entries);try{for(var n=tU(r),a=n.next();!a.done;a=n.next()){var l=a.value;o._entries.delete(l)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return o},e.prototype.clear=function(){return new e},e}();function tL(e){return void 0===e&&(e={}),new tD(new Map(Object.entries(e)))}e4.instance();var tP="propagation",tM=new tC;(function(){function e(){this.createBaggage=tL,this.getBaggage=tR,this.getActiveBaggage=tI,this.setBaggage=tw,this.deleteBaggage=tb}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return e$(tP,e,e4.instance())},e.prototype.inject=function(e,t,i){return void 0===i&&(i=ty),this._getGlobalPropagator().inject(e,t,i)},e.prototype.extract=function(e,t,i){return void 0===i&&(i=tv),this._getGlobalPropagator().extract(e,t,i)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){eJ(tP,e4.instance())},e.prototype._getGlobalPropagator=function(){return eQ(tP)||tM},e})().getInstance(),(X=eg||(eg={}))[X.NONE=0]="NONE",X[X.SAMPLED=1]="SAMPLED";var tF="0000000000000000",tx="00000000000000000000000000000000",tk={traceId:tx,spanId:tF,traceFlags:eg.NONE},tV=function(){function e(e){void 0===e&&(e=tk),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),tB=eB("OpenTelemetry Context Key SPAN");function tG(e){return e.getValue(tB)||void 0}function tW(){return tG(te.getInstance().active())}function tz(e,t){return e.setValue(tB,t)}function tH(e){return e.deleteValue(tB)}function tj(e,t){return tz(e,new tV(t))}function tK(e){var t;return null==(t=tG(e))?void 0:t.spanContext()}var tY=/^([0-9a-f]{32})$/i,tX=/^[0-9a-f]{16}$/i;function tq(e){var t,i;return t=e.traceId,tY.test(t)&&t!==tx&&(i=e.spanId,tX.test(i)&&i!==tF)}function t$(e){return new tV(e)}var tQ=te.getInstance(),tJ=function(){function e(){}return e.prototype.startSpan=function(e,t,i){if(void 0===i&&(i=tQ.active()),null==t?void 0:t.root)return new tV;var r,s=i&&tK(i);return"object"==typeof(r=s)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&tq(s)?new tV(s):new tV},e.prototype.startActiveSpan=function(e,t,i,r){if(!(arguments.length<2)){2==arguments.length?n=t:3==arguments.length?(s=t,n=i):(s=t,o=i,n=r);var s,o,n,a=null!=o?o:tQ.active(),l=this.startSpan(e,s,a),c=tz(a,l);return tQ.with(c,n,void 0,l)}},e}(),tZ=new tJ,t0=function(){function e(e,t,i,r){this._provider=e,this.name=t,this.version=i,this.options=r}return e.prototype.startSpan=function(e,t,i){return this._getTracer().startSpan(e,t,i)},e.prototype.startActiveSpan=function(e,t,i,r){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):tZ},e}(),t1=new(function(){function e(){}return e.prototype.getTracer=function(e,t,i){return new tJ},e}()),t3=function(){function e(){}return e.prototype.getTracer=function(e,t,i){var r;return null!=(r=this.getDelegateTracer(e,t,i))?r:new t0(this,e,t,i)},e.prototype.getDelegate=function(){var e;return null!=(e=this._delegate)?e:t1},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,i){var r;return null==(r=this._delegate)?void 0:r.getTracer(e,t,i)},e}(),t2="trace",t5=(function(){function e(){this._proxyTracerProvider=new t3,this.wrapSpanContext=t$,this.isSpanContextValid=tq,this.deleteSpan=tH,this.getSpan=tG,this.getActiveSpan=tW,this.getSpanContext=tK,this.setSpan=tz,this.setSpanContext=tj}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=e$(t2,this._proxyTracerProvider,e4.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return eQ(t2)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){eJ(t2,e4.instance()),this._proxyTracerProvider=new t3},e})().getInstance();let t4=[eE.ERROR_FULL_STACK,eE.ERROR_LOG_METADATA,eE.EVENT_URL],t6=[eE.LOG_METADATA,eE.ERROR_LOG_METADATA],t9=class extends Error{constructor(e,{network:t,retryable:i}={}){super(e),this.name="IngestAPIError",this.retryable=i??!0,this.network=t??!1}},t7=class e{_setVisibilityChangePromise(){this._windowVisibilityChangeHiddenPromise=new Promise(e=>{document.addEventListener("visibilitychange",()=>{this._useKeepaliveForFetch="visible"!==document.visibilityState,e()})})}static createInstance(t,i){return new e(t,i)}async initialized(){await this._initPromise}async shutdown(e=5e3){let t=Array.from(this._pendingRequests);0!==t.length&&(await Promise.race([Promise.allSettled(t),new Promise(t=>setTimeout(t,e))]),this._pendingRequests.clear())}_getHeaders(){return{"Content-Type":"application/json","x-api-key":this._config.ingestApiKey}}_adornSDMEvent(e){e[eE.EVENT_GUID]=e[eE.EVENT_GUID]||eI(),e[eE.EVENT_CATEGORY]=this._config.ingestAppCategory}_redactTokens(e){let t=/access_token=ey[0-9A-Za-z-._%=]+/g,i=/accessToken=ey[0-9A-Za-z-._%=]+/g,r=/Bearer ey[0-9A-Za-z-._%=]+/g;for(let i of t4)this._redactSingleToken(e,i,t,"access_token=XXaccess_token_redactedXX");for(let t of t6)this._redactSingleToken(e,t,r,"XXbearer_token_redactedXX"),this._redactSingleToken(e,t,i,"accessToken=XXaccess_token_redactedXX")}_redactSingleToken(e,t,i,r){if(e[t]){if("string"==typeof e[t]){e[t]=e[t].replace(i,r);return}for(let s in e[t])this._redactSingleToken(e[t],s,i,r)}}_wrapSDMData(e){let t={};return t[eE.EVENT_PKG_INGEST_TYPE]="dunamis",e[eE.OVERRIDE_PKG_PROJECT]?(t[eE.EVENT_PKG_PROJECT]=e[eE.OVERRIDE_PKG_PROJECT],delete e[eE.OVERRIDE_PKG_PROJECT]):t[eE.EVENT_PKG_PROJECT]=this._config.ingestProject,t[eE.EVENT_PKG_TIME]=e[eE.EVENT_TIME_START]||new Date().toISOString(),t[eE.EVENT_PKG_ENVIRONMENT]=this._config.envName,t[eE.EVENT_PKG_DATA]=e,t}_addPromiseToArrayIfDefined(e,t){void 0!==t&&e.push(t)}sendEventData(e,t=!0){let i={headers:this._getHeaders(),body:{events:[]}};for(let t of e)this._adornSDMEvent(t),this._redactTokens(t),i.body.events.push(this._wrapSDMData(t));if(0===i.body.events.length)return Promise.resolve();let r="";try{r=JSON.stringify(i.body)}catch(e){return Promise.reject(new t9("JSON parsing an Ingest event body failed!",{retryable:!1}))}if(!1!==this._appStartupHasCompleted)return this._sendRequest(r,i,t);{let e=[new Promise(e=>{setTimeout(()=>{e()},this._appStartupCompleteTimeout)})];return this._addPromiseToArrayIfDefined(e,this._windowOnloadPromise),this._addPromiseToArrayIfDefined(e,this._windowBeforeUnloadPromise),this._addPromiseToArrayIfDefined(e,this._windowVisibilityChangeHiddenPromise),Promise.race(e).then(()=>(this._appStartupHasCompleted=!0,this._sendRequest(r,i,t)))}}_sendRequest(e,t,i=!0){let r=Date.now(),s=this._host.fetch(this._url.href,{method:"POST",keepalive:this._useKeepaliveForFetch,cache:eM.default,credentials:eF.omit,headers:t.headers,redirect:ex.follow,referrerPolicy:ek.noReferrer,body:e}).catch(e=>{throw new t9(`Network request failed: ${e}`,{network:!0})}).then(e=>{let t=Date.now()-r;if(this._ingestResponseCodesHistogram||(this._ingestResponseCodesHistogram=tO.getMeter(`${this._config?.ingestProject}_ingest_responses`).createHistogram("hz_ingest_response_duration",{advice:{explicitBucketBoundaries:[250,500,1e3,5e3,1e4,15e3,2e4,25e3,3e4]}})),this._ingestResponseCodesHistogram.record(t,{status:e.status}),!e.ok)throw new t9(`Network response was not ok: ${e.status}`,{network:!0})});return i&&(this._pendingRequests.add(s),s.then(()=>{this._pendingRequests.delete(s)},()=>{this._pendingRequests.delete(s)})),s}constructor(e,t){this._appStartupHasCompleted=!1,this._appStartupCompleteTimeout=3e3,this._useKeepaliveForFetch=!1,this._pendingRequests=new Set,this.sendEventData=this.sendEventData.bind(this),this._initPromise=Promise.all([t,e]).then(([e,t])=>{if(this._host=t,this._config=e,this._url=new URL("/ingest",this._config.ingestHost),!0===this._config.ingestWaitForAppStartup){if(this._host.executionEnvironment()!==eV.Browser){this._useKeepaliveForFetch=!0;return}this._windowBeforeUnloadPromise=new Promise(e=>{window.addEventListener("beforeunload",()=>{this._useKeepaliveForFetch=!0,e()})}),"hidden"===document.visibilityState&&(this._appStartupHasCompleted=!0,this._useKeepaliveForFetch=!0),this._setVisibilityChangePromise(),"complete"===document.readyState?this._appStartupHasCompleted=!0:this._windowOnloadPromise=new Promise(e=>{window.addEventListener("load",()=>{e()})})}else this._appStartupHasCompleted=!0})}};var t8=((q={}).EXPERIMENTAL="experiments-resolution",q.BASELINE="baseline-resolution",q),ie=(($=ie||{}).local="local",$.dev="dev",$.stage="stage",$.prod="prod",$);let it={_example:"_example-draft-1",_test:"_test-draft-1",debugComponentTransform:"debug-component-transform-draft-1",interactions:"interactions",variants:"variants",stickyLayoutGrid:"sticky-layout-grid-draft-1",filterFacelab:"filter-facelab-draft-3",graphApiFilters:"graph-api-filters-draft-1",neuralShapeEffects:"neural-shape-effects-draft-1",charts:"charts-draft-9",effectGraph:"effect-graph-draft-3",catalyze:"catalyze-draft-7",nestedTimeline:"nested-timeline-draft-1",keyframes:"keyframes-draft-1",semantics:"semantics-draft-1"};Object.values(it);let ii=new Set(globalThis&&globalThis._hzTempDDMS||[]);var ir=((Q={}).latest="latest",Q.nonCurrent="non-current",Q.rolledBack="rolled-back",Q.expired="expired",Q.invalidated="invalidated",Q.unknown="unknown",Q);class is{get promise(){return this._promiseInUse=!0,this._promise}get isSettled(){return this._isFulfilled||this._isRejected}get isFulfilled(){return this._isFulfilled}get isRejected(){return this._isRejected}adopt(e){return this._promiseInUse=!0,e.then(this._resolvePromise).catch(this._rejectPromise),this.promise}adoptOnce(e){return this._promiseInUse=!0,this._hasAdoptedOnce||(this.adopt(e()),this._hasAdoptedOnce=!0),this.promise}resolve(e){this._resolvePromise(e)}reject(e){this._rejectPromise(e)}reset(){!this._isFulfilled&&!this._isRejected&&this._promiseInUse&&this._rejectPromise&&this._rejectPromise(new eD("DeferredPromiseReset","Deferred was reset before result arrived")),this._isFulfilled=!1,this._isRejected=!1,this._hasAdoptedOnce=!1,this._promiseInUse=!1,this._promise=new Promise((e,t)=>{this._resolvePromise=t=>{this._isFulfilled=!0,this._isRejected=!1,e(t)},this._rejectPromise=e=>{this._isRejected=!0,this._isFulfilled=!1,t(e)}})}constructor(){this._isFulfilled=!1,this._isRejected=!1,this._hasAdoptedOnce=!1,this._promiseInUse=!1,this.reset()}}let io=class{attach(e){this._appConfig instanceof is&&this._appConfig.resolve(e),e.isLazySetting(this.name)&&(this._deferred=new is),this._appConfig=e}get value(){if(this._appConfig instanceof is){let e=`Setting not attached to appConfig: ${this.name}`;throw console.error("AppConfig","Setting",e),new eD("Uninitialized",e,{logMetadata:{"custom.clientFatal":!0}})}if(this._deferred){let e=`This setting doesn't have a value yet, you should use getValue to wait for it: ${this.name}`;throw console.error("AppConfig","Setting",e),new eD("Uninitialized",e,{logMetadata:{"custom.clientFatal":!0}})}return this._appConfig._getSettingValue(this.name)}async getValue(){return(this._appConfig instanceof is&&await this._appConfig.promise,this._deferred&&this._valueProvider)?(this._deferred.adoptOnce(this._valueProvider),this._deferred.promise.then(e=>{delete this._deferred,this._appConfig._setSettingValue(this.name,e)}),this._deferred.promise):this.value}async initialized(){this._appConfig instanceof is&&await this._appConfig.promise}constructor(e){this.name=e.name,this._appConfig=new is}},ia=class extends io{constructor(e,t){super({name:e,valueDefault:t})}},il=class extends io{constructor(e,t,i){super({name:e,valueDefault:t,envOverrides:i})}},ic=class extends io{constructor(e){super({name:e})}},i_=new ia("floodgateApiKey",""),iu=new ia("floodgateClientId","horizon-platform"),id=new il("floodgateFeaturesUrl","https://p13n-stage.adobe.io/fg/api/v3/feature",{prod:"https://p13n.adobe.io/fg/api/v3/feature"}),ih=new il("floodgateSandbox","xlg-stage",{prod:"xlg-prod"}),ig=new ia("floodgateOrgId","9E1005A551ED61CA0A490D45@AdobeOrg"),iE=new ia("rrEntryName",""),ip=new ia("rrEntryConfigName",""),im=new ia("rrTrafficTargetName",""),iT=new ia("rrBuildSha",""),iS=new ia("rrConfigSyncInterval",10),iO=new ia("consoleLogLevel-AppConfig","info"),iC=new ia("enabledLogLevel-AppConfig","info"),iv=new ia("enabledLogLevel-FloodgateConnector","info"),iy=new ia("consoleLogLevel-FloodgateConnector","info"),iA=new ia("max-age",3600),iR=new ia("s-maxage",60),iI={enabledLogLevelAppConfig:iC,consoleLogLevelAppConfig:iO,floodgateApiKey:i_,floodgateOrgId:ig,floodgateSandbox:ih,floodgateClientId:iu,floodgateFeaturesUrl:id,rrEntryName:iE,rrEntryConfigName:ip,rrTrafficTargetName:im,rrBuildSha:iT,rrConfigSyncInterval:iS,enabledLogLevelFloodgateConnector:iv,consoleLogLevelFloodgateConnector:iy,cdnCacheMaxAge:iA,cdnCacheSMaxAge:iR,cdnCacheStaleWhileRevalidate:new ia("stale-while-revalidate",60),cdnCacheStaleIfError:new ia("stale-if-error",86400)};class iw{}iw.UI="ui",iw.AUTHORING="authoring",iw.RENDERING="rendering",iw.DEFAULT="default";class ib{static markBegin(e){let t=`${e.measureName}:begin`;performance.mark(t)}static markEndAndMeasure(e){let t=`${e.measureName}:end`;return performance.mark(t),performance.measure(e.measureName,ib._getMeasureDetail(e))}static _getMeasureDetail(e){let t={start:`${e.measureName}:begin`,end:`${e.measureName}:end`};return t.detail={devtools:{track:e.trackName||ib._getTrackName(),dataType:"track-entry",tooltipText:e.tooltipText||e.measureName}},t}static _getTrackName(){if(ib._isMainThread())return iw.UI;let e=ib._getThreadName();return e.includes("authoring")?iw.AUTHORING:e.includes("rendering")||e.includes("renderer")?iw.RENDERING:(console.warn("No track name found"),iw.DEFAULT)}static _isMainThread(){return"undefined"!=typeof window&&"undefined"!=typeof self&&self===window}static _getThreadName(){return"undefined"!=typeof self&&self.name?self.name:"undefined"!=typeof globalThis&&globalThis.threadName?globalThis.threadName:(console.warn("No thread name found"),"unknown")}}let iN=class{async getEnabledFeatures(e){return(await this._initPromise,this._apiKey&&0!==this._apiKey.length)?this._getAllEnabledFeatures(e):(this._categoryLogger?.warn("Not calling the Floodgate API because the API key is missing!"),{})}async _init(){this._host=await this._appConfig.getHost(),this._apiKey=iI.floodgateApiKey.value,this._clientId=iI.floodgateClientId.value,this._featuresUrl=iI.floodgateFeaturesUrl.value,this._fgOrgId=iI.floodgateOrgId.value,this._fgSandbox=iI.floodgateSandbox.value}async _getAllEnabledFeatures(e){try{let t=await this._callFeaturesApi(e);return this._extractFeaturesFromApiResponse(t)}catch(e){return this._categoryLogger?.warn("Caught error while trying to obtain FloodGate features",e),{}}}_extractFeaturesFromApiResponse(e){if(void 0===e.releases)return{};let t={};return e.releases.forEach(e=>{e.features.forEach(e=>t[e]=!0)}),t}async _callFeaturesApi(e){let t=this._getFeaturesUrl(),i=await this._getRequestHeaders(e),r={measureName:"floodgate-features-api"};ib.markBegin(r);let s=performance.now(),o=eP(()=>this._host.fetch(t,{method:"GET",headers:i}),{maxAttempts:3,timeoutInterval:5e3,shouldRetry:e=>e.message.includes("Failed to fetch")}),n=await o();this._recordDuration(performance.now()-s);let a=ib.markEndAndMeasure(r);return this._categoryLogger?.debug("Floodgate API call duration: ",a?.duration,"ms"),await n.json()}_recordDuration(e){let t=this._appConfig.getOtelServiceName();t&&(this._histogramMeter||(this._histogramMeter=tO.getMeter(t).createHistogram("hz_prx_floodgate_api_duration_ms")),this._histogramMeter.record(e))}_getFeaturesUrl(){return`${this._featuresUrl}?clientId=${this._clientId}`}async _getRequestHeaders(e){let t={"x-api-key":this._apiKey,"Content-Type":"application/json","x-gw-ims-org-id":this._fgOrgId,"x-sandbox-name":this._fgSandbox};return void 0!==e&&(t.Authorization=`Bearer ${e}`),t}constructor(e){this._appConfig=e,this._appConfig.attach(iI),this._categoryLogger=this._appConfig.categoryLogger(),this._initPromise=this._init()}};class iU{static getInstance(e){return void 0===iU._instance&&(iU._instance=new iU(e)),iU._instance}_createFloodgateConnector(){return new iN(this._appConfig)}async syncNow(){return void 0===this._onDemandSyncPromise&&(this._onDemandSyncPromise=new Promise((e,t)=>{setTimeout(async()=>{try{await this._resyncFeatures(!1),e()}catch(e){t(e)}finally{this._onDemandSyncPromise=void 0}})})),this._onDemandSyncPromise}async getFeatureState(e){return(await this._initFloodgatePromise)[e]??!1}registerForUpdates(e,t){if(!0!==e.floodgateData.dynamic)throw Error(`Cannot register feature "${e.name}" for updates because it is not dynamic.`);this._updateListeners[e.name]=t,this._resyncScheduled||this._scheduleResync()}async _initEnabledFeatures(){let e=await this._getAccessToken(),t=await this._floodgateConnector.getEnabledFeatures(e);this._resolveFloodgateFeatures(t)}async _resyncFeatures(e=!0){let t=await this._getAccessToken();void 0===t&&this._appConfig?.categoryLogger()?.warn("AppConfig: Floodgate API will be called without an access token.");let i=await this._floodgateConnector.getEnabledFeatures(t);for(let e of Object.keys(this._updateListeners)){let t=i[e]??!1;try{this._updateListeners[e](t)}catch(i){this._appConfig?.categoryLogger()?.warn(`An error was caught when trying to update feature "${e}" with state "${t}":`,i)}}e&&this._scheduleResync()}_scheduleResync(){setTimeout(async()=>{this._resyncFeatures()},iU.RESYNC_INTERVAL),this._resyncScheduled=!0}async _getAccessToken(e=5e3){let t=new Promise((t,i)=>{setTimeout(()=>t(void 0),e)}),i=await Promise.race([t,this._appConfig.getAccessTokenProvider()]);if(void 0!==i){let e=await i.getAccessTokenValue();if(void 0===e)return e;let t=e.split(".");if(t&&3===t.length)try{let i=atob(t[1]),r=JSON.parse(i);return"guest"===r.atp?void 0:e}catch(e){}return e}this._appConfig?.categoryLogger()?.warn(`AppConfig: No IMS access token provider received in ${e} ms`)}constructor(e){this._resyncScheduled=!1,this._updateListeners={},this._appConfig=e,this._initFloodgatePromise=new Promise((e,t)=>{this._resolveFloodgateFeatures=e}),this._floodgateConnector=this._createFloodgateConnector(),this._initEnabledFeatures()}}iU.RESYNC_INTERVAL=3e5;var iD=((J={}).floodgate="Floodgate",J.override="Release Plane Override",J.code="config-interface.ts",J.experiment="Experiment",J.rollout="Feature Rollout",J.browserFlags="Browser Flags",J);let iL=class{attach(e){if(this._appConfig instanceof is&&this._appConfig.resolve(e),void 0!==this._cachedValue&&this.resetCachedValue(),this._appConfig=e,this._categoryLogger=this._appConfig.categoryLogger(),void 0===this._delayFeatureDetails){let e=this._appConfig.getUrlParams();e&&(this._delayFeatureDetails={logConsole:"true"===e.get("log-floodgate-to-console"),delayAllFloodgateFlags:"true"===e.get("delay-all-floodgate-flags"),delayedFlag:e.get("delay-flag")??""})}let t=(e.isPendingExperimentResolution(this.name)||e.isPendingRolloutResolution(this.name))&&void 0===this._pendingInitialization,i=e._getBrowserFlag(this.name);t&&void 0===i?(this._pendingInitialization=new is,e.registerListener(this.name,e=>{void 0!==e&&this._featureUpdated()})):this._pendingInitialization?.isSettled&&delete this._pendingInitialization,this.initialized()}async isEnabled(){return await this.initialized(),this.enabled}get enabled(){if(this._pendingInitialization){let e=`The feature flag ${this.name} is not initialized yet, please check it asynchronously by using "initialized()"`;throw console.error("AppConfig","Feature",e),this._increaseErrorMetric(),new eD("Uninitialized",e,{logMetadata:{"custom.clientFatal":!0}})}return this._getEnabled()}resetCachedValue(){this._cachedValue=void 0}_increaseErrorMetric(){if(!this._appConfig||this._appConfig instanceof is)return;let e=this._appConfig.getOtelServiceName();if(!e)return;let t=this._appConfig.getSettingUnsafe("envName")??"unknown";tO.getMeter(e).createCounter("hz_prx_feature_flag_error_count").add(1,{featureFlagName:this.name,envName:t})}_getEnabled(){if(void 0!==this._cachedValue)return this._cachedValue;if(this._appConfig instanceof is){let e="Feature not attached to appConfig: "+this.name;throw console.error("AppConfig","Feature",e),new eD("Uninitialized",e,{logMetadata:{"custom.clientFatal":!0}})}let e=()=>void 0;this.floodgateData&&(e=()=>{if(!this.floodgateData.syncedWithFloodgate){let e="Floodgate features can not be checked before feature.initialized(), or await feature.isEnabled()";throw console.error("AppConfig","Feature",e),new eD("Uninitialized",e,{logMetadata:{"custom.clientFatal":!0}})}return this.floodgateData.valueFromFloodgate});let t=this._appConfig._getFeatureEnabled(this.name,e);return this.floodgateData&&this.floodgateData.dynamic||(this._cachedValue=t),t}async initialized(){let e=[];if(this._pendingInitialization){let t=setTimeout(()=>{this._categoryLogger?.warn(`Feature flag "${this.name}" initialization timed out after 30000ms. This may indicate a circular dependency in the initialization chain.`)},3e4);this._pendingInitialization.promise.then(()=>{clearTimeout(t)}),e.push(this._pendingInitialization.promise)}return this.floodgateData&&(void 0===this.floodgateData.initFromFloodgatePromise&&(this.floodgateData.initFromFloodgatePromise=this._initializeFromFloodgate()),e.push(this._delayFeatureIfNeeded()),e.push(this.floodgateData.initFromFloodgatePromise)),Promise.all(e)}async _initializeFromFloodgate(){this._appConfig instanceof is&&await this._appConfig.promise,this.floodgateData&&await this._syncWithFloodgate()}_featureUpdated(){this._pendingInitialization instanceof is&&(this._pendingInitialization.resolve(!0),delete this._pendingInitialization),this._callbacks&&this._callbacks.forEach(e=>{e(this.enabled)})}onUpdate(e){this._callbacks=this._callbacks??[],this._callbacks.push(e)}get _floodgateSyncer(){return iU.getInstance(this._appConfig)}async _syncWithFloodgate(){this._appConfig instanceof is&&await this._appConfig.promise;let e=this.floodgateData.floodgateKey??this.name;this.floodgateData.valueFromFloodgate=await this._floodgateSyncer.getFeatureState(e),this.floodgateData.syncedWithFloodgate=!0,this.floodgateData.dynamic&&(this._featureUpdated(),this._floodgateSyncer.registerForUpdates(this,e=>{this._updateFloodgateState(e)}))}_updateFloodgateState(e){let t=this.enabled;this.floodgateData.valueFromFloodgate=e,this.enabled!==t&&this._featureUpdated()}async _delayFeatureIfNeeded(){this._delayFeatureDetails&&(this._delayFeatureDetails.logConsole?console.log(`FloodgateFeature check ${this.name}`):(this._delayFeatureDetails.delayAllFloodgateFlags||this._delayFeatureDetails.delayedFlag===this.name)&&await new Promise(e=>setTimeout(e,5e3)))}constructor(e){this.name=e.name,e.checkFloodgate&&(this.floodgateData={syncedWithFloodgate:!1},e.floodgateKey&&(this.floodgateData.floodgateKey=e.floodgateKey),e.dynamic&&(this.floodgateData.dynamic=e.dynamic)),this._appConfig=new is}},iP=class extends iL{constructor(e,t){super({name:e,enabledDefault:!!t})}},iM=class{getFeatureFlagInformation(e){for(let{source:t,valueSource:i}of[{source:this.experimentFeatureOverrides,valueSource:iD.experiment},{source:this.rolloutFeatureOverrides,valueSource:iD.rollout},{source:this._localConfig.features,valueSource:iD.browserFlags},{source:this.featureOverrides,valueSource:iD.override},{source:this._compiledAppConfig.floodgateFeatureNames,valueSource:iD.floodgate},{source:this._compiledAppConfig.featureValues,valueSource:iD.code}])if(void 0!==t[e])return{name:e,valueSource:i}}getInformationForAllFeatureFlags(){let e={};return Object.keys(this._compiledAppConfig.featureValues).forEach(t=>{e[t]={name:t,valueSource:iD.code}}),Object.keys(this.experimentFeatureOverrides).forEach(t=>{e[t]={name:t,valueSource:iD.experiment}}),Object.keys(this.rolloutFeatureOverrides).forEach(t=>{e[t]={name:t,valueSource:iD.rollout}}),Object.keys(this._localConfig.features).forEach(t=>{e[t]={name:t,valueSource:iD.browserFlags}}),Object.keys(this.featureOverrides).forEach(t=>{e[t]={name:t,valueSource:iD.override}}),Object.keys(this._compiledAppConfig.floodgateFeatureNames).forEach(t=>{e[t]={name:t,valueSource:iD.floodgate}}),e}setStaticSettings(e){for(let t of Object.keys(e))this.settingOverrides[t]=e[t];this.initResolveSettingOverrides(this.settingOverrides)}setStaticFeatureFlags(e){for(let t of Object.keys(e))this.featureOverrides[t]=e[t];this.initResolveFeatureOverrides(this.featureOverrides)}initializeWithDataTransfer(e,t){this.sessionId=t.sessionId,t.ENABLED_DRAFT_FEATURE_FLAGS&&t.ENABLED_DRAFT_FEATURE_FLAGS.forEach(e=>{ii.has(e)||ii.add(e)}),this.initialize(t.buildInfo,e,t.compiledConfig,t.releasePlaneConfig,t.localConfig,t.featuresFromExperiments||{},void 0,t.featuresFromRollouts||{},!1,void 0)}setLoggerFactory(e){e().then(e=>{this.loggerInstance=e,this.categoryLoggerInstance=e.get("AppConfig")}).catch(console.error)}logger(){return this.loggerInstance}categoryLogger(){return this.categoryLoggerInstance}tryToLogFeatureFlag(e,t,i){this.categoryLoggerInstance?.trace("[AppConfig] Feature flag evaluated",{feature_flag:{key:e,provider_name:t,value:i}})}_notifyFeatureFlagListeners(e,t){t&&t.forEach(t=>t(e))}constructor(){this.featureOverrides={},this.settingOverrides={},this.experimentFeatureOverrides={},this.rolloutFeatureOverrides={},this._featuresFromExperiments={},this._featuresFromRollouts={},this._isExperimentationEnabled=!1,this._isPersonalizationEnabled=!1,this._localConfig={features:{},settings:{}},this.sessionId=eI(),this._initialized=!1,this.initPromiseSettingOverrides=new Promise(e=>{this.initResolveSettingOverrides=e}),this.initPromiseFeatureOverrides=new Promise(e=>{this.initResolveFeatureOverrides=e}),this.initPromiseExperimentFeatureOverrides=new Promise(e=>{this.initResolveExperimentFeatureOverrides=e}),this.initPromiseRolloutFeatureOverrides=new Promise(e=>{this.initResolveRolloutFeatureOverrides=e})}},iF="setting-",ix="_hz_browser_flags",ik="_hz_browser_settings";class iV{get localConfig(){return{features:{...this._localFeatures,...this._sessionFeatures},settings:{...this._localSettings,...this._sessionSettings}}}_extractFlagsAndSessionSettingsFromURLParams(e){try{e.has("feature-reset")&&(this._sessionFeatures={},this._sessionStorage?.removeItem(ix)),this._setFeaturesFromUrlParam(e,"feature-enable",!0),this._setFeaturesFromUrlParam(e,"feature-disable",!1);let t={};e.forEach((e,i)=>{if(i.startsWith(iF)){let r=i.substring(iF.length),s=t[r];void 0===s||Array.isArray(s)?Array.isArray(s)?s.push(e):t[r]=this._parseSettingParam(e):t[r]=[String(s),e]}}),Object.keys(t).forEach(e=>{this._sessionSettings[e]=t[e]})}catch(e){console.warn("AppConfig","BrowserLocalConfig","error extracting feature flags and/or session settings overrides from URL params",e)}}_setFeaturesFromUrlParam(e,t,i){for(let r of e.getAll(t))for(let e of r.split(",")){let t=e.trim();t&&(this._sessionFeatures[t]=i)}}_parseSettingParam(e){let t=e.toLowerCase();return"true"===t||"false"!==t&&(isNaN(Number(e))?e:Number(e))}persistURLConfigToSessionStorage(){try{this._sessionStorage?.setItem(ix,JSON.stringify(this._sessionFeatures)),this._sessionStorage?.setItem(ik,JSON.stringify(this._sessionSettings))}catch(e){console.warn("AppConfig","BrowserLocalConfig","error persisting session config to session storage",e)}}clearSessionStorage(){try{this._sessionFeatures={},this._sessionSettings={},this._sessionStorage?.removeItem(ix),this._sessionStorage?.removeItem(ik)}catch(e){console.warn("AppConfig","BrowserLocalConfig","error clearing session storage",e)}}clearLocalStorage(){try{this._localFeatures={},this._localSettings={},this._localStorage?.removeItem(ix),this._localStorage?.removeItem(ik)}catch(e){console.warn("AppConfig","BrowserLocalConfig","error clearing local storage",e)}}clear(){this.clearSessionStorage(),this.clearLocalStorage()}setFeature(e,t,i){this.setFeatures({[e]:t},i)}setFeaturesToValue(e,t,i){let r={};e.forEach(e=>{r[e]=t}),this.setFeatures(r,i)}setFeatures(e,t){try{let i="session"===t?this._sessionFeatures:this._localFeatures;Object.assign(i,e);let r="session"===t?this._sessionStorage:this._localStorage;if(!r)return void console.warn("AppConfig","BrowserLocalConfig",`${t} storage is required to use setFeatures. in-memory setting only`);r.setItem(ix,JSON.stringify(i))}catch(e){console.warn("AppConfig","BrowserLocalConfig",`error setting features in ${t} storage. in-memory setting only`,e)}}setSetting(e,t,i="session"){this.setSettings({[e]:t},i)}setSettings(e,t="session"){try{let i="session"===t?this._sessionSettings:this._localSettings;Object.assign(i,e);let r="session"===t?this._sessionStorage:this._localStorage;if(!r)return void console.warn("AppConfig","BrowserLocalConfig",`${t} storage is required to use setSettings. in-memory setting only`);r.setItem(ik,JSON.stringify(i))}catch(e){console.warn("AppConfig","BrowserLocalConfig",`error setting settings in ${t} storage. in-memory setting only`,e)}}removeSettings(e,t="session"){try{let i="session"===t?this._sessionSettings:this._localSettings;e.forEach(e=>{delete i[e]});let r="session"===t?this._sessionStorage:this._localStorage;if(!r)return void console.warn("AppConfig","BrowserLocalConfig",`${t} storage is required to use removeSettings. in-memory removing only`);r.setItem(ik,JSON.stringify(i))}catch(e){console.warn("AppConfig","BrowserLocalConfig",`error removing settings in ${t} storage`,e)}}get _localStorage(){try{return window.localStorage}catch(e){return}}get _sessionStorage(){try{return window.sessionStorage}catch(e){return}}_loadFromBrowserStorage(){this._localFeatures=this._loadFeaturesFromStorage("local"),this._localSettings=this._loadSettingsFromStorage("local"),this._sessionFeatures=this._loadFeaturesFromStorage("session"),this._sessionSettings=this._loadSettingsFromStorage("session");let e=this.localConfig;for(let t of Object.keys(e.features)){let i=this._sessionFeatures[t]?"session":"local";console.info("AppConfig","BrowserLocalConfig",`feature[${t}] = ${e.features[t]} (${i} storage)`)}for(let t of Object.keys(e.settings)){let i=this._sessionSettings[t]?"session":"local";console.info("AppConfig","BrowserLocalConfig",`setting[${t}] = ${e.settings[t]} (${i} storage)`)}}_loadFeaturesFromStorage(e){try{let t="session"===e?this._sessionStorage:this._localStorage;if(!t)return console.warn("AppConfig","BrowserLocalConfig",`${e} storage not available. Cannot load features`),{};let i=t.getItem(ix);if(!i)return{};return JSON.parse(i)}catch(t){return console.warn("AppConfig","BrowserLocalConfig",`error loading features from ${e} storage`,t),{}}}_loadSettingsFromStorage(e){try{let t="session"===e?this._sessionStorage:this._localStorage;if(!t)return console.warn("AppConfig","BrowserLocalConfig",`${e} storage not available. Cannot load settings`),{};let i=t.getItem(ik);if(!i)return{};return JSON.parse(i)}catch(t){return console.warn("AppConfig","BrowserLocalConfig",`error loading settings from ${e} storage`,t),{}}}constructor(e=new URLSearchParams(window.location.search)){this._localFeatures={},this._localSettings={},this._sessionFeatures={},this._sessionSettings={},this._loadFromBrowserStorage(),this._extractFlagsAndSessionSettingsFromURLParams(e)}}var iB=((Z={}).appConfig="app_config",Z.browserFlags="browser_flags",Z.expClient="exp_client",Z.floodgate="floodgate",Z.moduleConfig="module_config",Z.releasePlane="release_plane",Z.rollout="rollout",Z);let iG=class extends iM{async initialize(e,t,i,r){this.buildInfo=e,this._setModuleOverrides(i),this.setStaticFeatureFlags({...i.featureValues,...r.features}),this.setStaticSettings({...i.settingValues,...r.settings}),this._isExperimentationEnabled=this.moduleSpecificFeatures["enable-experimentation"]||r.features["enable-experimentation"],this._isPersonalizationEnabled=this.moduleSpecificFeatures["enable-personalization"]||r.features["enable-personalization"],await this.initialized()}createModuleConfig(){throw Error("Method not implemented.")}_setModuleOverrides(e){for(let t of Object.keys(e.moduleSpecificFeatures))this.moduleSpecificFeatures[t]=e.moduleSpecificFeatures[t];for(let t of Object.keys(e.moduleSpecificSettings))this.moduleSpecificSettings[t]=e.moduleSpecificSettings[t];for(let t of Object.keys(e.moduleSpecificEnvSettings))this.moduleSpecificEnvSettings[t]=e.moduleSpecificEnvSettings[t]}async initialized(){await Promise.all([this.initPromiseFeatureOverrides,this.initPromiseSettingOverrides]),this._initialized=!0}async getWorkerDataTransfer(){await this.initialized();let{sessionId:e,buildInfo:t,compiledConfig:i,localConfig:r}=await this._appConfig.getWorkerDataTransfer();return{sessionId:e,buildInfo:t,featuresFromExperiments:{},featuresFromRollouts:{},compiledConfig:{settingValues:{...i.settingValues,...this.settingOverrides,...this.moduleSpecificSettings},featureValues:{...i.featureValues,...this.featureOverrides,...this.moduleSpecificFeatures},moduleSpecificSettings:this.moduleSpecificSettings,moduleSpecificEnvSettings:this.moduleSpecificEnvSettings,moduleSpecificFeatures:this.moduleSpecificFeatures,envSettings:i.envSettings,floodgateFeatureNames:i.floodgateFeatureNames,draftDocModelFeatureNames:i.draftDocModelFeatureNames,lazySettings:i.lazySettings},releasePlaneConfig:{features:{...this.featureOverrides,...this._appConfig.getRolloutFeatureOverrides(),...this._appConfig.getExperimentsFeatureOverrides(),...this.moduleSpecificFeatures},settings:{...this.settingOverrides,...this.moduleSpecificSettings}},localConfig:r,ENABLED_DRAFT_FEATURE_FLAGS:ii}}async getBasicWorkerDataTransfer(){await this.initialized();let{sessionId:e,buildInfo:t,compiledConfig:i,localConfig:r,featuresFromExperiments:s,featuresFromRollouts:o}=await this._appConfig.getBasicWorkerDataTransfer();return{sessionId:e,buildInfo:t,featuresFromExperiments:s,featuresFromRollouts:o,compiledConfig:{settingValues:{...i.settingValues,...this.settingOverrides,...this.moduleSpecificSettings},featureValues:{...i.featureValues,...this.featureOverrides,...this.moduleSpecificFeatures},moduleSpecificSettings:this.moduleSpecificSettings,moduleSpecificEnvSettings:this.moduleSpecificEnvSettings,moduleSpecificFeatures:this.moduleSpecificFeatures,envSettings:i.envSettings,floodgateFeatureNames:i.floodgateFeatureNames,draftDocModelFeatureNames:i.draftDocModelFeatureNames,lazySettings:i.lazySettings},releasePlaneConfig:{features:{...this.featureOverrides,...this.moduleSpecificFeatures},settings:{...this.settingOverrides,...this.moduleSpecificSettings}},localConfig:r,ENABLED_DRAFT_FEATURE_FLAGS:ii}}async hasFeature(e){if(!this._initialized){let e="ModuleConfig not initialized";throw this._appConfig?.categoryLogger()?.error("AppConfig","ModuleConfig",e),Error(e)}return"boolean"==typeof this.moduleSpecificFeatures[e]?this.moduleSpecificFeatures[e]:"boolean"==typeof this.featureOverrides[e]?this.featureOverrides[e]:this._appConfig.hasFeature(e)}whichEnginesEnabled(){return{experimentation:this._isExperimentationEnabled,personalization:this._isPersonalizationEnabled}}async attach(e){for(let t of Object.keys(e))e[t].attach(this),this._attachedConfigInterface.add(e[t]);return this.initialized()}detachConfiguration(){[...this._attachedConfigInterface].forEach(e=>{e.attach(this._appConfig)})}_getFeatureEnabled(e,t){if(!this._initialized){let e="ModuleConfig not initialized";throw this._appConfig?.categoryLogger()?.error("AppConfig","ModuleConfig",e),Error(e)}let i=this._appConfig._getBrowserFlag(e);if(void 0!==i)return this.tryToLogFeatureFlag(e,iB.browserFlags,i),i;if("boolean"==typeof this.moduleSpecificFeatures[e])return this._appConfig.tryToLogFeatureFlag(e,iB.moduleConfig,this.moduleSpecificFeatures[e]),this.moduleSpecificFeatures[e];let r=this.getFeatureValueFromExperiments(e);if(void 0!==r)return this._appConfig.tryToLogFeatureFlag(e,iB.expClient,r),r;let s=this.getFeatureValueFromRolloutConfigurations(e);return void 0!==s?(this._appConfig.tryToLogFeatureFlag(e,iB.rollout,s),s):"boolean"==typeof this.featureOverrides[e]?(this._appConfig.tryToLogFeatureFlag(e,iB.moduleConfig,this.featureOverrides[e]),this.featureOverrides[e]):this._appConfig._getFeatureEnabled(e,t)}_getSettingValue(e){if(!this._initialized){let e="ModuleConfig not initialized";throw this._appConfig?.categoryLogger()?.error("AppConfig","ModuleConfig",e),Error(e)}let t=this._appConfig._getBrowserSetting(e);if(void 0!==t)return t;let i=this._getEnvValue(this.moduleSpecificEnvSettings[e]);return void 0!==i?i:void 0!==this.moduleSpecificSettings[e]?this.moduleSpecificSettings[e]:void 0!==this.settingOverrides[e]?this.settingOverrides[e]:this._appConfig._getSettingValue(e)}async getFeaturesFromExperiments(){return this._appConfig.getFeaturesFromExperiments()}async getFeaturesOverrides(){return this.featureOverrides}async getEnabledFeaturesFromFloodgate(e){return this._appConfig.getEnabledFeaturesFromFloodgate(e)}resolvePendingExperimentFeatureFlags(){this._appConfig.resolvePendingExperimentFeatureFlags()}resolvePendingRolloutFeatureFlags(){this._appConfig.resolvePendingRolloutFeatureFlags()}getBrowserLocalConfig(){return this._appConfig.getBrowserLocalConfig()}async adoptDraftModelFlags(e){return this._appConfig.adoptDraftModelFlags(e)}async getAppDraftModelFlags(){return this._appConfig.getAppDraftModelFlags()}async getFeatures(e){return{...await this._appConfig.getFeatures(e),...this.featureOverrides,...this.moduleSpecificFeatures}}getSettings(){return this._appConfig.getSettings()}hasDraftFeature(e){return this._appConfig.hasDraftFeature(e)}updateFeaturesFromExperiments(e,t=!0){this._appConfig.updateFeaturesFromExperiments(e,t)}updateRolloutFeatures(e,t=!0){this._appConfig.updateRolloutFeatures(e,t)}_resetBrowserFlags(){let e="Method not implemented";throw this._appConfig?.categoryLogger()?.error("AppConfig","ModuleConfig",e),Error(e)}_setBrowserFlag(e,t,i,r){this._appConfig._setBrowserFlag(e,t,i,r)}_setBrowserSetting(e,t){this._appConfig._setBrowserSetting(e,t)}getLocalConfig(){return this._appConfig.getLocalConfig()}setLocalConfig(e){this._appConfig.setLocalConfig(e)}_setBrowserFlagList(e,t,i){this._appConfig._setBrowserFlagList(e,t,i)}setExperimentOverrides(e,t){this._appConfig.setExperimentOverrides(e,t)}setRolloutOverrides(e,t){this._appConfig.setRolloutOverrides(e,t)}registerListener(e,t){this._appConfig.registerListener(e,t)}isPendingExperimentResolution(e){return this._appConfig.isPendingExperimentResolution(e)}isPendingRolloutResolution(e){return this._appConfig.isPendingRolloutResolution(e)}_getEnvValue(e){return this._appConfig._getEnvValue(e)}getFloodgateKeyOrName(e){return this._appConfig.getFloodgateKeyOrName(e)}_getBrowserFlag(e){return this._appConfig._getBrowserFlag(e)}get _environment(){return this._appConfig._environment}async getHost(){return this._appConfig.getHost()}async getCurrentBuildState(){return this._appConfig.getCurrentBuildState()}getCurrentBuildStateSync(){return this._appConfig.getCurrentBuildStateSync()}addBuildStateObserver(e){return this._appConfig.addBuildStateObserver(e)}getFeatureOverrideValue(e){return this._appConfig.getFeatureOverrideValue(e)}getFeatureValueFromExperiments(e){return this._appConfig.getFeatureValueFromExperiments(e)}getFeatureValueFromRolloutConfigurations(e){return this._appConfig.getFeatureValueFromRolloutConfigurations(e)}getAccessTokenProvider(){return this._appConfig.getAccessTokenProvider()}setFactoryForAccessTokenProvider(e){this._appConfig.setFactoryForAccessTokenProvider(e)}syncWithFloodgate(){return this._appConfig.syncWithFloodgate()}persistAllBrowserFlags(){return this._appConfig.persistAllBrowserFlags()}isLazySetting(e){return this._appConfig.isLazySetting(e)}maybeRegisterSettingResolver(e,t){return this._appConfig.maybeRegisterSettingResolver(e,t)}getOtelServiceName(){return this._appConfig.getOtelServiceName()}getSettingUnsafe(e){return this._appConfig.getSettingUnsafe(e)}_setSettingValue(e,t){this._appConfig._setSettingValue(e,t)}setUrlParams(e){this._urlParams=e}getUrlParams(){return this._urlParams}async getExperimentsFeatureOverridesAsync(){return this._appConfig.getExperimentsFeatureOverridesAsync()}async getRolloutFeatureOverridesAsync(){return this._appConfig.getRolloutFeatureOverridesAsync()}constructor(e){super(),this._attachedConfigInterface=new Set,this._urlParams=new URLSearchParams,this.moduleSpecificFeatures={},this.moduleSpecificSettings={},this.moduleSpecificEnvSettings={},this._appConfig=e}};class iW{async ping(){return Promise.resolve("OK")}async getConfiguration(){let e=["/_rr_",this._rrEntryName,this._rrEntryConfigName,this._rrTrafficTargetName,this._bundleHash].join("/");return Promise.race([eP(this._callRrApi.bind(this),{maxAttempts:iW.MAX_RETRIES,delay:iW.RETRY_DELAY})(e),new Promise((e,t)=>setTimeout(t,iW.TIMEOUT,"Timeout"))])}async _callRrApi(e){try{let t=await this._host.fetch(e);return await t.json()}catch(e){throw console.error(`Failed to get configuration from Request Router service. ${e}`),e}}constructor(e){this._host=e.host,this._bundleHash=e.bundleHash,this._rrEntryName=e.rrEntryName,this._rrEntryConfigName=e.rrEntryConfigName,this._rrTrafficTargetName=e.rrTrafficTargetName}}iW.MAX_RETRIES=3,iW.RETRY_DELAY=200,iW.TIMEOUT=3e3;class iz{static isConfigured(){return""!==iI.rrEntryName.value&&""!==iI.rrEntryConfigName.value&&""!==iI.rrTrafficTargetName.value&&""!==iI.rrBuildSha.value}async getDynamicConfig(){return await this._initializedPromise,this._rrsDynamicConfig}initAndScheduleSyncIfNeeded(){iz.isConfigured()?setTimeout(async()=>{await this._setConfiguration(),this._initializedPromiseResolver(),this._scheduleDynamicConfigSync()},7e4):this._initializedPromiseResolver()}async getBuildState(e){return await this._initializedPromise,this.getBuildStateSync(e)}getBuildStateSync(e){return void 0===this._rrsDynamicConfig||void 0===this._rrsDynamicConfig.builds||void 0===this._rrsDynamicConfig.builds[e]?ir.unknown:this._rrsDynamicConfig.builds[e].state}addBuildStateObserver(e,t){this._buildStateObservers.set(e,t),this._rrsDynamicConfig&&this._rrsDynamicConfig.builds[e]&&t(this._rrsDynamicConfig.builds[e].state)}_scheduleDynamicConfigSync(){setInterval(this._setConfiguration,60*iI.rrConfigSyncInterval.value*1e3)}constructor(e){if(this._buildStateObservers=new Map,this._setConfiguration=async()=>{try{let e=this._rrsDynamicConfig;for(let[t,i]of(this._rrsDynamicConfig=await this._rrApiClient.getConfiguration(),this._buildStateObservers.entries())){let r=this._rrsDynamicConfig?.builds[t]?.state;e?.builds[t]?.state!==r&&i(r)}}catch(e){console.error("AppConfig","RrsDynamicConfig","Error while syncing dynamic config",e)}},this._initializedPromise=new Promise(e=>{this._initializedPromiseResolver=e}),!iz.isConfigured()){console.info("AppConfig","RrsDynamicConfig","At least one of the required settings is missing. Skipping heartbeat initialization."),this._initializedPromiseResolver();return}this._host=e,this._rrApiClient=new iW({rrEntryName:iI.rrEntryName.value,rrEntryConfigName:iI.rrEntryConfigName.value,rrTrafficTargetName:iI.rrTrafficTargetName.value,bundleHash:iI.rrBuildSha.value,host:this._host})}}let iH=class e extends iM{static singleton(){return e._singleton||(e._singleton=new e),e._singleton}static async createInitializeAttach(t,i,r,s,o,n,a,l,c){let u=new e;return await u.initialize(t,i,r,s,o,a,l,c),n&&u.attach(n),u}createModuleConfig(){return new iG(this)}registerListener(e,t){void 0===this._updateListeners[e]?this._updateListeners[e]=[t]:this._updateListeners[e]=[...this._updateListeners[e],t]}isPendingExperimentResolution(e){return void 0!==this._pendingExperimentsFeatureFlags[e]}isPendingRolloutResolution(e){return void 0!==this._pendingRolloutConfigurationsFeatureFlags[e]}async getFeaturesFromExperiments(){return await this.initialized(),this._featuresFromExperiments}async getFeaturesOverrides(){await Promise.allSettled([this.initialized(),this._experimentsInitialized(),this._rolloutConfigurationsInitialized()]);let e={},t=iU.getInstance(this);for(let i in this._compiledAppConfig.floodgateFeatureNames)e[i]=await t.getFeatureState(i);return{...e,...this.featureOverrides,...this.rolloutFeatureOverrides,...this.experimentFeatureOverrides}}getBrowserLocalConfig(){return this._browserLocalConfig}_getEnvValue(e){if(void 0!==e){if(!this._initializedEnv){let e="Checking environmental config can only be done after appConfig.initialized()";throw console.error("AppConfig",e),Error(e)}return void 0!==e.envOverrides[this._initializedEnv]?e.envOverrides[this._initializedEnv]:e.default}}_getSettingValue(e){if(!this._initialized)throw console.error("AppConfig","Checking setting config can only be done after appConfig.initialize(..)"),Error("Checking setting config can only be done after appConfig.initialize(..)");let t=this._localConfig.settings[e];if(void 0!==t)return t;if(void 0!==this.settingOverrides[e])return this.settingOverrides[e];let i=this._getEnvValue(this._compiledAppConfig.envSettings[e]);if(void 0!==i)return i;let r=this._compiledAppConfig.settingValues[e];if(void 0!==r)return r;throw Error("Static config not found: "+e)}_setSettingValue(e,t){this._lazySettings?.get(e)!==void 0&&this._lazySettings.delete(e),this.settingOverrides[e]=t,this._lazySettings?.get(e)!==void 0&&this._lazySettings.delete(e),this._requiredSettingsResolvers.has(e)&&(this._requiredSettingsResolvers.get(e)(t),this._requiredSettingsResolvers.delete(e))}_getBrowserFlag(e){return this._localConfig.features[e]}_getBrowserSetting(e){return this._localConfig.settings[e]}async getLocalConfig(){return await this.initialized(),this._localConfig}setLocalConfig(e){this._localConfig=e}getFeatureOverrideValue(e){return"boolean"==typeof this.featureOverrides[e]?this.featureOverrides[e]:void 0}getFeatureValueFromExperiments(e){return"boolean"==typeof this.experimentFeatureOverrides[e]?this.experimentFeatureOverrides[e]:void 0}getFeatureValueFromRolloutConfigurations(e){return"boolean"==typeof this.rolloutFeatureOverrides[e]?this.rolloutFeatureOverrides[e]:void 0}_getFeatureEnabled(e,t){if(!this._initialized){let e="Checking feature config can only be done after appConfig.initialize(..)";throw console.error("AppConfig",e),Error(e)}if("boolean"==typeof this._localConfig.features[e])return this.tryToLogFeatureFlag(e,iB.browserFlags,this._localConfig.features[e]),this._localConfig.features[e];let i=this.getFeatureValueFromExperiments(e);if(void 0!==i)return this.tryToLogFeatureFlag(e,iB.expClient,i),i;if("boolean"==typeof this.rolloutFeatureOverrides[e])return this.tryToLogFeatureFlag(e,iB.rollout,this.rolloutFeatureOverrides[e]),this.rolloutFeatureOverrides[e];if("boolean"==typeof this.featureOverrides[e])return this.tryToLogFeatureFlag(e,iB.releasePlane,this.featureOverrides[e]),this.featureOverrides[e];let r=t();return"boolean"==typeof r?(this.tryToLogFeatureFlag(e,iB.floodgate,r),r):(this.tryToLogFeatureFlag(e,iB.appConfig,!!this._compiledAppConfig.featureValues[e]),!!this._compiledAppConfig.featureValues[e])}async initialize(e,t,i,r,s,o,n,a,l=!0,c){this._initialized?console.warn("AppConfig","AppConfig is already initialized, not doing anything"):(this.attach(iI),this.buildInfo=e,this._host=t,void 0!==s?this._localConfig=s:this._host.sessionStorage()&&(this._browserLocalConfig=this._createBrowserLocalConfig(this._host.searchParams()??new URLSearchParams),this._localConfig=this._browserLocalConfig.localConfig),this._isExperimentationEnabled=this._localConfig.features["enable-experimentation"]||r.features["enable-experimentation"],this._isPersonalizationEnabled=this._localConfig.features["enable-personalization"]||r.features["enable-personalization"],this._compiledAppConfig=i,this._featuresFromExperiments=o||{},this._featuresFromRollouts=a||{},this._isPersonalizationEnabled&&(this._pendingRolloutConfigurationsFeatureFlags={...a}),0===Object.keys(this._featuresFromRollouts).length&&this.initResolveRolloutFeatureOverrides(),0===Object.keys(this._featuresFromExperiments).length&&this.initResolveExperimentFeatureOverrides(),void 0!==r.features["appconfig-wait-for-experiments"]&&(this._waitForExperimentsAndRollouts=r.features["appconfig-wait-for-experiments"]),0===Object.keys(this._featuresFromExperiments).length&&0===Object.keys(this._featuresFromRollouts).length&&(this._waitForExperimentsAndRollouts=!1),this._setStaticFeatureOverrides(r.features),this._configureExperimentsFeatureFlags(r,n),this._configureRolloutsFeatureFlags(c),i.lazySettings.length>0&&(this._lazySettings=new Map,i.lazySettings.forEach(e=>{this._lazySettings.set(e,e)})),this._setStaticSettingOverrides(r.settings),await this.initialized(),l&&this._scheduleDynamicConfigSync())}isLazySetting(e){return this._lazySettings?.get(e)!==void 0}_createBrowserLocalConfig(e){return new iV(e)}_isExperimentsFeatureFlagResolutionEnabled(e){return void 0!==e.settings["experiments-feature-flag-strategy"]?e.settings["experiments-feature-flag-strategy"]!==t8.BASELINE:"string"!=typeof e.settings.env||e.settings.env!==ie.stage}_configureExperimentsFeatureFlags(e,t){if(this._isExperimentationEnabled&&(this._pendingExperimentsFeatureFlags={...this._featuresFromExperiments},t)){let i=this._isExperimentsFeatureFlagResolutionEnabled(e)?t():{};this.experimentFeatureOverrides={...this.experimentFeatureOverrides,...i}}}_configureRolloutsFeatureFlags(e){if(this._isPersonalizationEnabled&&e){let t=e();this.rolloutFeatureOverrides={...this.rolloutFeatureOverrides,...t}}}_scheduleDynamicConfigSync(){iz.isConfigured()&&(this._rrsDynamicConfig=new iz(this._host),this._rrsDynamicConfig.initAndScheduleSyncIfNeeded())}async initialized(){this._initialized||(await Promise.all([this.initPromiseFeatureOverrides,this.initPromiseSettingOverrides]),this._initialized=!0)}updateFeaturesFromExperiments(e,t=!0){for(let i of Object.keys(e))void 0!==this._featuresFromExperiments[i]&&(t&&(this.experimentFeatureOverrides[i]=e[i]),this._notifyFeatureFlagListeners(i,this._updateListeners[i]),delete this._pendingExperimentsFeatureFlags[i]);0===Object.keys(this._pendingExperimentsFeatureFlags).length&&this.initResolveExperimentFeatureOverrides()}updateRolloutFeatures(e,t=!0){for(let i of Object.keys(e))void 0!==this._pendingRolloutConfigurationsFeatureFlags[i]&&(t&&(this.rolloutFeatureOverrides[i]=e[i]),this._notifyFeatureFlagListeners(i,this._updateListeners[i]),delete this._pendingRolloutConfigurationsFeatureFlags[i]);0===Object.keys(this._pendingRolloutConfigurationsFeatureFlags).length&&this.initResolveRolloutFeatureOverrides()}resolvePendingRolloutFeatureFlags(){for(let e in this._pendingRolloutConfigurationsFeatureFlags)void 0!==this._pendingRolloutConfigurationsFeatureFlags[e]&&delete this.rolloutFeatureOverrides[e],delete this.rolloutFeatureOverrides[e],this._notifyFeatureFlagListeners(e,this._updateListeners[e]),delete this._pendingRolloutConfigurationsFeatureFlags[e];this.initResolveRolloutFeatureOverrides()}resolvePendingExperimentFeatureFlags(){for(let e in this._pendingExperimentsFeatureFlags)void 0!==this._pendingExperimentsFeatureFlags[e]&&delete this.experimentFeatureOverrides[e],this._notifyFeatureFlagListeners(e,this._updateListeners[e]),delete this._pendingExperimentsFeatureFlags[e];this.initResolveExperimentFeatureOverrides()}whichEnginesEnabled(){let e={experimentation:!1,personalization:!1};return this._waitForExperimentsAndRollouts&&(e.experimentation=this._isExperimentationEnabled,e.personalization=this._isPersonalizationEnabled),e}_experimentsInitialized(){return this.initPromiseExperimentFeatureOverrides}_rolloutConfigurationsInitialized(){return this.initPromiseRolloutFeatureOverrides}async getHost(){return this.initPromiseSettingOverrides.then(()=>this._host)}async getEnabledFeaturesFromFloodgate(e){return void 0===this._floodgateConnector&&(this._floodgateConnector=new iN(this)),this._floodgateConnector.getEnabledFeatures(e)}async syncWithFloodgate(){return await this.initialized(),iU.getInstance(this).syncNow()}setFactoryForAccessTokenProvider(e){this._atpFactoryResolver(e)}async getAccessTokenProvider(){return(await this._atpFactoryPromise)()}async attach(e){if(e[this._attachMarker])return this.initialized();for(let t of(e[this._attachMarker]=!0,Object.keys(e)))e[t].attach(this);return this.initialized()}setUrlParams(e){this._urlParams=e}getUrlParams(){return this._urlParams}maybeRegisterSettingResolver(e,t){return this._lazySettings?.get(e)!==void 0&&(this._requiredSettingsResolvers.set(e,t),!0)}get _environment(){if(!this._initializedEnv){let e="appConfig._environment can only be checked synchronously after awaiting appConfig.initialize()";throw console.error("AppConfig",e),Error(e)}return this._initializedEnv}_setStaticSettingOverrides(e){let t,i;if("string"==typeof e.env){if(t=e.env,!Object.keys(ie).includes(t))throw console.error("AppConfig",i=`Invalid AppConfig settings override.  Unsupported 'env' value provided = ${t}`),Error(i);this._initializedEnv=t}else throw console.error("AppConfig",i="Invalid AppConfig settings override does not include required 'env'."),Error(i);if("string"!=typeof e.envName)throw console.error("AppConfig",i="Invalid AppConfig settings override does not include required 'envName'."),Error(i);super.setStaticSettings(e)}async getSettings(){await this.initialized();let e={};for(let t of Object.keys(this._compiledAppConfig.settingValues))e[t]=this._compiledAppConfig.settingValues[t];for(let t of Object.keys(this._compiledAppConfig.envSettings)){let i=this._getEnvValue(this._compiledAppConfig.envSettings[t]);void 0!==i&&(e[t]=i)}for(let t of Object.keys(this.settingOverrides))e[t]=this.settingOverrides[t];for(let t of Object.keys(this._localConfig.settings))e[t]=this._localConfig.settings[t];return e}async hasDraftFeature(e){return await this.initialized(),this._localConfig.features[e]??ii.has(e)}async getFeatures(e=!0){if(await this.initialized(),!this._cachedFeaturesWithoutDraft){let e={};for(let t of Object.keys(this._compiledAppConfig.featureValues))e[t]=this._compiledAppConfig.featureValues[t];for(let t of Object.keys(this.featureOverrides))e[t]=this.featureOverrides[t];for(let t of Object.keys(this._localConfig.features))e[t]=this._localConfig.features[t];this._cachedFeaturesWithoutDraft=e}if(!1===e)return this._cachedFeaturesWithoutDraft;if(!this._cachedFeaturesWithDraft){let e={...this._cachedFeaturesWithoutDraft};for(let t of this._compiledAppConfig.draftDocModelFeatureNames)e[t]&&!this._localConfig.features[t]&&(e[t]=!1),void 0!==t&&ii.has(t)&&(e[t]=!0);this._cachedFeaturesWithDraft=e}return this._cachedFeaturesWithDraft}async getWorkerDataTransfer(){await this.initialized();let e=await this.getBasicWorkerDataTransfer();return this._waitForExperimentsAndRollouts&&(await Promise.all([this._experimentsInitialized(),this._rolloutConfigurationsInitialized()]),e.releasePlaneConfig.features={...this.featureOverrides,...this.rolloutFeatureOverrides,...this.experimentFeatureOverrides},e.featuresFromExperiments={},e.featuresFromRollouts={}),e}async getBasicWorkerDataTransfer(){return await this.initialized(),{sessionId:this.sessionId,buildInfo:JSON.parse(JSON.stringify(this.buildInfo)),compiledConfig:this._compiledAppConfig,releasePlaneConfig:{settings:this.settingOverrides,features:{...this.featureOverrides,...this.experimentFeatureOverrides,...this.rolloutFeatureOverrides}},featuresFromExperiments:this._featuresFromExperiments,featuresFromRollouts:this._featuresFromRollouts,localConfig:this._localConfig,ENABLED_DRAFT_FEATURE_FLAGS:ii}}_setStaticFeatureOverrides(e){super.setStaticFeatureFlags(e)}async hasFeature(e){return!!(await this.getFeatures())[e]}async _resetBrowserFlags(){this._browserLocalConfig?.clearSessionStorage()}_setBrowserFlag(e,t,i=!1,r=!1){this._browserLocalConfig?.setFeature(e,t,"session"),i&&(this._localConfig=this._browserLocalConfig?.localConfig??this._localConfig),r&&(this._cachedFeaturesWithDraft=void 0,this._cachedFeaturesWithoutDraft=void 0),this.categoryLoggerInstance?.info("Success - flag set locally in this browser.")}_setBrowserFlagList(e,t,i=!1){this._browserLocalConfig?.setFeaturesToValue(e,t,"session"),i&&(this._cachedFeaturesWithDraft=void 0,this._cachedFeaturesWithoutDraft=void 0),this.categoryLoggerInstance?.info("Success - flag set locally in this browser.")}async _setBrowserSetting(e,t){this._browserLocalConfig?.setSetting(e,t,"session"),this.categoryLoggerInstance?.info("Success - setting set locally in this browser.")}setExperimentOverrides(e,t=!1){this.experimentFeatureOverrides={...this.experimentFeatureOverrides,...e},t&&(this._cachedFeaturesWithDraft=void 0,this._cachedFeaturesWithoutDraft=void 0)}setRolloutOverrides(e,t=!1){this.rolloutFeatureOverrides={...this.rolloutFeatureOverrides,...e},t&&(this._cachedFeaturesWithDraft=void 0,this._cachedFeaturesWithoutDraft=void 0)}getFloodgateKeyOrName(e){if(!this._initialized)throw Error("Checking feature values can only be done after appConfig.initialize(..)");return this._compiledAppConfig.floodgateFeatureNames[e]??void 0}async getAppDraftModelFlags(){await this.initialized();let e=this._localConfig.features;return Object.values(it).filter(t=>e[t]??ii.has(t))}async adoptDraftModelFlags(e){if(!this._browserLocalConfig)return!1;let t={};for(let i of e)t[i]=!0;for(let i of(await this.getAppDraftModelFlags()))e.includes(i)||(t[i]=!1);return this._browserLocalConfig.setFeatures(t,"session"),!0}async persistAllBrowserFlags(){await this.initialized(),this._browserLocalConfig?.persistURLConfigToSessionStorage()}async getCurrentBuildState(){return(await this.initialized(),void 0===this._rrsDynamicConfig)?ir.unknown:this._rrsDynamicConfig.getBuildState(iI.rrBuildSha.value)}getCurrentBuildStateSync(){return void 0===this._rrsDynamicConfig?ir.unknown:this._rrsDynamicConfig.getBuildStateSync(iI.rrBuildSha.value)}addBuildStateObserver(e){this._rrsDynamicConfig?.addBuildStateObserver(iI.rrBuildSha.value,e)}getOtelServiceName(){return this.getSettingUnsafe("serviceName")}getSettingUnsafe(e){if(this._initialized)try{return this._getSettingValue(e)}catch(e){return}}getExperimentsFeatureOverrides(){return this.experimentFeatureOverrides}async getExperimentsFeatureOverridesAsync(){return await this._experimentsInitialized(),this.getExperimentsFeatureOverrides()}getRolloutFeatureOverrides(){return this.rolloutFeatureOverrides}async getRolloutFeatureOverridesAsync(){return await this._rolloutConfigurationsInitialized(),this.getRolloutFeatureOverrides()}constructor(){super(),this._urlParams=new URLSearchParams,this._requiredSettingsResolvers=new Map,this._pendingExperimentsFeatureFlags={},this._pendingRolloutConfigurationsFeatureFlags={},this._updateListeners={},this._waitForExperimentsAndRollouts=!0,this._browserLocalConfig=void 0,this._cachedFeaturesWithDraft=void 0,this._cachedFeaturesWithoutDraft=void 0,this._atpFactoryPromise=new Promise(e=>{this._atpFactoryResolver=e}),this._attachMarker=Symbol("app-config-attach-marker"),"undefined"!=typeof window&&window&&this.setUrlParams(new URLSearchParams(window.location.search))}};class ij{async shutdown(){await this._initializedPromise,clearInterval(this._queueIntervalHandle),this._queueIntervalHandle=void 0,await this._processQueueAsync()}async start(e){this._initializedPromise=this._processOnceInitialized(e),await this._initializedPromise}async _processOnceInitialized(e){this._isInitialized=!0,this._queueIntervalHandle=setInterval(()=>{this._processQueue()},e),this._processQueue()}async initialized(){return this._initializedPromise}_isLowPriority(e){return"error"!==e[eE.LOG_LEVEL]}_isOverflow(){return this._events.length>this._maxQueueLength}_handleOverflow(){this._overflowedEventsCount++;let e=!1;for(let t=0;t<this._events.length;t++)if(this._isLowPriority(this._events[t])){e=!0,console.warn("EventQueue overflow with High Priority Event, dropping log event below error level."),this._events.splice(t,1);break}e||(console.error("EventQueue overflow, dropping important event."),this._events.shift())}queueEventData(e){this._events.push(e),this._isOverflow()&&this._handleOverflow(),this._isInitialized&&this._events.length>=this._batchSize&&this._processQueue()}async _processQueueAsync(){if(this._queueIsSending)return this._queueIsSending.promise;if(this._events.length){for(this._queueIsSending=new is;this._events.length>0;)try{let e=this._events.slice(0,Math.min(this._events.length,this._batchSize));await this._eventDeliveryFunction(e),this._events.splice(0,Math.min(e.length,this._batchSize))}catch(e){console.error("EventQueue: encountered an error trying to send events to Ingest",e);break}this._queueIsSending.resolve(),this._queueIsSending=void 0}}_processQueue(){this._queueIsSending||this._processQueueAsync()}get maxQueueLength(){return this._maxQueueLength}set maxQueueLength(e){this._maxQueueLength=e}get batchSize(){return this._batchSize}set batchSize(e){this._batchSize=e}get overflowedEventsCount(){return this._overflowedEventsCount}get queueIsSendingPromise(){return this._queueIsSending?.promise}get queueLength(){return this._events.length}constructor(e){this._eventDeliveryFunction=e,this._maxQueueLength=500,this._batchSize=10,this._isInitialized=!1,this._overflowedEventsCount=0,this._events=[]}}var iK=((ee={})[ee.offline=0]="offline",ee[ee.online=1]="online",ee);class iY{_updateNetworkState(e){this._currentState!==e&&(this._currentState=e,this._networkStateCallback?.(this.onLine))}get onLine(){return 1===this._currentState}setNetworkStateCallback(e){this._networkStateCallback=e}constructor(){this._currentState=1}}class iX{async shutdown(e=!0){this._waitForQueueToFlush=e,await this._initializedPromise,await this._eventQueue.shutdown(),await this._ingestService.shutdown(),this._waitForQueueToFlush=!0}async _processOnceInitialized(){await this._ingestService.initialized();let e=await this._configPromise;this._eventQueue.maxQueueLength=e.analyticsBufferLimit,await this._eventQueue.start(e.ingestProcessingInterval)}async initialized(){return this._initializedPromise}queueEventData(e){this._eventQueue.queueEventData(e)}async _eventQueueDeliveryFunction(e){let t=e=>!!this._waitForQueueToFlush&&(e instanceof t9&&e.network&&this._callback(iK.offline),!(e instanceof t9)||!1!==e.retryable),i={maxAttempts:this._waitForQueueToFlush?3:1,shouldRetry:t,delay:500},r=eP(this._ingestService.sendEventData,i);this._waitForQueueToFlush?await r(e):this._ingestService.sendEventData(e),this._callback(iK.online)}constructor(e,t,i){this._callback=i,this._waitForQueueToFlush=!0,this._configPromise=t,this._ingestService=t7.createInstance(e,t.then(e=>e.ingestConfig)),this._eventQueue=new ij(this._eventQueueDeliveryFunction.bind(this)),this._initializedPromise=this._processOnceInitialized()}}var iq=((et={}).Windows="Windows",et.ChromeOS="ChromeOS",et.Linux="Linux",et.Mac="Mac",et.iOS="iOS",et.iPadOS="iPadOS",et.Android="Android",et.Unknown="Unknown",et),i$=((ei={}).Chrome="Chrome",ei.Firefox="Firefox",ei.Edge="Edge",ei.Safari="Safari",ei.Samsung="Samsung",ei.WebKitBased="WebKitBased",ei.WebView="NA",ei.Unknown="Unknown",ei),iQ=((er={}).low="low",er.medium="medium",er.high="high",er),iJ=((es={}).MobileWeb="mobile-web",es.DesktopWeb="desktop-web",es.iOSApp="ios-app",es.iPadOSApp="ipad-app",es.ChromeOSApp="chrome-app",es.AndroidApp="android-app",es),iZ=((eo={}).DesktopWeb="desktop-web-browser",eo.DesktopPWA="desktop-web-pwa",eo.MobileWebAndroid="mobile-web-android",eo.MobileWebIOS="mobile-web-iOS",eo.MobileWebIPadOS="mobile-web-ipadOS",eo.iOSApp="mobile-app-iOS",eo.iPadOSApp="mobile-app-ipadOS",eo.AndroidApp="mobile-app-android",eo.DesktopShell="desktop-shell",eo);let i0={[i$.Edge]:/(?:Edge|Edg(?:A|iOS)?)\/(\d+\.[\d.]+)/,[i$.Firefox]:/(?:Firefox|FxiOS)\/(\d+(\.\d+)?)/,[i$.Chrome]:/(?:Chrome|CriOS)\/(\d+\.[\d.]+)/,[i$.Safari]:/version\/(\d+(\.?_?\d+)+)/i,[i$.Samsung]:/(?:SamsungBrowser)\/(\d+\.[\d.]+)/},i1={[iq.Windows]:/Windows NT (\d+\.\d+)/,[iq.Mac]:/Mac OS X (\d+([._]\d+)*)/,[iq.iOS]:/OS (\d+([._]\d+)*)/,[iq.iPadOS]:/OS (\d+([._]\d+)*)/,[iq.Android]:/Android (\d+(\.\d+)*)/,[iq.ChromeOS]:/CrOS(?: [a-z0-9-_.]+)? (\d+(\.\d+)*)/},i3=/Version\/(\d+([._]\d+)*)/;class i2{get deviceOs(){return this._deviceOs??(this._deviceOs=this._getDeviceOS())}get deviceModel(){return this._deviceModel??(this._deviceModel=this._getDeviceModel())}get deviceOsVersion(){return this._deviceOsVersion??(this._deviceOsVersion=this._getDeviceOSVersion())}async deviceOsVersionNumber(){let e=await this._navigator.userAgentData?.getHighEntropyValues?.(["platformVersion"]);return e?.platformVersion||this.deviceOsVersion}get webBrowser(){return this._webBrowser??(this._webBrowser=this._getWebBrowser())}get webBrowserVersion(){return this._webBrowserVersion??(this._webBrowserVersion=this._getWebBrowserVersion())}get platformIsMacLike(){return this.deviceOs===iq.Mac||this.deviceOs===iq.iOS}get isMacDevice(){return this.deviceOs===iq.Mac}get isAndroidDevice(){return this.deviceOs===iq.Android}get isLinuxDevice(){return this.deviceOs===iq.Linux}get isIOSDevice(){return this.deviceOs===iq.iOS}get isIPadOSDevice(){return this.deviceOs===iq.iPadOS}get isChromeOSDevice(){return this.deviceOs===iq.ChromeOS}get isMobile(){return this.isIOSDevice||this.isAndroidDevice}get isChromeBrowser(){return this.webBrowser===i$.Chrome}get isFirefoxBrowser(){return this.webBrowser===i$.Firefox}get isEdgeBrowser(){return this.webBrowser===i$.Edge}get isSafariBrowser(){return this.webBrowser===i$.Safari}get isSamsungBrowser(){return this.webBrowser===i$.Samsung}get isWebKitBrowser(){return this.webBrowser===i$.Safari||this.webBrowser===i$.WebKitBased}get isMobileWeb(){return this.isMobile&&!this.isMobileWebView}get isMsftPWA(){return this._getMsftPWA()}get isNonMsftPWA(){return this._getNonMsftPWA()}get isDesktopShellApp(){return this._getDesktopShellApp()}get PWAInstallationSource(){return this._getWithinExpressPWAInstallation()?"within-express":this.isMsftPWA?"msstore":this.isNonMsftPWA?"browser":"NA"}isWindowAvailable(){return"undefined"!=typeof window&&void 0!==window.location}get isEmbed(){return!!this.isWindowAvailable()&&"true"===new URL(window.location.href).searchParams.get("embed")}get isEmbedVideo(){return!!this.isWindowAvailable()&&"true"===new URL(window.location.href).searchParams.get("embedVideo")}get isEmbedDesktop(){return!!this.isEmbed&&"desktop"===new URL(window.location.href).searchParams.get("platform")}get isEmbedWeb(){return!!this.isEmbed&&"web"===new URL(window.location.href).searchParams.get("platform")}get isMobileWebView(){return this.webBrowser===i$.WebView}get isIOSApp(){return this.isIOSDevice&&!!this._window?.webkit?.messageHandlers?.hzMobile?.postMessage}get isIPadApp(){return this.isIPadOSDevice&&!!this._window?.webkit?.messageHandlers?.hzMobile?.postMessage}get isAndroidApp(){return!!this._window?.hzMobile?.postMessage}get isChromeOSWeb(){return this.isChromeOSDevice&&!this.isAndroidApp}get isEmbedIosWebView(){return this.isEmbed&&!!window?.webkit?.messageHandlers?.IOSBridge?.postMessage}get isEmbedAndroidWebView(){return this.isEmbed&&!!window?.AndroidBridge?.receiveMessage}get isEmbedMobileWebView(){return this.isEmbedAndroidWebView||this.isEmbedIosWebView}get maxTouchPoints(){return this._navigator.maxTouchPoints}get _window(){return"undefined"!=typeof window?window:void 0}async isBraveBrowser(){let e=this._navigator;return void 0===this._isBraveBrowser&&(this._isBraveBrowser=await e.brave?.isBrave?.()??!1),this._isBraveBrowser}_getDeviceOS(){let e=this._navigator?.userAgent??"",t=this._navigator?.maxTouchPoints??0;return/\bwindows nt\b/i.test(e)?iq.Windows:/\bMacintosh\b/.test(e)?t>0?iq.iPadOS:iq.Mac:/\biPad\b/.test(e)?iq.iPadOS:/\biPhone|iPod\b/.test(e)?iq.iOS:/\bAndroid\b/.test(e)?iq.Android:/\bCrOS\b/.test(e)?iq.ChromeOS:/\bLinux\b/.test(e)?iq.Linux:iq.Unknown}_getDeviceOSVersion(){let e,t=this._navigator?.userAgent??"",i=/\bMacintosh\b/.test(t),r=this._navigator?.maxTouchPoints>0;if(e=i&&r?i3:i1[this.deviceOs]){let t=this._navigator.userAgent.match(e);if(Array.isArray(t)&&"string"==typeof t[1])return t[1].replace(/_/g,".")}return""}_getWebBrowser(){let e=this._navigator?.userAgent;if(this.isAndroidApp||this.isIOSApp||this.isIPadApp)return i$.WebView;if(/SamsungBrowser/.test(e))return i$.Samsung;let t=this._navigator.userAgentData?.brands;return Array.isArray(t)&&t.some(e=>"Microsoft Edge"===e.brand||"Edge"===e.brand)||/Edg[eA]?/.test(e)?i$.Edge:/Chrome|CriOS/.test(e)&&!/Edg|OPR|Opera|OPiOS|Vivaldi|YaBrowser|Avast|VivoBrowser|GSA/.test(e)?i$.Chrome:/Firefox|FxiOS/.test(e)?i$.Firefox:/Safari/.test(e)&&!/Chrome|CriOS|FxiOS|Edg|OPR|Opera|OPiOS|Vivaldi|YaBrowser|Avast|VivoBrowser|GSA/.test(e)?i$.Safari:/AppleWebKit/i.test(e)&&!/Edg|OPR|Opera|OPiOS|Vivaldi|YaBrowser|Avast|VivoBrowser|GSA/.test(e)?i$.WebKitBased:i$.Unknown}_getWebBrowserVersion(){let e=i0[this.webBrowser];if(e){let t=this._navigator.userAgent.match(e);if(Array.isArray(t)&&t.length>=2&&"string"==typeof t[1])return t[1]}return""}_parseModelFromUserAgent(e){let t=e.match(/iPhone(\d+,\d+)/);if(t)return`iPhone ${t[1]}`;let i=e.match(/iPad(\d+,\d+)/);if(i)return`iPad ${i[1]}`;let r=e.match(/SM-[A-Z]\d{3,4}[A-Z]?/);if(r)return r[0];let s=e.match(/Pixel (\d+)(?: XL| Pro)?/i);if(s)return s[0];let o=e.match(/;\s*([^;)]+(?:(?!Build\/)\S)*)/);if(o)return o[1].trim();let n=e.match(/\(([^)]+)\)/);return n?n[1].trim():e}async _getDeviceModel(){let e=await this._navigator.userAgentData?.getHighEntropyValues?.(["model"]);return e?.model??this._parseModelFromUserAgent(this._navigator?.userAgent)}_isRunningInPWAMode(){return!!new URL(document.location.href).searchParams.get("running_pwa_mode")}detectAndSetPWAStatusInStorage(){let e=sessionStorage;e&&("app-info://platform/microsoft-store"===document.referrer?e.setItem("msftPWA","true"):!e.getItem("msftPWA")&&(window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: minimal-ui)").matches||this._isRunningInPWAMode())&&e.setItem("otherPWA","true"))}_getMsftPWA(){return!!sessionStorage&&(this.detectAndSetPWAStatusInStorage(),!!sessionStorage.getItem("msftPWA"))}_getNonMsftPWA(){return!!sessionStorage&&(this.detectAndSetPWAStatusInStorage(),!!sessionStorage.getItem("otherPWA"))}_getDesktopShellApp(){return"shell-app"===this._getLocalStorageItem("externalAppType")}_getWithinExpressPWAInstallation(){return!!localStorage&&(this.detectAndSetPWAStatusInStorage(),"true"===this._getLocalStorageItem("withinExpressPWAInstall"))}_getLocalStorageItem(e){try{return localStorage?.getItem(e)||null}catch(e){return null}}async hasStorageAccessPermission(){if(!document.hasStorageAccess||await document.hasStorageAccess())return!0;try{let e=await navigator.permissions.query({name:"storage-access"});if("granted"===e.state)return document.requestStorageAccess&&await document.requestStorageAccess(),!0;return!1}catch(e){return!0}}constructor(e){this._navigator=e}}class i5 extends EventTarget{get deviceOs(){return this.browserOSUtils.deviceOs}get deviceModel(){return this.browserOSUtils.deviceModel}get deviceOsVersion(){return this.browserOSUtils.deviceOsVersion}get webBrowser(){return this.browserOSUtils.webBrowser}get platformIsMacLike(){return this.browserOSUtils.platformIsMacLike}get isMacDevice(){return this.browserOSUtils.isMacDevice}get isAndroidDevice(){return this.browserOSUtils.isAndroidDevice}get isLinuxDevice(){return this.browserOSUtils.isLinuxDevice}get isDesktopShellApp(){return this.browserOSUtils.isDesktopShellApp}get isIOSDevice(){return this.browserOSUtils.isIOSDevice}get isIPadOSDevice(){return this.browserOSUtils.isIPadOSDevice}get webBrowserVersion(){return this.browserOSUtils.webBrowserVersion}get webBrowserInfo(){return{browser:this.webBrowser,version:this.webBrowserVersion}}get isChromeOSDevice(){return this.browserOSUtils.isChromeOSDevice}get hasCoarsePointer(){return this._coarsePointerQuery?.matches??!1}get hasFinePointer(){return this._finePointerQuery?.matches??!1}get isTouchable(){return this.hasCoarsePointer}get isDeviceTouchOnly(){return this.isTouchable&&!this.hasFinePointer}get isDeviceFinePointerOnly(){return this.hasFinePointer&&!this.isTouchable}get isChromeBrowser(){return this.browserOSUtils.isChromeBrowser}get isFirefoxBrowser(){return this.browserOSUtils.isFirefoxBrowser}get isEdgeBrowser(){return this.browserOSUtils.isEdgeBrowser}get isSafariBrowser(){return this.browserOSUtils.isSafariBrowser}get isSamsungBrowser(){return this.browserOSUtils.isSamsungBrowser}isBraveBrowser(){return this.browserOSUtils.isBraveBrowser()}get isMobileWebView(){return this.browserOSUtils.isMobileWebView}get isAndroidApp(){return this.browserOSUtils.isAndroidApp}get isIOSApp(){return this.browserOSUtils.isIOSApp}get isIPadApp(){return this.browserOSUtils.isIPadApp}get isIosPlatformApp(){return this.isIOSApp||this.isIPadApp}get isChromeOSWeb(){return this.browserOSUtils.isChromeOSWeb}get isMsftPWA(){return this.browserOSUtils.isMsftPWA}get isNonMsftPWA(){return this.browserOSUtils.isNonMsftPWA}get PWAInstallationSource(){return this.browserOSUtils.PWAInstallationSource}get isMobileWeb(){return this.browserOSUtils.isMobileWeb}get isEmbedDesktop(){return this.browserOSUtils.isEmbedDesktop}get isEmbedWeb(){return this.browserOSUtils.isEmbedWeb}get isEmbedVideo(){return this.browserOSUtils.isEmbedVideo}get isEmbed(){return this.browserOSUtils.isEmbed}get deviceMemoryCategory(){let e=this.browserOSUtils.deviceOs;return e===iq.Mac||e===iq.Windows||e===iq.Linux?iQ.high:e===iq.ChromeOS?iQ.medium:iQ.low}get platformType(){if(this.isIOSApp)return iJ.iOSApp;if(this.isIPadApp)return iJ.iPadOSApp;if(this.isAndroidApp)return iJ.AndroidApp;if(this.isChromeOSWeb)return iJ.ChromeOSApp;if(this.isMobileWeb)return iJ.MobileWeb;else return iJ.DesktopWeb}get platformTypeDetail(){if(this.isIOSApp||this.browserOSUtils.isEmbedIosWebView)return iZ.iOSApp;if(this.isIPadApp)return iZ.iPadOSApp;if(this.isAndroidApp||this.browserOSUtils.isEmbedAndroidWebView)return iZ.AndroidApp;if(this.isDesktopShellApp)return iZ.DesktopShell;if(this.isMsftPWA||this.isNonMsftPWA)return iZ.DesktopPWA;else if(this.isChromeOSWeb);else if(this.isIPadOSDevice)return iZ.MobileWebIPadOS;else if(this.isMobileWeb){if(this.isAndroidDevice)return iZ.MobileWebAndroid;else if(this.isIOSDevice)return iZ.MobileWebIOS}return iZ.DesktopWeb}get isEmbedMobileWebView(){return this.browserOSUtils.isEmbedMobileWebView}get isEmbedIosWebView(){return this.browserOSUtils.isEmbedIosWebView}get isEmbedAndroidWebView(){return this.browserOSUtils.isEmbedAndroidWebView}get maxTouchPoints(){return this.browserOSUtils.maxTouchPoints}deviceOsVersionNumber(){return this.browserOSUtils.deviceOsVersionNumber()}async xmpAgentName(e,t,i,r=!1){return`${e.startsWith("Adobe ")?e:"Adobe "+e} ${t} (${this.deviceOs} ${await this.deviceOsVersionNumber()};${this.webBrowser} ${this.webBrowserVersion};${this.platformTypeDetail};sha:${i}${r?";adobe":""})`}constructor(e,t){super(),this._matchMedia=t,this._coarsePointerQuery=this._matchMedia("(any-pointer: coarse)"),this._finePointerQuery=this._matchMedia("(pointer: fine)"),this.browserOSUtils=new i2(e)}}let i4=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var i6="object"==typeof global&&global&&global.Object===Object&&global,i9="object"==typeof self&&self&&self.Object===Object&&self,i7=i6||i9||Function("return this")();let i8=function(){return i7.Date.now()};var re=/\s/;let rt=function(e){for(var t=e.length;t--&&re.test(e.charAt(t)););return t};var ri=/^\s+/,rr=i7.Symbol,rs=Object.prototype,ro=rs.hasOwnProperty,rn=rs.toString,ra=rr?rr.toStringTag:void 0;let rl=function(e){var t=ro.call(e,ra),i=e[ra];try{e[ra]=void 0;var r=!0}catch(e){}var s=rn.call(e);return r&&(t?e[ra]=i:delete e[ra]),s};var rc=Object.prototype.toString,r_=rr?rr.toStringTag:void 0;let ru=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r_&&r_ in Object(e)?rl(e):rc.call(e)},rd=function(e){return"symbol"==typeof e||null!=e&&"object"==typeof e&&"[object Symbol]"==ru(e)};var rh=0/0,rg=/^[-+]0x[0-9a-f]+$/i,rE=/^0b[01]+$/i,rp=/^0o[0-7]+$/i,rf=parseInt;let rm=function(e){if("number"==typeof e)return e;if(rd(e))return rh;if(i4(e)){var t,i="function"==typeof e.valueOf?e.valueOf():e;e=i4(i)?i+"":i}if("string"!=typeof e)return 0===e?e:+e;e=(t=e)?t.slice(0,rt(t)+1).replace(ri,""):t;var r=rE.test(e);return r||rp.test(e)?rf(e.slice(2),r?2:8):rg.test(e)?rh:+e};var rT=Math.max,rS=Math.min;let rO=function(e,t,i){var r,s,o,n,a,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw TypeError("Expected a function");function g(t){var i=r,o=s;return r=s=void 0,c=t,n=e.apply(o,i)}function E(e){var i=e-l,r=e-c;return void 0===l||i>=t||i<0||d&&r>=o}function p(){var e,i,r,s=i8();if(E(s))return f(s);a=setTimeout(p,(e=s-l,i=s-c,r=t-e,d?rS(r,o-i):r))}function f(e){return(a=void 0,h&&r)?g(e):(r=s=void 0,n)}function m(){var e,i=i8(),o=E(i);if(r=arguments,s=this,l=i,o){if(void 0===a)return c=e=l,a=setTimeout(p,t),u?g(e):n;if(d)return clearTimeout(a),a=setTimeout(p,t),g(l)}return void 0===a&&(a=setTimeout(p,t)),n}return t=rm(t)||0,i4(i)&&(u=!!i.leading,o=(d="maxWait"in i)?rT(rm(i.maxWait)||0,t):o,h="trailing"in i?!!i.trailing:h),m.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=l=s=a=void 0},m.flush=function(){return void 0===a?n:f(i8())},m};function rC(){return"undefined"!=typeof window&&!!window.webkit?.messageHandlers?.hzMobile?.postMessage}function rv(){return"undefined"!=typeof window&&!!window.hzMobile?.postMessage}function ry(e){if(e===eV.Browser)return rC()||rv()}let rA=new ic("env"),rR=new ic("envName"),rI=new ic("ingestApiKey"),rw=new ia("aaTrackingServer","stats.adobe.com"),rb=new ia("aaSecureTrackingServer","sstats.adobe.com"),rN=new ia("bundleHash",""),rU=new ia("ingestAppCategory","WEB"),rD=new ic("appVersion"),rL=new ic("appSAPCode"),rP=new ic("ingestProject"),rM=new il("ingestHost","https://cc-api-data-stage.adobe.io",{prod:"https://cc-api-data.adobe.io"}),rF=new il("ingestHostAlwaysProd","https://cc-api-data.adobe.io",{}),rx=new iP("ingest-host-always-prod-enabled",!1),rk=new ia("ingestProcessingInterval",3e3),rV=new ia("analyticsBufferLimit",500),rB=new iP("use-experience-edge",!1),rG=new iP("enable-aep-analytics",!1),rW=new iP("use-subscription-profile",!1),rz=new iP("enableAnalytics",!0),rH=new il("launchUrl","https://assets.adobedtm.com/d4d114c60e50/a0e989131fd5/launch-2c94beadc94f-development.js",{stage:"https://assets.adobedtm.com/d4d114c60e50/a0e989131fd5/launch-5dd5dd2177e6.js",prod:"https://assets.adobedtm.com/d4d114c60e50/a0e989131fd5/launch-5dd5dd2177e6.min.js"}),rj=new il("marketingTechUrl","https://www.adobe.com/marketingtech/main.standard.qa.js",{stage:"https://www.adobe.com/marketingtech/main.standard.js",prod:"https://www.adobe.com/marketingtech/main.standard.min.js"}),rK=new il("experience-edge-config-id","2a892ed7-c50f-4acf-8726-d41bd770ddbd",{prod:"28baacdc-56e1-4191-a72d-2b4086448495"}),rY=new iP("include-ingest-build-prefix",!0),rX=new il("otDomainId","7a5eb705-95ed-4cc4-a11d-0cc5760e93db-test",{prod:"7a5eb705-95ed-4cc4-a11d-0cc5760e93db"}),rq=new il("privacyUrl","https://www.stage.adobe.com/etc.clientlibs/globalnav/clientlibs/base/privacy-standalone.js",{local:"https://www.stage.adobe.com/etc.clientlibs/globalnav/clientlibs/base/privacy-standalone.js",prod:"https://www.adobe.com/etc.clientlibs/globalnav/clientlibs/base/privacy-standalone.js"}),r$=new ia("footerLinkSelector",""),rQ=new iP("ingest-wait-for-app-startup",!0),rJ=new iP("send-pre-consent-event",!0),rZ=new ia("subscriptionProfileAPIKey","projectx_webapp"),r0={env:rA,envName:rR,enableAnalytics:rz,ingestAPIKey:rI,ingestAppCategory:rU,appVersion:rD,appSAPCode:rL,ingestProject:rP,ingestHost:rM,ingestHostAlwaysProd:rF,ingestHostAlwaysProdEnabled:rx,aaTrackingServer:rw,aaSecureTrackingServer:rb,bundleHash:rN,ingestProcessingInterval:rk,analyticsBufferLimit:rV,aepConfigId:rK,useExperienceEdge:rB,enableAEPAnalytics:rG,useSubscriptionProfile:rW,includeIngestBuildPrefix:rY,otDomainId:rX,privacyURL:rq,footerLinkSelector:r$,ingestWaitForAppStartup:rQ,sendPreConsentEvent:rJ,launchURL:rH,marketingTechURL:rj,subscriptionProfileAPIKey:rZ,subscriptionProfileHost:new il("subscriptionProfileHost","https://abp-profile-service-stage.adobe.io",{prod:"https://abp-profile-service.adobe.io"}),subscriptionProfileEndpoint:new ia("subscriptionProfileEndpoint","/abp_profile/v1")},r1="LICENSE";var r3=((en={}).FULFILLABLE_ITEMS="FULFILLABLE_ITEMS",en.OFFER_DETAILS="OFFER_DETAILS",en.APP_STORE_DETAILS="APP_STORE_DETAILS",en);class r2{static get defaultInstance(){if(r2._defaultInstance)return r2._defaultInstance;let e=iH.singleton(),t=e.attach(r0).then(()=>({subscriptionProfileAPIKey:r0.subscriptionProfileAPIKey.value,subscriptionProfileHost:r0.subscriptionProfileHost.value,subscriptionProfileEndpoint:r0.subscriptionProfileEndpoint.value}));return r2._defaultInstance=new r2(e.getHost(),t),r2._defaultInstance}static _resetInstance(){r2._defaultInstance=void 0}async _getAccessToken(){if(!this._host||this._host.executionEnvironment()!==eV.Browser)return;let e=eP(async()=>{if(!globalThis.window?.adobeIMS)throw Error("adobeIMS not available in the browser window object, retrying...");let e=await globalThis.window.adobeIMS.getAccessToken();if(e?.token)this._accessToken=`Bearer ${e.token}`;else throw Error("No access token available from IMS, retrying...")},{timeoutInterval:1e4,shouldRetry:()=>!this._accessToken});try{await e()}catch{}}async _initialized(){try{await this._hostConfigPromise,await this._getAccessToken()}catch(e){console.error("Failed to initialize ABPProfileService config/host - subscription profile features will be unavailable",e)}this._isInitialized=!0}_buildUrl(e){let t=`${this._config.subscriptionProfileHost}${this._config.subscriptionProfileEndpoint}`,i=new URLSearchParams;e.length>0&&i.append("include_sections",e.join(",")),i.append("include_derived_attributes","true");let r=i.toString();return r?`${t}?${r}`:t}_getHeaders(){return this._accessToken?{"Content-Type":"application/json",Authorization:this._accessToken,"Access-Control-Request-Headers":"Authorization","X-Api-Key":this._config.subscriptionProfileAPIKey}:null}async _fetchOnce(e,t){let i=await fetch(e,{method:"GET",headers:t});if(206===i.status){try{let e=await i.json();this._partialResponseData=this._mergePartialResponse(this._partialResponseData,e)}catch(e){throw console.warn("ABP Profile parse error on partial response:",e),e}throw Error("Partial response (206) - retrying to get complete data")}if(i.ok){let e=await i.json(),t=this._mergePartialResponse(this._partialResponseData,e);return this._partialResponseData={},t}throw Error(`HTTP ${i.status}: ${i.statusText}`)}async _fetchWithRetry(e,t){try{this._partialResponseData={};let i=eP(()=>this._fetchOnce(e,t),{maxAttempts:this._maxRequestCount,delay:2e3,progressCallback:(e,t,i)=>{i&&console.warn(`ABP Profile: ${e}`,t,i)},progressMessagePrefix:"ABP Profile fetch"});return await i()}catch(e){if(this._partialResponseData.commerce_profile?.subscriptions&&this._partialResponseData.commerce_profile.subscriptions.length>0){let e=this._partialResponseData;return this._partialResponseData={},e}return console.error("Failed to fetch ABP profile after all retries",e),this._partialResponseData={},null}}_mergePartialResponse(e,t){var i;if(e.commerce_profile??(e.commerce_profile={}),(i=e.commerce_profile).subscriptions??(i.subscriptions=[]),t.commerce_profile?.subscriptions){let i=new Set(e.commerce_profile.subscriptions.map(e=>e.source?.id));for(let r of t.commerce_profile.subscriptions)i.has(r.source?.id)||e.commerce_profile.subscriptions.push(r)}return e}_parseTrialDetails(e){return e.trial_details?.in_trial_period!==!0?null:{isUserInTrial:!0,trialDaysRemaining:e.trial_details.trial_days_remaining}}_parseOfferDetails(e){let t=[];for(let i of e.offer_details||[]){let e={term:i.term,offerId:i.offer_id,customerSegment:i.customer_segment,commitment:i.commitment,paCode:i.product_arrangement?.code,paFamily:i.product_arrangement?.family,paName:i.product_arrangement?.name,paCloud:i.product_arrangement?.cloud};i.market_segments&&i.market_segments.length>0&&(e.marketSegment=i.market_segments[0]),t.push(e)}return t}_parseResponse(e,t){if(0===t.length)return[];let i=[];for(let e of t){let t={};if(e.source&&(e.source.type&&(t.type=e.source.type),e.source.id&&(t.id=e.source.id),e.source.group_id&&(t.group_id=e.source.group_id)),e.trial_details){let i=this._parseTrialDetails(e);i&&Object.assign(t,i)}if(e.offer_details&&e.offer_details.length>0){let i=this._parseOfferDetails(e);i.length>0&&Object.assign(t,i[0])}e.app_store_details?.store_id&&(t.storeId=e.app_store_details.store_id),t.type&&t.id&&i.push(t)}return i}_countLicensedSubscriptions(e){return e.filter(e=>e.type?.includes(r1)).length}_findPrimarySubscription(e){if(0===e.length)return;let t=e.find(e=>e.type?.includes(r1)&&e.paFamily?.includes("CC_"));if(t)return t;let i=e.find(e=>e.type?.includes(r1));return i||e[0]}_extractAnalyticsData(e){let t={isTrialUser:!1,numberOfLicenses:0,subscriptions:e};if(0===e.length)return t;let i=this._findPrimarySubscription(e);return i&&(i.isUserInTrial&&(t.isTrialUser=!0,t.trialDaysRemaining=i.trialDaysRemaining),i.marketSegment&&(t.marketSegment=i.marketSegment),i.offerId&&(t.offerId=i.offerId),i.term&&(t.billingFrequency="NONE"===i.term?void 0:i.term),i.storeId&&(t.storeId=i.storeId),t.numberOfLicenses=this._countLicensedSubscriptions(e)),t}async fetchAnalyticsData(e){try{let t,i;if(this._isInitialized||await this._initPromise,!this._host||this._host.executionEnvironment()!==eV.Browser)return null;if(!this._accessToken)return console.warn("Access token not available - skipping ABP profile fetch"),null;if(!this._config?.subscriptionProfileAPIKey||!this._config?.subscriptionProfileHost||!this._config?.subscriptionProfileEndpoint)return null;let r=this._getHeaders();if(!r)return console.warn("Unable to build request headers - skipping ABP profile fetch"),null;let s=e.map(e=>e.toString());try{t=this._buildUrl(s)}catch(e){return console.error("Failed to build ABP profile URL",e),null}let o={uri:t,sections:s,hasDerivedAttributes:!0},n=await this._fetchWithRetry(o.uri,r);if(!n)return null;let a=n.commerce_profile?.subscriptions||[];if(0===a.length)return null;try{i=this._parseResponse(o,a)}catch(e){return console.error("Failed to parse ABP profile response",e),null}if(0===i.length)return null;try{return this._extractAnalyticsData(i)}catch(e){return console.error("Failed to extract analytics data from ABP profile",e),null}}catch(e){return console.error("Unexpected error in fetchAnalyticsData - subscription profile features will be unavailable",e),null}}constructor(e,t){this._isInitialized=!1,this._maxRequestCount=5,this._partialResponseData={},this._hostConfigPromise=Promise.all([e,t]).then(([e,t])=>{this._host=e,this._config=t}).catch(()=>{}),this._initPromise=this._initialized()}}let r5=/access_token=[0-9A-Za-z-._%&=]+/,r4="horizon_app_access_country",r6=eE.DEVICE_NAME,r9=eE.PLATFORM_TYPE,r7=eE.EVENT_USER_AGENT,r8=eE.EVENT_THREAD,se=eE.EVENT_ENVIRONMENT,st=eE.EVENT_ENVIRONMENT_TYPE,si=eE.MOBILE_ID,sr=eE.MOBILE_INSTALL_DATE,ss=eE.DEVICE_HEIGHT,so=eE.DEVICE_WIDTH,sn=eE.EVENT_BUILD,sa=eE.EVENT_BUILD_BRANCH,sl=eE.EVENT_BUNDLE_HASH,sc=eE.EVENT_OVERRIDES_CONFIGURATION_HASH,s_=eE.EVENT_SOURCE_CLIENT_ID,su=eE.EVENT_SOURCE_NAME,sd=eE.EVENT_SOURCE_VERSION,sh=eE.EVENT_MOBILE_APP_VERSION,sg=eE.EVENT_NETWORK_TYPE,sE=eE.CONTEXT_WEBVIEW_ROLE,sp=eE.EVENT_MOBILE_BUILD_TYPE,sf=eE.EVENT_VIDEO_WEBCODECS_EXPERIENCE,sm=eE.EVENT_REFERRER,sT=eE.EVENT_URL,sS=eE.EVENT_LOCALE,sO=eE.DISPLAYED_LANGUAGE,sC=eE.PROFILE_COUNTRY,sv=eE.ACCESS_COUNTRY,sy=eE.EVENT_SESSION_ID,sA=eE.IS_NEW_USER,sR=eE.USER_FIRST_ACCESS_TIME,sI=eE.CUSTOM_USER_ADMIN_ROLE,sw=eE.CUSTOM_USER_MANAGER_CAPABILITIES,sb=eE.EVENT_MCID_GUID,sN=eE.SESSION_RECORDING_URL,sU=eE.EVENT_CONTEXT_GUID,sD=eE.EVENT_USER_GUID,sL=eE.EVENT_PROFILE_GUID,sP=eE.USER_SERVICE_CODE,sM=eE.USER_SERVICE_LEVEL,sF=eE.USER_ACCOUNT_TYPE,sx=eE.EVENT_GUID,sk=eE.EVENT_CATEGORY,sV=eE.ORG_ID,sB=eE.ENTITLEMENT_TYPE,sG=eE.GEN_AI_TOTAL_CREDITS,sW=eE.USER_COMPLIMENTARY_PREMIUM,sz=eE.IS_TRIAL_USER,sH=eE.USER_TRIAL_DAYS_REMAINING,sj=eE.USER_MARKET_SEGMENT,sK=eE.USER_OFFER_ID,sY=eE.USER_BILLING_FREQUENCY,sX=eE.USER_NUMBER_OF_LICENSES,sq=eE.USER_STORE_UI,s$=eE.USER_SUBSCRIPTIONS,sQ=eE.IS_EDU_USER,sJ=eE.CUSTOM_USER_ID_TYPE,sZ=eE.CUSTOM_USER_OFFERING,s0=eE.EVENT_APE_GUID,s1=eE.EVENT_APE_STATUS,s3=eE.EVENT_APE_DURATION,s2=eE.EVENT_APE_TIME_SINCE_LAST_EVENT,s5=eE.APE_START_TIME,s4=eE.APE_LAST_EVENT_TIME,s6=eE.CONTEXT_USER_ROLE,s9=eE.CONTEXT_GUID,s7=eE.CONTENT_SCHEMA_VERSION,s8=eE.EXPERIMENTS_ASSIGNED,oe=eE.EXPERIMENTS_EXPOSED,ot=eE.GLOBAL_HOLDOUTS_ASSIGNED,oi=eE.FEATURE_ROLLOUTS_ASSIGNED,or=eE.CUSTOM_REFERRER_APP,os=eE.CUSTOM_REFERRER_ACTION,oo=eE.CUSTOM_REFERRER_ASSET_ID,on=eE.CUSTOM_REFERRER_INTENT,oa=eE.CUSTOM_REFERRER_LANDING_TAB,ol=eE.EVENT_SOURCE_OS_VERSION,oc=eE.EVENT_SOURCE_OS_NAME,o_=eE.EVENT_SOURCE_DEVICE_MODEL,ou=eE.EVENT_SOURCE_BROWSER_NAME,od=eE.EVENT_SOURCE_BROWSER_VERSION,oh=eE.EVENT_SOURCE_PLATFORM_TYPE_DETAIL,og=eE.CUSTOM_FOCUS_MODE_TYPE,oE=[r7,sn,sa,sl,sc,s9,sm,sT,sS,sv,sC,sB,st,se,sb,sN,sy,sD,sF,sA,sI,sw,sQ,sJ,sZ,s8,oe,oi,ot,sP,sM,s_,r9,sg,sE,r6,ss,so,or,os,oo,on,oa,oc,ol,o_,ou,oh,sO,sV,s0,s5,s4,sz,sH,sj,sK,sY,sX,sq,s$],op=[ol,si,sr];class of{async _initAccessCountry(){await this._accessCountryPromise}async _initIMSUserData(){await this._IMSUserData}async _initIMSIdData(){await this._IMSIdData}_createInitTimeout(){return new Promise((e,t)=>{this._initTimeoutId=setTimeout(()=>{e()},3e3)})}async _initDataFromBrowserService(){(await this._hostPromise).executionEnvironment()===eV.Browser&&(this._browserService??(this._browserService=new i5(window.navigator,window.matchMedia.bind(window))),this._data[oc]=this._browserService.deviceOs,this._data[od]=this._browserService.webBrowserVersion,this._data[oh]=this._browserService.platformTypeDetail,this._data[ou]=this._browserService.webBrowser,this._data[o_]=await this._browserService.deviceModel,this._data[ol]=await this._browserService.deviceOsVersionNumber())}async _initDataFromABPProfile(){if((await this._hostPromise).executionEnvironment()===eV.Browser&&this._abpProfileService)try{if(!(await this._configPromise).useSubscriptionProfile)return;let e=await this._abpProfileService.fetchAnalyticsData([r3.FULFILLABLE_ITEMS,r3.OFFER_DETAILS,r3.APP_STORE_DETAILS]);e&&this._updateABPProfileData(e)}catch(e){console.error("Failed to get ABP profile data",e)}}_updateABPProfileData(e){this._data[sz]=e.isTrialUser?"true":"false",this._data[sH]=e.trialDaysRemaining?String(e.trialDaysRemaining):"NA",e.marketSegment&&(this._data[sj]=e.marketSegment),e.offerId&&(this._data[sK]=e.offerId),e.billingFrequency?this._data[sY]=e.billingFrequency:this._data[sY]="NA",this._data[sX]=String(e.numberOfLicenses),e.storeId&&(this._data[sq]=e.storeId),e.subscriptions.length>0&&(this._data[s$]=JSON.stringify(e.subscriptions)),this._broadcastABPProfileUpdate()}_broadcastABPProfileUpdate(){this._broadcastUpdate([sz,sH,sj,sK,sY,sX,sq,s$])}reinitPlatformTypeDetailAfterPWAInstall(){this._data[oh]=this._browserService.platformTypeDetail,this._broadcastUpdate([oh])}async _initDeviceContext(){let e=await this._hostPromise,t=e.deviceAgent();switch(this._data[r7]=t,this._data[sg]=this._getNetworkTypeForAnalytics(e),e.executionEnvironment()){case eV.Browser:{this._data[r8]="main";let e=t.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i),i=t.match(/(Macintosh)/i),r=window?.navigator?.maxTouchPoints>0;e?(this._browserService??(this._browserService=new i5(window.navigator,window.matchMedia.bind(window))),this._browserService.isEmbedAndroidWebView?this._data[r9]="android":this._browserService.isEmbedIosWebView?this._data[r9]="iOS":!1===ry(eV.Browser)?this._data[r9]="mobile-web":(rv()&&(this._data[r9]="android"),rC()&&(this._data[r9]="iOS"))):i&&r?this._data[r9]="mobile-web":this._data[r9]="desktop-web",this._data[r6]=this.extractDeviceName(t),window?.addEventListener("resize",this._windowResizeHandler),this._windowResizeHandlerLoaded=!0,this.extractDeviceDimensions(window);break}case eV.Node:this._data[r8]="main";break;case eV.Worker:this._data[r8]="worker-thread"}}_getNetworkTypeForAnalytics(e){let t=e.connection()?.effectiveType,i=e.connection()?.type;return void 0===t?"Not Specified":void 0===i?t:`${t}/${i}`}async _initAppContext(){let e=await this._configPromise;this._data[sn]=`${e.includeIngestBuildPrefix?"prod"===e.envName?"prod:":"stage:":""}${e.buildInfo.sha}`,this._data[sa]=e.buildInfo.branch,this._data[sl]=e.bundleHash,this._data[sk]=e.ingestAppCategory,this._data[se]=e.envName,this._data[st]=e.env,this._data[su]=e.appSAPCode,this._data[sd]=e.appVersion}async _initPageContext(){if((await this._hostPromise).executionEnvironment()===eV.Browser){let e=this._documentHref();this._data[sT]=e.replace(r5,""),this._data[sm]=document.referrer}}_documentHref(){return document.location.href}async _initMcidGuidContext(){let e=await this._hostPromise,t=e.deviceLanguage();this._data[sS]=t;let i=(await this._configPromise).useExperienceEdge;e.executionEnvironment()===eV.Browser&&i&&(this.mcidGuid=await this._marketingTechService.mcidGuid())}_setAndResolveAccessCountry(e){e&&""!==e.trim()&&(this._data[sv]=e,this._broadcastUpdate([sv]),this._resolveAccessCountry&&this._resolveAccessCountry())}async fetchGeo2location(){return await eP(async()=>{let e=await fetch("https://geo2.adobe.com/json/");if(!e.ok)throw Error(`HTTP ${e.status}: ${e.statusText}`);return await e.text()},{delay:100,progressMessagePrefix:"[AnalyticsContext:fetchGeo2location]"})()}async extractAccessCountry(){if((await this._hostPromise).executionEnvironment()===eV.Browser){let e=sessionStorage.getItem(r4);if(e)this._setAndResolveAccessCountry(e);else try{let e=await this.fetchGeo2location();if(e){let t=JSON.parse(e),i=String(t.country);sessionStorage.setItem(r4,i),this._setAndResolveAccessCountry(i)}else this._setAndResolveAccessCountry("")}catch(e){console.error("Failed to get location data from geo2.adobe.com",e),this._setAndResolveAccessCountry("")}}}_initDocContext(){this._data[s9]="",this._data[s7]="",this._data[s6]=""}async userIdInitialized(){await this._initIMSUserData()}async initialized(){this._initialized||(await this._initPromise,clearTimeout(this._initTimeoutId),this._initialized=!0)}isInitialized(){return this._initialized}shutdown(){clearTimeout(this._initTimeoutId),this._windowResizeHandlerLoaded&&window?.removeEventListener("resize",this._windowResizeHandler)}updateShellAppContext(e){e&&0!==Object.keys(e).length&&!0===ry(eV.Browser)&&(this.updateFromPayload(e),this._broadcastUpdate(Object.keys(e)))}startNewApeSession(e,t){this.apeGuid=eI(),this.apeStartTime=t,this.apeLastEventTime=t,e[s1]="start",e[s0]=this.apeGuid,e[s3]=0,e[s2]=0}processApeMetrics(e){let t=e?.[s1]==="active",i=new Date;if(this.apeGuid){let r=(i.getTime()-this.apeLastEventTime.getTime())/1e3;if(r<=1200){if(e[s0]=this.apeGuid,t){this.apeLastEventTime=i;let t=(i.getTime()-this.apeStartTime.getTime())/1e3;e[s2]=r,e[s3]=t}}else t?this.startNewApeSession(e,i):(this.apeGuid="",e[s0]=L)}else t?this.startNewApeSession(e,i):e[s0]=L}adornEventData(e){let t=Object.keys(this._data),i=e[eE.EVENT_WORKFLOW]===P;t.forEach(t=>{(!i||t!==s$)&&(e[t]||(e[t]=this._data[t]))});try{this.processApeMetrics(e)}catch(e){console.warn("Error processing APE metrics",e)}delete e[s4],delete e[s5],e[sx]=e[sx]||eI(),!e[s9]&&this.currentAssetId&&(e[s9]=this.currentAssetId),e[eE.EVENT_TIME_START]||(e[eE.EVENT_TIME_START]=new Date().toISOString()),e[eE.EVENT_COUNT]||e[eE.EVENT_WORKFLOW]===P||(e[eE.EVENT_COUNT]=1);let r=function(){if("undefined"!=typeof window&&window.FS)return window.FS("getSession",{format:"url.now"})}();r&&(e[eE.SESSION_RECORDING_URL]=r),"checkout-complete"===e[eE.EVENT_PAGENAME]&&setTimeout(()=>{this._initDataFromABPProfile().catch(e=>{console.error("ABP Profile refresh after checkout failed:",e)})},3e4)}addListener(e){this._listeners.add(e)}deleteListener(e){this._listeners.delete(e)}_callListeners(e){this._listeners.forEach(t=>{t(e)})}generateInitPayload(){let e=[...oE,...Object.values(ep).filter(e=>!!this._data[e])];if(!0===ry(eV.Browser)){let t=Object.values(op).filter(e=>!!this._data[e]);e.push(...t)}return this._embedParams.length&&e.push(...this._embedParams),this._generatePayload(e)}_generatePayload(e){let t={};return e.forEach(e=>{e in this._data?t[e]=this._data[e]:t[e]=void 0}),t}_broadcastUpdate(e){this._callListeners(this._generatePayload(e))}async updateFromPayload(e){await this.initialized(),Object.keys(e).forEach(t=>{void 0===e[t]?delete this._data[t]:this._data[t]=e[t]})}addContextGUID(e){this._data[sU]=e}removeContextGUID(){delete this._data[sU]}set imsProfile(e){let t,i=e.account_type,r=[];if(this._data[sD]=String(e.userId),this._data[sF]=String(i),e.profileId&&(this._data[sL]=String(e.profileId),r.push(sL)),e.countryCode&&(this._data[sC]=String(e.countryCode),r.push(sC)),e.serviceAccounts&&(t=e.serviceAccounts.find(e=>"creative_cloud"===e.serviceCode)),this._data[sM]=t?t.serviceLevel:"",this._data[sP]=t?t.serviceCode:"",e.email){let t=e.email.toLowerCase();(t.endsWith("@adobe.com")||t.endsWith("@adobetest.com"))&&(this._data[sP]+="_adobe")}e.ownerOrg&&(this._data[sV]=e.ownerOrg,r.push(sV)),this._broadcastUpdate([sD,sF,sM,sP,...r]),this._resolveIMSUserData&&this._resolveIMSUserData()}set imsIdData(e){let t=e.client_id||"no-client-id";this._data[s_]=t,this._broadcastUpdate([s_]),this._resolveIMSIdData&&this._resolveIMSIdData()}set pageURL(e){this._data[sT]=e.replace(r5,""),this._broadcastUpdate([sT])}get isInternalUser(){return String(this._data[sP]).endsWith("_adobe")}set accessCountry(e){this._setAndResolveAccessCountry(e)}get accessCountry(){return this._data[sv]}set threadName(e){this._data[r8]=e}get threadName(){return this._data[r8]}get deviceName(){return this._data[r9]}set mcidGuid(e){this._data[sb]=e,this._broadcastUpdate([sb])}get mcidGuid(){return this._data[sb]}set apeGuid(e){this._data[s0]=e,this._broadcastUpdate([s0])}get apeGuid(){return this._data[s0]}set apeStartTime(e){this._data[s5]=e.toISOString(),this._broadcastUpdate([s5])}get apeStartTime(){return new Date(this._data[s5])}set apeLastEventTime(e){this._data[s4]=e.toISOString(),this._broadcastUpdate([s4])}get apeLastEventTime(){return new Date(this._data[s4])}set expressEntitlementType(e){this._data[sB]=e,this._broadcastUpdate([sB])}get expressEntitlementType(){return this._data[sB]}set genAITotalCredits(e){this._data[sG]=String(e),this._broadcastUpdate([sG])}get genAITotalCredits(){return Number(this._data[sG])}set userComplimentaryPremium(e){this._data[sW]=e,this._broadcastUpdate([sW])}get userComplimentaryPremium(){return this._data[sW]}set sessionRecordingUrl(e){this._data[sN]=e,this._broadcastUpdate([sN])}get sessionRecordingUrl(){return this._data[sN]}set sessionId(e){this._data[sy]=e,this._broadcastUpdate([sy])}get sessionId(){return this._data[sy]}get newUserStatus(){return this._data[sA]}get userFirstAccessTime(){return this._data[sR]}set newUserStatus(e){this._data[sA]=e,this._broadcastUpdate([sA])}set userFirstAccessTime(e){this._data[sR]=e,this._broadcastUpdate([sR])}get customUserAdminRole(){return this._data[sI]}set customUserAdminRole(e){this._data[sI]=e,this._broadcastUpdate([sI])}get customUserManagerCapabilities(){return this._data[sw]}set customUserManagerCapabilities(e){this._data[sw]=e,this._broadcastUpdate([sw])}get eduUserStatus(){return this._data[sQ]}set eduUserStatus(e){this._data[sQ]=e,this._broadcastUpdate([sQ])}get eduUserIdTypeStatus(){return this._data[sJ]}set eduUserIdTypeStatus(e){this._data[sJ]=e,this._broadcastUpdate([sJ])}get userOffering(){return this._data[sZ]}set userOffering(e){this._data[sZ]=e,this._broadcastUpdate([sZ])}get displayedLanguage(){return this._data[sO]}set displayedLanguage(e){this._data[sO]=e,this._broadcastUpdate([sO])}set userHasEditRights(e){e?this._data[s6]="editor":this._data[s6]="viewer",this._broadcastUpdate([s6])}set currentAssetId(e){this._data[s9]=e,this._broadcastUpdate([s9])}async setEmbedContextAndParams(e){this._embedParams=Object.keys(e),await this.updateFromPayload(e),this._broadcastUpdate(Object.keys(e))}async setFocusMode(e){await this.initialized(),e?this._data[og]=e:delete this._data[og],this._broadcastUpdate([og])}set currentDocumentVersion(e){this._data[s7]=e,this._broadcastUpdate([s7])}async experimentsMetadata(){return this._loadExperimentsDeferred.promise}async featureRolloutsMetadata(){return this._loadFeatureRolloutsDeferred.promise}async globalHoldoutsMetadata(){return this._loadGlobalHoldoutsDeferred.promise}set assignedExperiments(e){""!==e&&this._loadExperimentsDeferred.resolve(e),this._data[s8]=e,this._broadcastUpdate([s8])}set exposedExperiments(e){this._data[oe]=e,this._broadcastUpdate([oe])}set featureRollouts(e){this._loadFeatureRolloutsDeferred.resolve(e),this._data[oi]=e,this._broadcastUpdate([oi])}get exposedExperiments(){return this._data[oe]}set assignedOverridesConfigurationHash(e){this._data[sc]=e,this._broadcastUpdate([sc])}set globalHoldouts(e){""!==e&&this._loadGlobalHoldoutsDeferred.resolve(e),this._data[ot]=e,this._broadcastUpdate([ot])}extractDeviceDimensions(e){let t=e?.outerHeight,i=e?.outerWidth;this._data[ss]&&0===t||(this._data[ss]=String(t),this._data[so]=String(i),this._broadcastUpdate([ss,so]))}extractDeviceName(e){let t=e.match("\\(([^)]+)\\)");return t?t[1]:e}get osVersion(){return this._data[ol]}get appVersion(){return this._data[sd]}get appName(){return this._data[su]}get userId(){return this._data[sD]}get mobileAppVersion(){return this._data[sh]}addCampaignProperties(e){if(e&&Object.keys(e).length>0)for(let t in e)this._data[t]=e[t]}get customReferrerApp(){return this._data[or]}get customCampaingReferrerApp(){return this._data[ep.MV2]}get customCampaignSDID(){return this._data[ep.SDID]}get customReferrerIntent(){return this._data[on]}set mobileBuildType(e){this._data[sp]=e}get mobileBuildType(){return this._data[sp]}get videoWebCodecsExperience(){return"true"===this._data[sf]}set videoWebCodecsExperience(e){this._data[sf]=e.toString()}set referrerAction(e){this._data[os]=e,this._setItemInSessionStorage(os,e)}_extractAndSetReferrerAction(){let e=this._getItemFromSessionStorage(os);e&&(this._data[os]=e)}_setItemInSessionStorage(e,t){"undefined"!=typeof sessionStorage&&sessionStorage.setItem(e,t)}_getItemFromSessionStorage(e){return"undefined"==typeof sessionStorage?null:sessionStorage.getItem(e)}constructor(e,t,i,r,s){this._initTimeoutId=0,this._embedParams=[],this._initAttributesPromises=[],this._loadExperimentsDeferred=new is,this._loadFeatureRolloutsDeferred=new is,this._loadGlobalHoldoutsDeferred=new is,this._accessCountryPromise=new Promise((e,t)=>{this._resolveAccessCountry=()=>{this._resolveAccessCountry=void 0,e()}}),this._IMSUserData=new Promise((e,t)=>{this._resolveIMSUserData=()=>{this._resolveIMSUserData=void 0,e()}}),this._IMSIdData=new Promise((e,t)=>{this._resolveIMSIdData=()=>{this._resolveIMSIdData=void 0,e()}}),this._windowResizeHandler=rO(()=>this.extractDeviceDimensions(window),1e3),this._windowResizeHandlerLoaded=!1,this._initialized=!1,this._data={},this._listeners=new Set,this._hostPromise=e,this._configPromise=i,this._marketingTechService=r,this._abpProfileService=s||r2.defaultInstance,this._data[sy]=t,this.assignedExperiments="",this.exposedExperiments="",this.assignedOverridesConfigurationHash="",this.globalHoldouts="",this._initAttributesPromises=[this._hostPromise,this._configPromise,this._initDeviceContext(),this._initMcidGuidContext(),this._initAppContext(),this._initPageContext(),this._initAccessCountry(),this._initIMSUserData(),this._initDataFromBrowserService(),this._initIMSIdData(),this._initDataFromABPProfile()];const o=this._createInitTimeout(),n=Promise.allSettled(this._initAttributesPromises);this._initPromise=Promise.race([n,o]),this._initDocContext(),this.extractAccessCountry(),this._extractAndSetReferrerAction()}}let om=["adobePrivacy:PrivacyConsent","adobePrivacy:PrivacyCustom","adobePrivacy:PrivacyReject"],oT="PrivacyServiceError: Failed to load";class oS{addConsentChangeListener(e,t){this.load().then(()=>{if(ry(eV.Browser))return Promise.resolve();if(this._host.executionEnvironment()===eV.Browser){if(this._browserService??(this._browserService=new i5(window.navigator,window.matchMedia.bind(window))),this._browserService.isEmbedDesktop)return Promise.resolve();this._addPrivacyListener(e),e()}}).catch(e=>{console.error(e),t([{[eE.EVENT_WORKFLOW]:"Debug",[eE.EVENT_SUBTYPE]:"log",[eE.EVENT_TYPE]:"failure",error:e}])})}_addPrivacyListener(e,t=!1){let i=t?()=>{e(),om.forEach(e=>{window.removeEventListener(e,i)})}:e;om.forEach(e=>{window.addEventListener(e,i)})}_registerLoadListeners(){this._addPrivacyListener(this._onLoadHandler.bind(this),!0)}_registerConfigs(){let{otDomainId:e,footerLinkSelector:t,documentLanguage:i}=this._config,r={otDomainId:e};t&&(r.footerLinkSelector=t),i&&(r.documentLanguage=i),window.fedsConfig=window.fedsConfig||{privacy:r}}async _loadPrivacy(){if(this._host.executionEnvironment()===eV.Browser)this._registerConfigs(),this._registerLoadListeners(),eP(async()=>new Promise((e,t)=>{let i=document.createElement("script");i.src=this._config.privacyUrl,i.async=!0;let r=()=>{o(),t(Error(oT))},s=()=>{o(),e()},o=()=>{i.removeEventListener("error",r),i.removeEventListener("load",s)};i.addEventListener("error",r),i.addEventListener("load",s),document.head.appendChild(i)}),{maxAttempts:10,delay:250,progressMessagePrefix:"[PrivacyService]"})().catch(()=>{this._loadPromise?.isSettled||this._loadPromise?.reject(oT)});else{this._loadPromise?.isSettled||this._loadPromise?.resolve();return}}async load(){return this._loadPromise?this._loadPromise.promise:(this._loadPromise=new is,ry(eV.Browser)||(await this._hostConfigPromises,this._host.executionEnvironment()===eV.Browser&&(this._browserService??(this._browserService=new i5(window.navigator,window.matchMedia.bind(window))),this._browserService.isEmbedDesktop||this._browserService.isEmbedVideo)))?this._loadPromise?.promise:(this._loadPrivacy().catch(()=>{this._loadPromise?.isSettled||this._loadPromise?.reject(oT)}),this._loadPromise?.promise)}resolvePrivacyLoadInNativeAppShell(){this._loadPromise?.resolve()}rejectLoadPromise(){this._loadPromise?.reject(oT)}constructor(e,t){this._onLoadHandler=()=>{this._loadPromise?.isSettled||(window.adobePrivacy?this._loadPromise?.resolve():this._loadPromise?.reject("PrivacyServiceError: window.adobePrivacy API is not available after load event."))},this._hostConfigPromises=Promise.all([e,t]).then(([e,t])=>{this._config=t,this._host=e})}}class oO{static get defaultInstance(){if(oO._defaultInstance)return oO._defaultInstance;let e=iH.singleton(),t=e.attach(r0).then(()=>({useExperienceEdge:r0.useExperienceEdge.isEnabled(),enableAEPAnalytics:r0.enableAEPAnalytics.isEnabled(),aepConfigId:r0.aepConfigId.value,launchURL:r0.launchURL.value,marketingTechURL:r0.marketingTechURL.value}));return oO._defaultInstance=new oO(e.getHost(),t),oO._defaultInstance}static _resetInstance(){oO._defaultInstance=void 0}async _initialized(){try{if(await this._initPromise,this._useExperienceEdge&&this._host.executionEnvironment()===eV.Browser){window.alloy_load={data:{},...window.alloy_load},window.alloy_all={data:{_adobe_corpnew:{digitalData:{page:{pageInfo:{}}}}},...window.alloy_all};let e=this._config.launchURL,t=this._config.aepConfigId;window.marketingtech={adobe:{launch:{url:e,controlPageLoad:!0},alloy:{edgeConfigId:t},target:!1,audienceManager:!1,sophia:!1,marketingTags:{disableGlobalTags:!1,disableContentsquare:!0}}};try{let e=document.createElement("script");e.textContent='!function(){"use strict";var e=window,t=document,n=Object.defineProperty,a="replace",o=function(e){return e=e[a](/%2523access_token%253D.*?%2526/gim,"%2526")[a](/%23access_token%3D.*?%26/gim,"%26")[a](/#access_token=.*?&/gim,"&")[a](/information=[^&]+/,"")[a](/puser=[^&]+/,"")[a](/fnuser=[^&]+/,"")[a](/lnuser=[^&]+/,"")};function i(){try{var e="referrer",a=t[e],i=o(a);i!==a&&n(t,e,{configurable:!0,value:i})}catch(e){}}var r=t.head,l=e.marketingtech,c=decodeURIComponent;function d(e){var n,a,o,i;for(a=0,o=(n=t.cookie?t.cookie.split("; "):[]).length;a<o;a++)if(i=n[a],c(i.substr(0,i.indexOf("=")))===e)return c(i.substr(i.indexOf("=")+1))}function s(){var n,a,o,i="alloy-prehiding",c="@keyframes alloyShow{from {opacity: 0.01;} to {opacity: 1;}}body,.personalization-container{opacity:0.01 !important;animation: 0s 3s forwards alloyShow}",s=3e3;if(t.getElementById("feds-script")&&(i="manual-prehiding"),a=t.getElementById(i),o=function(e){try{e&&e.parentNode&&e.parentNode.removeChild(e)}catch(e){}},!(r&&l&&l.adobe&&l.adobe.target)||e.targetGlobalSettings&&!e.targetGlobalSettings.bodyHidingEnabled||-1!==e.location.href.indexOf("mboxEdit")||-1!==e.location.search.indexOf("mboxDisable=1")||-1!==e.location.search.indexOf("adobe_authoring_enabled")||-1!==t.cookie.indexOf("adobe_optout")||d("OptanonChoice")&&(n=d("OptanonConsent"))&&-1!==n.indexOf("C0002:0"))o(a);else{if(!a){(a=t.createElement("style")).id=i,a.innerHTML=c;try{r.appendChild(a)}catch(e){}}setTimeout((function(){o(a)}),s)}}const f="9E1005A551ED61CA0A490D45@AdobeOrg";function u(){e.alloy_getIdentity=new Promise((function(t){let n,a,o,i,r;if(n=new URLSearchParams(e.location.search).get("adobe_mc"))try{if(a=n.split("|").reduce(((e,t)=>{const[n,a]=t.split("=");return e[n]=a,e}),{}),o=parseInt(a.TS,10),i=a.MCMID,r=decodeURIComponent(a.MCORGID),i&&r===f&&Date.now()/1e3<=o+300)return t({edge:{},identity:{ECID:i}})}catch(e){}if(n=d("AMCV_"+f)){a=n.split("|");for(let e=0,n=a.length;e<n;e++){if("MCMID"===a[e])return t({edge:{},identity:{ECID:a[e+1]}})}}let l=function(){e.removeEventListener("alloy_sendEvent",l),e.alloy("getIdentity").then(t)};e.addEventListener("alloy_sendEvent",l)}))}function p(){return e.alloy_events=e.alloy_events||[]}var y=function(e,t){for(var n=t.split("."),a=e,o=0,i=n.length-1;o<i;o++){var r=n[o];if(!a[r])return;a=a[r]}return a[n[o]]},h=function(e,t,n){for(var a=t.split("."),o=e,i=0,r=a.length-1;i<r;i++){var l=a[i];o[l]=o[l]||{},o=o[l]}return o[a[i]]=n,e};function m(){var t=e.alloy_all=e.alloy_all||{};return t.promises=t.promises||[],t.xdm=t.xdm||{},t.data=t.data||{},t.get=function(e){return y(t,e)},t.set=function(e,n){return h(t,e,n)},t}var g=Promise;function _(){var t=e.alloy_load=e.alloy_load||{};return t.i=!1,t.sent=new g((function(e,n){t.r=e,t.j=n})),t.promises=t.promises||[],t.xdm=t.xdm||{},t.data=t.data||{},t.get=function(e){return y(t,e)},t.set=function(e,n){return h(t,e,n)},t}function v(){var t=e.alloy_unload=e.alloy_unload||{};return t.i=!1,t.sent=new g((function(e,n){t.r=e,t.j=n})),t.xdm=t.xdm||{},t.data=t.data||{},t.get=function(e){return y(t,e)},t.set=function(e,n){return h(t,e,n)},t}function b(){u(),p(),m(),_(),v()}function C(e){throw Error(e)}function x(e,n){var a=t.createElement("script"),o=!1;a.src=e,a.async=!0,n&&(a.onload=a.onreadystatechange=function(e){var t=this.readyState;o||t&&"complete"!==t&&"loaded"!==t||(o=!0,n(e))}),r?r.appendChild(a):t.body?t.body.appendChild(a):C("no script parent")}function k(){var t,n,a,o,i,r,c,d=[];t=function(t){o?t(e._satellite):d.push(t)},n=new g((function(e){t(e)})),e.__satelliteLoadedCallback=t,e.__satelliteLoadedPromise=n,a=function(){var t,n,a;for(o=!0,t=0,n=d.length;t<n;t++){a=d[t];try{a(e._satellite)}catch(e){}}},l&&(i=l.adobe)&&(r=i.launch)&&(c=r.url)&&x(c,a)}function D(){var t=[];e._satellite=e._satellite||{},e._satellite.track=function(e,n){(n=n||{})._beforeSatelliteLoaded=!0,t.push([e,n])},e.__satelliteLoadedCallback((function(){var n,a,o;for(n=0,a=t.length;n<a;n++)o=t[n],e._satellite.track(o[0],o[1])})),_satellite.track("pageView")}function E(){var t={_set:function(t,n){0!==t.indexOf("digitalData")&&(t="digitalData."+t),"object"!=typeof n&&"function"!=typeof n||!n.then||"function"!=typeof n.then||(n=n.unresolved||void 0),h(e.alloy_all,"data._adobe_corpnew."+t,n)}};e.digitalData=e.digitalData||t}-1===e.location.search.indexOf("marketingtech=off")&&(i(),s(),b(),k(),D(),E()),e.alloy_all&&e.alloy_all.set("data.marketingtech.bootstrap.version","0.28.1")}();',e.onerror=e=>{this._loadPromise?.reject(e),console.error("Failed to execute MarketingTech script",e)},document.head.appendChild(e),setTimeout(()=>{this._loadPromise?.resolve(),console.log("MarketingTech loaded successfully")},100)}catch(e){this._loadPromise?.reject(e),console.error("Failed to create or execute MarketingTech script",e)}}else this._loadPromise?.isSettled||this._loadPromise?.resolve();this._isInitialized=!0}catch(e){this._loadPromise?.isSettled||this._loadPromise?.reject(e),console.error("Failed to initialized marketingTech",e)}return this._loadPromise?.promise}_generatePayload(e){return{eventType:"web.webinteraction.linkClicks",xdm:{web:{webPageDetails:{isErrorPage:!1,isHomePage:!1,name:window.location.host,server:window.location.href,siteSection:window.location.href},webReferrer:{URL:e[eE.EVENT_REFERRER]||""},webInteraction:{name:e[eE.EVENT_PAGENAME]||"",linkClicks:{value:1},type:"other"}}},data:{_adobe_corpnew:{digitalData:{},sdm:this._unflatten(e)},marketingtech:{adobe:{alloy:{approach:"optimized",edgeConfigId:this._config.aepConfigId}}}}}}_setProp(e,t,i){let r=t.indexOf("."),s=t.substring(0,r),o=t.substring(r+1);e[s]=e[s]||{};let n=e[s];o.includes(".")?this._setProp(n,o,i):n[o]=i}_unflatten(e){let t={};for(let i of Object.keys(e))i!==eE.APP_CONFIG_OVERRIDES&&(i.includes(".")?this._setProp(t,i,e[i]):t[i]=e[i]);return t}_sendEvent(e){try{if(!this._useExperienceEdge||!this._enableAEPAnalytics)return;window._satellite.track("event",e)}catch(e){console.warn("MarketingTechService encountered an unexpected error sending events to AEP",e)}}sendEvent(e){let t=this._generatePayload(e);this._isInitialized?this._sendEvent(t):this._initialized().then(()=>{this._sendEvent(t)})}async mcidGuid(){if(this._isInitialized||await this._initialized(),!this._useExperienceEdge)return"";try{let e=await window.alloy_getIdentity;return e.identity?.ECID??eT}catch(e){return console.warn("Could not get ECID. Mostly adBlocker is blocking calls to AEP",e),eT}}trackProposition(e,t){let i=()=>{"undefined"!=typeof window&&window._satellite&&window._satellite?.track(e,t)};this._isInitialized?i():this._initialized().then(i)}constructor(e,t){this.sendEvent=this.sendEvent.bind(this),this.mcidGuid=this.mcidGuid.bind(this),this._isInitialized=!1,this._useExperienceEdge=!1,this._enableAEPAnalytics=!1,this._loadPromise=new is,this._initPromise=Promise.all([e,t,t.then(e=>e.useExperienceEdge),t.then(e=>e.enableAEPAnalytics)]).then(([e,t,i,r])=>{this._host=e,this._config=t,this._useExperienceEdge=i,this._enableAEPAnalytics=r})}}let oC={maxAttempts:3,shouldRetry:e=>!(e instanceof t9)||!1!==e.retryable,delay:500},ov={eventName:eE.EVENT_PAGENAME,type:eE.EVENT_TYPE,subType:eE.EVENT_SUBTYPE,workflow:eE.EVENT_WORKFLOW,subCategory:eE.EVENT_SUBCATEGORY},oy=new Set(Object.values(eE)),oA=class{trigger(e){if(!this._analyticsClient)throw Error("AnalyticsEvent instance without AnalyticsClient detected. Please register the event with AnalyticsClient.");let t={};for(let[e,i]of Object.entries(ov))t[i]=this._spec[e];if(e){let i,r;M in e&&(i=new Date(e[M]),e[eE.EVENT_TIME_START]=i.toISOString(),delete e[M]),F in e&&(r=new Date(e[F]),e[eE.EVENT_TIME_END]=r.toISOString(),delete e[F]),i&&r&&(e[eE.EVENT_VALUE]=r.getTime()-i.getTime());let s=e[x];for(let i of(void 0!==s&&(s&&(e[eE.EVENT_TYPE]="error"),delete e[x]),Object.keys(e)))oy.has(i)||0===i.indexOf("custom.")||console.warn("Unrecognized AnalyticsPropertyName",{invalidName:i}),t[i]=e[i]}this._analyticsClient._sendEvent(t)}set name(e){this._spec.eventName=e}get name(){return`${this._spec.eventName}`}get type(){return this._spec.type}get subType(){return this._spec.subType}set client(e){this._analyticsClient=e}get client(){return this._analyticsClient}set contextGuid(e){if(!ev(e))throw Error("Invalid UUID for contextGuid");this._eventMetaData=this._eventMetaData||{contextGuid:""},this._eventMetaData.contextGuid=e}constructor(e,t){this._spec=e,t&&(this._analyticsClient=t,this._analyticsClient._registerEvent(this))}},oR=class e extends iY{static get defaultInstance(){if(!e._defaultInstance){let t=iH.singleton(),i=t.attach(r0),r=oO.defaultInstance,s=r2.defaultInstance,o=i.then(()=>({otDomainId:r0.otDomainId.value,privacyUrl:r0.privacyURL.value})),n=new oS(t.getHost(),o),a=i.then(()=>({env:r0.env.value,envName:r0.envName.value,includeIngestBuildPrefix:r0.includeIngestBuildPrefix.enabled,appSAPCode:r0.appSAPCode.value,appVersion:r0.appVersion.value,ingestAppCategory:r0.ingestAppCategory.value,aaTrackingServer:r0.aaTrackingServer.value,aaSecureTrackingServer:r0.aaSecureTrackingServer.value,buildInfo:t.buildInfo,bundleHash:r0.bundleHash.value,useExperienceEdge:r0.useExperienceEdge.enabled,useSubscriptionProfile:r0.useSubscriptionProfile.enabled,aepConfigId:r0.aepConfigId.value,launchURL:r0.launchURL.value,marketingTechURL:r0.marketingTechURL.value})),l=new of(t.getHost(),t.sessionId,a,r,s),c=i.then(()=>({ingestProcessingInterval:r0.ingestProcessingInterval.value,analyticsBufferLimit:r0.analyticsBufferLimit.value,ingestConfig:{ingestApiKey:r0.ingestAPIKey.value,ingestAppCategory:r0.ingestAppCategory.value,ingestProject:r0.ingestProject.value,envName:r0.ingestHostAlwaysProdEnabled.enabled?"prod":r0.envName.value,ingestHost:r0.ingestHostAlwaysProdEnabled.enabled?r0.ingestHostAlwaysProd.value:r0.ingestHost.value,token:"",ingestWaitForAppStartup:r0.ingestWaitForAppStartup.enabled}})),u=new iX(t.getHost(),c,t=>e._defaultInstance._updateNetworkState(t)),d=t7.createInstance(t.getHost(),c.then(e=>e.ingestConfig));e._defaultInstance=new e(t,u,l,r,n,d);let h=e._defaultInstance,g=h._setUserConsentCb(),E=h._sendDataToIngestCb();h._privacyService.addConsentChangeListener(g,E),h._setExecutionEnvironment(),i.then(()=>{if(h.setAnalyticsFlag(r0.enableAnalytics.enabled),r0.sendPreConsentEvent.enabled){let e=["/preload","/edit-image-preload"],t=async()=>{"object"==typeof window.location&&e.includes(window?.location?.pathname?.toLowerCase()??"")||await h._waitForConsentSystemModalWithTimeout()&&h.userConsent===em.UNINITIALIZED&&h.trigger(oI,{})};h._executionEnvironment===eV.Browser&&"undefined"!=typeof document&&"undefined"!=typeof window&&t()}})}return e._defaultInstance}async shutdown(e=!0,t=600){let i=this._eventDataTransport.shutdown(e);if(e)await i;else{let e=new Promise(e=>setTimeout(e,t));await Promise.race([i,e])}this.context?.shutdown()}get appConfig(){return this._appConfig}get context(){return this._analyticsContext}get transport(){return this._eventDataTransport}trigger(e,t){this._registerEvent(e),e.client=this,e.trigger(t)}_processOrQueueEvent(e){e[eE.EVENT_PAGENAME]===oI.name?this._processAnalyticsEvents([e],!1,!0):(this.userConsent===em.ALLOWED&&this._processAnalyticsEvents([e]),this.userConsent===em.UNINITIALIZED&&this._eventQueue.queueEventData(e))}_sendEvent(e){if(!1===this._enableAnalytics||this.userConsent===em.DENIED)return;let t=e[eE.EVENT_PAGENAME];this._addToEventsHistory(t,e),this._analyticsContext.isInitialized()?(this._analyticsContext.adornEventData(e),this._processOrQueueEvent(e)):this._analyticsContext.initialized().then(()=>{this._analyticsContext.adornEventData(e),this._processOrQueueEvent(e)})}async _setExecutionEnvironment(){let e=iH.singleton();await e.attach(r0);let t=await e.getHost();this._executionEnvironment=t.executionEnvironment()}async _eventQueueDeliveryFunction(e){this._enableAnalytics&&this.userConsent===em.ALLOWED&&await this._processAnalyticsEvents(e,!0)}async _sendToDunamis(e){let t=eP(this._ingestService.sendEventData,oC);await t(e).catch(e=>{console.warn("Analytics encountered an unexpected error while sending data to Ingest: ",e)})}async _processAnalyticsEvents(e,t=!1,i=!1){!0===t?await this._sendToDunamis(e):this._sendToDunamis(e),i||e.forEach(e=>{switch(this._executionEnvironment){case eV.Worker:postMessage({type:"payloadFromWorker",payload:e});break;case eV.Browser:this.notifyListeners(e),this._marketingTechService.sendEvent(e);break;default:console.log(`The execution environment ${this._executionEnvironment} does not support callbacks.`)}})}notifyListeners(e){this._callListeners(e)}_registerEvent(e){this._events[e.name]=e}addEventListener(e){this._listeners.add(e)}removeEventListener(e){this._listeners.delete(e)}_callListeners(e){this._listeners.forEach(t=>{try{t(e)}catch(e){console.warn("Error occurred while calling Analytics event listener: ",e)}})}setAnalyticsFlag(e){this._enableAnalytics=e}addConsentListener(e){this._consentListeners.add(e),this._broadcastUserConsentUpdate()}deleteConsentListener(e){this._consentListeners.delete(e)}addNonCrossThreadConsentListener(e){this._consentListeners.add(e)}ensureUserConsentIsAvailable(){return this._privacyService.load()}get privacyServiceInstance(){return this._privacyService}_parseCookieGroup(){return this._executionEnvironment===eV.Browser&&(window?.adobePrivacy?.activeCookieGroups()||[]).includes("C0002")?em.ALLOWED:em.DENIED}_waitForConsentSystemModalWithTimeout(){return new Promise(e=>{let t=setInterval(()=>{let e=window?.adobePrivacy?.activeCookieGroups()?.includes("C0001")??!1,t="undefined"!=typeof document?document.getElementById("onetrust-banner-sdk"):null,i=!1;if(t){let e="undefined"!=typeof window&&"function"==typeof window.getComputedStyle?window.getComputedStyle(t):null;i="none"!==(e?.display??t.style?.display??"")}e&&i&&r(!0)},100),i=setTimeout(()=>{r(!1)},1e4);function r(r){clearInterval(t),clearTimeout(i),e(r)}})}_updateUserConsentCb(){this.userConsent=this._parseCookieGroup()}_broadcastUserConsentUpdate(){if(0===this._consentListeners.size||this._userConsentFromCookies===em.UNINITIALIZED)return;let e={userConsent:this._userConsentFromCookies};this._consentListeners.forEach(t=>{t(e)})}set userConsent(e){this._userConsentFromCookies=e,this._userConsentFromCookies===em.ALLOWED&&(this._eventQueueShutdownPromise=this._eventQueue?.shutdown()),this._broadcastUserConsentUpdate()}get userConsent(){return this._userConsentFromCookies}set crashLogsConsent(e){this._crashLogsConsent=e}get crashLogsConsent(){return this._crashLogsConsent}_sendDataToIngestCb(){return async e=>{for(let t of(await this._analyticsContext.initialized(),e))this._analyticsContext.adornEventData(t);return this._ingestService.sendEventData(e)}}_setUserConsentCb(){return this._updateUserConsentCb.bind(this)}_addToEventsHistory(e,t){if(this._eventsHistory.size>=this._maxEventHistorySize){let e=this._eventsHistory.keys().next().value;e&&this._eventsHistory.delete(e)}this._eventsHistory.set(e,t)}getEventDataFromHistory(e){return this._eventsHistory.get(e)}constructor(e,t,i,r,s,o){super(),this._appConfig=e,this._analyticsContext=i,this._eventDataTransport=t,this._marketingTechService=r,this._privacyService=s,this._events={},this._listeners=new Set,this._consentListeners=new Set,this._executionEnvironment=eV.Browser,this._enableAnalytics=!0,this._userConsentFromCookies=em.UNINITIALIZED,this._crashLogsConsent=!1,this._ingestService=o,this._eventQueue=new ij(this._eventQueueDeliveryFunction.bind(this)),this._eventQueue.maxQueueLength=20,this._eventQueue.batchSize=10,this._eventsHistory=new Map,this._maxEventHistorySize=20}},oI=new oA({eventName:"preconsent-app-load",workflow:"lifecycle",subCategory:"operations",type:"load",subType:"app-page"});async function ow(e){if((await e.appConfig.getHost()).executionEnvironment()!==eV.Browser)return{};let t=null;if("undefined"!=typeof window&&window.location?.href){let e=window.location.href.match(/(\d+)\.prenv\./);e&&(t=`${e[1]}-prenv`)}let i=e.appConfig.whichEnginesEnabled();if(!i.experimentation&&!i.personalization)return{};let r=[];if(i.experimentation){let t=e.context.experimentsMetadata(),[i,s]=ob(),o=Promise.race([t,s]).then(e=>(clearTimeout(i),e)).catch(()=>"");r.push(o)}else r.push(Promise.resolve(""));if(i.personalization){let t=e.context.featureRolloutsMetadata(),[i,s]=ob(),o=Promise.race([t,s]).then(e=>(clearTimeout(i),e)).catch(()=>"");r.push(o)}else r.push(Promise.resolve(""));let s=e.context.globalHoldoutsMetadata(),[o,n]=ob(),a=Promise.race([s,n]).then(e=>(clearTimeout(o),e)).catch(()=>"");r.push(a);let l=await Promise.all(r),c={};c.experiments=l[0],c.featureRollouts=l[1],c.globalHoldouts=l[2],t&&(c.environment=t),c.hasCohortData=c.experiments.length>0||c.globalHoldouts.length>0||c.featureRollouts.length>0;let u=void 0!==globalThis.window?new URLSearchParams(window?.location.search):new URLSearchParams;if(u.get("traceparent")){let e=u.get("testId"),t=u.get("suiteId");e&&(c.testId=e),t&&(c.suiteId=t)}return c}function ob(){let e,t=new Promise((t,i)=>{e=setTimeout(()=>{i(Error("Timed out after 5000ms"))},5e3)});return[e,t]}var oN=((ea=oN||{})[ea.traceflow=1]="traceflow",ea[ea.debug=2]="debug",ea[ea.info=3]="info",ea[ea.warn=4]="warn",ea[ea.error=5]="error",ea[ea.none=6]="none",ea);let oU="global",oD={debug:"debug",info:"info",error:"failure",warn:"failure",traceflow:"debug"};var oL=((el=oL||{})[el.EVENT_TYPE=eE.EVENT_TYPE]="EVENT_TYPE",el[el.EVENT_SUBTYPE=eE.EVENT_SUBTYPE]="EVENT_SUBTYPE",el[el.EVENT_SUBCATEGORY=eE.EVENT_SUBCATEGORY]="EVENT_SUBCATEGORY",el[el.EVENT_WORKFLOW=eE.EVENT_WORKFLOW]="EVENT_WORKFLOW",el[el.TRACEFLOW_CATEGORY=eE.LOG_TRACEFLOW_CATEGORY]="TRACEFLOW_CATEGORY",el[el.TRACE_ID=eE.LOG_TRACE_ID]="TRACE_ID",el[el.SPAN_ID=eE.LOG_SPAN_ID]="SPAN_ID",el[el.LOG_MESSAGE=eE.LOG_MESSAGE]="LOG_MESSAGE",el[el.LOG_LEVEL=eE.LOG_LEVEL]="LOG_LEVEL",el[el.METADATA=eE.LOG_METADATA]="METADATA",el[el.ERROR_UUID=eE.ERROR_UUID]="ERROR_UUID",el[el.ERROR_MESSAGE=eE.ERROR_MESSAGE]="ERROR_MESSAGE",el[el.ERROR_CODE=eE.ERROR_CODE]="ERROR_CODE",el[el.ERROR_FULL_STACK=eE.ERROR_FULL_STACK]="ERROR_FULL_STACK",el[el.ERROR_FULL_MESSAGE_WITH_CODE=eE.ERROR_FULL_MESSAGE_WITH_CODE]="ERROR_FULL_MESSAGE_WITH_CODE",el[el.ERROR_CATEGORY=eE.ERROR_CATEGORY]="ERROR_CATEGORY",el[el.ERROR_IS_EXPECTED=eE.ERROR_IS_EXPECTED]="ERROR_IS_EXPECTED",el[el.ERROR_LOG_METADATA=eE.ERROR_LOG_METADATA]="ERROR_LOG_METADATA",el[el.ERROR_CLIENT_FATAL=eE.ERROR_CLIENT_FATAL]="ERROR_CLIENT_FATAL",el.UNDEFINED_MESSAGE_STACK="custom.undefinedMessageStack",el);let oP=function(){},oM=class e{set traceflowOverrides(e){this._traceflowOverrides=e,this._categoryLoggers.forEach(t=>{t._traceflowOverrides=e,t._initLogLevelsFromConfig()})}get traceflowOverrides(){return this._traceflowOverrides}static _captureConsole(){e._originalConsoles[1]=console.debug,e._originalConsoles[2]=console.debug,e._originalConsoles[3]=console.info,e._originalConsoles[4]=console.warn,e._originalConsoles[5]=console.error}static hijackConsole(t){e._singleton._consoleHijacked&&e._restoreConsole(),console.info("Logger taking over console"),t._consoleHijacked=!0,console.debug=(...e)=>t.debug(...e),console.log=(...e)=>t.info(...e),console.info=(...e)=>t.info(...e),console.warn=(...e)=>t.warn(...e),console.error=(...e)=>t.error(...e)}static _restoreConsole(){e._singleton._consoleHijacked&&(console.debug=e._originalConsoles[2],console.info=e._originalConsoles[3],console.warn=e._originalConsoles[4],console.error=e._originalConsoles[5],console.log=e._originalConsoles[1],e._singleton._consoleHijacked=!1)}static singleton(){return!e._singleton&&(e._singleton=new e(oR.defaultInstance),e._singleton._destroySingleton=()=>{e._restoreConsole(),delete e._singleton},e._captureConsole(),e.HijackConsole&&e.hijackConsole(e._singleton)),e._singleton}get _sendProcessedLogsToConsole(){return!!this._rawFeatures["processed-logs-to-console"]}get _suppressLogsToIngest(){return!!this._rawFeatures["suppress-logs-to-ingest"]}async _initFromConfig(e){let t=await e.getSettings(),i=await e.getFeatures();this._initFromConfigSync(i,t),this._categoryLoggers.forEach(e=>{e._initFromConfigSync(this._rawFeatures,this._rawSettings)})}_initFromConfigSync(e,t){this._rawFeatures=e,this._rawSettings=t,this._initLogLevelsFromConfig()}_initLogLevelsFromConfig(){let e=this._rawSettings;if(e.enabledLogLevel&&(this._enabledLogLevel=oN[e.enabledLogLevel]),e.consoleLogLevel&&(this._consoleLogLevel=oN[e.consoleLogLevel]),this._category){let e=`consoleLogLevel-${this._category}`,t=this._rawSettings[e];void 0!==t&&(this._consoleLogLevel=oN[t]),e=`enabledLogLevel-${this._category}`,void 0!==(t=this._rawSettings[e])&&(this._enabledLogLevel=oN[t]),this._isTraceflowFeatureEnabled(this._category)&&(this._enabledLogLevel=1),this._isTraceflowConsoleFeatureEnabled(this._category)&&(this._consoleLogLevel=1)}this._initialized=!0}async shutdown(t=!0){await this._analyticsClient.shutdown(t),e.singleton()._destroySingleton()}async initialized(){return this._initializedPromise}async _doneBuffering(){return this._doneBufferingPromise}getBuffer(){return this._logBuffer}get enabledLogLevel(){return this._enabledLogLevel}get consoleLogLevel(){return this._consoleLogLevel}get category(){return this._category}getFeaturesAndSettingsProvider(){return{getSettings:async()=>(await this.initialized(),this._rawSettings),getFeatures:async()=>(await this.initialized(),this._rawFeatures)}}static get(t){return e.singleton().get(t)}get(e){if(this._category===e)return this;let t=this._categoryLoggers.get(e);return t||(t=this.createCategoryLogger(e),this._categoryLoggers.set(e,t)),t}createCategoryLogger(t){return new e(this._analyticsClient,this,t)}createRequestLogger(e){return new ox(this._analyticsClient,e,this)}async createInitializeRequestLogger(e){let t=new ox(this._analyticsClient,e,this);return await t.initialized(),t}_isErrorMeta(e){return"error"in e}_extractErrorMeta(e){return this._isErrorMeta(e)?e.error:null}_processArgs(e,t){let i,r,s=t[0];"string"!=typeof s&&(t.length>1&&"string"==typeof t[1]?(s=t[1],t[1]=t[0],t[0]=s):(s=this._getMessageFromUnknownObject(t[0]),t.unshift(s)));let o=null;if(2===t.length)(r=t[1])instanceof eD||r instanceof Error?(o=r,i={}):null!==r&&"object"==typeof r?(o=this._extractErrorMeta(r),i=eb(r)):i={unknown:eb(r)};else if(t.length>2){i=[];for(let e=1;e<t.length;e++)r=t[e],null===o&&r instanceof Error?o=r:i.push(eb(r))}else i={};if("undefined-message"===s&&(i["custom.undefinedMessageStack"]=Error("Undefined message stack").stack),this._hasKnownMetaKeys(i)?this._normalizeMetaKeys(i):i={[oL.METADATA]:i},o)if(o instanceof eD){i[oL.ERROR_UUID]=o.uuid,i[oL.ERROR_MESSAGE]=o.message,i[oL.ERROR_CODE]=o.code,i[oL.ERROR_FULL_STACK]=o.fullStack.replace(/[\s]{2,}/g," "),i[oL.ERROR_FULL_MESSAGE_WITH_CODE]=o.fullMessageWithCode,o.category&&(i[oL.ERROR_CATEGORY]=o.category),o.isExpected&&(i[oL.ERROR_IS_EXPECTED]=o.isExpected);let e=o.fullLogMetadata;e&&(i[oL.ERROR_LOG_METADATA]=eb(e))}else{i[oL.ERROR_MESSAGE]=o.toString();let e=o.stack||"Unknown";i[oL.ERROR_FULL_STACK]=e.replace(/[\s]{2,}/g," ")}return{level:oN[e],msg:s,meta:i}}_getMessageFromUnknownObject(e){if(null==e)return"undefined-message";if(e instanceof Error)return e.message;let t=eN(e);if(!t)try{return e.toString()}catch(e){return"_getMessageFromUnknownObject: toString failed"}return t.substring(0,1e3)}_hasKnownMetaKeys(e){let t;if(e&&"object"==typeof e){for(let i of Object.keys(e))if((t=i.indexOf("."))>0&&i.substr(0,t)in ef)return!0}return!1}_normalizeMetaKeys(e){let t;for(let[i,r]of Object.entries(e))(t=i.indexOf("."))<0?(e["custom."+i]=r,delete e[i]):i.substr(0,t)in ef||(e["custom."+i]=r,delete e[i])}error(...e){this._logWithLevel("error",e)}static error(...t){e.singleton().error(...t)}warn(...e){this._logWithLevel("warn",e)}static warn(...t){e.singleton().warn(...t)}info(...e){this._logWithLevel("info",e)}_logWithLevel(e,t){try{let i=oN[e];if(this._shouldMirrorToConsole(i)){let r=t;this._category&&(r=["traceflow"===e?`[TRACEFLOW: ${this._category}]`:`[${this._category}]`,...t]),this._mirrorOriginalConsole(i,r)}if(this._initialized&&!this._shouldSendLog(i))return;let r=this._processArgs(e,t);this._filteredPush(r)}catch(i){console.error(`Logger.${e}(): An error was thrown while logging`,i,...t)}}static info(...t){e.singleton().info(...t)}debug(...e){this._logWithLevel("debug",e)}static debug(...t){e.singleton().debug(...t)}traceflow(e,...t){this._category!==e?this.get(e).trace(...t):this.trace(...t)}trace(...e){this._category?this._logWithLevel("traceflow",e):this.get(oU).trace(...e)}static traceflow(t,...i){e.singleton().traceflow(t,...i)}_isTraceflowCategoryEnabled(e){return this._traceflowOverrides?.[e]!==void 0?this._traceflowOverrides[e]:!!this._rawFeatures[e]}_isTraceflowFeatureEnabled(e){return this._isTraceflowCategoryEnabled("traceflow-all")||this._isTraceflowCategoryEnabled(`traceflow-${e}`)}_isTraceflowConsoleFeatureEnabled(e){return this._isTraceflowFeatureEnabled("console-all")||this._isTraceflowFeatureEnabled(`console-${e}`)}isTraceflowEnabled(e){let t=e||this._category;return void 0!==t&&this.get(t).enabledLogLevel<=1}isTraceflowConsoleEnabled(e){let t=e||this._category;return void 0!==t&&this.get(t).consoleLogLevel<=1}static isTraceflowEnabled(t){return e.singleton().isTraceflowEnabled(t)}_adornWithContext(e){let t=t5.getSpanContext(tt.active());t&&tq(t)&&(e.meta[oL.TRACE_ID]=t.traceId,e.meta[oL.SPAN_ID]=t.spanId),e.meta[oL.EVENT_TYPE]=oD[oN[e.level]],e.meta[oL.EVENT_SUBTYPE]="log",e.meta[oL.EVENT_WORKFLOW]=P,e.meta[oL.EVENT_SUBCATEGORY]=this._category||oU}_mirrorOriginalConsole(t,i){if(this._initialized)e._originalConsoles[t].apply(console,i);else try{let r=JSON.stringify(i);e._originalConsoles[t].apply(console,[r])}catch(e){console.error("Failed to stringify args",i)}}_echoProcessedLogToConsole(t){let i=t;try{1===i.level&&((i={...t}).level=3);let r=JSON.stringify(i);e._originalConsoles[2].apply(console,[r])}catch(e){console.error("Failed to stringify logEntry",i)}}_shouldSendLog(e){return this._enabledLogLevel<=e}_shouldMirrorToConsole(e){return this._consoleLogLevel<=e}_filteredPush(e){if(this._shouldBuffer){this._adornWithContext(e),this._logBuffer.push(e);return}this._shouldSendLog(e.level)&&(this._adornWithContext(e),this._category&&1===e.level&&(e.meta["custom.traceflow"]=this._category),this._pushMetric(e),this._pushLog(e))}_adornLogEventWithContext(e){this._analyticsClient.context.adornEventData(e.meta)}async _pushMetric(e){var t;let i,r,s;if(5!==e.level)return;let{appName:o,attributes:n}=(t=this._analyticsClient.appConfig,i=t.getOtelServiceName()?.replaceAll("-","_")||"unknown_app",r=t._environment||"local",s=t.buildInfo?.sha??"unknown","local"===r&&(s="local"),{appName:i,attributes:{buildSha:s}});n.category=this._category;let a=await ow(this._analyticsClient);a.hasCohortData&&Object.assign(n,a),tO.getMeter(`${o}_logger_init`).createCounter(`hz_${o}_logger_error_count`).add(1,n),n.expected=!0===e.meta[oL.ERROR_IS_EXPECTED]&&e.meta[oL.ERROR_IS_EXPECTED],!0===e.meta[oL.ERROR_CLIENT_FATAL]&&tO.getMeter(`${o}_logger_init`).createCounter(`hz_${o}_fatal_crash_error_count`).add(1,n)}_pushLog(e){if(e.meta[oL.LOG_MESSAGE]=e.msg,e.meta[oL.LOG_LEVEL]=oN[e.level],this._adornLogEventWithContext(e),this._sendProcessedLogsToConsole&&this._echoProcessedLogToConsole(e),this._suppressLogsToIngest)return;let t=!!e?.meta[oL.ERROR_CLIENT_FATAL];t&&this._analyticsClient.userConsent!==em.ALLOWED&&(delete e.meta["event.mcid_guid"],delete e.meta["event.user_guid"]),(t||this._analyticsClient.userConsent===em.ALLOWED)&&this._analyticsClient.transport.queueEventData(e.meta)}constructor(e,t,i){this._category=void 0,this._logBuffer=[],this._shouldBuffer=!0,this._rawFeatures={},this._rawSettings={},this._categoryLoggers=new Map,this._consoleHijacked=!1,this._initialized=!1,this._analyticsClient=e,this._category=i,this._consoleLogLevel=3,this._enabledLogLevel=3,t?(this._traceflowOverrides=t._traceflowOverrides,t._initialized?(this._initFromConfigSync(t._rawFeatures,t._rawSettings),this._initializedPromise=Promise.resolve()):this._initializedPromise=this._initFromConfig(t.getFeaturesAndSettingsProvider())):this._initializedPromise=this._initFromConfig(this._analyticsClient.appConfig);let r=Promise.resolve();e.userConsent===em.UNINITIALIZED&&(r=this._analyticsClient.ensureUserConsentIsAvailable()),this._doneBufferingPromise=Promise.all([this._initializedPromise,r]).then(()=>{for(let e of(this._shouldBuffer=!1,this._logBuffer))this._filteredPush(e);this._logBuffer=[]}).catch(e=>{this._shouldBuffer=!1,this._logBuffer=[],console.error("Logger: initialization failed. One or more promises rejected",e)})}};oM._originalConsoles={6:oP,1:oP,2:oP,3:oP,4:oP,5:oP},oM.HijackConsole=!1;let oF={sessionId:eE.EVENT_SESSION_ID,requestId:"custom.requestId",statusCode:"custom.statusCode",url:"custom.url",method:"custom.method",referrer:eE.EVENT_REFERRER,startTime:eE.EVENT_TIME_START,userId:eE.EVENT_USER_GUID,traceId:"custom.traceId"},ox=class e extends oM{createCategoryLogger(t){return new e(this._analyticsClient,this.requestContext,this,t)}_adornLogEventWithContext(e){for(let[t,i]of(this._analyticsClient.context.adornEventData(e.meta),Object.entries(this.requestContext)))oF[t]?e.meta[oF[t]]=i:e.meta[t]=i}_mirrorOriginalConsole(e,t){let i=[this.requestContext].concat(t);return super._mirrorOriginalConsole(e,i)}constructor(e,t,i,r){super(e,i,r),this.requestContext=t}};class ok{get isResourceObserverEnabled(){return this._isResourceObserverEnabled}startObserving(e){if(this._isResourceObserverEnabled){if(null!==this._observer)return void oM.warn("ResourceObserver: Performance observer already started");this._observer=new PerformanceObserver(t=>{let i=t.getEntries();this._performanceObserverHandler(i),e?.(i)}),this._observer.observe({type:"resource",buffered:!0})}}stopObserving(){this._isResourceObserverEnabled&&(this._observer?.disconnect(),this._observer=null,this._storageInfoList.clear(),this._timingInfoList.clear())}getStorageInfoList(e){if(!e)return this._storageInfoList;let t=new Map;for(let[i,r]of this._timingInfoList)r.startTime>=e.startTime&&r.endTime<=e.endTime&&t.set(i,this._storageInfoList.get(i));return t}getTimingInfoList(){return this._timingInfoList}_performanceObserverHandler(e){e.forEach(e=>{if(this._shouldDiscardEntry(e.name))return;let t={transferSize:e.transferSize,decodedBodySize:e.decodedBodySize,encodedBodySize:e.encodedBodySize};if(e.serverTiming&&e.serverTiming.length>0){let i=this._extractStorageInfoFromServerTiming(e.serverTiming);i&&(t={...i,transferSize:0})}this._storageInfoList.set(e.name,this._isInvalidStorageInfo(t)?null:t),this._timingInfoList.set(e.name,{startTime:performance.timeOrigin+e.startTime,endTime:performance.timeOrigin+e.startTime+e.duration})})}_extractStorageInfoFromServerTiming(e){let t=e=>{if(!e)return null;let t=e.match(/size:(\d+)/);return t?parseInt(t[1]):null},i=e.find(e=>"sw-transfer"===e.name),r=e.find(e=>"sw-decoded"===e.name),s=e.find(e=>"sw-encoded"===e.name);if(i?.description&&r?.description&&s?.description){let e=t(i.description),o=t(r.description),n=t(s.description);if(null!==e&&null!==o&&null!==n)return{transferSize:e,decodedBodySize:o,encodedBodySize:n}}return null}_shouldDiscardEntry(e){let t=new URL(e);return!(t.origin===this._origin&&t.pathname.startsWith("/static/"))||!this._inclusionList.some(e=>t.pathname.endsWith(e))}_isInvalidStorageInfo(e){return 0===e.transferSize&&0===e.decodedBodySize&&0===e.encodedBodySize||e.encodedBodySize===e.decodedBodySize&&e.encodedBodySize>1024}_isMobileWebView(){if("undefined"==typeof navigator)return!1;let e=navigator.userAgent,t=/Android.*wv\)|WebView|; wv\)|Android.*Chrome.*Mobile/.test(e),i=/iPhone|iPad|iPod/.test(e)&&!/Safari/.test(e),r=/AdobeExpress|ProjectX/.test(e);return t||i||r}_isEditImageQA(){return self.location.href.includes("edit-image")}constructor(){this._inclusionList=["js","json","wasm","data"],this._origin=self.location.origin,this._observer=null,this._storageInfoList=new Map,this._timingInfoList=new Map,this._isResourceObserverEnabled=!1,this._isResourceObserverEnabled=!this._isMobileWebView()||this._isEditImageQA()}}async function oV(e){console.debug("service-worker.js: SW Install event fired."),self.skipWaiting()}let oB=[401,403,407];async function oG(e,t){let i=await fetch(e);if(oB.indexOf(i.status)>-1){console.warn("service-worker.js: Authentication failure detected: ",e.url,i.status);let r=i.clone(),s="";try{s=await r.text()}catch(e){console.warn("service-worker.js: Failed to read response body:",e),s="Failed to read response body"}self.clients.get(t).then(t=>{t?.postMessage({msg:"AUTHENTICATION_FAILURE",url:e.url,status:i.status,message:s})})}return i}ec={...{cacheKey:"qa-standalone-webapp"},manifest:[{'revision':null,'url':'/static/AIDE.e5b2641fa3ec2670.wasm'},{'revision':null,'url':'/static/MediaInfoModule.23ce215fc860db19.wasm'},{'revision':null,'url':'/static/chimera.2f361aa7ffc411c7.wasm'},{'revision':null,'url':'/static/chimera.5564f8232c347d06.data'},{'revision':null,'url':'/static/chimera_webgpu.5564f8232c347d06.data'},{'revision':null,'url':'/static/chimera_webgpu.dbf7f7cd1defce2e.wasm'},{'revision':null,'url':'/static/compiled-app-config.6d8f7257482a99ca.js'},{'revision':null,'url':'/static/embed-logged-out-welcome-modal.be0d05cbd7535dde.js'},{'revision':null,'url':'/static/hz-authoring-actions-canvas-export.f16682c1fdeace94.js'},{'revision':null,'url':'/static/hz-authoring-actions-page-margins.50d9310a8c7159fd.js'},{'revision':null,'url':'/static/hz-authoring-actions-tus.500cba16da05d01e.js'},{'revision':null,'url':'/static/hz-authoring-agc-importer.e033f3bd54f3f8c1.js'},{'revision':null,'url':'/static/hz-authoring-tus-refresh-utils.63c64fa65cb51494.js'},{'revision':null,'url':'/static/hz-authoring-tus-resource-utils.2548997295bedfef.js'},{'revision':null,'url':'/static/hz-authoring-video-exporter.34fdc58bf3ca36ab.js'},{'revision':null,'url':'/static/hz-community-report-custom-elements.c58304c0491fad46.js'},{'revision':null,'url':'/static/hz-gen-image-models-selector.c2e29ba48694f6e9.js'},{'revision':null,'url':'/static/hz-logged-out-gen-ai-susi-modal.4825c2925e9f1de8.js'},{'revision':null,'url':'/static/hz-neural-shape-ui.e7b4ffccfaf6cf9f.js'},{'revision':null,'url':'/static/hz-neural-text-ui.f3554497b802ba8d.js'},{'revision':null,'url':'/static/hz-online-local-document-actions.7f5df0ead3aad4fc.js'},{'revision':null,'url':'/static/hz-refine-cutout-ui-v2-desktop-panel.0162fdd71a0e3d6e.js'},{'revision':null,'url':'/static/hz-refine-cutout-ui-v2-mobile-brush-setting.b8e473760fdedd85.js'},{'revision':null,'url':'/static/hz-refine-cutout-ui-v2-mobile-erase-control-panel.92c823ae58c83fe7.js'},{'revision':null,'url':'/static/hz-refine-cutout-v2-cutout-section.ab090820c7c1e167.js'},{'revision':null,'url':'/static/hz-refine-cutout-v2-erase-paywall-dialog.16a73f00b4b6cfd9.js'},{'revision':null,'url':'/static/hz-startup-debug-handlers.8f646aa34b217673.js'},{'revision':null,'url':'/static/hz-startup-otel.7adf3c618e22d4ac.js'},{'revision':null,'url':'/static/hz-startup-pathkit.414a9d2233228013.js'},{'revision':null,'url':'/static/hz-startup-renderer-chimera-index-webgl.ea6c1cac09c2d726.js'},{'revision':null,'url':'/static/hz-startup-renderer-chimera.57ef08f705c92260.js'},{'revision':null,'url':'/static/hz-startup-renderer-main.f2aea1cdfab02232.js'},{'revision':null,'url':'/static/hz-startup-renderer-on-ui.27b7e1f7ac1636ce.js'},{'revision':null,'url':'/static/hz-startup-text-zce.706491cda72e0f83.js'},{'revision':null,'url':'/static/hz-theme-components.131c32990e0b9a6d.js'},{'revision':null,'url':'/static/index.badda4c997a9d835.js'},{'revision':null,'url':'/static/noether_side_module.25fa8e4fe682e823.wasm'},{'revision':null,'url':'/static/pathkit.c02a000a581f09e3.wasm'},{'revision':null,'url':'/static/pollux.c3de39d94539940a.wasm'},{'revision':null,'url':'/static/qa-card-maker-authoring-bricks.a99e05fd8d3bf9b5.js'},{'revision':null,'url':'/static/qa-card-maker-ui-startup-brick-registry.dead98a168a4bb26.js'},{'revision':null,'url':'/static/qa-edit-image-application.9cc56a8b51bb1e82.js'},{'revision':null,'url':'/static/qa-edit-image-editor.287f52dc6b4a49e8.js'},{'revision':null,'url':'/static/qa-edit-image-embedUI.c679e9daa6b67187.js'},{'revision':null,'url':'/static/qa-edit-image-onDemand_hz_adjustments_v2_feature_brick.fe6a7dd8f37495c3.js'},{'revision':null,'url':'/static/qa-edit-image-onDemand_hz_appearance_section_v2_implementation_brick.2f5635af4afe833b.js'},{'revision':null,'url':'/static/qa-edit-image-onDemand_hz_embed_welcome_modal_host_brick.0be08809e28b202c.js'},{'revision':null,'url':'/static/qa-edit-image-onDemand_hz_neural_gen_fill_ui_registration_brick.39254b62cf7e42b2.js'},{'revision':null,'url':'/static/qa-edit-image-onDemand_hz_refine_cutout_v2_implementation_brick.9dfc3e05cdb42f95.js'},{'revision':null,'url':'/static/qa-edit-image-onDemand_hz_welcome_modal_integration_brick.ec42da1cf8445c94.js'},{'revision':null,'url':'/static/qa-edit-image-onDemand_hz_x_image_section_v2_feature_brick.e435bc93c78bff72.js'},{'revision':null,'url':'/static/qa-edit-image-ui-startup-brick-registry.e19ab9a778b1b156.js'},{'revision':null,'url':'/static/qa-launch-edit-image.33034033449bc3bc.js'},{'revision':null,'url':'/static/qa-qaStartup.9ed48615d8902554.js'},{'revision':null,'url':'/static/qa-startup-app-component.a1ebdaf8b0b57604.js'},{'revision':null,'url':'/static/qa-startup-authoring-main.569d0956c4322ec8.js'},{'revision':null,'url':'/static/qa-startup-initialization.c842770ea89bf59d.js'},{'revision':null,'url':'/static/qa-startup-shared.498bff9747e6126c.js'},{'revision':null,'url':'/static/qa-startup-ui-editor-main.2efcd499bb3d6f3a.js'},{'revision':null,'url':'/static/qa-uiPostStartup.0e03c37caa55857f.js'},{'revision':null,'url':'/static/qa-uiStartup.d385121c1fe434eb.js'},{'revision':null,'url':'/static/quick-actions-card-maker-authoring-worker.a37713108593837c.js'},{'revision':null,'url':'/static/quick-actions-edit-image-authoring-worker.fc7c984342cb3f78.js'},{'revision':null,'url':'/static/schema-provider-startup-worker.2a8befb9c532b646.js'},{'revision':null,'url':'/static/standalone-web-app-index.ed3d4adf1289aadf.js'},{'revision':null,'url':'/static/text.7cf3e0d8d6f1d622.wasm'},{'revision':null,'url':'/static/text.f3ee131824fbac6e.data'},{'revision':null,'url':'/static/text_zce.e7ef7800e338d5da.wasm'},{'revision':null,'url':'/static/text_zce.f3ee131824fbac6e.data'},{'revision':null,'url':'/static/vendor-authoring-animation.35b1f5dfc0ba02aa.js'},{'revision':null,'url':'/static/vendor-authoring-common.e9c975d97f40c888.js'},{'revision':null,'url':'/static/vendor-babylonjs.1f2e85d3d4596281.js'},{'revision':null,'url':'/static/vendor-common-animation.10ad8b612867636b.js'},{'revision':null,'url':'/static/vendor-coretech-scenegraph.8198ba874f8576f4.js'},{'revision':null,'url':'/static/vendor-embed-agent.da2d055d600ffeab.js'},{'revision':null,'url':'/static/vendor-exifr.58fba8292b4ca4b2.js'},{'revision':null,'url':'/static/vendor-neural.4985b8026c7de027.js'},{'revision':null,'url':'/static/vendor-startup-ccx-public.447e385cf88e5505.js'},{'revision':null,'url':'/static/vendor-startup-dcx.b0de0e9f6aa45438.js'},{'revision':null,'url':'/static/vendor-startup-gl-matrix.694569b19343499f.js'},{'revision':null,'url':'/static/vendor-startup-ims.2898f1300a8bb1e5.js'},{'revision':null,'url':'/static/vendor-startup-lodash.0bac62d607d15e8b.js'},{'revision':null,'url':'/static/vendor-startup-spectrum-web-components.623cbadfd4182899.js'},{'revision':null,'url':'/static/vendor-startup-ui.48013b26e1f8757e.js'},{'revision':null,'url':'/static/vendor-startup-uuid.f9a7513236a44a5d.js'},{'revision':null,'url':'/static/vendor-walnut-types.f5857fa767398d9b.js'},{'revision':null,'url':'/static/x-editor-wasms.87dfd19d01e001d1.js'},{'revision':null,'url':'/static/x-fill-background-section.b330bfc2fe89a9de.js'},{'revision':null,'url':'/static/x-startup-editor-text-foundation.7aa7fdfb8159b7ee.js'},{'revision':null,'url':'/static/x-susi-sentry.48d1fab2a2efec9d.js'}]},ec.additionalScripts?.forEach(e=>{self.importScripts(e)}),(e=>{var t=t=>{"string"==typeof e[t]&&(n[t]=e[t])};for(let e of Object.keys(n))t(e)})({prefix:ec.cacheKey}),self.addEventListener("activate",()=>self.clients.claim()),self.addEventListener("activate",e=>{let t=l();e.waitUntil(b(t).then(e=>{}))}),self.resourceCollector||(self.resourceCollector=new class e{get shouldAddPlugin(){return this._resourceObserver.isResourceObserverEnabled}startObserving(){this._resourceObserver.startObserving(e=>this._resourceObserverCallback(e))}stopObserving(){this._resourceObserver.stopObserving()}async cacheWillUpdate({request:e,response:t}){let i=this._resourceObserver.getStorageInfoList().get(e.url);return i?this._putStorageInfoIntoHeaders(i,t):new Promise(t=>{let i=setTimeout(()=>this._timeoutFallback(e.url,t),2e3);this._pendingEntriesToStorageInfoMap.set(e.url,{resolve:t,timeout:i})}).then(e=>null!==e?this._putStorageInfoIntoHeaders(e,t):t)}_putStorageInfoIntoHeaders(e,t){let i=new Headers(t.headers),r=t.headers.get("Server-Timing")||"",s=`sw-transfer;desc="size:${e.transferSize}", sw-decoded;desc="size:${e.decodedBodySize}", sw-encoded;desc="size:${e.encodedBodySize}"`,o=r?`${r}, ${s}`:s;return i.set("Server-Timing",o),new Response(t.body,{status:t.status,statusText:t.statusText,headers:i})}constructor(){this._pendingEntriesToStorageInfoMap=new Map,this._resourceObserverCallback=e=>{e.forEach(({name:e,transferSize:t,decodedBodySize:i,encodedBodySize:r})=>{let s=this._pendingEntriesToStorageInfoMap.get(e);s&&(clearTimeout(s.timeout),s.resolve({transferSize:t,decodedBodySize:i,encodedBodySize:r}),this._pendingEntriesToStorageInfoMap.delete(e))})},this._timeoutFallback=(e,t)=>{this._pendingEntriesToStorageInfoMap.has(e)&&(this._pendingEntriesToStorageInfoMap.delete(e),console.warn(`ServiceWorkerResourceCollector: cacheWillUpdate: Timeout waiting for resource observer for url: ${e}`),t(null))},this._resourceObserver=new ok}},self.resourceCollector.startObserving(),console.debug("service-worker.js: started resource observer")),self.resourceCollector?.shouldAddPlugin&&(e_=[self.resourceCollector],v().strategy.plugins.push(...e_)),eu=function(e){let t=new URL(self.location.href).searchParams.get("cdnPath"),i=e.manifest??[];if(t){let e=new URL(t).origin;i.forEach(t=>{"string"!=typeof t&&(t.url=e+"/"+t.url)})}return i}(ec),v().precache(eu),function(e,t,i){let o;if("string"==typeof e){let t=new URL(e,location.href);o=new A(({url:e})=>e.href===t.href,void 0,void 0)}else if(e instanceof RegExp)o=new R(e,void 0,void 0);else if("function"==typeof e)o=new A(e,void 0,void 0);else if(e instanceof A)o=e;else throw new s("unsupported-route-type",{moduleName:"workbox-routing",funcName:"registerRoute",paramName:"capture"});(!r&&((r=new I).addFetchListener(),r.addCacheListener()),r).registerRoute(o)}(new class e extends A{constructor(e,t){super(({request:i})=>{let r=e.getURLsToCacheKeys();for(let s of function*(e,{ignoreURLParametersMatching:t=[/^utm_/,/^fbclid$/],directoryIndex:i="index.html",cleanURLs:r=!0,urlManipulation:s}={}){let o=new URL(e,location.href);o.hash="",yield o.href;let n=function(e,t=[]){for(let i of[...e.searchParams.keys()])t.some(e=>e.test(i))&&e.searchParams.delete(i);return e}(o,t);if(yield n.href,i&&n.pathname.endsWith("/")){let e=new URL(n.href);e.pathname+=i,yield e.href}if(r){let e=new URL(n.href);e.pathname+=".html",yield e.href}if(s)for(let e of s({url:o}))yield e.href}(i.url,t)){let t=r.get(s);if(t){let i=e.getIntegrityForCacheKey(t);return{cacheKey:t,integrity:i}}}},e.strategy)}}(v(),void 0)),self.addEventListener("install",oV),self.addEventListener("activate",function(e){console.debug("service-worker.js: SW Activate event fired."),self.clients.claim();let t=setInterval(()=>{"activated"===self.serviceWorker.state?(console.debug("service-worker.js: Checking for SW update."),self.registration.update().then(()=>{self.registration.installing?console.debug("service-worker.js: SW update found! Installing new SW."):console.debug("service-worker.js: No SW update found.")}).catch(e=>{console.warn("service-worker.js: Update check failed with error: ",e)})):t&&(console.debug("service-worker.js no longer active."),clearInterval(t))},36e5)}),self.addEventListener("fetch",function(e){(function({method:e,url:t}){let i=new URL(t),r=i.pathname.endsWith(".js"),s=i.origin===self.location.origin&&i.pathname.startsWith("/static/");return"GET"===e&&!r&&!s&&!D.test(i.pathname)&&!N.some(e=>i.hostname.match(e))&&!U.test(t)})(e.request)&&e.respondWith(oG(e.request,e.clientId))}),console.debug("service-worker.js loaded.")})()})();
//# sourceMappingURL=service-worker.js.map